var WT=Object.defineProperty;var VT=(e,t,r)=>t in e?WT(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var r0=(e,t,r)=>(VT(e,typeof t!="symbol"?t+"":t,r),r);function qT(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var Qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Si(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function HT(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function n(){return this instanceof n?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var hk={exports:{}},vh={},pk={exports:{}},qe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bu=Symbol.for("react.element"),KT=Symbol.for("react.portal"),YT=Symbol.for("react.fragment"),GT=Symbol.for("react.strict_mode"),XT=Symbol.for("react.profiler"),QT=Symbol.for("react.provider"),ZT=Symbol.for("react.context"),JT=Symbol.for("react.forward_ref"),eM=Symbol.for("react.suspense"),tM=Symbol.for("react.memo"),rM=Symbol.for("react.lazy"),gw=Symbol.iterator;function nM(e){return e===null||typeof e!="object"?null:(e=gw&&e[gw]||e["@@iterator"],typeof e=="function"?e:null)}var gk={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vk=Object.assign,xk={};function Fl(e,t,r){this.props=e,this.context=t,this.refs=xk,this.updater=r||gk}Fl.prototype.isReactComponent={};Fl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function yk(){}yk.prototype=Fl.prototype;function Vx(e,t,r){this.props=e,this.context=t,this.refs=xk,this.updater=r||gk}var qx=Vx.prototype=new yk;qx.constructor=Vx;vk(qx,Fl.prototype);qx.isPureReactComponent=!0;var vw=Array.isArray,bk=Object.prototype.hasOwnProperty,Hx={current:null},wk={key:!0,ref:!0,__self:!0,__source:!0};function jk(e,t,r){var n,a={},i=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)bk.call(t,n)&&!wk.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(l===1)a.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];a.children=c}if(e&&e.defaultProps)for(n in l=e.defaultProps,l)a[n]===void 0&&(a[n]=l[n]);return{$$typeof:Bu,type:e,key:i,ref:o,props:a,_owner:Hx.current}}function aM(e,t){return{$$typeof:Bu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Kx(e){return typeof e=="object"&&e!==null&&e.$$typeof===Bu}function iM(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var xw=/\/+/g;function n0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?iM(""+e.key):t.toString(36)}function xf(e,t,r,n,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case Bu:case KT:o=!0}}if(o)return o=e,a=a(o),e=n===""?"."+n0(o,0):n,vw(a)?(r="",e!=null&&(r=e.replace(xw,"$&/")+"/"),xf(a,t,r,"",function(u){return u})):a!=null&&(Kx(a)&&(a=aM(a,r+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(xw,"$&/")+"/")+e)),t.push(a)),1;if(o=0,n=n===""?".":n+":",vw(e))for(var l=0;l<e.length;l++){i=e[l];var c=n+n0(i,l);o+=xf(i,t,r,c,a)}else if(c=nM(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=n+n0(i,l++),o+=xf(i,t,r,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Cd(e,t,r){if(e==null)return e;var n=[],a=0;return xf(e,n,"","",function(i){return t.call(r,i,a++)}),n}function sM(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var tn={current:null},yf={transition:null},oM={ReactCurrentDispatcher:tn,ReactCurrentBatchConfig:yf,ReactCurrentOwner:Hx};function _k(){throw Error("act(...) is not supported in production builds of React.")}qe.Children={map:Cd,forEach:function(e,t,r){Cd(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return Cd(e,function(){t++}),t},toArray:function(e){return Cd(e,function(t){return t})||[]},only:function(e){if(!Kx(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};qe.Component=Fl;qe.Fragment=YT;qe.Profiler=XT;qe.PureComponent=Vx;qe.StrictMode=GT;qe.Suspense=eM;qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oM;qe.act=_k;qe.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=vk({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=Hx.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)bk.call(t,c)&&!wk.hasOwnProperty(c)&&(n[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)n.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Bu,type:e.type,key:a,ref:i,props:n,_owner:o}};qe.createContext=function(e){return e={$$typeof:ZT,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:QT,_context:e},e.Consumer=e};qe.createElement=jk;qe.createFactory=function(e){var t=jk.bind(null,e);return t.type=e,t};qe.createRef=function(){return{current:null}};qe.forwardRef=function(e){return{$$typeof:JT,render:e}};qe.isValidElement=Kx;qe.lazy=function(e){return{$$typeof:rM,_payload:{_status:-1,_result:e},_init:sM}};qe.memo=function(e,t){return{$$typeof:tM,type:e,compare:t===void 0?null:t}};qe.startTransition=function(e){var t=yf.transition;yf.transition={};try{e()}finally{yf.transition=t}};qe.unstable_act=_k;qe.useCallback=function(e,t){return tn.current.useCallback(e,t)};qe.useContext=function(e){return tn.current.useContext(e)};qe.useDebugValue=function(){};qe.useDeferredValue=function(e){return tn.current.useDeferredValue(e)};qe.useEffect=function(e,t){return tn.current.useEffect(e,t)};qe.useId=function(){return tn.current.useId()};qe.useImperativeHandle=function(e,t,r){return tn.current.useImperativeHandle(e,t,r)};qe.useInsertionEffect=function(e,t){return tn.current.useInsertionEffect(e,t)};qe.useLayoutEffect=function(e,t){return tn.current.useLayoutEffect(e,t)};qe.useMemo=function(e,t){return tn.current.useMemo(e,t)};qe.useReducer=function(e,t,r){return tn.current.useReducer(e,t,r)};qe.useRef=function(e){return tn.current.useRef(e)};qe.useState=function(e){return tn.current.useState(e)};qe.useSyncExternalStore=function(e,t,r){return tn.current.useSyncExternalStore(e,t,r)};qe.useTransition=function(){return tn.current.useTransition()};qe.version="18.3.1";pk.exports=qe;var m=pk.exports;const we=Si(m),zf=qT({__proto__:null,default:we},[m]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lM=m,cM=Symbol.for("react.element"),uM=Symbol.for("react.fragment"),dM=Object.prototype.hasOwnProperty,fM=lM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,mM={key:!0,ref:!0,__self:!0,__source:!0};function Nk(e,t,r){var n,a={},i=null,o=null;r!==void 0&&(i=""+r),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)dM.call(t,n)&&!mM.hasOwnProperty(n)&&(a[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)a[n]===void 0&&(a[n]=t[n]);return{$$typeof:cM,type:e,key:i,ref:o,props:a,_owner:fM.current}}vh.Fragment=uM;vh.jsx=Nk;vh.jsxs=Nk;hk.exports=vh;var s=hk.exports,Ng={},Sk={exports:{}},Dn={},kk={exports:{}},Ck={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(M,L){var G=M.length;M.push(L);e:for(;0<G;){var $=G-1>>>1,U=M[$];if(0<a(U,L))M[$]=L,M[G]=U,G=$;else break e}}function r(M){return M.length===0?null:M[0]}function n(M){if(M.length===0)return null;var L=M[0],G=M.pop();if(G!==L){M[0]=G;e:for(var $=0,U=M.length,E=U>>>1;$<E;){var Q=2*($+1)-1,J=M[Q],de=Q+1,ae=M[de];if(0>a(J,G))de<U&&0>a(ae,J)?(M[$]=ae,M[de]=G,$=de):(M[$]=J,M[Q]=G,$=Q);else if(de<U&&0>a(ae,G))M[$]=ae,M[de]=G,$=de;else break e}}return L}function a(M,L){var G=M.sortIndex-L.sortIndex;return G!==0?G:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,f=null,h=3,p=!1,g=!1,x=!1,y=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,b=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(M){for(var L=r(u);L!==null;){if(L.callback===null)n(u);else if(L.startTime<=M)n(u),L.sortIndex=L.expirationTime,t(c,L);else break;L=r(u)}}function j(M){if(x=!1,w(M),!g)if(r(c)!==null)g=!0,z(N);else{var L=r(u);L!==null&&P(j,L.startTime-M)}}function N(M,L){g=!1,x&&(x=!1,v(C),C=-1),p=!0;var G=h;try{for(w(L),f=r(c);f!==null&&(!(f.expirationTime>L)||M&&!T());){var $=f.callback;if(typeof $=="function"){f.callback=null,h=f.priorityLevel;var U=$(f.expirationTime<=L);L=e.unstable_now(),typeof U=="function"?f.callback=U:f===r(c)&&n(c),w(L)}else n(c);f=r(c)}if(f!==null)var E=!0;else{var Q=r(u);Q!==null&&P(j,Q.startTime-L),E=!1}return E}finally{f=null,h=G,p=!1}}var _=!1,S=null,C=-1,O=5,A=-1;function T(){return!(e.unstable_now()-A<O)}function D(){if(S!==null){var M=e.unstable_now();A=M;var L=!0;try{L=S(!0,M)}finally{L?q():(_=!1,S=null)}}else _=!1}var q;if(typeof b=="function")q=function(){b(D)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,K=re.port2;re.port1.onmessage=D,q=function(){K.postMessage(null)}}else q=function(){y(D,0)};function z(M){S=M,_||(_=!0,q())}function P(M,L){C=y(function(){M(e.unstable_now())},L)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(M){M.callback=null},e.unstable_continueExecution=function(){g||p||(g=!0,z(N))},e.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<M?Math.floor(1e3/M):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return r(c)},e.unstable_next=function(M){switch(h){case 1:case 2:case 3:var L=3;break;default:L=h}var G=h;h=L;try{return M()}finally{h=G}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var G=h;h=M;try{return L()}finally{h=G}},e.unstable_scheduleCallback=function(M,L,G){var $=e.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?$+G:$):G=$,M){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=G+U,M={id:d++,callback:L,priorityLevel:M,startTime:G,expirationTime:U,sortIndex:-1},G>$?(M.sortIndex=G,t(u,M),r(c)===null&&M===r(u)&&(x?(v(C),C=-1):x=!0,P(j,G-$))):(M.sortIndex=U,t(c,M),g||p||(g=!0,z(N))),M},e.unstable_shouldYield=T,e.unstable_wrapCallback=function(M){var L=h;return function(){var G=h;h=L;try{return M.apply(this,arguments)}finally{h=G}}}})(Ck);kk.exports=Ck;var hM=kk.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pM=m,On=hM;function le(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ek=new Set,au={};function So(e,t){_l(e,t),_l(e+"Capture",t)}function _l(e,t){for(au[e]=t,e=0;e<t.length;e++)Ek.add(t[e])}var di=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sg=Object.prototype.hasOwnProperty,gM=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yw={},bw={};function vM(e){return Sg.call(bw,e)?!0:Sg.call(yw,e)?!1:gM.test(e)?bw[e]=!0:(yw[e]=!0,!1)}function xM(e,t,r,n){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yM(e,t,r,n){if(t===null||typeof t>"u"||xM(e,t,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function rn(e,t,r,n,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=a,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Ir={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ir[e]=new rn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ir[t]=new rn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ir[e]=new rn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ir[e]=new rn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ir[e]=new rn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ir[e]=new rn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ir[e]=new rn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ir[e]=new rn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ir[e]=new rn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Yx=/[\-:]([a-z])/g;function Gx(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Yx,Gx);Ir[t]=new rn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Yx,Gx);Ir[t]=new rn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Yx,Gx);Ir[t]=new rn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ir[e]=new rn(e,1,!1,e.toLowerCase(),null,!1,!1)});Ir.xlinkHref=new rn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ir[e]=new rn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xx(e,t,r,n){var a=Ir.hasOwnProperty(t)?Ir[t]:null;(a!==null?a.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yM(t,r,a,n)&&(r=null),n||a===null?vM(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):a.mustUseProperty?e[a.propertyName]=r===null?a.type===3?!1:"":r:(t=a.attributeName,n=a.attributeNamespace,r===null?e.removeAttribute(t):(a=a.type,r=a===3||a===4&&r===!0?"":""+r,n?e.setAttributeNS(n,t,r):e.setAttribute(t,r))))}var ki=pM.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ed=Symbol.for("react.element"),Qo=Symbol.for("react.portal"),Zo=Symbol.for("react.fragment"),Qx=Symbol.for("react.strict_mode"),kg=Symbol.for("react.profiler"),Pk=Symbol.for("react.provider"),Ok=Symbol.for("react.context"),Zx=Symbol.for("react.forward_ref"),Cg=Symbol.for("react.suspense"),Eg=Symbol.for("react.suspense_list"),Jx=Symbol.for("react.memo"),Bi=Symbol.for("react.lazy"),Ak=Symbol.for("react.offscreen"),ww=Symbol.iterator;function lc(e){return e===null||typeof e!="object"?null:(e=ww&&e[ww]||e["@@iterator"],typeof e=="function"?e:null)}var Bt=Object.assign,a0;function Cc(e){if(a0===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);a0=t&&t[1]||""}return`
`+a0+e}var i0=!1;function s0(e,t){if(!e||i0)return"";i0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var n=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){n=u}e.call(t.prototype)}else{try{throw Error()}catch(u){n=u}e()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var a=u.stack.split(`
`),i=n.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{i0=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Cc(e):""}function bM(e){switch(e.tag){case 5:return Cc(e.type);case 16:return Cc("Lazy");case 13:return Cc("Suspense");case 19:return Cc("SuspenseList");case 0:case 2:case 15:return e=s0(e.type,!1),e;case 11:return e=s0(e.type.render,!1),e;case 1:return e=s0(e.type,!0),e;default:return""}}function Pg(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Zo:return"Fragment";case Qo:return"Portal";case kg:return"Profiler";case Qx:return"StrictMode";case Cg:return"Suspense";case Eg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case Ok:return(e.displayName||"Context")+".Consumer";case Pk:return(e._context.displayName||"Context")+".Provider";case Zx:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Jx:return t=e.displayName||null,t!==null?t:Pg(e.type)||"Memo";case Bi:t=e._payload,e=e._init;try{return Pg(e(t))}catch{}}return null}function wM(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Pg(t);case 8:return t===Qx?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function gs(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Tk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function jM(e){var t=Tk(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var a=r.get,i=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Pd(e){e._valueTracker||(e._valueTracker=jM(e))}function Mk(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=Tk(e)?e.checked?"true":"false":e.value),e=n,e!==r?(t.setValue(e),!0):!1}function Ff(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Og(e,t){var r=t.checked;return Bt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function jw(e,t){var r=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;r=gs(t.value!=null?t.value:r),e._wrapperState={initialChecked:n,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Dk(e,t){t=t.checked,t!=null&&Xx(e,"checked",t,!1)}function Ag(e,t){Dk(e,t);var r=gs(t.value),n=t.type;if(r!=null)n==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Tg(e,t.type,r):t.hasOwnProperty("defaultValue")&&Tg(e,t.type,gs(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function _w(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function Tg(e,t,r){(t!=="number"||Ff(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Ec=Array.isArray;function dl(e,t,r,n){if(e=e.options,t){t={};for(var a=0;a<r.length;a++)t["$"+r[a]]=!0;for(r=0;r<e.length;r++)a=t.hasOwnProperty("$"+e[r].value),e[r].selected!==a&&(e[r].selected=a),a&&n&&(e[r].defaultSelected=!0)}else{for(r=""+gs(r),t=null,a=0;a<e.length;a++){if(e[a].value===r){e[a].selected=!0,n&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Mg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(le(91));return Bt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Nw(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(le(92));if(Ec(r)){if(1<r.length)throw Error(le(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:gs(r)}}function $k(e,t){var r=gs(t.value),n=gs(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),n!=null&&(e.defaultValue=""+n)}function Sw(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ik(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ik(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Od,Lk=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,n,a){MSApp.execUnsafeLocalFunction(function(){return e(t,r,n,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Od=Od||document.createElement("div"),Od.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Od.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function iu(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Lc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},_M=["Webkit","ms","Moz","O"];Object.keys(Lc).forEach(function(e){_M.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Lc[t]=Lc[e]})});function Rk(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Lc.hasOwnProperty(e)&&Lc[e]?(""+t).trim():t+"px"}function zk(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var n=r.indexOf("--")===0,a=Rk(r,t[r],n);r==="float"&&(r="cssFloat"),n?e.setProperty(r,a):e[r]=a}}var NM=Bt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $g(e,t){if(t){if(NM[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(le(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(le(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(le(61))}if(t.style!=null&&typeof t.style!="object")throw Error(le(62))}}function Ig(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Lg=null;function ey(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rg=null,fl=null,ml=null;function kw(e){if(e=Vu(e)){if(typeof Rg!="function")throw Error(le(280));var t=e.stateNode;t&&(t=jh(t),Rg(e.stateNode,e.type,t))}}function Fk(e){fl?ml?ml.push(e):ml=[e]:fl=e}function Bk(){if(fl){var e=fl,t=ml;if(ml=fl=null,kw(e),t)for(e=0;e<t.length;e++)kw(t[e])}}function Uk(e,t){return e(t)}function Wk(){}var o0=!1;function Vk(e,t,r){if(o0)return e(t,r);o0=!0;try{return Uk(e,t,r)}finally{o0=!1,(fl!==null||ml!==null)&&(Wk(),Bk())}}function su(e,t){var r=e.stateNode;if(r===null)return null;var n=jh(r);if(n===null)return null;r=n[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(le(231,t,typeof r));return r}var zg=!1;if(di)try{var cc={};Object.defineProperty(cc,"passive",{get:function(){zg=!0}}),window.addEventListener("test",cc,cc),window.removeEventListener("test",cc,cc)}catch{zg=!1}function SM(e,t,r,n,a,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{t.apply(r,u)}catch(d){this.onError(d)}}var Rc=!1,Bf=null,Uf=!1,Fg=null,kM={onError:function(e){Rc=!0,Bf=e}};function CM(e,t,r,n,a,i,o,l,c){Rc=!1,Bf=null,SM.apply(kM,arguments)}function EM(e,t,r,n,a,i,o,l,c){if(CM.apply(this,arguments),Rc){if(Rc){var u=Bf;Rc=!1,Bf=null}else throw Error(le(198));Uf||(Uf=!0,Fg=u)}}function ko(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function qk(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Cw(e){if(ko(e)!==e)throw Error(le(188))}function PM(e){var t=e.alternate;if(!t){if(t=ko(e),t===null)throw Error(le(188));return t!==e?null:e}for(var r=e,n=t;;){var a=r.return;if(a===null)break;var i=a.alternate;if(i===null){if(n=a.return,n!==null){r=n;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===r)return Cw(a),e;if(i===n)return Cw(a),t;i=i.sibling}throw Error(le(188))}if(r.return!==n.return)r=a,n=i;else{for(var o=!1,l=a.child;l;){if(l===r){o=!0,r=a,n=i;break}if(l===n){o=!0,n=a,r=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===r){o=!0,r=i,n=a;break}if(l===n){o=!0,n=i,r=a;break}l=l.sibling}if(!o)throw Error(le(189))}}if(r.alternate!==n)throw Error(le(190))}if(r.tag!==3)throw Error(le(188));return r.stateNode.current===r?e:t}function Hk(e){return e=PM(e),e!==null?Kk(e):null}function Kk(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Kk(e);if(t!==null)return t;e=e.sibling}return null}var Yk=On.unstable_scheduleCallback,Ew=On.unstable_cancelCallback,OM=On.unstable_shouldYield,AM=On.unstable_requestPaint,Zt=On.unstable_now,TM=On.unstable_getCurrentPriorityLevel,ty=On.unstable_ImmediatePriority,Gk=On.unstable_UserBlockingPriority,Wf=On.unstable_NormalPriority,MM=On.unstable_LowPriority,Xk=On.unstable_IdlePriority,xh=null,Ia=null;function DM(e){if(Ia&&typeof Ia.onCommitFiberRoot=="function")try{Ia.onCommitFiberRoot(xh,e,void 0,(e.current.flags&128)===128)}catch{}}var ga=Math.clz32?Math.clz32:LM,$M=Math.log,IM=Math.LN2;function LM(e){return e>>>=0,e===0?32:31-($M(e)/IM|0)|0}var Ad=64,Td=4194304;function Pc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Vf(e,t){var r=e.pendingLanes;if(r===0)return 0;var n=0,a=e.suspendedLanes,i=e.pingedLanes,o=r&268435455;if(o!==0){var l=o&~a;l!==0?n=Pc(l):(i&=o,i!==0&&(n=Pc(i)))}else o=r&~a,o!==0?n=Pc(o):i!==0&&(n=Pc(i));if(n===0)return 0;if(t!==0&&t!==n&&!(t&a)&&(a=n&-n,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(n&4&&(n|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)r=31-ga(t),a=1<<r,n|=e[r],t&=~a;return n}function RM(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zM(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ga(i),l=1<<o,c=a[o];c===-1?(!(l&r)||l&n)&&(a[o]=RM(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function Bg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Qk(){var e=Ad;return Ad<<=1,!(Ad&4194240)&&(Ad=64),e}function l0(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Uu(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ga(t),e[t]=r}function FM(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<r;){var a=31-ga(r),i=1<<a;t[a]=0,n[a]=-1,e[a]=-1,r&=~i}}function ry(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-ga(r),a=1<<n;a&t|e[n]&t&&(e[n]|=t),r&=~a}}var dt=0;function Zk(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Jk,ny,eC,tC,rC,Ug=!1,Md=[],as=null,is=null,ss=null,ou=new Map,lu=new Map,Hi=[],BM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pw(e,t){switch(e){case"focusin":case"focusout":as=null;break;case"dragenter":case"dragleave":is=null;break;case"mouseover":case"mouseout":ss=null;break;case"pointerover":case"pointerout":ou.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":lu.delete(t.pointerId)}}function uc(e,t,r,n,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[a]},t!==null&&(t=Vu(t),t!==null&&ny(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function UM(e,t,r,n,a){switch(t){case"focusin":return as=uc(as,e,t,r,n,a),!0;case"dragenter":return is=uc(is,e,t,r,n,a),!0;case"mouseover":return ss=uc(ss,e,t,r,n,a),!0;case"pointerover":var i=a.pointerId;return ou.set(i,uc(ou.get(i)||null,e,t,r,n,a)),!0;case"gotpointercapture":return i=a.pointerId,lu.set(i,uc(lu.get(i)||null,e,t,r,n,a)),!0}return!1}function nC(e){var t=Ys(e.target);if(t!==null){var r=ko(t);if(r!==null){if(t=r.tag,t===13){if(t=qk(r),t!==null){e.blockedOn=t,rC(e.priority,function(){eC(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Wg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var n=new r.constructor(r.type,r);Lg=n,r.target.dispatchEvent(n),Lg=null}else return t=Vu(r),t!==null&&ny(t),e.blockedOn=r,!1;t.shift()}return!0}function Ow(e,t,r){bf(e)&&r.delete(t)}function WM(){Ug=!1,as!==null&&bf(as)&&(as=null),is!==null&&bf(is)&&(is=null),ss!==null&&bf(ss)&&(ss=null),ou.forEach(Ow),lu.forEach(Ow)}function dc(e,t){e.blockedOn===t&&(e.blockedOn=null,Ug||(Ug=!0,On.unstable_scheduleCallback(On.unstable_NormalPriority,WM)))}function cu(e){function t(a){return dc(a,e)}if(0<Md.length){dc(Md[0],e);for(var r=1;r<Md.length;r++){var n=Md[r];n.blockedOn===e&&(n.blockedOn=null)}}for(as!==null&&dc(as,e),is!==null&&dc(is,e),ss!==null&&dc(ss,e),ou.forEach(t),lu.forEach(t),r=0;r<Hi.length;r++)n=Hi[r],n.blockedOn===e&&(n.blockedOn=null);for(;0<Hi.length&&(r=Hi[0],r.blockedOn===null);)nC(r),r.blockedOn===null&&Hi.shift()}var hl=ki.ReactCurrentBatchConfig,qf=!0;function VM(e,t,r,n){var a=dt,i=hl.transition;hl.transition=null;try{dt=1,ay(e,t,r,n)}finally{dt=a,hl.transition=i}}function qM(e,t,r,n){var a=dt,i=hl.transition;hl.transition=null;try{dt=4,ay(e,t,r,n)}finally{dt=a,hl.transition=i}}function ay(e,t,r,n){if(qf){var a=Wg(e,t,r,n);if(a===null)x0(e,t,n,Hf,r),Pw(e,n);else if(UM(a,e,t,r,n))n.stopPropagation();else if(Pw(e,n),t&4&&-1<BM.indexOf(e)){for(;a!==null;){var i=Vu(a);if(i!==null&&Jk(i),i=Wg(e,t,r,n),i===null&&x0(e,t,n,Hf,r),i===a)break;a=i}a!==null&&n.stopPropagation()}else x0(e,t,n,null,r)}}var Hf=null;function Wg(e,t,r,n){if(Hf=null,e=ey(n),e=Ys(e),e!==null)if(t=ko(e),t===null)e=null;else if(r=t.tag,r===13){if(e=qk(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Hf=e,null}function aC(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(TM()){case ty:return 1;case Gk:return 4;case Wf:case MM:return 16;case Xk:return 536870912;default:return 16}default:return 16}}var Zi=null,iy=null,wf=null;function iC(){if(wf)return wf;var e,t=iy,r=t.length,n,a="value"in Zi?Zi.value:Zi.textContent,i=a.length;for(e=0;e<r&&t[e]===a[e];e++);var o=r-e;for(n=1;n<=o&&t[r-n]===a[i-n];n++);return wf=a.slice(e,1<n?1-n:void 0)}function jf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Dd(){return!0}function Aw(){return!1}function $n(e){function t(r,n,a,i,o){this._reactName=r,this._targetInst=a,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(r=e[l],this[l]=r?r(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Dd:Aw,this.isPropagationStopped=Aw,this}return Bt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Dd)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Dd)},persist:function(){},isPersistent:Dd}),t}var Bl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sy=$n(Bl),Wu=Bt({},Bl,{view:0,detail:0}),HM=$n(Wu),c0,u0,fc,yh=Bt({},Wu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oy,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==fc&&(fc&&e.type==="mousemove"?(c0=e.screenX-fc.screenX,u0=e.screenY-fc.screenY):u0=c0=0,fc=e),c0)},movementY:function(e){return"movementY"in e?e.movementY:u0}}),Tw=$n(yh),KM=Bt({},yh,{dataTransfer:0}),YM=$n(KM),GM=Bt({},Wu,{relatedTarget:0}),d0=$n(GM),XM=Bt({},Bl,{animationName:0,elapsedTime:0,pseudoElement:0}),QM=$n(XM),ZM=Bt({},Bl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),JM=$n(ZM),eD=Bt({},Bl,{data:0}),Mw=$n(eD),tD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},rD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nD[e])?!!t[e]:!1}function oy(){return aD}var iD=Bt({},Wu,{key:function(e){if(e.key){var t=tD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=jf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?rD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oy,charCode:function(e){return e.type==="keypress"?jf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?jf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sD=$n(iD),oD=Bt({},yh,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Dw=$n(oD),lD=Bt({},Wu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oy}),cD=$n(lD),uD=Bt({},Bl,{propertyName:0,elapsedTime:0,pseudoElement:0}),dD=$n(uD),fD=Bt({},yh,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),mD=$n(fD),hD=[9,13,27,32],ly=di&&"CompositionEvent"in window,zc=null;di&&"documentMode"in document&&(zc=document.documentMode);var pD=di&&"TextEvent"in window&&!zc,sC=di&&(!ly||zc&&8<zc&&11>=zc),$w=String.fromCharCode(32),Iw=!1;function oC(e,t){switch(e){case"keyup":return hD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function lC(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Jo=!1;function gD(e,t){switch(e){case"compositionend":return lC(t);case"keypress":return t.which!==32?null:(Iw=!0,$w);case"textInput":return e=t.data,e===$w&&Iw?null:e;default:return null}}function vD(e,t){if(Jo)return e==="compositionend"||!ly&&oC(e,t)?(e=iC(),wf=iy=Zi=null,Jo=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return sC&&t.locale!=="ko"?null:t.data;default:return null}}var xD={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Lw(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!xD[e.type]:t==="textarea"}function cC(e,t,r,n){Fk(n),t=Kf(t,"onChange"),0<t.length&&(r=new sy("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var Fc=null,uu=null;function yD(e){bC(e,0)}function bh(e){var t=rl(e);if(Mk(t))return e}function bD(e,t){if(e==="change")return t}var uC=!1;if(di){var f0;if(di){var m0="oninput"in document;if(!m0){var Rw=document.createElement("div");Rw.setAttribute("oninput","return;"),m0=typeof Rw.oninput=="function"}f0=m0}else f0=!1;uC=f0&&(!document.documentMode||9<document.documentMode)}function zw(){Fc&&(Fc.detachEvent("onpropertychange",dC),uu=Fc=null)}function dC(e){if(e.propertyName==="value"&&bh(uu)){var t=[];cC(t,uu,e,ey(e)),Vk(yD,t)}}function wD(e,t,r){e==="focusin"?(zw(),Fc=t,uu=r,Fc.attachEvent("onpropertychange",dC)):e==="focusout"&&zw()}function jD(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return bh(uu)}function _D(e,t){if(e==="click")return bh(t)}function ND(e,t){if(e==="input"||e==="change")return bh(t)}function SD(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ya=typeof Object.is=="function"?Object.is:SD;function du(e,t){if(ya(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var a=r[n];if(!Sg.call(t,a)||!ya(e[a],t[a]))return!1}return!0}function Fw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Bw(e,t){var r=Fw(e);e=0;for(var n;r;){if(r.nodeType===3){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Fw(r)}}function fC(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?fC(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function mC(){for(var e=window,t=Ff();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=Ff(e.document)}return t}function cy(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function kD(e){var t=mC(),r=e.focusedElem,n=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&fC(r.ownerDocument.documentElement,r)){if(n!==null&&cy(r)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=r.textContent.length,i=Math.min(n.start,a);n=n.end===void 0?i:Math.min(n.end,a),!e.extend&&i>n&&(a=n,n=i,i=a),a=Bw(r,i);var o=Bw(r,n);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var CD=di&&"documentMode"in document&&11>=document.documentMode,el=null,Vg=null,Bc=null,qg=!1;function Uw(e,t,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;qg||el==null||el!==Ff(n)||(n=el,"selectionStart"in n&&cy(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Bc&&du(Bc,n)||(Bc=n,n=Kf(Vg,"onSelect"),0<n.length&&(t=new sy("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=el)))}function $d(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var tl={animationend:$d("Animation","AnimationEnd"),animationiteration:$d("Animation","AnimationIteration"),animationstart:$d("Animation","AnimationStart"),transitionend:$d("Transition","TransitionEnd")},h0={},hC={};di&&(hC=document.createElement("div").style,"AnimationEvent"in window||(delete tl.animationend.animation,delete tl.animationiteration.animation,delete tl.animationstart.animation),"TransitionEvent"in window||delete tl.transitionend.transition);function wh(e){if(h0[e])return h0[e];if(!tl[e])return e;var t=tl[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in hC)return h0[e]=t[r];return e}var pC=wh("animationend"),gC=wh("animationiteration"),vC=wh("animationstart"),xC=wh("transitionend"),yC=new Map,Ww="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ns(e,t){yC.set(e,t),So(t,[e])}for(var p0=0;p0<Ww.length;p0++){var g0=Ww[p0],ED=g0.toLowerCase(),PD=g0[0].toUpperCase()+g0.slice(1);Ns(ED,"on"+PD)}Ns(pC,"onAnimationEnd");Ns(gC,"onAnimationIteration");Ns(vC,"onAnimationStart");Ns("dblclick","onDoubleClick");Ns("focusin","onFocus");Ns("focusout","onBlur");Ns(xC,"onTransitionEnd");_l("onMouseEnter",["mouseout","mouseover"]);_l("onMouseLeave",["mouseout","mouseover"]);_l("onPointerEnter",["pointerout","pointerover"]);_l("onPointerLeave",["pointerout","pointerover"]);So("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));So("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));So("onBeforeInput",["compositionend","keypress","textInput","paste"]);So("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));So("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));So("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OD=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oc));function Vw(e,t,r){var n=e.type||"unknown-event";e.currentTarget=r,EM(n,t,void 0,e),e.currentTarget=null}function bC(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var n=e[r],a=n.event;n=n.listeners;e:{var i=void 0;if(t)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Vw(a,l,u),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Vw(a,l,u),i=c}}}if(Uf)throw e=Fg,Uf=!1,Fg=null,e}function Pt(e,t){var r=t[Xg];r===void 0&&(r=t[Xg]=new Set);var n=e+"__bubble";r.has(n)||(wC(t,e,2,!1),r.add(n))}function v0(e,t,r){var n=0;t&&(n|=4),wC(r,e,n,t)}var Id="_reactListening"+Math.random().toString(36).slice(2);function fu(e){if(!e[Id]){e[Id]=!0,Ek.forEach(function(r){r!=="selectionchange"&&(OD.has(r)||v0(r,!1,e),v0(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Id]||(t[Id]=!0,v0("selectionchange",!1,t))}}function wC(e,t,r,n){switch(aC(t)){case 1:var a=VM;break;case 4:a=qM;break;default:a=ay}r=a.bind(null,t,r,e),a=void 0,!zg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),n?a!==void 0?e.addEventListener(t,r,{capture:!0,passive:a}):e.addEventListener(t,r,!0):a!==void 0?e.addEventListener(t,r,{passive:a}):e.addEventListener(t,r,!1)}function x0(e,t,r,n,a){var i=n;if(!(t&1)&&!(t&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ys(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Vk(function(){var u=i,d=ey(r),f=[];e:{var h=yC.get(e);if(h!==void 0){var p=sy,g=e;switch(e){case"keypress":if(jf(r)===0)break e;case"keydown":case"keyup":p=sD;break;case"focusin":g="focus",p=d0;break;case"focusout":g="blur",p=d0;break;case"beforeblur":case"afterblur":p=d0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=Tw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=YM;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=cD;break;case pC:case gC:case vC:p=QM;break;case xC:p=dD;break;case"scroll":p=HM;break;case"wheel":p=mD;break;case"copy":case"cut":case"paste":p=JM;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Dw}var x=(t&4)!==0,y=!x&&e==="scroll",v=x?h!==null?h+"Capture":null:h;x=[];for(var b=u,w;b!==null;){w=b;var j=w.stateNode;if(w.tag===5&&j!==null&&(w=j,v!==null&&(j=su(b,v),j!=null&&x.push(mu(b,j,w)))),y)break;b=b.return}0<x.length&&(h=new p(h,g,null,r,d),f.push({event:h,listeners:x}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",h&&r!==Lg&&(g=r.relatedTarget||r.fromElement)&&(Ys(g)||g[fi]))break e;if((p||h)&&(h=d.window===d?d:(h=d.ownerDocument)?h.defaultView||h.parentWindow:window,p?(g=r.relatedTarget||r.toElement,p=u,g=g?Ys(g):null,g!==null&&(y=ko(g),g!==y||g.tag!==5&&g.tag!==6)&&(g=null)):(p=null,g=u),p!==g)){if(x=Tw,j="onMouseLeave",v="onMouseEnter",b="mouse",(e==="pointerout"||e==="pointerover")&&(x=Dw,j="onPointerLeave",v="onPointerEnter",b="pointer"),y=p==null?h:rl(p),w=g==null?h:rl(g),h=new x(j,b+"leave",p,r,d),h.target=y,h.relatedTarget=w,j=null,Ys(d)===u&&(x=new x(v,b+"enter",g,r,d),x.target=w,x.relatedTarget=y,j=x),y=j,p&&g)t:{for(x=p,v=g,b=0,w=x;w;w=Lo(w))b++;for(w=0,j=v;j;j=Lo(j))w++;for(;0<b-w;)x=Lo(x),b--;for(;0<w-b;)v=Lo(v),w--;for(;b--;){if(x===v||v!==null&&x===v.alternate)break t;x=Lo(x),v=Lo(v)}x=null}else x=null;p!==null&&qw(f,h,p,x,!1),g!==null&&y!==null&&qw(f,y,g,x,!0)}}e:{if(h=u?rl(u):window,p=h.nodeName&&h.nodeName.toLowerCase(),p==="select"||p==="input"&&h.type==="file")var N=bD;else if(Lw(h))if(uC)N=ND;else{N=jD;var _=wD}else(p=h.nodeName)&&p.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(N=_D);if(N&&(N=N(e,u))){cC(f,N,r,d);break e}_&&_(e,h,u),e==="focusout"&&(_=h._wrapperState)&&_.controlled&&h.type==="number"&&Tg(h,"number",h.value)}switch(_=u?rl(u):window,e){case"focusin":(Lw(_)||_.contentEditable==="true")&&(el=_,Vg=u,Bc=null);break;case"focusout":Bc=Vg=el=null;break;case"mousedown":qg=!0;break;case"contextmenu":case"mouseup":case"dragend":qg=!1,Uw(f,r,d);break;case"selectionchange":if(CD)break;case"keydown":case"keyup":Uw(f,r,d)}var S;if(ly)e:{switch(e){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else Jo?oC(e,r)&&(C="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(C="onCompositionStart");C&&(sC&&r.locale!=="ko"&&(Jo||C!=="onCompositionStart"?C==="onCompositionEnd"&&Jo&&(S=iC()):(Zi=d,iy="value"in Zi?Zi.value:Zi.textContent,Jo=!0)),_=Kf(u,C),0<_.length&&(C=new Mw(C,e,null,r,d),f.push({event:C,listeners:_}),S?C.data=S:(S=lC(r),S!==null&&(C.data=S)))),(S=pD?gD(e,r):vD(e,r))&&(u=Kf(u,"onBeforeInput"),0<u.length&&(d=new Mw("onBeforeInput","beforeinput",null,r,d),f.push({event:d,listeners:u}),d.data=S))}bC(f,t)})}function mu(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Kf(e,t){for(var r=t+"Capture",n=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=su(e,r),i!=null&&n.unshift(mu(e,i,a)),i=su(e,t),i!=null&&n.push(mu(e,i,a))),e=e.return}return n}function Lo(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function qw(e,t,r,n,a){for(var i=t._reactName,o=[];r!==null&&r!==n;){var l=r,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,a?(c=su(r,i),c!=null&&o.unshift(mu(r,c,l))):a||(c=su(r,i),c!=null&&o.push(mu(r,c,l)))),r=r.return}o.length!==0&&e.push({event:t,listeners:o})}var AD=/\r\n?/g,TD=/\u0000|\uFFFD/g;function Hw(e){return(typeof e=="string"?e:""+e).replace(AD,`
`).replace(TD,"")}function Ld(e,t,r){if(t=Hw(t),Hw(e)!==t&&r)throw Error(le(425))}function Yf(){}var Hg=null,Kg=null;function Yg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Gg=typeof setTimeout=="function"?setTimeout:void 0,MD=typeof clearTimeout=="function"?clearTimeout:void 0,Kw=typeof Promise=="function"?Promise:void 0,DD=typeof queueMicrotask=="function"?queueMicrotask:typeof Kw<"u"?function(e){return Kw.resolve(null).then(e).catch($D)}:Gg;function $D(e){setTimeout(function(){throw e})}function y0(e,t){var r=t,n=0;do{var a=r.nextSibling;if(e.removeChild(r),a&&a.nodeType===8)if(r=a.data,r==="/$"){if(n===0){e.removeChild(a),cu(t);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=a}while(r);cu(t)}function os(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Yw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Ul=Math.random().toString(36).slice(2),Aa="__reactFiber$"+Ul,hu="__reactProps$"+Ul,fi="__reactContainer$"+Ul,Xg="__reactEvents$"+Ul,ID="__reactListeners$"+Ul,LD="__reactHandles$"+Ul;function Ys(e){var t=e[Aa];if(t)return t;for(var r=e.parentNode;r;){if(t=r[fi]||r[Aa]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Yw(e);e!==null;){if(r=e[Aa])return r;e=Yw(e)}return t}e=r,r=e.parentNode}return null}function Vu(e){return e=e[Aa]||e[fi],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rl(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(le(33))}function jh(e){return e[hu]||null}var Qg=[],nl=-1;function Ss(e){return{current:e}}function At(e){0>nl||(e.current=Qg[nl],Qg[nl]=null,nl--)}function St(e,t){nl++,Qg[nl]=e.current,e.current=t}var vs={},qr=Ss(vs),hn=Ss(!1),co=vs;function Nl(e,t){var r=e.type.contextTypes;if(!r)return vs;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in r)a[i]=t[i];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function pn(e){return e=e.childContextTypes,e!=null}function Gf(){At(hn),At(qr)}function Gw(e,t,r){if(qr.current!==vs)throw Error(le(168));St(qr,t),St(hn,r)}function jC(e,t,r){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var a in n)if(!(a in t))throw Error(le(108,wM(e)||"Unknown",a));return Bt({},r,n)}function Xf(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||vs,co=qr.current,St(qr,e),St(hn,hn.current),!0}function Xw(e,t,r){var n=e.stateNode;if(!n)throw Error(le(169));r?(e=jC(e,t,co),n.__reactInternalMemoizedMergedChildContext=e,At(hn),At(qr),St(qr,e)):At(hn),St(hn,r)}var Qa=null,_h=!1,b0=!1;function _C(e){Qa===null?Qa=[e]:Qa.push(e)}function RD(e){_h=!0,_C(e)}function ks(){if(!b0&&Qa!==null){b0=!0;var e=0,t=dt;try{var r=Qa;for(dt=1;e<r.length;e++){var n=r[e];do n=n(!0);while(n!==null)}Qa=null,_h=!1}catch(a){throw Qa!==null&&(Qa=Qa.slice(e+1)),Yk(ty,ks),a}finally{dt=t,b0=!1}}return null}var al=[],il=0,Qf=null,Zf=0,qn=[],Hn=0,uo=null,ti=1,ri="";function Rs(e,t){al[il++]=Zf,al[il++]=Qf,Qf=e,Zf=t}function NC(e,t,r){qn[Hn++]=ti,qn[Hn++]=ri,qn[Hn++]=uo,uo=e;var n=ti;e=ri;var a=32-ga(n)-1;n&=~(1<<a),r+=1;var i=32-ga(t)+a;if(30<i){var o=a-a%5;i=(n&(1<<o)-1).toString(32),n>>=o,a-=o,ti=1<<32-ga(t)+a|r<<a|n,ri=i+e}else ti=1<<i|r<<a|n,ri=e}function uy(e){e.return!==null&&(Rs(e,1),NC(e,1,0))}function dy(e){for(;e===Qf;)Qf=al[--il],al[il]=null,Zf=al[--il],al[il]=null;for(;e===uo;)uo=qn[--Hn],qn[Hn]=null,ri=qn[--Hn],qn[Hn]=null,ti=qn[--Hn],qn[Hn]=null}var En=null,Cn=null,Dt=!1,fa=null;function SC(e,t){var r=Kn(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Qw(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,En=e,Cn=os(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,En=e,Cn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=uo!==null?{id:ti,overflow:ri}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Kn(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,En=e,Cn=null,!0):!1;default:return!1}}function Zg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Jg(e){if(Dt){var t=Cn;if(t){var r=t;if(!Qw(e,t)){if(Zg(e))throw Error(le(418));t=os(r.nextSibling);var n=En;t&&Qw(e,t)?SC(n,r):(e.flags=e.flags&-4097|2,Dt=!1,En=e)}}else{if(Zg(e))throw Error(le(418));e.flags=e.flags&-4097|2,Dt=!1,En=e}}}function Zw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;En=e}function Rd(e){if(e!==En)return!1;if(!Dt)return Zw(e),Dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Yg(e.type,e.memoizedProps)),t&&(t=Cn)){if(Zg(e))throw kC(),Error(le(418));for(;t;)SC(e,t),t=os(t.nextSibling)}if(Zw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(le(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Cn=os(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Cn=null}}else Cn=En?os(e.stateNode.nextSibling):null;return!0}function kC(){for(var e=Cn;e;)e=os(e.nextSibling)}function Sl(){Cn=En=null,Dt=!1}function fy(e){fa===null?fa=[e]:fa.push(e)}var zD=ki.ReactCurrentBatchConfig;function mc(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(le(309));var n=r.stateNode}if(!n)throw Error(le(147,e));var a=n,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(le(284));if(!r._owner)throw Error(le(290,e))}return e}function zd(e,t){throw e=Object.prototype.toString.call(t),Error(le(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Jw(e){var t=e._init;return t(e._payload)}function CC(e){function t(v,b){if(e){var w=v.deletions;w===null?(v.deletions=[b],v.flags|=16):w.push(b)}}function r(v,b){if(!e)return null;for(;b!==null;)t(v,b),b=b.sibling;return null}function n(v,b){for(v=new Map;b!==null;)b.key!==null?v.set(b.key,b):v.set(b.index,b),b=b.sibling;return v}function a(v,b){return v=ds(v,b),v.index=0,v.sibling=null,v}function i(v,b,w){return v.index=w,e?(w=v.alternate,w!==null?(w=w.index,w<b?(v.flags|=2,b):w):(v.flags|=2,b)):(v.flags|=1048576,b)}function o(v){return e&&v.alternate===null&&(v.flags|=2),v}function l(v,b,w,j){return b===null||b.tag!==6?(b=C0(w,v.mode,j),b.return=v,b):(b=a(b,w),b.return=v,b)}function c(v,b,w,j){var N=w.type;return N===Zo?d(v,b,w.props.children,j,w.key):b!==null&&(b.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Bi&&Jw(N)===b.type)?(j=a(b,w.props),j.ref=mc(v,b,w),j.return=v,j):(j=Pf(w.type,w.key,w.props,null,v.mode,j),j.ref=mc(v,b,w),j.return=v,j)}function u(v,b,w,j){return b===null||b.tag!==4||b.stateNode.containerInfo!==w.containerInfo||b.stateNode.implementation!==w.implementation?(b=E0(w,v.mode,j),b.return=v,b):(b=a(b,w.children||[]),b.return=v,b)}function d(v,b,w,j,N){return b===null||b.tag!==7?(b=ao(w,v.mode,j,N),b.return=v,b):(b=a(b,w),b.return=v,b)}function f(v,b,w){if(typeof b=="string"&&b!==""||typeof b=="number")return b=C0(""+b,v.mode,w),b.return=v,b;if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ed:return w=Pf(b.type,b.key,b.props,null,v.mode,w),w.ref=mc(v,null,b),w.return=v,w;case Qo:return b=E0(b,v.mode,w),b.return=v,b;case Bi:var j=b._init;return f(v,j(b._payload),w)}if(Ec(b)||lc(b))return b=ao(b,v.mode,w,null),b.return=v,b;zd(v,b)}return null}function h(v,b,w,j){var N=b!==null?b.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:l(v,b,""+w,j);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ed:return w.key===N?c(v,b,w,j):null;case Qo:return w.key===N?u(v,b,w,j):null;case Bi:return N=w._init,h(v,b,N(w._payload),j)}if(Ec(w)||lc(w))return N!==null?null:d(v,b,w,j,null);zd(v,w)}return null}function p(v,b,w,j,N){if(typeof j=="string"&&j!==""||typeof j=="number")return v=v.get(w)||null,l(b,v,""+j,N);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case Ed:return v=v.get(j.key===null?w:j.key)||null,c(b,v,j,N);case Qo:return v=v.get(j.key===null?w:j.key)||null,u(b,v,j,N);case Bi:var _=j._init;return p(v,b,w,_(j._payload),N)}if(Ec(j)||lc(j))return v=v.get(w)||null,d(b,v,j,N,null);zd(b,j)}return null}function g(v,b,w,j){for(var N=null,_=null,S=b,C=b=0,O=null;S!==null&&C<w.length;C++){S.index>C?(O=S,S=null):O=S.sibling;var A=h(v,S,w[C],j);if(A===null){S===null&&(S=O);break}e&&S&&A.alternate===null&&t(v,S),b=i(A,b,C),_===null?N=A:_.sibling=A,_=A,S=O}if(C===w.length)return r(v,S),Dt&&Rs(v,C),N;if(S===null){for(;C<w.length;C++)S=f(v,w[C],j),S!==null&&(b=i(S,b,C),_===null?N=S:_.sibling=S,_=S);return Dt&&Rs(v,C),N}for(S=n(v,S);C<w.length;C++)O=p(S,v,C,w[C],j),O!==null&&(e&&O.alternate!==null&&S.delete(O.key===null?C:O.key),b=i(O,b,C),_===null?N=O:_.sibling=O,_=O);return e&&S.forEach(function(T){return t(v,T)}),Dt&&Rs(v,C),N}function x(v,b,w,j){var N=lc(w);if(typeof N!="function")throw Error(le(150));if(w=N.call(w),w==null)throw Error(le(151));for(var _=N=null,S=b,C=b=0,O=null,A=w.next();S!==null&&!A.done;C++,A=w.next()){S.index>C?(O=S,S=null):O=S.sibling;var T=h(v,S,A.value,j);if(T===null){S===null&&(S=O);break}e&&S&&T.alternate===null&&t(v,S),b=i(T,b,C),_===null?N=T:_.sibling=T,_=T,S=O}if(A.done)return r(v,S),Dt&&Rs(v,C),N;if(S===null){for(;!A.done;C++,A=w.next())A=f(v,A.value,j),A!==null&&(b=i(A,b,C),_===null?N=A:_.sibling=A,_=A);return Dt&&Rs(v,C),N}for(S=n(v,S);!A.done;C++,A=w.next())A=p(S,v,C,A.value,j),A!==null&&(e&&A.alternate!==null&&S.delete(A.key===null?C:A.key),b=i(A,b,C),_===null?N=A:_.sibling=A,_=A);return e&&S.forEach(function(D){return t(v,D)}),Dt&&Rs(v,C),N}function y(v,b,w,j){if(typeof w=="object"&&w!==null&&w.type===Zo&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ed:e:{for(var N=w.key,_=b;_!==null;){if(_.key===N){if(N=w.type,N===Zo){if(_.tag===7){r(v,_.sibling),b=a(_,w.props.children),b.return=v,v=b;break e}}else if(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===Bi&&Jw(N)===_.type){r(v,_.sibling),b=a(_,w.props),b.ref=mc(v,_,w),b.return=v,v=b;break e}r(v,_);break}else t(v,_);_=_.sibling}w.type===Zo?(b=ao(w.props.children,v.mode,j,w.key),b.return=v,v=b):(j=Pf(w.type,w.key,w.props,null,v.mode,j),j.ref=mc(v,b,w),j.return=v,v=j)}return o(v);case Qo:e:{for(_=w.key;b!==null;){if(b.key===_)if(b.tag===4&&b.stateNode.containerInfo===w.containerInfo&&b.stateNode.implementation===w.implementation){r(v,b.sibling),b=a(b,w.children||[]),b.return=v,v=b;break e}else{r(v,b);break}else t(v,b);b=b.sibling}b=E0(w,v.mode,j),b.return=v,v=b}return o(v);case Bi:return _=w._init,y(v,b,_(w._payload),j)}if(Ec(w))return g(v,b,w,j);if(lc(w))return x(v,b,w,j);zd(v,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,b!==null&&b.tag===6?(r(v,b.sibling),b=a(b,w),b.return=v,v=b):(r(v,b),b=C0(w,v.mode,j),b.return=v,v=b),o(v)):r(v,b)}return y}var kl=CC(!0),EC=CC(!1),Jf=Ss(null),em=null,sl=null,my=null;function hy(){my=sl=em=null}function py(e){var t=Jf.current;At(Jf),e._currentValue=t}function ev(e,t,r){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function pl(e,t){em=e,my=sl=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(dn=!0),e.firstContext=null)}function Zn(e){var t=e._currentValue;if(my!==e)if(e={context:e,memoizedValue:t,next:null},sl===null){if(em===null)throw Error(le(308));sl=e,em.dependencies={lanes:0,firstContext:e}}else sl=sl.next=e;return t}var Gs=null;function gy(e){Gs===null?Gs=[e]:Gs.push(e)}function PC(e,t,r,n){var a=t.interleaved;return a===null?(r.next=r,gy(t)):(r.next=a.next,a.next=r),t.interleaved=r,mi(e,n)}function mi(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var Ui=!1;function vy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function OC(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function oi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ls(e,t,r){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,tt&2){var a=n.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),n.pending=t,mi(e,r)}return a=n.interleaved,a===null?(t.next=t,gy(n)):(t.next=a.next,a.next=t),n.interleaved=t,mi(e,r)}function _f(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ry(e,r)}}function ej(e,t){var r=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var a=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?a=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?a=i=t:i=i.next=t}else a=i=t;r={baseState:n.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:n.shared,effects:n.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function tm(e,t,r,n){var a=e.updateQueue;Ui=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var d=e.alternate;d!==null&&(d=d.updateQueue,l=d.lastBaseUpdate,l!==o&&(l===null?d.firstBaseUpdate=u:l.next=u,d.lastBaseUpdate=c))}if(i!==null){var f=a.baseState;o=0,d=u=c=null,l=i;do{var h=l.lane,p=l.eventTime;if((n&h)===h){d!==null&&(d=d.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=e,x=l;switch(h=t,p=r,x.tag){case 1:if(g=x.payload,typeof g=="function"){f=g.call(p,f,h);break e}f=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,h=typeof g=="function"?g.call(p,f,h):g,h==null)break e;f=Bt({},f,h);break e;case 2:Ui=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else p={eventTime:p,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},d===null?(u=d=p,c=f):d=d.next=p,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(1);if(d===null&&(c=f),a.baseState=c,a.firstBaseUpdate=u,a.lastBaseUpdate=d,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);mo|=o,e.lanes=o,e.memoizedState=f}}function tj(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],a=n.callback;if(a!==null){if(n.callback=null,n=r,typeof a!="function")throw Error(le(191,a));a.call(n)}}}var qu={},La=Ss(qu),pu=Ss(qu),gu=Ss(qu);function Xs(e){if(e===qu)throw Error(le(174));return e}function xy(e,t){switch(St(gu,t),St(pu,e),St(La,qu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Dg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Dg(t,e)}At(La),St(La,t)}function Cl(){At(La),At(pu),At(gu)}function AC(e){Xs(gu.current);var t=Xs(La.current),r=Dg(t,e.type);t!==r&&(St(pu,e),St(La,r))}function yy(e){pu.current===e&&(At(La),At(pu))}var zt=Ss(0);function rm(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var w0=[];function by(){for(var e=0;e<w0.length;e++)w0[e]._workInProgressVersionPrimary=null;w0.length=0}var Nf=ki.ReactCurrentDispatcher,j0=ki.ReactCurrentBatchConfig,fo=0,Ft=null,dr=null,Nr=null,nm=!1,Uc=!1,vu=0,FD=0;function zr(){throw Error(le(321))}function wy(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!ya(e[r],t[r]))return!1;return!0}function jy(e,t,r,n,a,i){if(fo=i,Ft=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Nf.current=e===null||e.memoizedState===null?VD:qD,e=r(n,a),Uc){i=0;do{if(Uc=!1,vu=0,25<=i)throw Error(le(301));i+=1,Nr=dr=null,t.updateQueue=null,Nf.current=HD,e=r(n,a)}while(Uc)}if(Nf.current=am,t=dr!==null&&dr.next!==null,fo=0,Nr=dr=Ft=null,nm=!1,t)throw Error(le(300));return e}function _y(){var e=vu!==0;return vu=0,e}function Pa(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Nr===null?Ft.memoizedState=Nr=e:Nr=Nr.next=e,Nr}function Jn(){if(dr===null){var e=Ft.alternate;e=e!==null?e.memoizedState:null}else e=dr.next;var t=Nr===null?Ft.memoizedState:Nr.next;if(t!==null)Nr=t,dr=e;else{if(e===null)throw Error(le(310));dr=e,e={memoizedState:dr.memoizedState,baseState:dr.baseState,baseQueue:dr.baseQueue,queue:dr.queue,next:null},Nr===null?Ft.memoizedState=Nr=e:Nr=Nr.next=e}return Nr}function xu(e,t){return typeof t=="function"?t(e):t}function _0(e){var t=Jn(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var n=dr,a=n.baseQueue,i=r.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}n.baseQueue=a=i,r.pending=null}if(a!==null){i=a.next,n=n.baseState;var l=o=null,c=null,u=i;do{var d=u.lane;if((fo&d)===d)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:e(n,u.action);else{var f={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=f,o=n):c=c.next=f,Ft.lanes|=d,mo|=d}u=u.next}while(u!==null&&u!==i);c===null?o=n:c.next=l,ya(n,t.memoizedState)||(dn=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=c,r.lastRenderedState=n}if(e=r.interleaved,e!==null){a=e;do i=a.lane,Ft.lanes|=i,mo|=i,a=a.next;while(a!==e)}else a===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function N0(e){var t=Jn(),r=t.queue;if(r===null)throw Error(le(311));r.lastRenderedReducer=e;var n=r.dispatch,a=r.pending,i=t.memoizedState;if(a!==null){r.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);ya(i,t.memoizedState)||(dn=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),r.lastRenderedState=i}return[i,n]}function TC(){}function MC(e,t){var r=Ft,n=Jn(),a=t(),i=!ya(n.memoizedState,a);if(i&&(n.memoizedState=a,dn=!0),n=n.queue,Ny(IC.bind(null,r,n,e),[e]),n.getSnapshot!==t||i||Nr!==null&&Nr.memoizedState.tag&1){if(r.flags|=2048,yu(9,$C.bind(null,r,n,a,t),void 0,null),Cr===null)throw Error(le(349));fo&30||DC(r,t,a)}return a}function DC(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function $C(e,t,r,n){t.value=r,t.getSnapshot=n,LC(t)&&RC(e)}function IC(e,t,r){return r(function(){LC(t)&&RC(e)})}function LC(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!ya(e,r)}catch{return!0}}function RC(e){var t=mi(e,1);t!==null&&va(t,e,1,-1)}function rj(e){var t=Pa();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xu,lastRenderedState:e},t.queue=e,e=e.dispatch=WD.bind(null,Ft,e),[t.memoizedState,e]}function yu(e,t,r,n){return e={tag:e,create:t,destroy:r,deps:n,next:null},t=Ft.updateQueue,t===null?(t={lastEffect:null,stores:null},Ft.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e)),e}function zC(){return Jn().memoizedState}function Sf(e,t,r,n){var a=Pa();Ft.flags|=e,a.memoizedState=yu(1|t,r,void 0,n===void 0?null:n)}function Nh(e,t,r,n){var a=Jn();n=n===void 0?null:n;var i=void 0;if(dr!==null){var o=dr.memoizedState;if(i=o.destroy,n!==null&&wy(n,o.deps)){a.memoizedState=yu(t,r,i,n);return}}Ft.flags|=e,a.memoizedState=yu(1|t,r,i,n)}function nj(e,t){return Sf(8390656,8,e,t)}function Ny(e,t){return Nh(2048,8,e,t)}function FC(e,t){return Nh(4,2,e,t)}function BC(e,t){return Nh(4,4,e,t)}function UC(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function WC(e,t,r){return r=r!=null?r.concat([e]):null,Nh(4,4,UC.bind(null,t,e),r)}function Sy(){}function VC(e,t){var r=Jn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&wy(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function qC(e,t){var r=Jn();t=t===void 0?null:t;var n=r.memoizedState;return n!==null&&t!==null&&wy(t,n[1])?n[0]:(e=e(),r.memoizedState=[e,t],e)}function HC(e,t,r){return fo&21?(ya(r,t)||(r=Qk(),Ft.lanes|=r,mo|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,dn=!0),e.memoizedState=r)}function BD(e,t){var r=dt;dt=r!==0&&4>r?r:4,e(!0);var n=j0.transition;j0.transition={};try{e(!1),t()}finally{dt=r,j0.transition=n}}function KC(){return Jn().memoizedState}function UD(e,t,r){var n=us(e);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},YC(e))GC(t,r);else if(r=PC(e,t,r,n),r!==null){var a=Jr();va(r,e,n,a),XC(r,t,n)}}function WD(e,t,r){var n=us(e),a={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(YC(e))GC(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,r);if(a.hasEagerState=!0,a.eagerState=l,ya(l,o)){var c=t.interleaved;c===null?(a.next=a,gy(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}r=PC(e,t,a,n),r!==null&&(a=Jr(),va(r,e,n,a),XC(r,t,n))}}function YC(e){var t=e.alternate;return e===Ft||t!==null&&t===Ft}function GC(e,t){Uc=nm=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function XC(e,t,r){if(r&4194240){var n=t.lanes;n&=e.pendingLanes,r|=n,t.lanes=r,ry(e,r)}}var am={readContext:Zn,useCallback:zr,useContext:zr,useEffect:zr,useImperativeHandle:zr,useInsertionEffect:zr,useLayoutEffect:zr,useMemo:zr,useReducer:zr,useRef:zr,useState:zr,useDebugValue:zr,useDeferredValue:zr,useTransition:zr,useMutableSource:zr,useSyncExternalStore:zr,useId:zr,unstable_isNewReconciler:!1},VD={readContext:Zn,useCallback:function(e,t){return Pa().memoizedState=[e,t===void 0?null:t],e},useContext:Zn,useEffect:nj,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Sf(4194308,4,UC.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Sf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sf(4,2,e,t)},useMemo:function(e,t){var r=Pa();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var n=Pa();return t=r!==void 0?r(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=UD.bind(null,Ft,e),[n.memoizedState,e]},useRef:function(e){var t=Pa();return e={current:e},t.memoizedState=e},useState:rj,useDebugValue:Sy,useDeferredValue:function(e){return Pa().memoizedState=e},useTransition:function(){var e=rj(!1),t=e[0];return e=BD.bind(null,e[1]),Pa().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var n=Ft,a=Pa();if(Dt){if(r===void 0)throw Error(le(407));r=r()}else{if(r=t(),Cr===null)throw Error(le(349));fo&30||DC(n,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,nj(IC.bind(null,n,i,e),[e]),n.flags|=2048,yu(9,$C.bind(null,n,i,r,t),void 0,null),r},useId:function(){var e=Pa(),t=Cr.identifierPrefix;if(Dt){var r=ri,n=ti;r=(n&~(1<<32-ga(n)-1)).toString(32)+r,t=":"+t+"R"+r,r=vu++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=FD++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},qD={readContext:Zn,useCallback:VC,useContext:Zn,useEffect:Ny,useImperativeHandle:WC,useInsertionEffect:FC,useLayoutEffect:BC,useMemo:qC,useReducer:_0,useRef:zC,useState:function(){return _0(xu)},useDebugValue:Sy,useDeferredValue:function(e){var t=Jn();return HC(t,dr.memoizedState,e)},useTransition:function(){var e=_0(xu)[0],t=Jn().memoizedState;return[e,t]},useMutableSource:TC,useSyncExternalStore:MC,useId:KC,unstable_isNewReconciler:!1},HD={readContext:Zn,useCallback:VC,useContext:Zn,useEffect:Ny,useImperativeHandle:WC,useInsertionEffect:FC,useLayoutEffect:BC,useMemo:qC,useReducer:N0,useRef:zC,useState:function(){return N0(xu)},useDebugValue:Sy,useDeferredValue:function(e){var t=Jn();return dr===null?t.memoizedState=e:HC(t,dr.memoizedState,e)},useTransition:function(){var e=N0(xu)[0],t=Jn().memoizedState;return[e,t]},useMutableSource:TC,useSyncExternalStore:MC,useId:KC,unstable_isNewReconciler:!1};function ca(e,t){if(e&&e.defaultProps){t=Bt({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function tv(e,t,r,n){t=e.memoizedState,r=r(n,t),r=r==null?t:Bt({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Sh={isMounted:function(e){return(e=e._reactInternals)?ko(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Jr(),a=us(e),i=oi(n,a);i.payload=t,r!=null&&(i.callback=r),t=ls(e,i,a),t!==null&&(va(t,e,a,n),_f(t,e,a))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Jr(),a=us(e),i=oi(n,a);i.tag=1,i.payload=t,r!=null&&(i.callback=r),t=ls(e,i,a),t!==null&&(va(t,e,a,n),_f(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Jr(),n=us(e),a=oi(r,n);a.tag=2,t!=null&&(a.callback=t),t=ls(e,a,n),t!==null&&(va(t,e,n,r),_f(t,e,n))}};function aj(e,t,r,n,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,i,o):t.prototype&&t.prototype.isPureReactComponent?!du(r,n)||!du(a,i):!0}function QC(e,t,r){var n=!1,a=vs,i=t.contextType;return typeof i=="object"&&i!==null?i=Zn(i):(a=pn(t)?co:qr.current,n=t.contextTypes,i=(n=n!=null)?Nl(e,a):vs),t=new t(r,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Sh,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function ij(e,t,r,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&Sh.enqueueReplaceState(t,t.state,null)}function rv(e,t,r,n){var a=e.stateNode;a.props=r,a.state=e.memoizedState,a.refs={},vy(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=Zn(i):(i=pn(t)?co:qr.current,a.context=Nl(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(tv(e,t,i,r),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&Sh.enqueueReplaceState(a,a.state,null),tm(e,r,a,n),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function El(e,t){try{var r="",n=t;do r+=bM(n),n=n.return;while(n);var a=r}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function S0(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function nv(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var KD=typeof WeakMap=="function"?WeakMap:Map;function ZC(e,t,r){r=oi(-1,r),r.tag=3,r.payload={element:null};var n=t.value;return r.callback=function(){sm||(sm=!0,mv=n),nv(e,t)},r}function JC(e,t,r){r=oi(-1,r),r.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var a=t.value;r.payload=function(){return n(a)},r.callback=function(){nv(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){nv(e,t),typeof n!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),r}function sj(e,t,r){var n=e.pingCache;if(n===null){n=e.pingCache=new KD;var a=new Set;n.set(t,a)}else a=n.get(t),a===void 0&&(a=new Set,n.set(t,a));a.has(r)||(a.add(r),e=o6.bind(null,e,t,r),t.then(e,e))}function oj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lj(e,t,r,n,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=oi(-1,1),t.tag=2,ls(r,t,1))),r.lanes|=1),e)}var YD=ki.ReactCurrentOwner,dn=!1;function Xr(e,t,r,n){t.child=e===null?EC(t,null,r,n):kl(t,e.child,r,n)}function cj(e,t,r,n,a){r=r.render;var i=t.ref;return pl(t,a),n=jy(e,t,r,n,i,a),r=_y(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hi(e,t,a)):(Dt&&r&&uy(t),t.flags|=1,Xr(e,t,n,a),t.child)}function uj(e,t,r,n,a){if(e===null){var i=r.type;return typeof i=="function"&&!My(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=i,eE(e,t,i,n,a)):(e=Pf(r.type,null,n,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:du,r(o,n)&&e.ref===t.ref)return hi(e,t,a)}return t.flags|=1,e=ds(i,n),e.ref=t.ref,e.return=t,t.child=e}function eE(e,t,r,n,a){if(e!==null){var i=e.memoizedProps;if(du(i,n)&&e.ref===t.ref)if(dn=!1,t.pendingProps=n=i,(e.lanes&a)!==0)e.flags&131072&&(dn=!0);else return t.lanes=e.lanes,hi(e,t,a)}return av(e,t,r,n,a)}function tE(e,t,r){var n=t.pendingProps,a=n.children,i=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(ll,Nn),Nn|=r;else{if(!(r&1073741824))return e=i!==null?i.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,St(ll,Nn),Nn|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,St(ll,Nn),Nn|=n}else i!==null?(n=i.baseLanes|r,t.memoizedState=null):n=r,St(ll,Nn),Nn|=n;return Xr(e,t,a,r),t.child}function rE(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function av(e,t,r,n,a){var i=pn(r)?co:qr.current;return i=Nl(t,i),pl(t,a),r=jy(e,t,r,n,i,a),n=_y(),e!==null&&!dn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,hi(e,t,a)):(Dt&&n&&uy(t),t.flags|=1,Xr(e,t,r,a),t.child)}function dj(e,t,r,n,a){if(pn(r)){var i=!0;Xf(t)}else i=!1;if(pl(t,a),t.stateNode===null)kf(e,t),QC(t,r,n),rv(t,r,n,a),n=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Zn(u):(u=pn(r)?co:qr.current,u=Nl(t,u));var d=r.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&ij(t,o,n,u),Ui=!1;var h=t.memoizedState;o.state=h,tm(t,n,o,a),c=t.memoizedState,l!==n||h!==c||hn.current||Ui?(typeof d=="function"&&(tv(t,r,d,n),c=t.memoizedState),(l=Ui||aj(t,r,l,n,h,c,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,OC(e,t),l=t.memoizedProps,u=t.type===t.elementType?l:ca(t.type,l),o.props=u,f=t.pendingProps,h=o.context,c=r.contextType,typeof c=="object"&&c!==null?c=Zn(c):(c=pn(r)?co:qr.current,c=Nl(t,c));var p=r.getDerivedStateFromProps;(d=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==f||h!==c)&&ij(t,o,n,c),Ui=!1,h=t.memoizedState,o.state=h,tm(t,n,o,a);var g=t.memoizedState;l!==f||h!==g||hn.current||Ui?(typeof p=="function"&&(tv(t,r,p,n),g=t.memoizedState),(u=Ui||aj(t,r,u,n,h,g,c)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,g,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,g,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=g),o.props=n,o.state=g,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return iv(e,t,r,n,i,a)}function iv(e,t,r,n,a,i){rE(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return a&&Xw(t,r,!1),hi(e,t,i);n=t.stateNode,YD.current=t;var l=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=kl(t,e.child,null,i),t.child=kl(t,null,l,i)):Xr(e,t,l,i),t.memoizedState=n.state,a&&Xw(t,r,!0),t.child}function nE(e){var t=e.stateNode;t.pendingContext?Gw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Gw(e,t.context,!1),xy(e,t.containerInfo)}function fj(e,t,r,n,a){return Sl(),fy(a),t.flags|=256,Xr(e,t,r,n),t.child}var sv={dehydrated:null,treeContext:null,retryLane:0};function ov(e){return{baseLanes:e,cachePool:null,transitions:null}}function aE(e,t,r){var n=t.pendingProps,a=zt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),St(zt,a&1),e===null)return Jg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,i?(n=t.mode,i=t.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Eh(o,n,0,null),e=ao(e,n,r,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=ov(r),t.memoizedState=sv,e):ky(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return GD(e,t,o,n,l,a,r);if(i){i=n.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&t.child!==a?(n=t.child,n.childLanes=0,n.pendingProps=c,t.deletions=null):(n=ds(a,c),n.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=ds(l,i):(i=ao(i,o,r,null),i.flags|=2),i.return=t,n.return=t,n.sibling=i,t.child=n,n=i,i=t.child,o=e.child.memoizedState,o=o===null?ov(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~r,t.memoizedState=sv,n}return i=e.child,e=i.sibling,n=ds(i,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=r),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n}function ky(e,t){return t=Eh({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fd(e,t,r,n){return n!==null&&fy(n),kl(t,e.child,null,r),e=ky(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function GD(e,t,r,n,a,i,o){if(r)return t.flags&256?(t.flags&=-257,n=S0(Error(le(422))),Fd(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=n.fallback,a=t.mode,n=Eh({mode:"visible",children:n.children},a,0,null),i=ao(i,a,o,null),i.flags|=2,n.return=t,i.return=t,n.sibling=i,t.child=n,t.mode&1&&kl(t,e.child,null,o),t.child.memoizedState=ov(o),t.memoizedState=sv,i);if(!(t.mode&1))return Fd(e,t,o,null);if(a.data==="$!"){if(n=a.nextSibling&&a.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(le(419)),n=S0(i,n,void 0),Fd(e,t,o,n)}if(l=(o&e.childLanes)!==0,dn||l){if(n=Cr,n!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(n.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,mi(e,a),va(n,e,a,-1))}return Ty(),n=S0(Error(le(421))),Fd(e,t,o,n)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=l6.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Cn=os(a.nextSibling),En=t,Dt=!0,fa=null,e!==null&&(qn[Hn++]=ti,qn[Hn++]=ri,qn[Hn++]=uo,ti=e.id,ri=e.overflow,uo=t),t=ky(t,n.children),t.flags|=4096,t)}function mj(e,t,r){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ev(e.return,t,r)}function k0(e,t,r,n,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=a)}function iE(e,t,r){var n=t.pendingProps,a=n.revealOrder,i=n.tail;if(Xr(e,t,n.children,r),n=zt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&mj(e,r,t);else if(e.tag===19)mj(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(St(zt,n),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(r=t.child,a=null;r!==null;)e=r.alternate,e!==null&&rm(e)===null&&(a=r),r=r.sibling;r=a,r===null?(a=t.child,t.child=null):(a=r.sibling,r.sibling=null),k0(t,!1,a,r,i);break;case"backwards":for(r=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&rm(e)===null){t.child=a;break}e=a.sibling,a.sibling=r,r=a,a=e}k0(t,!0,r,null,i);break;case"together":k0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kf(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hi(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),mo|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(le(153));if(t.child!==null){for(e=t.child,r=ds(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=ds(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function XD(e,t,r){switch(t.tag){case 3:nE(t),Sl();break;case 5:AC(t);break;case 1:pn(t.type)&&Xf(t);break;case 4:xy(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,a=t.memoizedProps.value;St(Jf,n._currentValue),n._currentValue=a;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(St(zt,zt.current&1),t.flags|=128,null):r&t.child.childLanes?aE(e,t,r):(St(zt,zt.current&1),e=hi(e,t,r),e!==null?e.sibling:null);St(zt,zt.current&1);break;case 19:if(n=(r&t.childLanes)!==0,e.flags&128){if(n)return iE(e,t,r);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),St(zt,zt.current),n)break;return null;case 22:case 23:return t.lanes=0,tE(e,t,r)}return hi(e,t,r)}var sE,lv,oE,lE;sE=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};lv=function(){};oE=function(e,t,r,n){var a=e.memoizedProps;if(a!==n){e=t.stateNode,Xs(La.current);var i=null;switch(r){case"input":a=Og(e,a),n=Og(e,n),i=[];break;case"select":a=Bt({},a,{value:void 0}),n=Bt({},n,{value:void 0}),i=[];break;case"textarea":a=Mg(e,a),n=Mg(e,n),i=[];break;default:typeof a.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Yf)}$g(r,n);var o;r=null;for(u in a)if(!n.hasOwnProperty(u)&&a.hasOwnProperty(u)&&a[u]!=null)if(u==="style"){var l=a[u];for(o in l)l.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(au.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var c=n[u];if(l=a!=null?a[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(r||(r={}),r[o]=c[o])}else r||(i||(i=[]),i.push(u,r)),r=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(au.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Pt("scroll",e),i||l===c||(i=[])):(i=i||[]).push(u,c))}r&&(i=i||[]).push("style",r);var u=i;(t.updateQueue=u)&&(t.flags|=4)}};lE=function(e,t,r,n){r!==n&&(t.flags|=4)};function hc(e,t){if(!Dt)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Fr(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,n=0;if(t)for(var a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags&14680064,n|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)r|=a.lanes|a.childLanes,n|=a.subtreeFlags,n|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function QD(e,t,r){var n=t.pendingProps;switch(dy(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(t),null;case 1:return pn(t.type)&&Gf(),Fr(t),null;case 3:return n=t.stateNode,Cl(),At(hn),At(qr),by(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Rd(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,fa!==null&&(gv(fa),fa=null))),lv(e,t),Fr(t),null;case 5:yy(t);var a=Xs(gu.current);if(r=t.type,e!==null&&t.stateNode!=null)oE(e,t,r,n,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(le(166));return Fr(t),null}if(e=Xs(La.current),Rd(t)){n=t.stateNode,r=t.type;var i=t.memoizedProps;switch(n[Aa]=t,n[hu]=i,e=(t.mode&1)!==0,r){case"dialog":Pt("cancel",n),Pt("close",n);break;case"iframe":case"object":case"embed":Pt("load",n);break;case"video":case"audio":for(a=0;a<Oc.length;a++)Pt(Oc[a],n);break;case"source":Pt("error",n);break;case"img":case"image":case"link":Pt("error",n),Pt("load",n);break;case"details":Pt("toggle",n);break;case"input":jw(n,i),Pt("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Pt("invalid",n);break;case"textarea":Nw(n,i),Pt("invalid",n)}$g(r,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ld(n.textContent,l,e),a=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ld(n.textContent,l,e),a=["children",""+l]):au.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Pt("scroll",n)}switch(r){case"input":Pd(n),_w(n,i,!0);break;case"textarea":Pd(n),Sw(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Yf)}n=a,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ik(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(r,{is:n.is}):(e=o.createElement(r),r==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,r),e[Aa]=t,e[hu]=n,sE(e,t,!1,!1),t.stateNode=e;e:{switch(o=Ig(r,n),r){case"dialog":Pt("cancel",e),Pt("close",e),a=n;break;case"iframe":case"object":case"embed":Pt("load",e),a=n;break;case"video":case"audio":for(a=0;a<Oc.length;a++)Pt(Oc[a],e);a=n;break;case"source":Pt("error",e),a=n;break;case"img":case"image":case"link":Pt("error",e),Pt("load",e),a=n;break;case"details":Pt("toggle",e),a=n;break;case"input":jw(e,n),a=Og(e,n),Pt("invalid",e);break;case"option":a=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},a=Bt({},n,{value:void 0}),Pt("invalid",e);break;case"textarea":Nw(e,n),a=Mg(e,n),Pt("invalid",e);break;default:a=n}$g(r,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?zk(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Lk(e,c)):i==="children"?typeof c=="string"?(r!=="textarea"||c!=="")&&iu(e,c):typeof c=="number"&&iu(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(au.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Pt("scroll",e):c!=null&&Xx(e,i,c,o))}switch(r){case"input":Pd(e),_w(e,n,!1);break;case"textarea":Pd(e),Sw(e);break;case"option":n.value!=null&&e.setAttribute("value",""+gs(n.value));break;case"select":e.multiple=!!n.multiple,i=n.value,i!=null?dl(e,!!n.multiple,i,!1):n.defaultValue!=null&&dl(e,!!n.multiple,n.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=Yf)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Fr(t),null;case 6:if(e&&t.stateNode!=null)lE(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(le(166));if(r=Xs(gu.current),Xs(La.current),Rd(t)){if(n=t.stateNode,r=t.memoizedProps,n[Aa]=t,(i=n.nodeValue!==r)&&(e=En,e!==null))switch(e.tag){case 3:Ld(n.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ld(n.nodeValue,r,(e.mode&1)!==0)}i&&(t.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[Aa]=t,t.stateNode=n}return Fr(t),null;case 13:if(At(zt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Dt&&Cn!==null&&t.mode&1&&!(t.flags&128))kC(),Sl(),t.flags|=98560,i=!1;else if(i=Rd(t),n!==null&&n.dehydrated!==null){if(e===null){if(!i)throw Error(le(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(le(317));i[Aa]=t}else Sl(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Fr(t),i=!1}else fa!==null&&(gv(fa),fa=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||zt.current&1?hr===0&&(hr=3):Ty())),t.updateQueue!==null&&(t.flags|=4),Fr(t),null);case 4:return Cl(),lv(e,t),e===null&&fu(t.stateNode.containerInfo),Fr(t),null;case 10:return py(t.type._context),Fr(t),null;case 17:return pn(t.type)&&Gf(),Fr(t),null;case 19:if(At(zt),i=t.memoizedState,i===null)return Fr(t),null;if(n=(t.flags&128)!==0,o=i.rendering,o===null)if(n)hc(i,!1);else{if(hr!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=rm(e),o!==null){for(t.flags|=128,hc(i,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=r,r=t.child;r!==null;)i=r,e=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return St(zt,zt.current&1|2),t.child}e=e.sibling}i.tail!==null&&Zt()>Pl&&(t.flags|=128,n=!0,hc(i,!1),t.lanes=4194304)}else{if(!n)if(e=rm(o),e!==null){if(t.flags|=128,n=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),hc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Dt)return Fr(t),null}else 2*Zt()-i.renderingStartTime>Pl&&r!==1073741824&&(t.flags|=128,n=!0,hc(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(r=i.last,r!==null?r.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Zt(),t.sibling=null,r=zt.current,St(zt,n?r&1|2:r&1),t):(Fr(t),null);case 22:case 23:return Ay(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?Nn&1073741824&&(Fr(t),t.subtreeFlags&6&&(t.flags|=8192)):Fr(t),null;case 24:return null;case 25:return null}throw Error(le(156,t.tag))}function ZD(e,t){switch(dy(t),t.tag){case 1:return pn(t.type)&&Gf(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Cl(),At(hn),At(qr),by(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return yy(t),null;case 13:if(At(zt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(le(340));Sl()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return At(zt),null;case 4:return Cl(),null;case 10:return py(t.type._context),null;case 22:case 23:return Ay(),null;case 24:return null;default:return null}}var Bd=!1,Ur=!1,JD=typeof WeakSet=="function"?WeakSet:Set,_e=null;function ol(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Ht(e,t,n)}else r.current=null}function cv(e,t,r){try{r()}catch(n){Ht(e,t,n)}}var hj=!1;function e6(e,t){if(Hg=qf,e=mC(),cy(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var a=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,f=e,h=null;t:for(;;){for(var p;f!==r||a!==0&&f.nodeType!==3||(l=o+a),f!==i||n!==0&&f.nodeType!==3||(c=o+n),f.nodeType===3&&(o+=f.nodeValue.length),(p=f.firstChild)!==null;)h=f,f=p;for(;;){if(f===e)break t;if(h===r&&++u===a&&(l=o),h===i&&++d===n&&(c=o),(p=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=p}r=l===-1||c===-1?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(Kg={focusedElem:e,selectionRange:r},qf=!1,_e=t;_e!==null;)if(t=_e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,_e=e;else for(;_e!==null;){t=_e;try{var g=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?x:ca(t.type,x),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(le(163))}}catch(j){Ht(t,t.return,j)}if(e=t.sibling,e!==null){e.return=t.return,_e=e;break}_e=t.return}return g=hj,hj=!1,g}function Wc(e,t,r){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var a=n=n.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&cv(t,r,i)}a=a.next}while(a!==n)}}function kh(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var n=r.create;r.destroy=n()}r=r.next}while(r!==t)}}function uv(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function cE(e){var t=e.alternate;t!==null&&(e.alternate=null,cE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Aa],delete t[hu],delete t[Xg],delete t[ID],delete t[LD])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function uE(e){return e.tag===5||e.tag===3||e.tag===4}function pj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||uE(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function dv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Yf));else if(n!==4&&(e=e.child,e!==null))for(dv(e,t,r),e=e.sibling;e!==null;)dv(e,t,r),e=e.sibling}function fv(e,t,r){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(fv(e,t,r),e=e.sibling;e!==null;)fv(e,t,r),e=e.sibling}var Mr=null,ua=!1;function Li(e,t,r){for(r=r.child;r!==null;)dE(e,t,r),r=r.sibling}function dE(e,t,r){if(Ia&&typeof Ia.onCommitFiberUnmount=="function")try{Ia.onCommitFiberUnmount(xh,r)}catch{}switch(r.tag){case 5:Ur||ol(r,t);case 6:var n=Mr,a=ua;Mr=null,Li(e,t,r),Mr=n,ua=a,Mr!==null&&(ua?(e=Mr,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Mr.removeChild(r.stateNode));break;case 18:Mr!==null&&(ua?(e=Mr,r=r.stateNode,e.nodeType===8?y0(e.parentNode,r):e.nodeType===1&&y0(e,r),cu(e)):y0(Mr,r.stateNode));break;case 4:n=Mr,a=ua,Mr=r.stateNode.containerInfo,ua=!0,Li(e,t,r),Mr=n,ua=a;break;case 0:case 11:case 14:case 15:if(!Ur&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){a=n=n.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&cv(r,t,o),a=a.next}while(a!==n)}Li(e,t,r);break;case 1:if(!Ur&&(ol(r,t),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(l){Ht(r,t,l)}Li(e,t,r);break;case 21:Li(e,t,r);break;case 22:r.mode&1?(Ur=(n=Ur)||r.memoizedState!==null,Li(e,t,r),Ur=n):Li(e,t,r);break;default:Li(e,t,r)}}function gj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new JD),t.forEach(function(n){var a=c6.bind(null,e,n);r.has(n)||(r.add(n),n.then(a,a))})}}function sa(e,t){var r=t.deletions;if(r!==null)for(var n=0;n<r.length;n++){var a=r[n];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:Mr=l.stateNode,ua=!1;break e;case 3:Mr=l.stateNode.containerInfo,ua=!0;break e;case 4:Mr=l.stateNode.containerInfo,ua=!0;break e}l=l.return}if(Mr===null)throw Error(le(160));dE(i,o,a),Mr=null,ua=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(u){Ht(a,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)fE(t,e),t=t.sibling}function fE(e,t){var r=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(sa(t,e),ka(e),n&4){try{Wc(3,e,e.return),kh(3,e)}catch(x){Ht(e,e.return,x)}try{Wc(5,e,e.return)}catch(x){Ht(e,e.return,x)}}break;case 1:sa(t,e),ka(e),n&512&&r!==null&&ol(r,r.return);break;case 5:if(sa(t,e),ka(e),n&512&&r!==null&&ol(r,r.return),e.flags&32){var a=e.stateNode;try{iu(a,"")}catch(x){Ht(e,e.return,x)}}if(n&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=r!==null?r.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Dk(a,i),Ig(l,o);var u=Ig(l,i);for(o=0;o<c.length;o+=2){var d=c[o],f=c[o+1];d==="style"?zk(a,f):d==="dangerouslySetInnerHTML"?Lk(a,f):d==="children"?iu(a,f):Xx(a,d,f,u)}switch(l){case"input":Ag(a,i);break;case"textarea":$k(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;p!=null?dl(a,!!i.multiple,p,!1):h!==!!i.multiple&&(i.defaultValue!=null?dl(a,!!i.multiple,i.defaultValue,!0):dl(a,!!i.multiple,i.multiple?[]:"",!1))}a[hu]=i}catch(x){Ht(e,e.return,x)}}break;case 6:if(sa(t,e),ka(e),n&4){if(e.stateNode===null)throw Error(le(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(x){Ht(e,e.return,x)}}break;case 3:if(sa(t,e),ka(e),n&4&&r!==null&&r.memoizedState.isDehydrated)try{cu(t.containerInfo)}catch(x){Ht(e,e.return,x)}break;case 4:sa(t,e),ka(e);break;case 13:sa(t,e),ka(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(Py=Zt())),n&4&&gj(e);break;case 22:if(d=r!==null&&r.memoizedState!==null,e.mode&1?(Ur=(u=Ur)||d,sa(t,e),Ur=u):sa(t,e),ka(e),n&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!d&&e.mode&1)for(_e=e,d=e.child;d!==null;){for(f=_e=d;_e!==null;){switch(h=_e,p=h.child,h.tag){case 0:case 11:case 14:case 15:Wc(4,h,h.return);break;case 1:ol(h,h.return);var g=h.stateNode;if(typeof g.componentWillUnmount=="function"){n=h,r=h.return;try{t=n,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(x){Ht(n,r,x)}}break;case 5:ol(h,h.return);break;case 22:if(h.memoizedState!==null){xj(f);continue}}p!==null?(p.return=h,_e=p):xj(f)}d=d.sibling}e:for(d=null,f=e;;){if(f.tag===5){if(d===null){d=f;try{a=f.stateNode,u?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=f.stateNode,c=f.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Rk("display",o))}catch(x){Ht(e,e.return,x)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(x){Ht(e,e.return,x)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:sa(t,e),ka(e),n&4&&gj(e);break;case 21:break;default:sa(t,e),ka(e)}}function ka(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(uE(r)){var n=r;break e}r=r.return}throw Error(le(160))}switch(n.tag){case 5:var a=n.stateNode;n.flags&32&&(iu(a,""),n.flags&=-33);var i=pj(e);fv(e,i,a);break;case 3:case 4:var o=n.stateNode.containerInfo,l=pj(e);dv(e,l,o);break;default:throw Error(le(161))}}catch(c){Ht(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function t6(e,t,r){_e=e,mE(e)}function mE(e,t,r){for(var n=(e.mode&1)!==0;_e!==null;){var a=_e,i=a.child;if(a.tag===22&&n){var o=a.memoizedState!==null||Bd;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Ur;l=Bd;var u=Ur;if(Bd=o,(Ur=c)&&!u)for(_e=a;_e!==null;)o=_e,c=o.child,o.tag===22&&o.memoizedState!==null?yj(a):c!==null?(c.return=o,_e=c):yj(a);for(;i!==null;)_e=i,mE(i),i=i.sibling;_e=a,Bd=l,Ur=u}vj(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,_e=i):vj(e)}}function vj(e){for(;_e!==null;){var t=_e;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Ur||kh(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Ur)if(r===null)n.componentDidMount();else{var a=t.elementType===t.type?r.memoizedProps:ca(t.type,r.memoizedProps);n.componentDidUpdate(a,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&tj(t,i,n);break;case 3:var o=t.updateQueue;if(o!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}tj(t,o,r)}break;case 5:var l=t.stateNode;if(r===null&&t.flags&4){r=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&r.focus();break;case"img":c.src&&(r.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var d=u.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&cu(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(le(163))}Ur||t.flags&512&&uv(t)}catch(h){Ht(t,t.return,h)}}if(t===e){_e=null;break}if(r=t.sibling,r!==null){r.return=t.return,_e=r;break}_e=t.return}}function xj(e){for(;_e!==null;){var t=_e;if(t===e){_e=null;break}var r=t.sibling;if(r!==null){r.return=t.return,_e=r;break}_e=t.return}}function yj(e){for(;_e!==null;){var t=_e;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{kh(4,t)}catch(c){Ht(t,r,c)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var a=t.return;try{n.componentDidMount()}catch(c){Ht(t,a,c)}}var i=t.return;try{uv(t)}catch(c){Ht(t,i,c)}break;case 5:var o=t.return;try{uv(t)}catch(c){Ht(t,o,c)}}}catch(c){Ht(t,t.return,c)}if(t===e){_e=null;break}var l=t.sibling;if(l!==null){l.return=t.return,_e=l;break}_e=t.return}}var r6=Math.ceil,im=ki.ReactCurrentDispatcher,Cy=ki.ReactCurrentOwner,Xn=ki.ReactCurrentBatchConfig,tt=0,Cr=null,tr=null,$r=0,Nn=0,ll=Ss(0),hr=0,bu=null,mo=0,Ch=0,Ey=0,Vc=null,cn=null,Py=0,Pl=1/0,Ya=null,sm=!1,mv=null,cs=null,Ud=!1,Ji=null,om=0,qc=0,hv=null,Cf=-1,Ef=0;function Jr(){return tt&6?Zt():Cf!==-1?Cf:Cf=Zt()}function us(e){return e.mode&1?tt&2&&$r!==0?$r&-$r:zD.transition!==null?(Ef===0&&(Ef=Qk()),Ef):(e=dt,e!==0||(e=window.event,e=e===void 0?16:aC(e.type)),e):1}function va(e,t,r,n){if(50<qc)throw qc=0,hv=null,Error(le(185));Uu(e,r,n),(!(tt&2)||e!==Cr)&&(e===Cr&&(!(tt&2)&&(Ch|=r),hr===4&&Ki(e,$r)),gn(e,n),r===1&&tt===0&&!(t.mode&1)&&(Pl=Zt()+500,_h&&ks()))}function gn(e,t){var r=e.callbackNode;zM(e,t);var n=Vf(e,e===Cr?$r:0);if(n===0)r!==null&&Ew(r),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(r!=null&&Ew(r),t===1)e.tag===0?RD(bj.bind(null,e)):_C(bj.bind(null,e)),DD(function(){!(tt&6)&&ks()}),r=null;else{switch(Zk(n)){case 1:r=ty;break;case 4:r=Gk;break;case 16:r=Wf;break;case 536870912:r=Xk;break;default:r=Wf}r=wE(r,hE.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function hE(e,t){if(Cf=-1,Ef=0,tt&6)throw Error(le(327));var r=e.callbackNode;if(gl()&&e.callbackNode!==r)return null;var n=Vf(e,e===Cr?$r:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=lm(e,n);else{t=n;var a=tt;tt|=2;var i=gE();(Cr!==e||$r!==t)&&(Ya=null,Pl=Zt()+500,no(e,t));do try{i6();break}catch(l){pE(e,l)}while(1);hy(),im.current=i,tt=a,tr!==null?t=0:(Cr=null,$r=0,t=hr)}if(t!==0){if(t===2&&(a=Bg(e),a!==0&&(n=a,t=pv(e,a))),t===1)throw r=bu,no(e,0),Ki(e,n),gn(e,Zt()),r;if(t===6)Ki(e,n);else{if(a=e.current.alternate,!(n&30)&&!n6(a)&&(t=lm(e,n),t===2&&(i=Bg(e),i!==0&&(n=i,t=pv(e,i))),t===1))throw r=bu,no(e,0),Ki(e,n),gn(e,Zt()),r;switch(e.finishedWork=a,e.finishedLanes=n,t){case 0:case 1:throw Error(le(345));case 2:zs(e,cn,Ya);break;case 3:if(Ki(e,n),(n&130023424)===n&&(t=Py+500-Zt(),10<t)){if(Vf(e,0)!==0)break;if(a=e.suspendedLanes,(a&n)!==n){Jr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=Gg(zs.bind(null,e,cn,Ya),t);break}zs(e,cn,Ya);break;case 4:if(Ki(e,n),(n&4194240)===n)break;for(t=e.eventTimes,a=-1;0<n;){var o=31-ga(n);i=1<<o,o=t[o],o>a&&(a=o),n&=~i}if(n=a,n=Zt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*r6(n/1960))-n,10<n){e.timeoutHandle=Gg(zs.bind(null,e,cn,Ya),n);break}zs(e,cn,Ya);break;case 5:zs(e,cn,Ya);break;default:throw Error(le(329))}}}return gn(e,Zt()),e.callbackNode===r?hE.bind(null,e):null}function pv(e,t){var r=Vc;return e.current.memoizedState.isDehydrated&&(no(e,t).flags|=256),e=lm(e,t),e!==2&&(t=cn,cn=r,t!==null&&gv(t)),e}function gv(e){cn===null?cn=e:cn.push.apply(cn,e)}function n6(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var a=r[n],i=a.getSnapshot;a=a.value;try{if(!ya(i(),a))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Ki(e,t){for(t&=~Ey,t&=~Ch,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ga(t),n=1<<r;e[r]=-1,t&=~n}}function bj(e){if(tt&6)throw Error(le(327));gl();var t=Vf(e,0);if(!(t&1))return gn(e,Zt()),null;var r=lm(e,t);if(e.tag!==0&&r===2){var n=Bg(e);n!==0&&(t=n,r=pv(e,n))}if(r===1)throw r=bu,no(e,0),Ki(e,t),gn(e,Zt()),r;if(r===6)throw Error(le(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,zs(e,cn,Ya),gn(e,Zt()),null}function Oy(e,t){var r=tt;tt|=1;try{return e(t)}finally{tt=r,tt===0&&(Pl=Zt()+500,_h&&ks())}}function ho(e){Ji!==null&&Ji.tag===0&&!(tt&6)&&gl();var t=tt;tt|=1;var r=Xn.transition,n=dt;try{if(Xn.transition=null,dt=1,e)return e()}finally{dt=n,Xn.transition=r,tt=t,!(tt&6)&&ks()}}function Ay(){Nn=ll.current,At(ll)}function no(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,MD(r)),tr!==null)for(r=tr.return;r!==null;){var n=r;switch(dy(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Gf();break;case 3:Cl(),At(hn),At(qr),by();break;case 5:yy(n);break;case 4:Cl();break;case 13:At(zt);break;case 19:At(zt);break;case 10:py(n.type._context);break;case 22:case 23:Ay()}r=r.return}if(Cr=e,tr=e=ds(e.current,null),$r=Nn=t,hr=0,bu=null,Ey=Ch=mo=0,cn=Vc=null,Gs!==null){for(t=0;t<Gs.length;t++)if(r=Gs[t],n=r.interleaved,n!==null){r.interleaved=null;var a=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=a,n.next=o}r.pending=n}Gs=null}return e}function pE(e,t){do{var r=tr;try{if(hy(),Nf.current=am,nm){for(var n=Ft.memoizedState;n!==null;){var a=n.queue;a!==null&&(a.pending=null),n=n.next}nm=!1}if(fo=0,Nr=dr=Ft=null,Uc=!1,vu=0,Cy.current=null,r===null||r.return===null){hr=1,bu=t,tr=null;break}e:{var i=e,o=r.return,l=r,c=t;if(t=$r,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,d=l,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var h=d.alternate;h?(d.updateQueue=h.updateQueue,d.memoizedState=h.memoizedState,d.lanes=h.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=oj(o);if(p!==null){p.flags&=-257,lj(p,o,l,i,t),p.mode&1&&sj(i,u,t),t=p,c=u;var g=t.updateQueue;if(g===null){var x=new Set;x.add(c),t.updateQueue=x}else g.add(c);break e}else{if(!(t&1)){sj(i,u,t),Ty();break e}c=Error(le(426))}}else if(Dt&&l.mode&1){var y=oj(o);if(y!==null){!(y.flags&65536)&&(y.flags|=256),lj(y,o,l,i,t),fy(El(c,l));break e}}i=c=El(c,l),hr!==4&&(hr=2),Vc===null?Vc=[i]:Vc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var v=ZC(i,c,t);ej(i,v);break e;case 1:l=c;var b=i.type,w=i.stateNode;if(!(i.flags&128)&&(typeof b.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(cs===null||!cs.has(w)))){i.flags|=65536,t&=-t,i.lanes|=t;var j=JC(i,l,t);ej(i,j);break e}}i=i.return}while(i!==null)}xE(r)}catch(N){t=N,tr===r&&r!==null&&(tr=r=r.return);continue}break}while(1)}function gE(){var e=im.current;return im.current=am,e===null?am:e}function Ty(){(hr===0||hr===3||hr===2)&&(hr=4),Cr===null||!(mo&268435455)&&!(Ch&268435455)||Ki(Cr,$r)}function lm(e,t){var r=tt;tt|=2;var n=gE();(Cr!==e||$r!==t)&&(Ya=null,no(e,t));do try{a6();break}catch(a){pE(e,a)}while(1);if(hy(),tt=r,im.current=n,tr!==null)throw Error(le(261));return Cr=null,$r=0,hr}function a6(){for(;tr!==null;)vE(tr)}function i6(){for(;tr!==null&&!OM();)vE(tr)}function vE(e){var t=bE(e.alternate,e,Nn);e.memoizedProps=e.pendingProps,t===null?xE(e):tr=t,Cy.current=null}function xE(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=ZD(r,t),r!==null){r.flags&=32767,tr=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{hr=6,tr=null;return}}else if(r=QD(r,t,Nn),r!==null){tr=r;return}if(t=t.sibling,t!==null){tr=t;return}tr=t=e}while(t!==null);hr===0&&(hr=5)}function zs(e,t,r){var n=dt,a=Xn.transition;try{Xn.transition=null,dt=1,s6(e,t,r,n)}finally{Xn.transition=a,dt=n}return null}function s6(e,t,r,n){do gl();while(Ji!==null);if(tt&6)throw Error(le(327));r=e.finishedWork;var a=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(le(177));e.callbackNode=null,e.callbackPriority=0;var i=r.lanes|r.childLanes;if(FM(e,i),e===Cr&&(tr=Cr=null,$r=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||Ud||(Ud=!0,wE(Wf,function(){return gl(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=Xn.transition,Xn.transition=null;var o=dt;dt=1;var l=tt;tt|=4,Cy.current=null,e6(e,r),fE(r,e),kD(Kg),qf=!!Hg,Kg=Hg=null,e.current=r,t6(r),AM(),tt=l,dt=o,Xn.transition=i}else e.current=r;if(Ud&&(Ud=!1,Ji=e,om=a),i=e.pendingLanes,i===0&&(cs=null),DM(r.stateNode),gn(e,Zt()),t!==null)for(n=e.onRecoverableError,r=0;r<t.length;r++)a=t[r],n(a.value,{componentStack:a.stack,digest:a.digest});if(sm)throw sm=!1,e=mv,mv=null,e;return om&1&&e.tag!==0&&gl(),i=e.pendingLanes,i&1?e===hv?qc++:(qc=0,hv=e):qc=0,ks(),null}function gl(){if(Ji!==null){var e=Zk(om),t=Xn.transition,r=dt;try{if(Xn.transition=null,dt=16>e?16:e,Ji===null)var n=!1;else{if(e=Ji,Ji=null,om=0,tt&6)throw Error(le(331));var a=tt;for(tt|=4,_e=e.current;_e!==null;){var i=_e,o=i.child;if(_e.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(_e=u;_e!==null;){var d=_e;switch(d.tag){case 0:case 11:case 15:Wc(8,d,i)}var f=d.child;if(f!==null)f.return=d,_e=f;else for(;_e!==null;){d=_e;var h=d.sibling,p=d.return;if(cE(d),d===u){_e=null;break}if(h!==null){h.return=p,_e=h;break}_e=p}}}var g=i.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var y=x.sibling;x.sibling=null,x=y}while(x!==null)}}_e=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,_e=o;else e:for(;_e!==null;){if(i=_e,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wc(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,_e=v;break e}_e=i.return}}var b=e.current;for(_e=b;_e!==null;){o=_e;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,_e=w;else e:for(o=b;_e!==null;){if(l=_e,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:kh(9,l)}}catch(N){Ht(l,l.return,N)}if(l===o){_e=null;break e}var j=l.sibling;if(j!==null){j.return=l.return,_e=j;break e}_e=l.return}}if(tt=a,ks(),Ia&&typeof Ia.onPostCommitFiberRoot=="function")try{Ia.onPostCommitFiberRoot(xh,e)}catch{}n=!0}return n}finally{dt=r,Xn.transition=t}}return!1}function wj(e,t,r){t=El(r,t),t=ZC(e,t,1),e=ls(e,t,1),t=Jr(),e!==null&&(Uu(e,1,t),gn(e,t))}function Ht(e,t,r){if(e.tag===3)wj(e,e,r);else for(;t!==null;){if(t.tag===3){wj(t,e,r);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(cs===null||!cs.has(n))){e=El(r,e),e=JC(t,e,1),t=ls(t,e,1),e=Jr(),t!==null&&(Uu(t,1,e),gn(t,e));break}}t=t.return}}function o6(e,t,r){var n=e.pingCache;n!==null&&n.delete(t),t=Jr(),e.pingedLanes|=e.suspendedLanes&r,Cr===e&&($r&r)===r&&(hr===4||hr===3&&($r&130023424)===$r&&500>Zt()-Py?no(e,0):Ey|=r),gn(e,t)}function yE(e,t){t===0&&(e.mode&1?(t=Td,Td<<=1,!(Td&130023424)&&(Td=4194304)):t=1);var r=Jr();e=mi(e,t),e!==null&&(Uu(e,t,r),gn(e,r))}function l6(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),yE(e,r)}function c6(e,t){var r=0;switch(e.tag){case 13:var n=e.stateNode,a=e.memoizedState;a!==null&&(r=a.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(le(314))}n!==null&&n.delete(t),yE(e,r)}var bE;bE=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||hn.current)dn=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return dn=!1,XD(e,t,r);dn=!!(e.flags&131072)}else dn=!1,Dt&&t.flags&1048576&&NC(t,Zf,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;kf(e,t),e=t.pendingProps;var a=Nl(t,qr.current);pl(t,r),a=jy(null,t,n,e,a,r);var i=_y();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pn(n)?(i=!0,Xf(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,vy(t),a.updater=Sh,t.stateNode=a,a._reactInternals=t,rv(t,n,e,r),t=iv(null,t,n,!0,i,r)):(t.tag=0,Dt&&i&&uy(t),Xr(null,t,a,r),t=t.child),t;case 16:n=t.elementType;e:{switch(kf(e,t),e=t.pendingProps,a=n._init,n=a(n._payload),t.type=n,a=t.tag=d6(n),e=ca(n,e),a){case 0:t=av(null,t,n,e,r);break e;case 1:t=dj(null,t,n,e,r);break e;case 11:t=cj(null,t,n,e,r);break e;case 14:t=uj(null,t,n,ca(n.type,e),r);break e}throw Error(le(306,n,""))}return t;case 0:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ca(n,a),av(e,t,n,a,r);case 1:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ca(n,a),dj(e,t,n,a,r);case 3:e:{if(nE(t),e===null)throw Error(le(387));n=t.pendingProps,i=t.memoizedState,a=i.element,OC(e,t),tm(t,n,null,r);var o=t.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=El(Error(le(423)),t),t=fj(e,t,n,r,a);break e}else if(n!==a){a=El(Error(le(424)),t),t=fj(e,t,n,r,a);break e}else for(Cn=os(t.stateNode.containerInfo.firstChild),En=t,Dt=!0,fa=null,r=EC(t,null,n,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Sl(),n===a){t=hi(e,t,r);break e}Xr(e,t,n,r)}t=t.child}return t;case 5:return AC(t),e===null&&Jg(t),n=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,Yg(n,a)?o=null:i!==null&&Yg(n,i)&&(t.flags|=32),rE(e,t),Xr(e,t,o,r),t.child;case 6:return e===null&&Jg(t),null;case 13:return aE(e,t,r);case 4:return xy(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=kl(t,null,n,r):Xr(e,t,n,r),t.child;case 11:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ca(n,a),cj(e,t,n,a,r);case 7:return Xr(e,t,t.pendingProps,r),t.child;case 8:return Xr(e,t,t.pendingProps.children,r),t.child;case 12:return Xr(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(n=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,St(Jf,n._currentValue),n._currentValue=o,i!==null)if(ya(i.value,o)){if(i.children===a.children&&!hn.current){t=hi(e,t,r);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=oi(-1,r&-r),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var d=u.pending;d===null?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}i.lanes|=r,c=i.alternate,c!==null&&(c.lanes|=r),ev(i.return,r,t),l.lanes|=r;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(le(341));o.lanes|=r,l=o.alternate,l!==null&&(l.lanes|=r),ev(o,r,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Xr(e,t,a.children,r),t=t.child}return t;case 9:return a=t.type,n=t.pendingProps.children,pl(t,r),a=Zn(a),n=n(a),t.flags|=1,Xr(e,t,n,r),t.child;case 14:return n=t.type,a=ca(n,t.pendingProps),a=ca(n.type,a),uj(e,t,n,a,r);case 15:return eE(e,t,t.type,t.pendingProps,r);case 17:return n=t.type,a=t.pendingProps,a=t.elementType===n?a:ca(n,a),kf(e,t),t.tag=1,pn(n)?(e=!0,Xf(t)):e=!1,pl(t,r),QC(t,n,a),rv(t,n,a,r),iv(null,t,n,!0,e,r);case 19:return iE(e,t,r);case 22:return tE(e,t,r)}throw Error(le(156,t.tag))};function wE(e,t){return Yk(e,t)}function u6(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kn(e,t,r,n){return new u6(e,t,r,n)}function My(e){return e=e.prototype,!(!e||!e.isReactComponent)}function d6(e){if(typeof e=="function")return My(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Zx)return 11;if(e===Jx)return 14}return 2}function ds(e,t){var r=e.alternate;return r===null?(r=Kn(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Pf(e,t,r,n,a,i){var o=2;if(n=e,typeof e=="function")My(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Zo:return ao(r.children,a,i,t);case Qx:o=8,a|=8;break;case kg:return e=Kn(12,r,t,a|2),e.elementType=kg,e.lanes=i,e;case Cg:return e=Kn(13,r,t,a),e.elementType=Cg,e.lanes=i,e;case Eg:return e=Kn(19,r,t,a),e.elementType=Eg,e.lanes=i,e;case Ak:return Eh(r,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Pk:o=10;break e;case Ok:o=9;break e;case Zx:o=11;break e;case Jx:o=14;break e;case Bi:o=16,n=null;break e}throw Error(le(130,e==null?e:typeof e,""))}return t=Kn(o,r,t,a),t.elementType=e,t.type=n,t.lanes=i,t}function ao(e,t,r,n){return e=Kn(7,e,n,t),e.lanes=r,e}function Eh(e,t,r,n){return e=Kn(22,e,n,t),e.elementType=Ak,e.lanes=r,e.stateNode={isHidden:!1},e}function C0(e,t,r){return e=Kn(6,e,null,t),e.lanes=r,e}function E0(e,t,r){return t=Kn(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function f6(e,t,r,n,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=l0(0),this.expirationTimes=l0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=l0(0),this.identifierPrefix=n,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Dy(e,t,r,n,a,i,o,l,c){return e=new f6(e,t,r,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=Kn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},vy(i),e}function m6(e,t,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qo,key:n==null?null:""+n,children:e,containerInfo:t,implementation:r}}function jE(e){if(!e)return vs;e=e._reactInternals;e:{if(ko(e)!==e||e.tag!==1)throw Error(le(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(le(171))}if(e.tag===1){var r=e.type;if(pn(r))return jC(e,r,t)}return t}function _E(e,t,r,n,a,i,o,l,c){return e=Dy(r,n,!0,e,a,i,o,l,c),e.context=jE(null),r=e.current,n=Jr(),a=us(r),i=oi(n,a),i.callback=t??null,ls(r,i,a),e.current.lanes=a,Uu(e,a,n),gn(e,n),e}function Ph(e,t,r,n){var a=t.current,i=Jr(),o=us(a);return r=jE(r),t.context===null?t.context=r:t.pendingContext=r,t=oi(i,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=ls(a,t,o),e!==null&&(va(e,a,o,i),_f(e,a,o)),o}function cm(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function jj(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function $y(e,t){jj(e,t),(e=e.alternate)&&jj(e,t)}function h6(){return null}var NE=typeof reportError=="function"?reportError:function(e){console.error(e)};function Iy(e){this._internalRoot=e}Oh.prototype.render=Iy.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(le(409));Ph(e,t,null,null)};Oh.prototype.unmount=Iy.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ho(function(){Ph(null,e,null,null)}),t[fi]=null}};function Oh(e){this._internalRoot=e}Oh.prototype.unstable_scheduleHydration=function(e){if(e){var t=tC();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Hi.length&&t!==0&&t<Hi[r].priority;r++);Hi.splice(r,0,e),r===0&&nC(e)}};function Ly(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Ah(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function _j(){}function p6(e,t,r,n,a){if(a){if(typeof n=="function"){var i=n;n=function(){var u=cm(o);i.call(u)}}var o=_E(t,n,e,0,null,!1,!1,"",_j);return e._reactRootContainer=o,e[fi]=o.current,fu(e.nodeType===8?e.parentNode:e),ho(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof n=="function"){var l=n;n=function(){var u=cm(c);l.call(u)}}var c=Dy(e,0,!1,null,null,!1,!1,"",_j);return e._reactRootContainer=c,e[fi]=c.current,fu(e.nodeType===8?e.parentNode:e),ho(function(){Ph(t,c,r,n)}),c}function Th(e,t,r,n,a){var i=r._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=cm(o);l.call(c)}}Ph(t,o,e,a)}else o=p6(r,t,e,a,n);return cm(o)}Jk=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Pc(t.pendingLanes);r!==0&&(ry(t,r|1),gn(t,Zt()),!(tt&6)&&(Pl=Zt()+500,ks()))}break;case 13:ho(function(){var n=mi(e,1);if(n!==null){var a=Jr();va(n,e,1,a)}}),$y(e,1)}};ny=function(e){if(e.tag===13){var t=mi(e,134217728);if(t!==null){var r=Jr();va(t,e,134217728,r)}$y(e,134217728)}};eC=function(e){if(e.tag===13){var t=us(e),r=mi(e,t);if(r!==null){var n=Jr();va(r,e,t,n)}$y(e,t)}};tC=function(){return dt};rC=function(e,t){var r=dt;try{return dt=e,t()}finally{dt=r}};Rg=function(e,t,r){switch(t){case"input":if(Ag(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var n=r[t];if(n!==e&&n.form===e.form){var a=jh(n);if(!a)throw Error(le(90));Mk(n),Ag(n,a)}}}break;case"textarea":$k(e,r);break;case"select":t=r.value,t!=null&&dl(e,!!r.multiple,t,!1)}};Uk=Oy;Wk=ho;var g6={usingClientEntryPoint:!1,Events:[Vu,rl,jh,Fk,Bk,Oy]},pc={findFiberByHostInstance:Ys,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},v6={bundleType:pc.bundleType,version:pc.version,rendererPackageName:pc.rendererPackageName,rendererConfig:pc.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ki.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Hk(e),e===null?null:e.stateNode},findFiberByHostInstance:pc.findFiberByHostInstance||h6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wd.isDisabled&&Wd.supportsFiber)try{xh=Wd.inject(v6),Ia=Wd}catch{}}Dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=g6;Dn.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ly(t))throw Error(le(200));return m6(e,t,null,r)};Dn.createRoot=function(e,t){if(!Ly(e))throw Error(le(299));var r=!1,n="",a=NE;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Dy(e,1,!1,null,null,r,!1,n,a),e[fi]=t.current,fu(e.nodeType===8?e.parentNode:e),new Iy(t)};Dn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(le(188)):(e=Object.keys(e).join(","),Error(le(268,e)));return e=Hk(t),e=e===null?null:e.stateNode,e};Dn.flushSync=function(e){return ho(e)};Dn.hydrate=function(e,t,r){if(!Ah(t))throw Error(le(200));return Th(null,e,t,!0,r)};Dn.hydrateRoot=function(e,t,r){if(!Ly(e))throw Error(le(405));var n=r!=null&&r.hydratedSources||null,a=!1,i="",o=NE;if(r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),t=_E(t,null,e,1,r??null,a,!1,i,o),e[fi]=t.current,fu(e),n)for(e=0;e<n.length;e++)r=n[e],a=r._getVersion,a=a(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,a]:t.mutableSourceEagerHydrationData.push(r,a);return new Oh(t)};Dn.render=function(e,t,r){if(!Ah(t))throw Error(le(200));return Th(null,e,t,!1,r)};Dn.unmountComponentAtNode=function(e){if(!Ah(e))throw Error(le(40));return e._reactRootContainer?(ho(function(){Th(null,null,e,!1,function(){e._reactRootContainer=null,e[fi]=null})}),!0):!1};Dn.unstable_batchedUpdates=Oy;Dn.unstable_renderSubtreeIntoContainer=function(e,t,r,n){if(!Ah(r))throw Error(le(200));if(e==null||e._reactInternals===void 0)throw Error(le(38));return Th(e,t,r,!1,n)};Dn.version="18.3.1-next-f1338f8080-20240426";function SE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(SE)}catch(e){console.error(e)}}SE(),Sk.exports=Dn;var Da=Sk.exports,Nj=Da;Ng.createRoot=Nj.createRoot,Ng.hydrateRoot=Nj.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wu(){return wu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wu.apply(this,arguments)}var es;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(es||(es={}));const Sj="popstate";function x6(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return vv("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:um(a)}return b6(t,r,null,e)}function Jt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function kE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function y6(){return Math.random().toString(36).substr(2,8)}function kj(e,t){return{usr:e.state,key:e.key,idx:t}}function vv(e,t,r,n){return r===void 0&&(r=null),wu({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Wl(t):t,{state:r,key:t&&t.key||n||y6()})}function um(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Wl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function b6(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=es.Pop,c=null,u=d();u==null&&(u=0,o.replaceState(wu({},o.state,{idx:u}),""));function d(){return(o.state||{idx:null}).idx}function f(){l=es.Pop;let y=d(),v=y==null?null:y-u;u=y,c&&c({action:l,location:x.location,delta:v})}function h(y,v){l=es.Push;let b=vv(x.location,y,v);r&&r(b,y),u=d()+1;let w=kj(b,u),j=x.createHref(b);try{o.pushState(w,"",j)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;a.location.assign(j)}i&&c&&c({action:l,location:x.location,delta:1})}function p(y,v){l=es.Replace;let b=vv(x.location,y,v);r&&r(b,y),u=d();let w=kj(b,u),j=x.createHref(b);o.replaceState(w,"",j),i&&c&&c({action:l,location:x.location,delta:0})}function g(y){let v=a.location.origin!=="null"?a.location.origin:a.location.href,b=typeof y=="string"?y:um(y);return b=b.replace(/ $/,"%20"),Jt(v,"No window.location.(origin|href) available to create URL for href: "+b),new URL(b,v)}let x={get action(){return l},get location(){return e(a,o)},listen(y){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(Sj,f),c=y,()=>{a.removeEventListener(Sj,f),c=null}},createHref(y){return t(a,y)},createURL:g,encodeLocation(y){let v=g(y);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:h,replace:p,go(y){return o.go(y)}};return x}var Cj;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Cj||(Cj={}));function w6(e,t,r){return r===void 0&&(r="/"),j6(e,t,r,!1)}function j6(e,t,r,n){let a=typeof t=="string"?Wl(t):t,i=Ry(a.pathname||"/",r);if(i==null)return null;let o=CE(e);_6(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=D6(i);l=T6(o[c],u,n)}return l}function CE(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Jt(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=fs([n,c.relativePath]),d=r.concat(c);i.children&&i.children.length>0&&(Jt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),CE(i.children,t,d,u)),!(i.path==null&&!i.index)&&t.push({path:u,score:O6(u,i.index),routesMeta:d})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of EE(i.path))a(i,o,c)}),t}function EE(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=EE(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function _6(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:A6(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const N6=/^:[\w-]+$/,S6=3,k6=2,C6=1,E6=10,P6=-2,Ej=e=>e==="*";function O6(e,t){let r=e.split("/"),n=r.length;return r.some(Ej)&&(n+=P6),t&&(n+=k6),r.filter(a=>!Ej(a)).reduce((a,i)=>a+(N6.test(i)?S6:i===""?C6:E6),n)}function A6(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function T6(e,t,r){r===void 0&&(r=!1);let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,d=i==="/"?t:t.slice(i.length)||"/",f=Pj({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},d),h=c.route;if(!f&&u&&r&&!n[n.length-1].route.index&&(f=Pj({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},d)),!f)return null;Object.assign(a,f.params),o.push({params:a,pathname:fs([i,f.pathname]),pathnameBase:R6(fs([i,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(i=fs([i,f.pathnameBase]))}return o}function Pj(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=M6(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((u,d,f)=>{let{paramName:h,isOptional:p}=d;if(h==="*"){let x=l[f]||"";o=i.slice(0,i.length-x.length).replace(/(.)\/+$/,"$1")}const g=l[f];return p&&!g?u[h]=void 0:u[h]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:e}}function M6(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),kE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function D6(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return kE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Ry(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function $6(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?Wl(e):e;return{pathname:r?r.startsWith("/")?r:I6(r,t):t,search:z6(n),hash:F6(a)}}function I6(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function P0(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function L6(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function zy(e,t){let r=L6(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Fy(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=Wl(e):(a=wu({},e),Jt(!a.pathname||!a.pathname.includes("?"),P0("?","pathname","search",a)),Jt(!a.pathname||!a.pathname.includes("#"),P0("#","pathname","hash",a)),Jt(!a.search||!a.search.includes("#"),P0("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let f=t.length-1;if(!n&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;a.pathname=h.join("/")}l=f>=0?t[f]:"/"}let c=$6(a,l),u=o&&o!=="/"&&o.endsWith("/"),d=(i||o===".")&&r.endsWith("/");return!c.pathname.endsWith("/")&&(u||d)&&(c.pathname+="/"),c}const fs=e=>e.join("/").replace(/\/\/+/g,"/"),R6=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),z6=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,F6=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function B6(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const PE=["post","put","patch","delete"];new Set(PE);const U6=["get",...PE];new Set(U6);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ju.apply(this,arguments)}const By=m.createContext(null),W6=m.createContext(null),Cs=m.createContext(null),Mh=m.createContext(null),Ci=m.createContext({outlet:null,matches:[],isDataRoute:!1}),OE=m.createContext(null);function V6(e,t){let{relative:r}=t===void 0?{}:t;Vl()||Jt(!1);let{basename:n,navigator:a}=m.useContext(Cs),{hash:i,pathname:o,search:l}=TE(e,{relative:r}),c=o;return n!=="/"&&(c=o==="/"?n:fs([n,o])),a.createHref({pathname:c,search:l,hash:i})}function Vl(){return m.useContext(Mh)!=null}function Es(){return Vl()||Jt(!1),m.useContext(Mh).location}function AE(e){m.useContext(Cs).static||m.useLayoutEffect(e)}function Ei(){let{isDataRoute:e}=m.useContext(Ci);return e?a$():q6()}function q6(){Vl()||Jt(!1);let e=m.useContext(By),{basename:t,future:r,navigator:n}=m.useContext(Cs),{matches:a}=m.useContext(Ci),{pathname:i}=Es(),o=JSON.stringify(zy(a,r.v7_relativeSplatPath)),l=m.useRef(!1);return AE(()=>{l.current=!0}),m.useCallback(function(u,d){if(d===void 0&&(d={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let f=Fy(u,JSON.parse(o),i,d.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:fs([t,f.pathname])),(d.replace?n.replace:n.push)(f,d.state,d)},[t,n,o,i,e])}function H6(){let{matches:e}=m.useContext(Ci),t=e[e.length-1];return t?t.params:{}}function TE(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=m.useContext(Cs),{matches:a}=m.useContext(Ci),{pathname:i}=Es(),o=JSON.stringify(zy(a,n.v7_relativeSplatPath));return m.useMemo(()=>Fy(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function K6(e,t){return Y6(e,t)}function Y6(e,t,r,n){Vl()||Jt(!1);let{navigator:a}=m.useContext(Cs),{matches:i}=m.useContext(Ci),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Es(),d;if(t){var f;let y=typeof t=="string"?Wl(t):t;c==="/"||(f=y.pathname)!=null&&f.startsWith(c)||Jt(!1),d=y}else d=u;let h=d.pathname||"/",p=h;if(c!=="/"){let y=c.replace(/^\//,"").split("/");p="/"+h.replace(/^\//,"").split("/").slice(y.length).join("/")}let g=w6(e,{pathname:p}),x=J6(g&&g.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:fs([c,a.encodeLocation?a.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?c:fs([c,a.encodeLocation?a.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,r,n);return t&&x?m.createElement(Mh.Provider,{value:{location:ju({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:es.Pop}},x):x}function G6(){let e=n$(),t=B6(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},i=null;return m.createElement(m.Fragment,null,m.createElement("h2",null,"Unexpected Application Error!"),m.createElement("h3",{style:{fontStyle:"italic"}},t),r?m.createElement("pre",{style:a},r):null,i)}const X6=m.createElement(G6,null);class Q6 extends m.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?m.createElement(Ci.Provider,{value:this.props.routeContext},m.createElement(OE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Z6(e){let{routeContext:t,match:r,children:n}=e,a=m.useContext(By);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),m.createElement(Ci.Provider,{value:t},n)}function J6(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let d=o.findIndex(f=>f.route.id&&(l==null?void 0:l[f.route.id])!==void 0);d>=0||Jt(!1),o=o.slice(0,Math.min(o.length,d+1))}let c=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let d=0;d<o.length;d++){let f=o[d];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=d),f.route.id){let{loaderData:h,errors:p}=r,g=f.route.loader&&h[f.route.id]===void 0&&(!p||p[f.route.id]===void 0);if(f.route.lazy||g){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((d,f,h)=>{let p,g=!1,x=null,y=null;r&&(p=l&&f.route.id?l[f.route.id]:void 0,x=f.route.errorElement||X6,c&&(u<0&&h===0?(i$("route-fallback",!1),g=!0,y=null):u===h&&(g=!0,y=f.route.hydrateFallbackElement||null)));let v=t.concat(o.slice(0,h+1)),b=()=>{let w;return p?w=x:g?w=y:f.route.Component?w=m.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=d,m.createElement(Z6,{match:f,routeContext:{outlet:d,matches:v,isDataRoute:r!=null},children:w})};return r&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?m.createElement(Q6,{location:r.location,revalidation:r.revalidation,component:x,error:p,children:b(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):b()},null)}var ME=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ME||{}),dm=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(dm||{});function e$(e){let t=m.useContext(By);return t||Jt(!1),t}function t$(e){let t=m.useContext(W6);return t||Jt(!1),t}function r$(e){let t=m.useContext(Ci);return t||Jt(!1),t}function DE(e){let t=r$(),r=t.matches[t.matches.length-1];return r.route.id||Jt(!1),r.route.id}function n$(){var e;let t=m.useContext(OE),r=t$(dm.UseRouteError),n=DE(dm.UseRouteError);return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function a$(){let{router:e}=e$(ME.UseNavigateStable),t=DE(dm.UseNavigateStable),r=m.useRef(!1);return AE(()=>{r.current=!0}),m.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ju({fromRouteId:t},i)))},[e,t])}const Oj={};function i$(e,t,r){!t&&!Oj[e]&&(Oj[e]=!0)}function s$(e,t){e==null||e.v7_startTransition,(e==null?void 0:e.v7_relativeSplatPath)===void 0&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}function o$(e){let{to:t,replace:r,state:n,relative:a}=e;Vl()||Jt(!1);let{future:i,static:o}=m.useContext(Cs),{matches:l}=m.useContext(Ci),{pathname:c}=Es(),u=Ei(),d=Fy(t,zy(l,i.v7_relativeSplatPath),c,a==="path"),f=JSON.stringify(d);return m.useEffect(()=>u(JSON.parse(f),{replace:r,state:n,relative:a}),[u,f,a,r,n]),null}function yr(e){Jt(!1)}function l$(e){let{basename:t="/",children:r=null,location:n,navigationType:a=es.Pop,navigator:i,static:o=!1,future:l}=e;Vl()&&Jt(!1);let c=t.replace(/^\/*/,"/"),u=m.useMemo(()=>({basename:c,navigator:i,static:o,future:ju({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof n=="string"&&(n=Wl(n));let{pathname:d="/",search:f="",hash:h="",state:p=null,key:g="default"}=n,x=m.useMemo(()=>{let y=Ry(d,c);return y==null?null:{location:{pathname:y,search:f,hash:h,state:p,key:g},navigationType:a}},[c,d,f,h,p,g,a]);return x==null?null:m.createElement(Cs.Provider,{value:u},m.createElement(Mh.Provider,{children:r,value:x}))}function Aj(e){let{children:t,location:r}=e;return K6(xv(t),r)}new Promise(()=>{});function xv(e,t){t===void 0&&(t=[]);let r=[];return m.Children.forEach(e,(n,a)=>{if(!m.isValidElement(n))return;let i=[...t,a];if(n.type===m.Fragment){r.push.apply(r,xv(n.props.children,i));return}n.type!==yr&&Jt(!1),!n.props.index||!n.props.children||Jt(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=xv(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yv(){return yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yv.apply(this,arguments)}function c$(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function u$(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function d$(e,t){return e.button===0&&(!t||t==="_self")&&!u$(e)}const f$=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],m$="6";try{window.__reactRouterVersion=m$}catch{}const h$="startTransition",Tj=zf[h$];function p$(e){let{basename:t,children:r,future:n,window:a}=e,i=m.useRef();i.current==null&&(i.current=x6({window:a,v5Compat:!0}));let o=i.current,[l,c]=m.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},d=m.useCallback(f=>{u&&Tj?Tj(()=>c(f)):c(f)},[c,u]);return m.useLayoutEffect(()=>o.listen(d),[o,d]),m.useEffect(()=>s$(n),[n]),m.createElement(l$,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const g$=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",v$=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Mj=m.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=t,h=c$(t,f$),{basename:p}=m.useContext(Cs),g,x=!1;if(typeof u=="string"&&v$.test(u)&&(g=u,g$))try{let w=new URL(window.location.href),j=u.startsWith("//")?new URL(w.protocol+u):new URL(u),N=Ry(j.pathname,p);j.origin===w.origin&&N!=null?u=N+j.search+j.hash:x=!0}catch{}let y=V6(u,{relative:a}),v=x$(u,{replace:o,state:l,target:c,preventScrollReset:d,relative:a,viewTransition:f});function b(w){n&&n(w),w.defaultPrevented||v(w)}return m.createElement("a",yv({},h,{href:g||y,onClick:x||i?n:b,ref:r,target:c}))});var Dj;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Dj||(Dj={}));var $j;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})($j||($j={}));function x$(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Ei(),u=Es(),d=TE(e,{relative:o});return m.useCallback(f=>{if(d$(f,r)){f.preventDefault();let h=n!==void 0?n:um(u)===um(d);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,d,n,a,r,e,i,o,l])}let y$={data:""},b$=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||y$,w$=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,j$=/\/\*[^]*?\*\/|  +/g,Ij=/\n+/g,Yi=(e,t)=>{let r="",n="",a="";for(let i in e){let o=e[i];i[0]=="@"?i[1]=="i"?r=i+" "+o+";":n+=i[1]=="f"?Yi(o,i):i+"{"+Yi(o,i[1]=="k"?"":t)+"}":typeof o=="object"?n+=Yi(o,t?t.replace(/([^,])+/g,l=>i.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):i):o!=null&&(i=/^--/.test(i)?i:i.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Yi.p?Yi.p(i,o):i+":"+o+";")}return r+(t&&a?t+"{"+a+"}":a)+n},Ha={},$E=e=>{if(typeof e=="object"){let t="";for(let r in e)t+=r+$E(e[r]);return t}return e},_$=(e,t,r,n,a)=>{let i=$E(e),o=Ha[i]||(Ha[i]=(c=>{let u=0,d=11;for(;u<c.length;)d=101*d+c.charCodeAt(u++)>>>0;return"go"+d})(i));if(!Ha[o]){let c=i!==e?e:(u=>{let d,f,h=[{}];for(;d=w$.exec(u.replace(j$,""));)d[4]?h.shift():d[3]?(f=d[3].replace(Ij," ").trim(),h.unshift(h[0][f]=h[0][f]||{})):h[0][d[1]]=d[2].replace(Ij," ").trim();return h[0]})(e);Ha[o]=Yi(a?{["@keyframes "+o]:c}:c,r?"":"."+o)}let l=r&&Ha.g?Ha.g:null;return r&&(Ha.g=Ha[o]),((c,u,d,f)=>{f?u.data=u.data.replace(f,c):u.data.indexOf(c)===-1&&(u.data=d?c+u.data:u.data+c)})(Ha[o],t,n,l),o},N$=(e,t,r)=>e.reduce((n,a,i)=>{let o=t[i];if(o&&o.call){let l=o(r),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Yi(l,""):l===!1?"":l}return n+a+(o??"")},"");function Dh(e){let t=this||{},r=e.call?e(t.p):e;return _$(r.unshift?r.raw?N$(r,[].slice.call(arguments,1),t.p):r.reduce((n,a)=>Object.assign(n,a&&a.call?a(t.p):a),{}):r,b$(t.target),t.g,t.o,t.k)}let IE,bv,wv;Dh.bind({g:1});let pi=Dh.bind({k:1});function S$(e,t,r,n){Yi.p=t,IE=e,bv=r,wv=n}function Ps(e,t){let r=this||{};return function(){let n=arguments;function a(i,o){let l=Object.assign({},i),c=l.className||a.className;r.p=Object.assign({theme:bv&&bv()},l),r.o=/ *go\d+/.test(c),l.className=Dh.apply(r,n)+(c?" "+c:""),t&&(l.ref=o);let u=e;return e[0]&&(u=l.as||e,delete l.as),wv&&u[0]&&wv(l),IE(u,l)}return t?t(a):a}}var k$=e=>typeof e=="function",fm=(e,t)=>k$(e)?e(t):e,C$=(()=>{let e=0;return()=>(++e).toString()})(),LE=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),E$=20,RE=(e,t)=>{switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,E$)};case 1:return{...e,toasts:e.toasts.map(i=>i.id===t.toast.id?{...i,...t.toast}:i)};case 2:let{toast:r}=t;return RE(e,{type:e.toasts.find(i=>i.id===r.id)?1:0,toast:r});case 3:let{toastId:n}=t;return{...e,toasts:e.toasts.map(i=>i.id===n||n===void 0?{...i,dismissed:!0,visible:!1}:i)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(i=>i.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let a=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(i=>({...i,pauseDuration:i.pauseDuration+a}))}}},Of=[],Qs={toasts:[],pausedAt:void 0},Co=e=>{Qs=RE(Qs,e),Of.forEach(t=>{t(Qs)})},P$={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},O$=(e={})=>{let[t,r]=m.useState(Qs),n=m.useRef(Qs);m.useEffect(()=>(n.current!==Qs&&r(Qs),Of.push(r),()=>{let i=Of.indexOf(r);i>-1&&Of.splice(i,1)}),[]);let a=t.toasts.map(i=>{var o,l,c;return{...e,...e[i.type],...i,removeDelay:i.removeDelay||((o=e[i.type])==null?void 0:o.removeDelay)||(e==null?void 0:e.removeDelay),duration:i.duration||((l=e[i.type])==null?void 0:l.duration)||(e==null?void 0:e.duration)||P$[i.type],style:{...e.style,...(c=e[i.type])==null?void 0:c.style,...i.style}}});return{...t,toasts:a}},A$=(e,t="blank",r)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...r,id:(r==null?void 0:r.id)||C$()}),Hu=e=>(t,r)=>{let n=A$(t,e,r);return Co({type:2,toast:n}),n.id},Yt=(e,t)=>Hu("blank")(e,t);Yt.error=Hu("error");Yt.success=Hu("success");Yt.loading=Hu("loading");Yt.custom=Hu("custom");Yt.dismiss=e=>{Co({type:3,toastId:e})};Yt.remove=e=>Co({type:4,toastId:e});Yt.promise=(e,t,r)=>{let n=Yt.loading(t.loading,{...r,...r==null?void 0:r.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let i=t.success?fm(t.success,a):void 0;return i?Yt.success(i,{id:n,...r,...r==null?void 0:r.success}):Yt.dismiss(n),a}).catch(a=>{let i=t.error?fm(t.error,a):void 0;i?Yt.error(i,{id:n,...r,...r==null?void 0:r.error}):Yt.dismiss(n)}),e};var T$=(e,t)=>{Co({type:1,toast:{id:e,height:t}})},M$=()=>{Co({type:5,time:Date.now()})},Hc=new Map,D$=1e3,$$=(e,t=D$)=>{if(Hc.has(e))return;let r=setTimeout(()=>{Hc.delete(e),Co({type:4,toastId:e})},t);Hc.set(e,r)},I$=e=>{let{toasts:t,pausedAt:r}=O$(e);m.useEffect(()=>{if(r)return;let i=Date.now(),o=t.map(l=>{if(l.duration===1/0)return;let c=(l.duration||0)+l.pauseDuration-(i-l.createdAt);if(c<0){l.visible&&Yt.dismiss(l.id);return}return setTimeout(()=>Yt.dismiss(l.id),c)});return()=>{o.forEach(l=>l&&clearTimeout(l))}},[t,r]);let n=m.useCallback(()=>{r&&Co({type:6,time:Date.now()})},[r]),a=m.useCallback((i,o)=>{let{reverseOrder:l=!1,gutter:c=8,defaultPosition:u}=o||{},d=t.filter(p=>(p.position||u)===(i.position||u)&&p.height),f=d.findIndex(p=>p.id===i.id),h=d.filter((p,g)=>g<f&&p.visible).length;return d.filter(p=>p.visible).slice(...l?[h+1]:[0,h]).reduce((p,g)=>p+(g.height||0)+c,0)},[t]);return m.useEffect(()=>{t.forEach(i=>{if(i.dismissed)$$(i.id,i.removeDelay);else{let o=Hc.get(i.id);o&&(clearTimeout(o),Hc.delete(i.id))}})},[t]),{toasts:t,handlers:{updateHeight:T$,startPause:M$,endPause:n,calculateOffset:a}}},L$=pi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,R$=pi`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,z$=pi`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,F$=Ps("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${L$} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${R$} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${z$} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,B$=pi`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,U$=Ps("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${B$} 1s linear infinite;
`,W$=pi`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,V$=pi`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,q$=Ps("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${W$} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${V$} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,H$=Ps("div")`
  position: absolute;
`,K$=Ps("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Y$=pi`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,G$=Ps("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Y$} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,X$=({toast:e})=>{let{icon:t,type:r,iconTheme:n}=e;return t!==void 0?typeof t=="string"?m.createElement(G$,null,t):t:r==="blank"?null:m.createElement(K$,null,m.createElement(U$,{...n}),r!=="loading"&&m.createElement(H$,null,r==="error"?m.createElement(F$,{...n}):m.createElement(q$,{...n})))},Q$=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,Z$=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,J$="0%{opacity:0;} 100%{opacity:1;}",eI="0%{opacity:1;} 100%{opacity:0;}",tI=Ps("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,rI=Ps("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,nI=(e,t)=>{let r=e.includes("top")?1:-1,[n,a]=LE()?[J$,eI]:[Q$(r),Z$(r)];return{animation:t?`${pi(n)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${pi(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},aI=m.memo(({toast:e,position:t,style:r,children:n})=>{let a=e.height?nI(e.position||t||"top-center",e.visible):{opacity:0},i=m.createElement(X$,{toast:e}),o=m.createElement(rI,{...e.ariaProps},fm(e.message,e));return m.createElement(tI,{className:e.className,style:{...a,...r,...e.style}},typeof n=="function"?n({icon:i,message:o}):m.createElement(m.Fragment,null,i,o))});S$(m.createElement);var iI=({id:e,className:t,style:r,onHeightUpdate:n,children:a})=>{let i=m.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;n(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,n]);return m.createElement("div",{ref:i,className:t,style:r},a)},sI=(e,t)=>{let r=e.includes("top"),n=r?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:LE()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(r?1:-1)}px)`,...n,...a}},oI=Dh`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Vd=16,lI=({reverseOrder:e,position:t="top-center",toastOptions:r,gutter:n,children:a,containerStyle:i,containerClassName:o})=>{let{toasts:l,handlers:c}=I$(r);return m.createElement("div",{id:"_rht_toaster",style:{position:"fixed",zIndex:9999,top:Vd,left:Vd,right:Vd,bottom:Vd,pointerEvents:"none",...i},className:o,onMouseEnter:c.startPause,onMouseLeave:c.endPause},l.map(u=>{let d=u.position||t,f=c.calculateOffset(u,{reverseOrder:e,gutter:n,defaultPosition:t}),h=sI(d,f);return m.createElement(iI,{id:u.id,key:u.id,onHeightUpdate:c.updateHeight,className:u.visible?oI:"",style:h},u.type==="custom"?fm(u.message,u):a?a(u):m.createElement(aI,{toast:u,position:d}))}))},X=Yt;const cI="modulepreload",uI=function(e){return"/fefelina-admin/"+e},Lj={},Ku=function(t,r,n){if(!r||r.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=uI(i),i in Lj)return;Lj[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let d=a.length-1;d>=0;d--){const f=a[d];if(f.href===i&&(!o||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":cI,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,f)=>{u.addEventListener("load",d),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})},dI=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ku(()=>Promise.resolve().then(()=>ql),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class Uy extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class fI extends Uy{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class Rj extends Uy{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class zj extends Uy{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var jv;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(jv||(jv={}));var mI=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class hI{constructor(t,{headers:r={},customFetch:n,region:a=jv.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=dI(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,r={}){var n;return mI(this,void 0,void 0,function*(){try{const{headers:a,method:i,body:o}=r;let l={},{region:c}=r;c||(c=this.region);const u=new URL(`${this.url}/${t}`);c&&c!=="any"&&(l["x-region"]=c,u.searchParams.set("forceFunctionRegion",c));let d;o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",d=o):typeof o=="string"?(l["Content-Type"]="text/plain",d=o):typeof FormData<"u"&&o instanceof FormData?d=o:(l["Content-Type"]="application/json",d=JSON.stringify(o)));const f=yield this.fetch(u.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),a),body:d}).catch(x=>{throw new fI(x)}),h=f.headers.get("x-relay-error");if(h&&h==="true")throw new Rj(f);if(!f.ok)throw new zj(f);let p=((n=f.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),g;return p==="application/json"?g=yield f.json():p==="application/octet-stream"?g=yield f.blob():p==="text/event-stream"?g=f:p==="multipart/form-data"?g=yield f.formData():g=yield f.text(),{data:g,error:null,response:f}}catch(a){return{data:null,error:a,response:a instanceof zj||a instanceof Rj?a.context:void 0}}})}}var un={},Wy={},$h={},Yu={},Ih={},Lh={},pI=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ol=pI();const gI=Ol.fetch,zE=Ol.fetch.bind(Ol),FE=Ol.Headers,vI=Ol.Request,xI=Ol.Response,ql=Object.freeze(Object.defineProperty({__proto__:null,Headers:FE,Request:vI,Response:xI,default:zE,fetch:gI},Symbol.toStringTag,{value:"Module"})),yI=HT(ql);var Rh={};Object.defineProperty(Rh,"__esModule",{value:!0});let bI=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Rh.default=bI;var BE=Qn&&Qn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Lh,"__esModule",{value:!0});const wI=BE(yI),jI=BE(Rh);let _I=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=wI.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,r){return this.headers=Object.assign({},this.headers),this.headers[t]=r,this}then(t,r){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let a=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let u=null,d=null,f=null,h=i.status,p=i.statusText;if(i.ok){if(this.method!=="HEAD"){const v=await i.text();v===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?d=v:d=JSON.parse(v))}const x=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),y=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");x&&y&&y.length>1&&(f=parseInt(y[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(d)&&(d.length>1?(u={code:"PGRST116",details:`Results contain ${d.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},d=null,f=null,h=406,p="Not Acceptable"):d.length===1?d=d[0]:d=null)}else{const x=await i.text();try{u=JSON.parse(x),Array.isArray(u)&&i.status===404&&(d=[],u=null,h=200,p="OK")}catch{i.status===404&&x===""?(h=204,p="No Content"):u={message:x}}if(u&&this.isMaybeSingle&&(!((c=u==null?void 0:u.details)===null||c===void 0)&&c.includes("0 rows"))&&(u=null,h=200,p="OK"),u&&this.shouldThrowOnError)throw new jI.default(u)}return{error:u,data:d,count:f,status:h,statusText:p}});return this.shouldThrowOnError||(a=a.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),a.then(t,r)}returns(){return this}overrideTypes(){return this}};Lh.default=_I;var NI=Qn&&Qn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ih,"__esModule",{value:!0});const SI=NI(Lh);let kI=class extends SI.default{select(t){let r=!1;const n=(t??"*").split("").map(a=>/\s/.test(a)&&!r?"":(a==='"'&&(r=!r),a)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:r=!0,nullsFirst:n,foreignTable:a,referencedTable:i=a}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${t}.${r?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:r,referencedTable:n=r}={}){const a=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(a,`${t}`),this}range(t,r,{foreignTable:n,referencedTable:a=n}={}){const i=typeof a>"u"?"offset":`${a}.offset`,o=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(i,`${t}`),this.url.searchParams.set(o,`${r-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:r=!1,settings:n=!1,buffers:a=!1,wal:i=!1,format:o="text"}={}){var l;const c=[t?"analyze":null,r?"verbose":null,n?"settings":null,a?"buffers":null,i?"wal":null].filter(Boolean).join("|"),u=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${u}"; options=${c};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Ih.default=kI;var CI=Qn&&Qn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Yu,"__esModule",{value:!0});const EI=CI(Ih);let PI=class extends EI.default{eq(t,r){return this.url.searchParams.append(t,`eq.${r}`),this}neq(t,r){return this.url.searchParams.append(t,`neq.${r}`),this}gt(t,r){return this.url.searchParams.append(t,`gt.${r}`),this}gte(t,r){return this.url.searchParams.append(t,`gte.${r}`),this}lt(t,r){return this.url.searchParams.append(t,`lt.${r}`),this}lte(t,r){return this.url.searchParams.append(t,`lte.${r}`),this}like(t,r){return this.url.searchParams.append(t,`like.${r}`),this}likeAllOf(t,r){return this.url.searchParams.append(t,`like(all).{${r.join(",")}}`),this}likeAnyOf(t,r){return this.url.searchParams.append(t,`like(any).{${r.join(",")}}`),this}ilike(t,r){return this.url.searchParams.append(t,`ilike.${r}`),this}ilikeAllOf(t,r){return this.url.searchParams.append(t,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(t,r){return this.url.searchParams.append(t,`ilike(any).{${r.join(",")}}`),this}is(t,r){return this.url.searchParams.append(t,`is.${r}`),this}in(t,r){const n=Array.from(new Set(r)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cs.{${r.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(r)}`),this}containedBy(t,r){return typeof r=="string"?this.url.searchParams.append(t,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(t,`cd.{${r.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(r)}`),this}rangeGt(t,r){return this.url.searchParams.append(t,`sr.${r}`),this}rangeGte(t,r){return this.url.searchParams.append(t,`nxl.${r}`),this}rangeLt(t,r){return this.url.searchParams.append(t,`sl.${r}`),this}rangeLte(t,r){return this.url.searchParams.append(t,`nxr.${r}`),this}rangeAdjacent(t,r){return this.url.searchParams.append(t,`adj.${r}`),this}overlaps(t,r){return typeof r=="string"?this.url.searchParams.append(t,`ov.${r}`):this.url.searchParams.append(t,`ov.{${r.join(",")}}`),this}textSearch(t,r,{config:n,type:a}={}){let i="";a==="plain"?i="pl":a==="phrase"?i="ph":a==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${i}fts${o}.${r}`),this}match(t){return Object.entries(t).forEach(([r,n])=>{this.url.searchParams.append(r,`eq.${n}`)}),this}not(t,r,n){return this.url.searchParams.append(t,`not.${r}.${n}`),this}or(t,{foreignTable:r,referencedTable:n=r}={}){const a=n?`${n}.or`:"or";return this.url.searchParams.append(a,`(${t})`),this}filter(t,r,n){return this.url.searchParams.append(t,`${r}.${n}`),this}};Yu.default=PI;var OI=Qn&&Qn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($h,"__esModule",{value:!0});const gc=OI(Yu);let AI=class{constructor(t,{headers:r={},schema:n,fetch:a}){this.url=t,this.headers=r,this.schema=n,this.fetch=a}select(t,{head:r=!1,count:n}={}){const a=r?"HEAD":"GET";let i=!1;const o=(t??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new gc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:r,defaultToNull:n=!0}={}){const a="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),r&&i.push(`count=${r}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(t)){const o=t.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new gc.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:a,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(r!==void 0&&this.url.searchParams.set("on_conflict",r),this.headers.Prefer&&l.push(this.headers.Prefer),a&&l.push(`count=${a}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(t)){const c=t.reduce((u,d)=>u.concat(Object.keys(d)),[]);if(c.length>0){const u=[...new Set(c)].map(d=>`"${d}"`);this.url.searchParams.set("columns",u.join(","))}}return new gc.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:r}={}){const n="PATCH",a=[];return this.headers.Prefer&&a.push(this.headers.Prefer),r&&a.push(`count=${r}`),this.headers.Prefer=a.join(","),new gc.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){const r="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new gc.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};$h.default=AI;var zh={},Fh={};Object.defineProperty(Fh,"__esModule",{value:!0});Fh.version=void 0;Fh.version="0.0.0-automated";Object.defineProperty(zh,"__esModule",{value:!0});zh.DEFAULT_HEADERS=void 0;const TI=Fh;zh.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${TI.version}`};var UE=Qn&&Qn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Wy,"__esModule",{value:!0});const MI=UE($h),DI=UE(Yu),$I=zh;let II=class WE{constructor(t,{headers:r={},schema:n,fetch:a}={}){this.url=t,this.headers=Object.assign(Object.assign({},$I.DEFAULT_HEADERS),r),this.schemaName=n,this.fetch=a}from(t){const r=new URL(`${this.url}/${t}`);return new MI.default(r,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new WE(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,r={},{head:n=!1,get:a=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${t}`);let c;n||a?(o=n?"HEAD":"GET",Object.entries(r).filter(([d,f])=>f!==void 0).map(([d,f])=>[d,Array.isArray(f)?`{${f.join(",")}}`:`${f}`]).forEach(([d,f])=>{l.searchParams.append(d,f)})):(o="POST",c=r);const u=Object.assign({},this.headers);return i&&(u.Prefer=`count=${i}`),new DI.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Wy.default=II;var Hl=Qn&&Qn.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(un,"__esModule",{value:!0});un.PostgrestError=un.PostgrestBuilder=un.PostgrestTransformBuilder=un.PostgrestFilterBuilder=un.PostgrestQueryBuilder=un.PostgrestClient=void 0;const VE=Hl(Wy);un.PostgrestClient=VE.default;const qE=Hl($h);un.PostgrestQueryBuilder=qE.default;const HE=Hl(Yu);un.PostgrestFilterBuilder=HE.default;const KE=Hl(Ih);un.PostgrestTransformBuilder=KE.default;const YE=Hl(Lh);un.PostgrestBuilder=YE.default;const GE=Hl(Rh);un.PostgrestError=GE.default;var LI=un.default={PostgrestClient:VE.default,PostgrestQueryBuilder:qE.default,PostgrestFilterBuilder:HE.default,PostgrestTransformBuilder:KE.default,PostgrestBuilder:YE.default,PostgrestError:GE.default};const{PostgrestClient:RI,PostgrestQueryBuilder:xle,PostgrestFilterBuilder:yle,PostgrestTransformBuilder:ble,PostgrestBuilder:wle,PostgrestError:jle}=LI;class zI{static dynamicRequire(t){try{return typeof process<"u"&&process.versions&&process.versions.node&&typeof require<"u"?require(t):null}catch{return null}}static detectEnvironment(){var t,r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const n=parseInt(process.versions.node.split(".")[0]);if(n>=22)try{if(typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};const a=this.dynamicRequire("undici");if(a&&a.WebSocket)return{type:"native",constructor:a.WebSocket};throw new Error("undici not available")}catch{return{type:"unsupported",error:`Node.js ${n} detected but native WebSocket not found.`,workaround:'Install the "ws" package or check your Node.js installation.'}}try{const a=this.dynamicRequire("ws");if(a)return{type:"ws",constructor:(r=a.WebSocket)!==null&&r!==void 0?r:a};throw new Error("ws package not available")}catch{return{type:"unsupported",error:`Node.js ${n} detected without WebSocket support.`,workaround:'Install the "ws" package: npm install ws'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const FI="2.15.0",BI=`realtime-js/${FI}`,UI="1.0.0",_v=1e4,WI=1e3,VI=100;var Kc;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Kc||(Kc={}));var ur;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(ur||(ur={}));var da;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(da||(da={}));var Nv;(function(e){e.websocket="websocket"})(Nv||(Nv={}));var Hs;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Hs||(Hs={}));class qI{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const c=n.decode(t.slice(o,o+i));o=o+i;const u=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:c,payload:u}}}class XE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var _t;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(_t||(_t={}));const Fj=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((i,o)=>(i[o]=HI(o,e,t,a),i),{})},HI=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a==null?void 0:a.type,o=r[e];return i&&!n.includes(i)?QE(i,o):Sv(o)},QE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return XI(t,r)}switch(e){case _t.bool:return KI(t);case _t.float4:case _t.float8:case _t.int2:case _t.int4:case _t.int8:case _t.numeric:case _t.oid:return YI(t);case _t.json:case _t.jsonb:return GI(t);case _t.timestamp:return QI(t);case _t.abstime:case _t.date:case _t.daterange:case _t.int4range:case _t.int8range:case _t.money:case _t.reltime:case _t.text:case _t.time:case _t.timestamptz:case _t.timetz:case _t.tsrange:case _t.tstzrange:return Sv(t);default:return Sv(t)}},Sv=e=>e,KI=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},YI=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},GI=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},XI=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>QE(t,l))}return e},QI=e=>typeof e=="string"?e.replace(" ","T"):e,ZE=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")+"/api/broadcast"};class O0{constructor(t,r,n={},a=_v){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Bj;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(Bj||(Bj={}));class Yc{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Yc.syncState(this.state,a,i,o),this.pendingDiffs.forEach(c=>{this.state=Yc.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=Yc.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},c={};return this.map(i,(u,d)=>{o[u]||(c[u]=d)}),this.map(o,(u,d)=>{const f=i[u];if(f){const h=d.map(y=>y.presence_ref),p=f.map(y=>y.presence_ref),g=d.filter(y=>p.indexOf(y.presence_ref)<0),x=f.filter(y=>h.indexOf(y.presence_ref)<0);g.length>0&&(l[u]=g),x.length>0&&(c[u]=x)}else l[u]=d}),this.syncDiff(i,{joins:l,leaves:c},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,c)=>{var u;const d=(u=t[l])!==null&&u!==void 0?u:[];if(t[l]=this.cloneDeep(c),d.length>0){const f=t[l].map(p=>p.presence_ref),h=d.filter(p=>f.indexOf(p.presence_ref)<0);t[l].unshift(...h)}n(l,d,c)}),this.map(o,(l,c)=>{let u=t[l];if(!u)return;const d=c.map(f=>f.presence_ref);u=u.filter(f=>d.indexOf(f.presence_ref)<0),t[l]=u,a(l,u,c),u.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Uj;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Uj||(Uj={}));var Gc;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(Gc||(Gc={}));var Ga;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ga||(Ga={}));class Vy{constructor(t,r={config:{}},n){this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=ur.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new O0(this,da.join,this.params,this.timeout),this.rejoinTimer=new XE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=ur.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=ur.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=ur.errored,this.rejoinTimer.scheduleTimeout())}),this._on(da.reply,{},(a,i)=>{this._trigger(this._replyEventName(i),a)}),this.presence=new Yc(this),this.broadcastEndpointURL=ZE(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(t,r=this.timeout){var n,a;if(this.socket.isConnected()||this.socket.connect(),this.state==ur.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params,c=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(h=>h.filter))!==null&&a!==void 0?a:[],u=!!this.bindings[Gc.PRESENCE]&&this.bindings[Gc.PRESENCE].length>0,d={},f={broadcast:i,presence:Object.assign(Object.assign({},o),{enabled:u}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(d.access_token=this.socket.accessTokenValue),this._onError(h=>t==null?void 0:t(Ga.CHANNEL_ERROR,h)),this._onClose(()=>t==null?void 0:t(Ga.CLOSED)),this.updateJoinPayload(Object.assign({config:f},d)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:h})=>{var p;if(this.socket.setAuth(),h===void 0){t==null||t(Ga.SUBSCRIBED);return}else{const g=this.bindings.postgres_changes,x=(p=g==null?void 0:g.length)!==null&&p!==void 0?p:0,y=[];for(let v=0;v<x;v++){const b=g[v],{filter:{event:w,schema:j,table:N,filter:_}}=b,S=h&&h[v];if(S&&S.event===w&&S.schema===j&&S.table===N&&S.filter===_)y.push(Object.assign(Object.assign({},b),{id:S.id}));else{this.unsubscribe(),this.state=ur.errored,t==null||t(Ga.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=y,t&&t(Ga.SUBSCRIBED);return}}).receive("error",h=>{this.state=ur.errored,t==null||t(Ga.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(h).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(Ga.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===ur.joined&&t===Gc.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){const{event:i,payload:o}=t,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const u=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=u.body)===null||a===void 0?void 0:a.cancel()),u.ok?"ok":"error"}catch(u){return u.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const u=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),u.receive("ok",()=>i("ok")),u.receive("error",()=>i("error")),u.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=ur.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(da.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new O0(this,da.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=ur.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new O0(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>VI){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:c,leave:u,join:d}=da;if(n&&[l,c,u,d].indexOf(o)>=0&&n!==this._joinRef())return;let h=this._onMessage(o,r,n);if(r&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(p=>{var g,x,y;return((g=p.filter)===null||g===void 0?void 0:g.event)==="*"||((y=(x=p.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase())===o}).map(p=>p.callback(h,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var g,x,y,v,b,w;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const j=p.id,N=(g=p.filter)===null||g===void 0?void 0:g.event;return j&&((x=r.ids)===null||x===void 0?void 0:x.includes(j))&&(N==="*"||(N==null?void 0:N.toLocaleLowerCase())===((y=r.data)===null||y===void 0?void 0:y.type.toLocaleLowerCase()))}else{const j=(b=(v=p==null?void 0:p.filter)===null||v===void 0?void 0:v.event)===null||b===void 0?void 0:b.toLocaleLowerCase();return j==="*"||j===((w=r==null?void 0:r.event)===null||w===void 0?void 0:w.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof h=="object"&&"ids"in h){const g=h.data,{schema:x,table:y,commit_timestamp:v,type:b,errors:w}=g;h=Object.assign(Object.assign({},{schema:x,table:y,commit_timestamp:v,eventType:b,new:{},old:{},errors:w}),this._getPayloadRecords(g))}p.callback(h,n)})}_isClosed(){return this.state===ur.closed}_isJoined(){return this.state===ur.joined}_isJoining(){return this.state===ur.joining}_isLeaving(){return this.state===ur.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Vy.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(da.close,{},t)}_onError(t){this._on(da.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=ur.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=Fj(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=Fj(t.columns,t.old_record)),r}}const Wj=()=>{},qd={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},ZI=[1e3,2e3,5e3,1e4],JI=1e4,eL=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class tL{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=_v,this.transport=null,this.heartbeatIntervalMs=qd.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Wj,this.ref=0,this.reconnectTimer=null,this.logger=Wj,this.conn=null,this.sendBuffer=[],this.serializer=new qI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Ku(()=>Promise.resolve().then(()=>ql),void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Nv.websocket}`,this.httpEndpoint=ZE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=zI.createWebSocket(this.endpointURL())}catch(t){throw this._setConnectionState("disconnected"),new Error(`WebSocket not available: ${t.message}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:UI}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Kc.connecting:return Hs.Connecting;case Kc.open:return Hs.Open;case Kc.closing:return Hs.Closing;default:return Hs.Closed}}isConnected(){return this.connectionState()===Hs.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new Vy(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(WI,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},qd.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{r.topic==="phoenix"&&r.event==="phx_reply"&&this.heartbeatCallback(r.payload.status==="ok"?"ok":"error"),r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${a} ${l}`.trim(),i),this.channels.filter(u=>u._isMember(n)).forEach(u=>u._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(da.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([eL],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:BI};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(da.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new XE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qd.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,c,u;if(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t==null?void 0:t.timeout)!==null&&n!==void 0?n:_v,this.heartbeatIntervalMs=(a=t==null?void 0:t.heartbeatIntervalMs)!==null&&a!==void 0?a:qd.HEARTBEAT_INTERVAL,this.worker=(i=t==null?void 0:t.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t==null?void 0:t.accessToken)!==null&&o!==void 0?o:null,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=t==null?void 0:t.reconnectAfterMs)!==null&&l!==void 0?l:d=>ZI[d-1]||JI,this.encode=(c=t==null?void 0:t.encode)!==null&&c!==void 0?c:(d,f)=>f(JSON.stringify(d)),this.decode=(u=t==null?void 0:t.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class qy extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function jr(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class rL extends qy{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class kv extends qy{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}var nL=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const JE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ku(()=>Promise.resolve().then(()=>ql),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},aL=()=>nL(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Ku(()=>Promise.resolve().then(()=>ql),void 0)).Response:Response}),Cv=e=>{if(Array.isArray(e))return e.map(r=>Cv(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Cv(n)}),t},iL=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)};var Eo=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const A0=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),sL=(e,t,r)=>Eo(void 0,void 0,void 0,function*(){const n=yield aL();e instanceof n&&!(r!=null&&r.noResolveJson)?e.json().then(a=>{const i=e.status||500,o=(a==null?void 0:a.statusCode)||i+"";t(new rL(A0(a),i,o))}).catch(a=>{t(new kv(A0(a),a))}):t(new kv(A0(e),e))}),oL=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"||!n?a:(iL(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r))};function Gu(e,t,r,n,a,i){return Eo(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,oL(t,n,a,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>sL(c,l,n))})})}function mm(e,t,r,n){return Eo(this,void 0,void 0,function*(){return Gu(e,"GET",t,r,n)})}function Xa(e,t,r,n,a){return Eo(this,void 0,void 0,function*(){return Gu(e,"POST",t,n,a,r)})}function Ev(e,t,r,n,a){return Eo(this,void 0,void 0,function*(){return Gu(e,"PUT",t,n,a,r)})}function lL(e,t,r,n){return Eo(this,void 0,void 0,function*(){return Gu(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function eP(e,t,r,n,a){return Eo(this,void 0,void 0,function*(){return Gu(e,"DELETE",t,n,a,r)})}var ln=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const cL={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Vj={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class uL{constructor(t,r={},n,a){this.url=t,this.headers=r,this.bucketId=n,this.fetch=JE(a)}uploadOrUpdate(t,r,n,a){return ln(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Vj),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),a!=null&&a.headers&&(l=Object.assign(Object.assign({},l),a.headers));const u=this._removeEmptyFolders(r),d=this._getFinalPath(u),f=yield(t=="PUT"?Ev:Xa)(this.fetch,`${this.url}/object/${d}`,i,Object.assign({headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:u,id:f.Id,fullPath:f.Key},error:null}}catch(i){if(jr(i))return{data:null,error:i};throw i}})}upload(t,r,n){return ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return ln(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let c;const u=Object.assign({upsert:Vj.upsert},a),d=Object.assign(Object.assign({},this.headers),{"x-upsert":String(u.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",u.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",u.cacheControl)):(c=n,d["cache-control"]=`max-age=${u.cacheControl}`,d["content-type"]=u.contentType);const f=yield Ev(this.fetch,l.toString(),c,{headers:d});return{data:{path:i,fullPath:f.Key},error:null}}catch(c){if(jr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(t,r){return ln(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r!=null&&r.upsert&&(a["x-upsert"]="true");const i=yield Xa(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new qy("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}update(t,r,n){return ln(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return ln(this,void 0,void 0,function*(){try{return{data:yield Xa(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(jr(a))return{data:null,error:a};throw a}})}copy(t,r,n){return ln(this,void 0,void 0,function*(){try{return{data:{path:(yield Xa(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(jr(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return ln(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Xa(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(jr(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return ln(this,void 0,void 0,function*(){try{const a=yield Xa(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(jr(a))return{data:null,error:a};throw a}})}download(t,r){return ln(this,void 0,void 0,function*(){const a=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(t);return{data:yield(yield mm(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(jr(l))return{data:null,error:l};throw l}})}info(t){return ln(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield mm(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Cv(n),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}exists(t){return ln(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield lL(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(jr(n)&&n instanceof kv){const a=n.originalError;if([400,404].includes(a==null?void 0:a.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&a.push(c);let u=a.join("&");return u!==""&&(u=`?${u}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${u}`)}}}remove(t){return ln(this,void 0,void 0,function*(){try{return{data:yield eP(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}list(t,r,n){return ln(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},cL),r),{prefix:t||""});return{data:yield Xa(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(jr(a))return{data:null,error:a};throw a}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const dL="2.10.4",fL={"X-Client-Info":`storage-js/${dL}`};var Ro=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class mL{constructor(t,r={},n,a){const i=new URL(t);a!=null&&a.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},fL),r),this.fetch=JE(n)}listBuckets(){return Ro(this,void 0,void 0,function*(){try{return{data:yield mm(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(jr(t))return{data:null,error:t};throw t}})}getBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield mm(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}createBucket(t,r={public:!1}){return Ro(this,void 0,void 0,function*(){try{return{data:yield Xa(this.fetch,`${this.url}/bucket`,{id:t,name:t,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}updateBucket(t,r){return Ro(this,void 0,void 0,function*(){try{return{data:yield Ev(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(jr(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield Xa(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ro(this,void 0,void 0,function*(){try{return{data:yield eP(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(jr(r))return{data:null,error:r};throw r}})}}class hL extends mL{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new uL(this.url,this.headers,t,this.fetch)}}const pL="2.54.0";let Ac="";typeof Deno<"u"?Ac="deno":typeof document<"u"?Ac="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Ac="react-native":Ac="node";const gL={"X-Client-Info":`supabase-js-${Ac}/${pL}`},vL={headers:gL},xL={schema:"public"},yL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},bL={};var wL=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};const jL=e=>{let t;return e?t=e:typeof fetch>"u"?t=zE:t=fetch,(...r)=>t(...r)},_L=()=>typeof Headers>"u"?FE:Headers,NL=(e,t,r)=>{const n=jL(r),a=_L();return(i,o)=>wL(void 0,void 0,void 0,function*(){var l;const c=(l=yield t())!==null&&l!==void 0?l:e;let u=new a(o==null?void 0:o.headers);return u.has("apikey")||u.set("apikey",e),u.has("Authorization")||u.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:u}))})};var SL=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};function kL(e){return e.endsWith("/")?e:e+"/"}function CL(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:c,auth:u,realtime:d,global:f}=t,h={db:Object.assign(Object.assign({},c),a),auth:Object.assign(Object.assign({},u),i),realtime:Object.assign(Object.assign({},d),o),storage:{},global:Object.assign(Object.assign(Object.assign({},f),l),{headers:Object.assign(Object.assign({},(r=f==null?void 0:f.headers)!==null&&r!==void 0?r:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>SL(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}const tP="2.71.1",Yo=30*1e3,Pv=3,T0=Pv*Yo,EL="http://localhost:9999",PL="supabase.auth.token",OL={"X-Client-Info":`gotrue-js/${tP}`},Ov="X-Supabase-Api-Version",rP={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},AL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,TL=10*60*1e3;class Hy extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Fe(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ML extends Hy{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function DL(e){return Fe(e)&&e.name==="AuthApiError"}class nP extends Hy{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Os extends Hy{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Fi extends Os{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function $L(e){return Fe(e)&&e.name==="AuthSessionMissingError"}class Hd extends Os{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Kd extends Os{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Yd extends Os{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function IL(e){return Fe(e)&&e.name==="AuthImplicitGrantRedirectError"}class qj extends Os{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Av extends Os{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function M0(e){return Fe(e)&&e.name==="AuthRetryableFetchError"}class Hj extends Os{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class Tv extends Os{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const hm="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Kj=` 	
\r=`.split(""),LL=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Kj.length;t+=1)e[Kj[t].charCodeAt(0)]=-2;for(let t=0;t<hm.length;t+=1)e[hm[t].charCodeAt(0)]=t;return e})();function Yj(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hm[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(hm[n]),t.queuedBits-=6}}function aP(e,t,r){const n=LL[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function Gj(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{FL(o,n,r)};for(let o=0;o<e.length;o+=1)aP(e.charCodeAt(o),a,i);return t.join("")}function RL(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function zL(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}RL(n,t)}}function FL(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function BL(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)aP(e.charCodeAt(a),r,n);return new Uint8Array(t)}function UL(e){const t=[];return zL(e,r=>t.push(r)),new Uint8Array(t)}function WL(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>Yj(a,r,n)),Yj(null,r,n),t.join("")}function VL(e){return Math.round(Date.now()/1e3)+e}function qL(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const la=()=>typeof window<"u"&&typeof document<"u",Is={tested:!1,writable:!1},iP=()=>{if(!la())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Is.tested)return Is.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Is.tested=!0,Is.writable=!0}catch{Is.tested=!0,Is.writable=!1}return Is.writable};function HL(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const sP=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Ku(()=>Promise.resolve().then(()=>ql),void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},KL=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",Go=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Ls=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ri=async(e,t)=>{await e.removeItem(t)};class Bh{constructor(){this.promise=new Bh.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Bh.promiseConstructor=Promise;function D0(e){const t=e.split(".");if(t.length!==3)throw new Tv("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!AL.test(t[n]))throw new Tv("JWT not in base64url format");return{header:JSON.parse(Gj(t[0])),payload:JSON.parse(Gj(t[1])),signature:BL(t[2]),raw:{header:t[0],payload:t[1]}}}async function YL(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function GL(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function XL(e){return("0"+e.toString(16)).substr(-2)}function QL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,XL).join("")}async function ZL(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function JL(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await ZL(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zo(e,t,r=!1){const n=QL();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await Go(e,`${t}-code-verifier`,a);const i=await JL(n);return[i,n===i?"plain":"s256"]}const e8=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function t8(e){const t=e.headers.get(Ov);if(!t||!t.match(e8))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function r8(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function n8(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const a8=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fo(e){if(!a8.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function $0(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Xj(e){return JSON.parse(JSON.stringify(e))}var i8=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};const Fs=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),s8=[502,503,504];async function Qj(e){var t;if(!KL(e))throw new Av(Fs(e),0);if(s8.includes(e.status))throw new Av(Fs(e),e.status);let r;try{r=await e.json()}catch(i){throw new nP(Fs(i),i)}let n;const a=t8(e);if(a&&a.getTime()>=rP["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new Hj(Fs(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Fi}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Hj(Fs(r),e.status,r.weak_password.reasons);throw new ML(Fs(r),e.status||500,n)}const o8=(e,t,r,n)=>{const a={method:e,headers:(t==null?void 0:t.headers)||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function Ve(e,t,r,n){var a;const i=Object.assign({},n==null?void 0:n.headers);i[Ov]||(i[Ov]=rP["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n==null?void 0:n.query)!==null&&a!==void 0?a:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await l8(e,t,r+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function l8(e,t,r,n,a,i){const o=o8(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(c){throw console.error(c),new Av(Fs(c),0)}if(l.ok||await Qj(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Qj(c)}}function Ka(e){var t;let r=null;f8(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=VL(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function Zj(e){const t=Ka(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Gi(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function c8(e){return{data:e,error:null}}function u8(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=i8(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function d8(e){return e}function f8(e){return e.access_token&&e.refresh_token&&e.expires_in}const I0=["global","local","others"];var m8=globalThis&&globalThis.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r};class h8{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=sP(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(t,r=I0[0]){if(I0.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${I0.join(", ")}`);try{return await Ve(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await Ve(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Gi})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=m8(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n==null?void 0:n.newEmail,delete a.newEmail),await Ve(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:u8,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Fe(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Ve(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Gi})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,c;try{const u={nextPage:null,lastPage:0,total:0},d=await Ve(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t==null?void 0:t.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:d8});if(d.error)throw d.error;const f=await d.json(),h=(o=d.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(l=d.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(g=>{const x=parseInt(g.split(";")[0].split("=")[1].substring(0,1)),y=JSON.parse(g.split(";")[1].split("=")[1]);u[`${y}Page`]=x}),u.total=parseInt(h)),{data:Object.assign(Object.assign({},f),u),error:null}}catch(u){if(Fe(u))return{data:{users:[]},error:u};throw u}}async getUserById(t){Fo(t);try{return await Ve(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Gi})}catch(r){if(Fe(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Fo(t);try{return await Ve(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Gi})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Fo(t);try{return await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Gi})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Fo(t.userId);try{const{data:r,error:n}=await Ve(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Fo(t.userId),Fo(t.id);try{return{data:await Ve(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}}function Jj(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}function p8(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Bo={debug:!!(globalThis&&iP()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class oP extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class g8 extends oP{}async function v8(e,t,r){Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw Bo.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new g8(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Bo.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}p8();const x8={url:EL,storageKey:PL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:OL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function e2(e,t,r){return await r()}const Uo={};class _u{constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=_u.nextInstanceID,_u.nextInstanceID+=1,this.instanceID>0&&la()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},x8),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new h8({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=sP(a.fetch),this.lock=a.lock||e2,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:la()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=v8:this.lock=e2,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(a.storage?this.storage=a.storage:iP()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Jj(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=Jj(this.memoryStorage)),la()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var t,r;return(r=(t=Uo[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Uo[this.storageKey]=Object.assign(Object.assign({},Uo[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Uo[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Uo[this.storageKey]=Object.assign(Object.assign({},Uo[this.storageKey]),{cachedAt:t})}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${tP}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=HL(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),la()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),IL(i)){const c=(t=i.details)===null||t===void 0?void 0:t.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Fe(r)?{error:r}:{error:new nP("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t==null?void 0:t.options)===null||a===void 0?void 0:a.captchaToken}},xform:Ka}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Fe(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:d,password:f,options:h}=t;let p=null,g=null;this.flowType==="pkce"&&([p,g]=await zo(this.storage,this.storageKey)),i=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:h==null?void 0:h.emailRedirectTo,body:{email:d,password:f,data:(r=h==null?void 0:h.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken},code_challenge:p,code_challenge_method:g},xform:Ka})}else if("phone"in t){const{phone:d,password:f,options:h}=t;i=await Ve(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:d,password:f,data:(n=h==null?void 0:h.data)!==null&&n!==void 0?n:{},channel:(a=h==null?void 0:h.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:h==null?void 0:h.captchaToken}},xform:Ka})}else throw new Kd("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,u=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(i){if(Fe(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zj})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Zj})}else throw new Kd("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Hd}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;if(r==="solana")return await this.signInWithSolana(t);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(t){var r,n,a,i,o,l,c,u,d,f,h,p;let g,x;if("message"in t)g=t.message,x=t.signature;else{const{chain:y,wallet:v,statement:b,options:w}=t;let j;if(la())if(typeof v=="object")j=v;else{const _=window;if("solana"in _&&typeof _.solana=="object"&&("signIn"in _.solana&&typeof _.solana.signIn=="function"||"signMessage"in _.solana&&typeof _.solana.signMessage=="function"))j=_.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof v!="object"||!(w!=null&&w.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");j=v}const N=new URL((r=w==null?void 0:w.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in j&&j.signIn){const _=await j.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},w==null?void 0:w.signInWithSolana),{version:"1",domain:N.host,uri:N.href}),b?{statement:b}:null));let S;if(Array.isArray(_)&&_[0]&&typeof _[0]=="object")S=_[0];else if(_&&typeof _=="object"&&"signedMessage"in _&&"signature"in _)S=_;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)g=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),x=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in j)||typeof j.signMessage!="function"||!("publicKey"in j)||typeof j!="object"||!j.publicKey||!("toBase58"in j.publicKey)||typeof j.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");g=[`${N.host} wants you to sign in with your Solana account:`,j.publicKey.toBase58(),...b?["",b,""]:[""],"Version: 1",`URI: ${N.href}`,`Issued At: ${(a=(n=w==null?void 0:w.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=w==null?void 0:w.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${w.signInWithSolana.notBefore}`]:[],...!((o=w==null?void 0:w.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${w.signInWithSolana.expirationTime}`]:[],...!((l=w==null?void 0:w.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${w.signInWithSolana.chainId}`]:[],...!((c=w==null?void 0:w.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${w.signInWithSolana.nonce}`]:[],...!((u=w==null?void 0:w.signInWithSolana)===null||u===void 0)&&u.requestId?[`Request ID: ${w.signInWithSolana.requestId}`]:[],...!((f=(d=w==null?void 0:w.signInWithSolana)===null||d===void 0?void 0:d.resources)===null||f===void 0)&&f.length?["Resources",...w.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const _=await j.signMessage(new TextEncoder().encode(g),"utf8");if(!_||!(_ instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");x=_}}try{const{data:y,error:v}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:g,signature:WL(x)},!((h=t.options)===null||h===void 0)&&h.captchaToken?{gotrue_meta_security:{captcha_token:(p=t.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:Ka});if(v)throw v;return!y||!y.session||!y.user?{data:{user:null,session:null},error:new Hd}:(y.session&&(await this._saveSession(y.session),await this._notifyAllSubscribers("SIGNED_IN",y.session)),{data:Object.assign({},y),error:v})}catch(y){if(Fe(y))return{data:{user:null,session:null},error:y};throw y}}async _exchangeCodeForSession(t){const r=await Ls(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:Ka});if(await Ri(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Hd}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(Fe(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await Ve(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ka}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Hd}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:c}=t;let u=null,d=null;this.flowType==="pkce"&&([u,d]=await zo(this.storage,this.storageKey));const{error:f}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:u,code_challenge_method:d},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in t){const{phone:l,options:c}=t,{data:u,error:d}=await Ve(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=c==null?void 0:c.data)!==null&&a!==void 0?a:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:u==null?void 0:u.message_id},error:d}}throw new Kd("You must provide either an email or phone number.")}catch(l){if(Fe(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await Ve(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:Ka});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,u=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(a){if(Fe(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await zo(this.storage,this.storageKey)),await Ve(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t==null?void 0:t.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:c8})}catch(i){if(Fe(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Fi;const{error:a}=await Ve(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(Fe(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await Ve(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await Ve(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Kd("You must provide either an email or phone number and a type")}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Ls(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<T0:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Ls(this.userStorage,this.storageKey+"-user");o!=null&&o.user?t.user=o.user:t.user=$0()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(c,u,d)=>(!o&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,d))})}return{data:{session:t},error:null}}const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Gi}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Fi}:await Ve(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Gi})})}catch(r){if(Fe(r))return $L(r)&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Fi;const o=a.session;let l=null,c=null;this.flowType==="pkce"&&t.email!=null&&([l,c]=await zo(this.storage,this.storageKey));const{data:u,error:d}=await Ve(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:Gi});if(d)throw d;return o.user=u.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Fe(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Fi;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=D0(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{session:l,error:c}=await this._callRefreshToken(t.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(t.access_token);if(c)throw c;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Fe(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(t!=null&&t.refresh_token))throw new Fi;const{session:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Fe(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!la())throw new Yd("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Yd(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new qj("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Yd("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new qj("No code detected.");const{data:b,error:w}=await this._exchangeCodeForSession(t.code);if(w)throw w;const j=new URL(window.location.href);return j.searchParams.delete("code"),window.history.replaceState(window.history.state,"",j.toString()),{data:{session:b.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:u}=t;if(!i||!l||!o||!u)throw new Yd("No session defined in URL");const d=Math.round(Date.now()/1e3),f=parseInt(l);let h=d+f;c&&(h=parseInt(c));const p=h-d;p*1e3<=Yo&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${f}s`);const g=h-f;d-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,h,d):d-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,h,d);const{data:x,error:y}=await this._getUser(i);if(y)throw y;const v={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:f,expires_at:h,refresh_token:o,token_type:u,user:x.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:v,redirectType:t.type},error:null}}catch(n){if(Fe(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Ls(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(DL(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Ri(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=qL(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await zo(this.storage,this.storageKey,!0));try{return await Ve(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Fe(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async linkIdentity(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,c,u,d;const{data:f,error:h}=i;if(h)throw h;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=t.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await Ve(this.fetch,"GET",p,{headers:this.headers,jwt:(d=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&d!==void 0?d:void 0})});if(a)throw a;return la()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:t.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Fe(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await Ve(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await GL(async a=>(a>0&&await YL(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await Ve(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ka})),(a,i)=>{const o=200*Math.pow(2,a);return i&&M0(i)&&Date.now()+o-n<Yo})}catch(n){if(this._debug(r,"error",n),Fe(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),la()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Ls(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Ls(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await Go(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o==null?void 0:o.user)!==null&&t!==void 0?t:$0()}else if(a&&!a.user&&!a.user){const o=await Ls(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(a.user=o.user,await Ri(this.storage,this.storageKey+"-user"),await Go(this.storage,this.storageKey,a)):a.user=$0()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<T0;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${T0}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),M0(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&(o!=null&&o.user)?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Fi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new Bh;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Fi;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),Fe(i)){const o={session:null,error:i};return M0(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Go(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=Xj(a);await Go(this.storage,this.storageKey,i)}else{const a=Xj(r);await Go(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Ri(this.storage,this.storageKey),await Ri(this.storage,this.storageKey+"-code-verifier"),await Ri(this.storage,this.storageKey+"-user"),this.userStorage&&await Ri(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&la()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Yo);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/Yo);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${Yo}ms, refresh threshold is ${Pv} ticks`),a<=Pv&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof oP)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!la()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await zo(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Ve(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:{issuer:t.issuer}),{data:c,error:u}=await Ve(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(t.factorType==="totp"&&(!((a=c==null?void 0:c.totp)===null||a===void 0)&&a.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:l}=await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:{code:t.code,challenge_id:t.challengeId},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await Ve(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:{channel:t.channel},headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Fe(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(t==null?void 0:t.factors)||[],a=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:a,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=D0(a.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(f=>f.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const d=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:d},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+TL>a)return n;const{data:i,error:o}=await Ve(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:p,error:g}=await this.getSession();if(g||!p.session)return{data:null,error:g};n=p.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:c}}=D0(n);r!=null&&r.allowExpired||r8(i.exp);const u=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!u){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:a,signature:o},error:null}}const d=n8(a.alg),f=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,f,o,UL(`${l}.${c}`)))throw new Tv("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(Fe(n))return{data:null,error:n};throw n}}}_u.nextInstanceID=0;const y8=_u;class b8 extends y8{constructor(t){super(t)}}var w8=globalThis&&globalThis.__awaiter||function(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?i(d.value):a(d.value).then(l,c)}u((n=n.apply(e,t||[])).next())})};class j8{constructor(t,r,n){var a,i,o;if(this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");const l=kL(t),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const u=`sb-${c.hostname.split(".")[0]}-auth-token`,d={db:xL,realtime:bL,auth:Object.assign(Object.assign({},yL),{storageKey:u}),global:vL},f=CL(n??{},d);this.storageKey=(a=f.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=f.global.headers)!==null&&i!==void 0?i:{},f.accessToken?(this.accessToken=f.accessToken,this.auth=new Proxy({},{get:(h,p)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(p)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=f.auth)!==null&&o!==void 0?o:{},this.headers,f.global.fetch),this.fetch=NL(r,this._getAccessToken.bind(this),f.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},f.realtime)),this.rest=new RI(new URL("rest/v1",c).href,{headers:this.headers,schema:f.db.schema,fetch:this.fetch}),this.storage=new hL(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),f.accessToken||this._listenForAuthEvents()}get functions(){return new hI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,r;return w8(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,storageKey:i,flowType:o,lock:l,debug:c},u,d){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new b8({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:i,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,flowType:o,lock:l,debug:c,fetch:d,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(t){return new tL(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const _8=(e,t,r)=>new j8(e,t,r);function N8(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}N8()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const S8="https://peopleudnxrqkhusiatw.supabase.co",k8="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBlb3BsZXVkbnhycWtodXNpYXR3Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2NTE3MTAsImV4cCI6MjA3MDIyNzcxMH0.k2phVQx0c4NHwu1VL96rTzp_w4YPg6jZvHf2-c9Duf0",W=_8(S8,k8,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}}),lP=m.createContext(void 0);function C8({children:e}){var y;const[t,r]=m.useState(null),[n,a]=m.useState([]),[i,o]=m.useState(!0),l=m.useRef(null),c=async(v=!1)=>{var b;try{v&&o(!0);const{data:{user:w}}=await W.auth.getUser();if(!w){r(null),l.current=null,a([]);return}const{data:j,error:N}=await W.from("user_profiles").select(`
          *,
          profile:profiles (
            id,
            name,
            description,
            is_admin,
            is_active
          )
        `).eq("user_id",w.id).single();if(N){console.error("Erro ao carregar profile:",N),r(null),l.current=null,a([]);return}if(!(j!=null&&j.is_active)||!((b=j==null?void 0:j.profile)!=null&&b.is_active)){console.warn("Usurio ou profile inativo"),r(null),l.current=null,a([]);return}const _=j;r(_),l.current=_;const{data:S,error:C}=await W.from("permissions").select("resource, can_read, can_create, can_update, can_delete").eq("profile_id",j.profile_id);if(C){console.error("Erro ao carregar permisses:",C),a([]);return}a(S||[])}catch(w){console.error("Erro ao carregar permisses:",w),r(null),l.current=null,a([])}finally{v&&o(!1)}};m.useEffect(()=>{c(!0);const{data:{subscription:v}}=W.auth.onAuthStateChange(b=>{if(b==="SIGNED_IN"){if(l.current)return;c(!0)}else b==="SIGNED_OUT"&&(r(null),l.current=null,a([]))});return()=>{v.unsubscribe()}},[]);const u=((y=t==null?void 0:t.profile)==null?void 0:y.is_admin)??!1,d=(v,b)=>{if(u)return!0;const w=n.find(N=>N.resource===v);if(!w)return!1;const j=`can_${b}`;return w[j]===!0},x={userProfile:t,permissions:n,loading:i,isAdmin:u,hasPermission:d,canRead:v=>d(v,"read"),canCreate:v=>d(v,"create"),canUpdate:v=>d(v,"update"),canDelete:v=>d(v,"delete"),refreshPermissions:()=>c(!0)};return s.jsx(lP.Provider,{value:x,children:e})}function nn(){const e=m.useContext(lP);if(e===void 0)throw new Error("usePermissions must be used within a PermissionsProvider");return e}function In({size:e="md",variant:t="walking",text:r="Carregando..."}){const n={sm:"w-12 h-12",md:"w-20 h-20",lg:"w-32 h-32"};return t==="walking"?s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:`${n[e]} relative`,children:s.jsx("div",{className:"absolute inset-0 animate-cat-walk",children:s.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("circle",{cx:"50",cy:"35",r:"15",fill:"#FF8C42"}),s.jsx("path",{d:"M 40 25 L 35 15 L 45 20 Z",fill:"#FF8C42"}),s.jsx("path",{d:"M 60 25 L 65 15 L 55 20 Z",fill:"#FF8C42"}),s.jsx("path",{d:"M 40 24 L 37 18 L 43 21 Z",fill:"#FFB380"}),s.jsx("path",{d:"M 60 24 L 63 18 L 57 21 Z",fill:"#FFB380"}),s.jsx("circle",{cx:"45",cy:"35",r:"2",fill:"#000",className:"animate-blink"}),s.jsx("circle",{cx:"55",cy:"35",r:"2",fill:"#000",className:"animate-blink"}),s.jsx("circle",{cx:"50",cy:"40",r:"1.5",fill:"#FF6B9D"}),s.jsx("line",{x1:"35",y1:"40",x2:"28",y2:"39",stroke:"#000",strokeWidth:"0.5"}),s.jsx("line",{x1:"35",y1:"42",x2:"28",y2:"43",stroke:"#000",strokeWidth:"0.5"}),s.jsx("line",{x1:"65",y1:"40",x2:"72",y2:"39",stroke:"#000",strokeWidth:"0.5"}),s.jsx("line",{x1:"65",y1:"42",x2:"72",y2:"43",stroke:"#000",strokeWidth:"0.5"}),s.jsx("ellipse",{cx:"50",cy:"60",rx:"18",ry:"22",fill:"#FF8C42"}),s.jsx("ellipse",{cx:"50",cy:"62",rx:"12",ry:"15",fill:"#FFB380"}),s.jsx("path",{d:"M 68 55 Q 80 50 85 60",stroke:"#FF8C42",strokeWidth:"6",fill:"none",strokeLinecap:"round",className:"animate-tail-wag"}),s.jsx("rect",{x:"40",y:"75",width:"4",height:"12",rx:"2",fill:"#FF8C42",className:"animate-leg-left"}),s.jsx("rect",{x:"56",y:"75",width:"4",height:"12",rx:"2",fill:"#FF8C42",className:"animate-leg-right"}),s.jsx("circle",{cx:"42",cy:"87",r:"2.5",fill:"#FFB380",className:"animate-leg-left"}),s.jsx("circle",{cx:"58",cy:"87",r:"2.5",fill:"#FFB380",className:"animate-leg-right"})]})})}),r&&s.jsx("p",{className:"text-sm text-gray-600 animate-pulse",children:r})]}):t==="paws"?s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:"flex gap-2",children:[0,1,2,3].map(a=>s.jsx("div",{className:"animate-paw-bounce",style:{animationDelay:`${a*.15}s`},children:s.jsxs("svg",{width:"30",height:"30",viewBox:"0 0 30 30",fill:"none",children:[s.jsx("ellipse",{cx:"15",cy:"18",rx:"8",ry:"7",fill:"#FF8C42"}),s.jsx("circle",{cx:"10",cy:"10",r:"3",fill:"#FF8C42"}),s.jsx("circle",{cx:"15",cy:"8",r:"3",fill:"#FF8C42"}),s.jsx("circle",{cx:"20",cy:"10",r:"3",fill:"#FF8C42"}),s.jsx("ellipse",{cx:"15",cy:"18",rx:"5",ry:"4",fill:"#FFB380"})]})},a))}),r&&s.jsx("p",{className:"text-sm text-gray-600",children:r})]}):t==="sleeping"?s.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[s.jsx("div",{className:`${n[e]} relative`,children:s.jsxs("svg",{viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("circle",{cx:"50",cy:"55",r:"25",fill:"#FF8C42",className:"animate-breathing"}),s.jsx("circle",{cx:"50",cy:"55",r:"18",fill:"#FFB380",className:"animate-breathing"}),s.jsx("circle",{cx:"40",cy:"40",r:"12",fill:"#FF8C42",className:"animate-breathing"}),s.jsx("path",{d:"M 35 30 L 30 22 L 38 28 Z",fill:"#FF8C42"}),s.jsx("path",{d:"M 45 30 L 50 22 L 42 28 Z",fill:"#FF8C42"}),s.jsx("path",{d:"M 35 29 L 32 24 L 37 28 Z",fill:"#FFB380"}),s.jsx("path",{d:"M 45 29 L 48 24 L 43 28 Z",fill:"#FFB380"}),s.jsx("path",{d:"M 35 40 Q 37 42 39 40",stroke:"#000",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("path",{d:"M 41 40 Q 43 42 45 40",stroke:"#000",strokeWidth:"1.5",fill:"none",strokeLinecap:"round"}),s.jsx("circle",{cx:"40",cy:"44",r:"1",fill:"#FF6B9D"}),s.jsx("text",{x:"65",y:"25",className:"animate-zzz",fill:"#999",fontSize:"8",fontWeight:"bold",children:"Z"}),s.jsx("text",{x:"70",y:"20",className:"animate-zzz",fill:"#999",fontSize:"10",fontWeight:"bold",style:{animationDelay:"0.3s"},children:"Z"}),s.jsx("text",{x:"76",y:"15",className:"animate-zzz",fill:"#999",fontSize:"12",fontWeight:"bold",style:{animationDelay:"0.6s"},children:"Z"}),s.jsx("path",{d:"M 70 65 Q 80 70 75 80",stroke:"#FF8C42",strokeWidth:"8",fill:"none",strokeLinecap:"round"})]})}),r&&s.jsx("p",{className:"text-sm text-gray-600",children:r})]}):null}function E8(){var h,p;const[e,t]=m.useState(""),[r,n]=m.useState(""),[a,i]=m.useState(!1),[o,l]=m.useState(""),c=Ei(),d=((p=(h=Es().state)==null?void 0:h.from)==null?void 0:p.pathname)||"/",f=async g=>{g.preventDefault(),i(!0),l("");try{const{data:x,error:y}=await W.auth.signInWithPassword({email:e,password:r});if(y){l(y.message),X.error("Erro ao fazer login: "+y.message);return}if(x.session){X.success("Login realizado com sucesso!");const v=new Date(x.user.created_at);if((new Date().getTime()-v.getTime())/1e3/60<5){c("/change-password?firstLogin=true",{replace:!0});return}c(d,{replace:!0})}}catch(x){console.error("Erro ao fazer login:",x),l("Erro inesperado ao fazer login"),X.error("Erro inesperado ao fazer login")}finally{i(!1)}};return a?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-secondary-50 via-white to-primary-50",children:s.jsx(In,{size:"lg",variant:"walking",text:"Entrando no sistema..."})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-secondary-50 via-white to-primary-50 py-12 px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"max-w-md w-full space-y-8 bg-white p-8 rounded-2xl shadow-fefelina border border-gray-100",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("img",{src:"/fefelina-admin/fefelina-logo.png",alt:"Fefelina Logo",className:"mx-auto w-20 h-20 mb-6 drop-shadow-lg"}),s.jsx("h2",{className:"mt-6 text-2xl font-extrabold text-secondary-700",children:"Fefelina - Sistema de Gesto"}),s.jsx("p",{className:"mt-2 text-sm text-secondary-500",children:"Acesso restrito ao administrador"})]}),s.jsxs("form",{className:"mt-8 space-y-6",onSubmit:f,children:[s.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"email-address",className:"sr-only",children:"Email"}),s.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-secondary-400 text-secondary-900 rounded-t-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm bg-white",placeholder:"Email",value:e,onChange:g=>t(g.target.value)})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"password",className:"sr-only",children:"Senha"}),s.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-secondary-400 text-secondary-900 rounded-b-md focus:outline-none focus:ring-primary-500 focus:border-primary-500 focus:z-10 sm:text-sm bg-white",placeholder:"Senha",value:r,onChange:g=>n(g.target.value)})]})]}),o&&s.jsx("div",{className:"text-red-600 text-sm text-center bg-red-50 p-3 rounded-md border border-red-200",children:o}),s.jsx("div",{children:s.jsx("button",{type:"submit",disabled:a,className:"group relative w-full flex justify-center py-3 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-500 hover:bg-primary-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 shadow-lg",children:a?"Entrando...":"Entrar"})})]})]})})}function cP(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=cP(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nt(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=cP(e))&&(n&&(n+=" "),n+=t);return n}var P8=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function Ky(e){if(typeof e!="string")return!1;var t=P8;return t.includes(e)}var O8=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],A8=new Set(O8);function uP(e){return typeof e!="string"?!1:A8.has(e)}function dP(e){return typeof e=="string"&&e.startsWith("data-")}function An(e){if(typeof e!="object"||e===null)return{};var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(uP(r)||dP(r))&&(t[r]=e[r]);return t}function po(e){if(e==null)return null;if(m.isValidElement(e)&&typeof e.props=="object"&&e.props!==null){var t=e.props;return An(t)}return typeof e=="object"&&!Array.isArray(e)?An(e):null}function en(e){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(uP(r)||dP(r)||Ky(r))&&(t[r]=e[r]);return t}function T8(e){return e==null?null:m.isValidElement(e)?en(e.props):typeof e=="object"&&!Array.isArray(e)?en(e):null}var M8=["children","width","height","viewBox","className","style","title","desc"];function Mv(){return Mv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Mv.apply(null,arguments)}function D8(e,t){if(e==null)return{};var r,n,a=$8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function $8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Yy=m.forwardRef((e,t)=>{var{children:r,width:n,height:a,viewBox:i,className:o,style:l,title:c,desc:u}=e,d=D8(e,M8),f=i||{width:n,height:a,x:0,y:0},h=nt("recharts-surface",o);return m.createElement("svg",Mv({},en(d),{className:h,width:n,height:a,style:l,viewBox:"".concat(f.x," ").concat(f.y," ").concat(f.width," ").concat(f.height),ref:t}),m.createElement("title",null,c),m.createElement("desc",null,u),r)}),I8=["children","className"];function Dv(){return Dv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Dv.apply(null,arguments)}function L8(e,t){if(e==null)return{};var r,n,a=R8(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function R8(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var Er=m.forwardRef((e,t)=>{var{children:r,className:n}=e,a=L8(e,I8),i=nt("recharts-layer",n);return m.createElement("g",Dv({className:i},en(a),{ref:t}),r)}),fP=m.createContext(null),z8=()=>m.useContext(fP);function Nt(e){return function(){return e}}const mP=Math.cos,pm=Math.sin,_a=Math.sqrt,gm=Math.PI,Uh=2*gm,$v=Math.PI,Iv=2*$v,Bs=1e-6,F8=Iv-Bs;function hP(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function B8(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return hP;const r=10**t;return function(n){this._+=n[0];for(let a=1,i=n.length;a<i;++a)this._+=Math.round(arguments[a]*r)/r+n[a]}}class U8{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?hP:B8(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,a){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+a}`}bezierCurveTo(t,r,n,a,i,o){this._append`C${+t},${+r},${+n},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,r,n,a,i){if(t=+t,r=+r,n=+n,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=n-t,u=a-r,d=o-t,f=l-r,h=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(h>Bs)if(!(Math.abs(f*c-u*d)>Bs)||!i)this._append`L${this._x1=t},${this._y1=r}`;else{let p=n-o,g=a-l,x=c*c+u*u,y=p*p+g*g,v=Math.sqrt(x),b=Math.sqrt(h),w=i*Math.tan(($v-Math.acos((x+h-y)/(2*v*b)))/2),j=w/b,N=w/v;Math.abs(j-1)>Bs&&this._append`L${t+j*d},${r+j*f}`,this._append`A${i},${i},0,0,${+(f*p>d*g)},${this._x1=t+N*c},${this._y1=r+N*u}`}}arc(t,r,n,a,i,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(a),c=n*Math.sin(a),u=t+l,d=r+c,f=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>Bs||Math.abs(this._y1-d)>Bs)&&this._append`L${u},${d}`,n&&(h<0&&(h=h%Iv+Iv),h>F8?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:h>Bs&&this._append`A${n},${n},0,${+(h>=$v)},${f},${this._x1=t+n*Math.cos(i)},${this._y1=r+n*Math.sin(i)}`)}rect(t,r,n,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+a}h${-n}Z`}toString(){return this._}}function Gy(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new U8(t)}function Xy(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function pP(e){this._context=e}pP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function Wh(e){return new pP(e)}function gP(e){return e[0]}function vP(e){return e[1]}function xP(e,t){var r=Nt(!0),n=null,a=Wh,i=null,o=Gy(l);e=typeof e=="function"?e:e===void 0?gP:Nt(e),t=typeof t=="function"?t:t===void 0?vP:Nt(t);function l(c){var u,d=(c=Xy(c)).length,f,h=!1,p;for(n==null&&(i=a(p=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(f,u,c),+t(f,u,c));if(p)return i=null,p+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Nt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Nt(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Nt(!!c),l):r},l.curve=function(c){return arguments.length?(a=c,n!=null&&(i=a(n)),l):a},l.context=function(c){return arguments.length?(c==null?n=i=null:i=a(n=c),l):n},l}function Gd(e,t,r){var n=null,a=Nt(!0),i=null,o=Wh,l=null,c=Gy(u);e=typeof e=="function"?e:e===void 0?gP:Nt(+e),t=typeof t=="function"?t:Nt(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?vP:Nt(+r);function u(f){var h,p,g,x=(f=Xy(f)).length,y,v=!1,b,w=new Array(x),j=new Array(x);for(i==null&&(l=o(b=c())),h=0;h<=x;++h){if(!(h<x&&a(y=f[h],h,f))===v)if(v=!v)p=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),g=h-1;g>=p;--g)l.point(w[g],j[g]);l.lineEnd(),l.areaEnd()}v&&(w[h]=+e(y,h,f),j[h]=+t(y,h,f),l.point(n?+n(y,h,f):w[h],r?+r(y,h,f):j[h]))}if(b)return l=null,b+""||null}function d(){return xP().defined(a).curve(o).context(i)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Nt(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Nt(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Nt(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Nt(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Nt(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Nt(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(a=typeof f=="function"?f:Nt(!!f),u):a},u.curve=function(f){return arguments.length?(o=f,i!=null&&(l=o(i)),u):o},u.context=function(f){return arguments.length?(f==null?i=l=null:l=o(i=f),u):i},u}class yP{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function W8(e){return new yP(e,!0)}function V8(e){return new yP(e,!1)}const Qy={draw(e,t){const r=_a(t/gm);e.moveTo(r,0),e.arc(0,0,r,0,Uh)}},q8={draw(e,t){const r=_a(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},bP=_a(1/3),H8=bP*2,K8={draw(e,t){const r=_a(t/H8),n=r*bP;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},Y8={draw(e,t){const r=_a(t),n=-r/2;e.rect(n,n,r,r)}},G8=.8908130915292852,wP=pm(gm/10)/pm(7*gm/10),X8=pm(Uh/10)*wP,Q8=-mP(Uh/10)*wP,Z8={draw(e,t){const r=_a(t*G8),n=X8*r,a=Q8*r;e.moveTo(0,-r),e.lineTo(n,a);for(let i=1;i<5;++i){const o=Uh*i/5,l=mP(o),c=pm(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*a,c*n+l*a)}e.closePath()}},L0=_a(3),J8={draw(e,t){const r=-_a(t/(L0*3));e.moveTo(0,r*2),e.lineTo(-L0*r,-r),e.lineTo(L0*r,-r),e.closePath()}},zn=-.5,Fn=_a(3)/2,Lv=1/_a(12),eR=(Lv/2+1)*3,tR={draw(e,t){const r=_a(t/eR),n=r/2,a=r*Lv,i=n,o=r*Lv+r,l=-i,c=o;e.moveTo(n,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(zn*n-Fn*a,Fn*n+zn*a),e.lineTo(zn*i-Fn*o,Fn*i+zn*o),e.lineTo(zn*l-Fn*c,Fn*l+zn*c),e.lineTo(zn*n+Fn*a,zn*a-Fn*n),e.lineTo(zn*i+Fn*o,zn*o-Fn*i),e.lineTo(zn*l+Fn*c,zn*c-Fn*l),e.closePath()}};function rR(e,t){let r=null,n=Gy(a);e=typeof e=="function"?e:Nt(e||Qy),t=typeof t=="function"?t:Nt(t===void 0?64:+t);function a(){let i;if(r||(r=i=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),i)return r=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:Nt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:Nt(+i),a):t},a.context=function(i){return arguments.length?(r=i??null,a):r},a}function vm(){}function xm(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function jP(e){this._context=e}jP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:xm(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:xm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function nR(e){return new jP(e)}function _P(e){this._context=e}_P.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:xm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aR(e){return new _P(e)}function NP(e){this._context=e}NP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:xm(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iR(e){return new NP(e)}function SP(e){this._context=e}SP.prototype={areaStart:vm,areaEnd:vm,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function sR(e){return new SP(e)}function t2(e){return e<0?-1:1}function r2(e,t,r){var n=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(n||a<0&&-0),o=(r-e._y1)/(a||n<0&&-0),l=(i*a+o*n)/(n+a);return(t2(i)+t2(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function n2(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function R0(e,t,r){var n=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-n)/3;e._context.bezierCurveTo(n+l,a+l*t,i-l,o-l*r,i,o)}function ym(e){this._context=e}ym.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:R0(this,this._t0,n2(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,R0(this,n2(this,r=r2(this,e,t)),r);break;default:R0(this,this._t0,r=r2(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function kP(e){this._context=new CP(e)}(kP.prototype=Object.create(ym.prototype)).point=function(e,t){ym.prototype.point.call(this,t,e)};function CP(e){this._context=e}CP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,a,i){this._context.bezierCurveTo(t,e,n,r,i,a)}};function oR(e){return new ym(e)}function lR(e){return new kP(e)}function EP(e){this._context=e}EP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=a2(e),a=a2(t),i=0,o=1;o<r;++i,++o)this._context.bezierCurveTo(n[0][i],a[0][i],n[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function a2(e){var t,r=e.length-1,n,a=new Array(r),i=new Array(r),o=new Array(r);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[r-1]=2,i[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=a[t]/i[t-1],i[t]-=n,o[t]-=n*o[t-1];for(a[r-1]=o[r-1]/i[r-1],t=r-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[r-1]=(e[r]+a[r-1])/2,t=0;t<r-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function cR(e){return new EP(e)}function Vh(e,t){this._context=e,this._t=t}Vh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function uR(e){return new Vh(e,.5)}function dR(e){return new Vh(e,0)}function fR(e){return new Vh(e,1)}function go(e,t){if((o=e.length)>1)for(var r=1,n,a,i=e[t[0]],o,l=i.length;r<o;++r)for(a=i,i=e[t[r]],n=0;n<l;++n)i[n][1]+=i[n][0]=isNaN(a[n][1])?a[n][0]:a[n][1]}function Rv(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function mR(e,t){return e[t]}function hR(e){const t=[];return t.key=e,t}function pR(){var e=Nt([]),t=Rv,r=go,n=mR;function a(i){var o=Array.from(e.apply(this,arguments),hR),l,c=o.length,u=-1,d;for(const f of i)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,i)]).data=f;for(l=0,d=Xy(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:Nt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(n=typeof i=="function"?i:Nt(+i),a):n},a.order=function(i){return arguments.length?(t=i==null?Rv:typeof i=="function"?i:Nt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(r=i??go,a):r},a}function gR(e,t){if((n=e.length)>0){for(var r,n,a=0,i=e[0].length,o;a<i;++a){for(o=r=0;r<n;++r)o+=e[r][a][1]||0;if(o)for(r=0;r<n;++r)e[r][a][1]/=o}go(e,t)}}function vR(e,t){if((a=e.length)>0){for(var r=0,n=e[t[0]],a,i=n.length;r<i;++r){for(var o=0,l=0;o<a;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}go(e,t)}}function xR(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var r=0,n=1,a,i,o;n<i;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,h=d[n-1][1]||0,p=(f-h)/2,g=0;g<l;++g){var x=e[t[g]],y=x[n][1]||0,v=x[n-1][1]||0;p+=y-v}c+=f,u+=p*f}a[n-1][1]+=a[n-1][0]=r,c&&(r-=u/c)}a[n-1][1]+=a[n-1][0]=r,go(e,t)}}var qh={},PP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==="__proto__"}e.isUnsafeProperty=t})(PP);var Zy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){switch(typeof r){case"number":case"symbol":return!1;case"string":return r.includes(".")||r.includes("[")||r.includes("]")}}e.isDeepKey=t})(Zy);var Jy={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var n;return typeof r=="string"||typeof r=="symbol"?r:Object.is((n=r==null?void 0:r.valueOf)==null?void 0:n.call(r),-0)?"-0":String(r)}e.toKey=t})(Jy);var Hh={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){const n=[],a=r.length;if(a===0)return n;let i=0,o="",l="",c=!1;for(r.charCodeAt(0)===46&&(n.push(""),i++);i<a;){const u=r[i];l?u==="\\"&&i+1<a?(i++,o+=r[i]):u===l?l="":o+=u:c?u==='"'||u==="'"?l=u:u==="]"?(c=!1,n.push(o),o=""):o+=u:u==="["?(c=!0,o&&(n.push(o),o="")):u==="."?o&&(n.push(o),o=""):o+=u,i++}return o&&n.push(o),n}e.toPath=t})(Hh);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=PP,r=Zy,n=Jy,a=Hh;function i(l,c,u){if(l==null)return u;switch(typeof c){case"string":{if(t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?r.isDeepKey(c)?i(l,a.toPath(c),u):u:d}case"number":case"symbol":{typeof c=="number"&&(c=n.toKey(c));const d=l[c];return d===void 0?u:d}default:{if(Array.isArray(c))return o(l,c,u);if(Object.is(c==null?void 0:c.valueOf(),-0)?c="-0":c=String(c),t.isUnsafeProperty(c))return u;const d=l[c];return d===void 0?u:d}}}function o(l,c,u){if(c.length===0)return u;let d=l;for(let f=0;f<c.length;f++){if(d==null||t.isUnsafeProperty(c[f]))return u;d=d[c[f]]}return d===void 0?u:d}e.get=i})(qh);var yR=qh.get;const vo=Si(yR);var bR=4;function ts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:bR,r=10**t,n=Math.round(e*r)/r;return Object.is(n,-0)?0:n}function qt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return e.reduce((a,i,o)=>{var l=r[o-1];return typeof l=="string"?a+l+i:l!==void 0?a+ts(l)+i:a+i},"")}var kr=e=>e===0?0:e>0?1:-1,ba=e=>typeof e=="number"&&e!=+e,gi=e=>typeof e=="string"&&e.indexOf("%")===e.length-1,Se=e=>(typeof e=="number"||e instanceof Number)&&!ba(e),Fa=e=>Se(e)||typeof e=="string",wR=0,Nu=e=>{var t=++wR;return"".concat(e||"").concat(t)},Vr=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Se(t)&&typeof t!="string")return n;var i;if(gi(t)){if(r==null)return n;var o=t.indexOf("%");i=r*parseFloat(t.slice(0,o))/100}else i=+t;return ba(i)&&(i=n),a&&r!=null&&i>r&&(i=r),i},OP=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,r={},n=0;n<t;n++)if(!r[String(e[n])])r[String(e[n])]=!0;else return!0;return!1};function Mt(e,t,r){return Se(e)&&Se(t)?ts(e+r*(t-e)):t}function AP(e,t,r){if(!(!e||!e.length))return e.find(n=>n&&(typeof t=="function"?t(n):vo(n,t))===r)}var It=e=>e===null||typeof e>"u",Xu=e=>It(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1));function jR(e){return e!=null}function Qu(){}var _R=["type","size","sizeType"];function zv(){return zv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},zv.apply(null,arguments)}function i2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function s2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?i2(Object(r),!0).forEach(function(n){NR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function NR(e,t,r){return(t=SR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function SR(e){var t=kR(e,"string");return typeof t=="symbol"?t:t+""}function kR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function CR(e,t){if(e==null)return{};var r,n,a=ER(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ER(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var TP={symbolCircle:Qy,symbolCross:q8,symbolDiamond:K8,symbolSquare:Y8,symbolStar:Z8,symbolTriangle:J8,symbolWye:tR},PR=Math.PI/180,OR=e=>{var t="symbol".concat(Xu(e));return TP[t]||Qy},AR=(e,t,r)=>{if(t==="area")return e;switch(r){case"cross":return 5*e*e/9;case"diamond":return .5*e*e/Math.sqrt(3);case"square":return e*e;case"star":{var n=18*PR;return 1.25*e*e*(Math.tan(n)-Math.tan(n*2)*Math.tan(n)**2)}case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}},TR=(e,t)=>{TP["symbol".concat(Xu(e))]=t},eb=e=>{var{type:t="circle",size:r=64,sizeType:n="area"}=e,a=CR(e,_R),i=s2(s2({},a),{},{type:t,size:r,sizeType:n}),o="circle";typeof t=="string"&&(o=t);var l=()=>{var h=OR(o),p=rR().type(h).size(AR(r,n,o)),g=p();if(g!==null)return g},{className:c,cx:u,cy:d}=i,f=en(i);return Se(u)&&Se(d)&&Se(r)?m.createElement("path",zv({},f,{className:nt("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(d,")"),d:l()})):null};eb.registerSymbol=TR;var MP=e=>"radius"in e&&"startAngle"in e&&"endAngle"in e,tb=(e,t)=>{if(!e||typeof e=="function"||typeof e=="boolean")return null;var r=e;if(m.isValidElement(e)&&(r=e.props),typeof r!="object"&&typeof r!="function")return null;var n={};return Object.keys(r).forEach(a=>{Ky(a)&&(n[a]=t||(i=>r[a](r,i)))}),n},MR=(e,t,r)=>n=>(e(t,r,n),null),Zu=(e,t,r)=>{if(e===null||typeof e!="object"&&typeof e!="function")return null;var n=null;return Object.keys(e).forEach(a=>{var i=e[a];Ky(a)&&typeof i=="function"&&(n||(n={}),n[a]=MR(i,t,r))}),n};function o2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o2(Object(r),!0).forEach(function(n){$R(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $R(e,t,r){return(t=IR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IR(e){var t=LR(e,"string");return typeof t=="symbol"?t:t+""}function LR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ar(e,t){var r=DR({},e),n=t,a=Object.keys(t),i=a.reduce((o,l)=>(o[l]===void 0&&n[l]!==void 0&&(o[l]=n[l]),o),r);return i}function bm(){return bm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},bm.apply(null,arguments)}function l2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function RR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?l2(Object(r),!0).forEach(function(n){zR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zR(e,t,r){return(t=FR(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FR(e){var t=BR(e,"string");return typeof t=="symbol"?t:t+""}function BR(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wn=32,UR={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function WR(e){var{data:t,iconType:r,inactiveColor:n}=e,a=Wn/2,i=Wn/6,o=Wn/3,l=t.inactive?n:t.color,c=r??t.type;if(c==="none")return null;if(c==="plainline"){var u;return m.createElement("line",{strokeWidth:4,fill:"none",stroke:l,strokeDasharray:(u=t.payload)===null||u===void 0?void 0:u.strokeDasharray,x1:0,y1:a,x2:Wn,y2:a,className:"recharts-legend-icon"})}if(c==="line")return m.createElement("path",{strokeWidth:4,fill:"none",stroke:l,d:"M0,".concat(a,"h").concat(o,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*o,",").concat(a,`
            H`).concat(Wn,"M").concat(2*o,",").concat(a,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(o,",").concat(a),className:"recharts-legend-icon"});if(c==="rect")return m.createElement("path",{stroke:"none",fill:l,d:"M0,".concat(Wn/8,"h").concat(Wn,"v").concat(Wn*3/4,"h").concat(-Wn,"z"),className:"recharts-legend-icon"});if(m.isValidElement(t.legendIcon)){var d=RR({},t);return delete d.legendIcon,m.cloneElement(t.legendIcon,d)}return m.createElement(eb,{fill:l,cx:a,cy:a,size:Wn,sizeType:"diameter",type:c})}function VR(e){var{payload:t,iconSize:r,layout:n,formatter:a,inactiveColor:i,iconType:o}=e,l={x:0,y:0,width:Wn,height:Wn},c={display:n==="horizontal"?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((d,f)=>{var h=d.formatter||a,p=nt({"recharts-legend-item":!0,["legend-item-".concat(f)]:!0,inactive:d.inactive});if(d.type==="none")return null;var g=d.inactive?i:d.color,x=h?h(d.value,d,f):d.value;return m.createElement("li",bm({className:p,style:c,key:"legend-item-".concat(f)},Zu(e,d,f)),m.createElement(Yy,{width:r,height:r,viewBox:l,style:u,"aria-label":"".concat(x," legend icon")},m.createElement(WR,{data:d,iconType:o,inactiveColor:i})),m.createElement("span",{className:"recharts-legend-item-text",style:{color:g}},x))})}var qR=e=>{var t=ar(e,UR),{payload:r,layout:n,align:a}=t;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:n==="horizontal"?a:"left"};return m.createElement("ul",{className:"recharts-default-legend",style:i},m.createElement(VR,bm({},t,{payload:r})))},DP={},$P={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){const a=new Map;for(let i=0;i<r.length;i++){const o=r[i],l=n(o);a.has(l)||a.set(l,o)}return Array.from(a.values())}e.uniqBy=t})($P);var rb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r}e.identity=t})(rb);var IP={},Kh={},LP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Number.isSafeInteger(r)&&r>=0}e.isLength=t})(LP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=LP;function r(n){return n!=null&&typeof n!="function"&&t.isLength(n.length)}e.isArrayLike=r})(Kh);var RP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="object"&&r!==null}e.isObjectLike=t})(RP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Kh,r=RP;function n(a){return r.isObjectLike(a)&&t.isArrayLike(a)}e.isArrayLikeObject=n})(IP);var zP={},FP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=qh;function r(n){return function(a){return t.get(a,n)}}e.property=r})(FP);var BP={},z0={},F0={},nb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r!==null&&(typeof r=="object"||typeof r=="function")}e.isObject=t})(nb);var ab={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null||typeof r!="object"&&typeof r!="function"}e.isPrimitive=t})(ab);var ib={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n){return r===n||Number.isNaN(r)&&Number.isNaN(n)}e.eq=t})(ib);var c2;function HR(){return c2||(c2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sb(),r=nb,n=ab,a=ib;function i(f,h,p){return typeof p!="function"?t.isMatch(f,h):o(f,h,function g(x,y,v,b,w,j){const N=p(x,y,v,b,w,j);return N!==void 0?!!N:o(x,y,g,j)},new Map)}function o(f,h,p,g){if(h===f)return!0;switch(typeof h){case"object":return l(f,h,p,g);case"function":return Object.keys(h).length>0?o(f,{...h},p,g):a.eq(f,h);default:return r.isObject(f)?typeof h=="string"?h==="":!0:a.eq(f,h)}}function l(f,h,p,g){if(h==null)return!0;if(Array.isArray(h))return u(f,h,p,g);if(h instanceof Map)return c(f,h,p,g);if(h instanceof Set)return d(f,h,p,g);const x=Object.keys(h);if(f==null)return x.length===0;if(x.length===0)return!0;if(g&&g.has(h))return g.get(h)===f;g&&g.set(h,f);try{for(let y=0;y<x.length;y++){const v=x[y];if(!n.isPrimitive(f)&&!(v in f)||h[v]===void 0&&f[v]!==void 0||h[v]===null&&f[v]!==null||!p(f[v],h[v],v,f,h,g))return!1}return!0}finally{g&&g.delete(h)}}function c(f,h,p,g){if(h.size===0)return!0;if(!(f instanceof Map))return!1;for(const[x,y]of h.entries()){const v=f.get(x);if(p(v,y,x,f,h,g)===!1)return!1}return!0}function u(f,h,p,g){if(h.length===0)return!0;if(!Array.isArray(f))return!1;const x=new Set;for(let y=0;y<h.length;y++){const v=h[y];let b=!1;for(let w=0;w<f.length;w++){if(x.has(w))continue;const j=f[w];let N=!1;if(p(j,v,y,f,h,g)&&(N=!0),N){x.add(w),b=!0;break}}if(!b)return!1}return!0}function d(f,h,p,g){return h.size===0?!0:f instanceof Set?u([...f],[...h],p,g):!1}e.isMatchWith=i,e.isSetMatch=d}(F0)),F0}var u2;function sb(){return u2||(u2=1,function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=HR();function r(n,a){return t.isMatchWith(n,a,()=>{})}e.isMatch=r}(z0)),z0}var UP={},ob={},WP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Object.getOwnPropertySymbols(r).filter(n=>Object.prototype.propertyIsEnumerable.call(r,n))}e.getSymbols=t})(WP);var lb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r==null?r===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(r)}e.getTag=t})(lb);var cb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t="[object RegExp]",r="[object String]",n="[object Number]",a="[object Boolean]",i="[object Arguments]",o="[object Symbol]",l="[object Date]",c="[object Map]",u="[object Set]",d="[object Array]",f="[object Function]",h="[object ArrayBuffer]",p="[object Object]",g="[object Error]",x="[object DataView]",y="[object Uint8Array]",v="[object Uint8ClampedArray]",b="[object Uint16Array]",w="[object Uint32Array]",j="[object BigUint64Array]",N="[object Int8Array]",_="[object Int16Array]",S="[object Int32Array]",C="[object BigInt64Array]",O="[object Float32Array]",A="[object Float64Array]";e.argumentsTag=i,e.arrayBufferTag=h,e.arrayTag=d,e.bigInt64ArrayTag=C,e.bigUint64ArrayTag=j,e.booleanTag=a,e.dataViewTag=x,e.dateTag=l,e.errorTag=g,e.float32ArrayTag=O,e.float64ArrayTag=A,e.functionTag=f,e.int16ArrayTag=_,e.int32ArrayTag=S,e.int8ArrayTag=N,e.mapTag=c,e.numberTag=n,e.objectTag=p,e.regexpTag=t,e.setTag=u,e.stringTag=r,e.symbolTag=o,e.uint16ArrayTag=b,e.uint32ArrayTag=w,e.uint8ArrayTag=y,e.uint8ClampedArrayTag=v})(cb);var VP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return ArrayBuffer.isView(r)&&!(r instanceof DataView)}e.isTypedArray=t})(VP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=WP,r=lb,n=cb,a=ab,i=VP;function o(d,f){return l(d,void 0,d,new Map,f)}function l(d,f,h,p=new Map,g=void 0){const x=g==null?void 0:g(d,f,h,p);if(x!=null)return x;if(a.isPrimitive(d))return d;if(p.has(d))return p.get(d);if(Array.isArray(d)){const y=new Array(d.length);p.set(d,y);for(let v=0;v<d.length;v++)y[v]=l(d[v],v,h,p,g);return Object.hasOwn(d,"index")&&(y.index=d.index),Object.hasOwn(d,"input")&&(y.input=d.input),y}if(d instanceof Date)return new Date(d.getTime());if(d instanceof RegExp){const y=new RegExp(d.source,d.flags);return y.lastIndex=d.lastIndex,y}if(d instanceof Map){const y=new Map;p.set(d,y);for(const[v,b]of d)y.set(v,l(b,v,h,p,g));return y}if(d instanceof Set){const y=new Set;p.set(d,y);for(const v of d)y.add(l(v,void 0,h,p,g));return y}if(typeof Buffer<"u"&&Buffer.isBuffer(d))return d.subarray();if(i.isTypedArray(d)){const y=new(Object.getPrototypeOf(d)).constructor(d.length);p.set(d,y);for(let v=0;v<d.length;v++)y[v]=l(d[v],v,h,p,g);return y}if(d instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&d instanceof SharedArrayBuffer)return d.slice(0);if(d instanceof DataView){const y=new DataView(d.buffer.slice(0),d.byteOffset,d.byteLength);return p.set(d,y),c(y,d,h,p,g),y}if(typeof File<"u"&&d instanceof File){const y=new File([d],d.name,{type:d.type});return p.set(d,y),c(y,d,h,p,g),y}if(d instanceof Blob){const y=new Blob([d],{type:d.type});return p.set(d,y),c(y,d,h,p,g),y}if(d instanceof Error){const y=new d.constructor;return p.set(d,y),y.message=d.message,y.name=d.name,y.stack=d.stack,y.cause=d.cause,c(y,d,h,p,g),y}if(typeof d=="object"&&u(d)){const y=Object.create(Object.getPrototypeOf(d));return p.set(d,y),c(y,d,h,p,g),y}return d}function c(d,f,h=d,p,g){const x=[...Object.keys(f),...t.getSymbols(f)];for(let y=0;y<x.length;y++){const v=x[y],b=Object.getOwnPropertyDescriptor(d,v);(b==null||b.writable)&&(d[v]=l(f[v],v,h,p,g))}}function u(d){switch(r.getTag(d)){case n.argumentsTag:case n.arrayTag:case n.arrayBufferTag:case n.dataViewTag:case n.booleanTag:case n.dateTag:case n.float32ArrayTag:case n.float64ArrayTag:case n.int8ArrayTag:case n.int16ArrayTag:case n.int32ArrayTag:case n.mapTag:case n.numberTag:case n.objectTag:case n.regexpTag:case n.setTag:case n.stringTag:case n.symbolTag:case n.uint8ArrayTag:case n.uint8ClampedArrayTag:case n.uint16ArrayTag:case n.uint32ArrayTag:return!0;default:return!1}}e.cloneDeepWith=o,e.cloneDeepWithImpl=l,e.copyProperties=c})(ob);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ob;function r(n){return t.cloneDeepWithImpl(n,void 0,n,new Map,void 0)}e.cloneDeep=r})(UP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sb(),r=UP;function n(a){return a=r.cloneDeep(a),i=>t.isMatch(i,a)}e.matches=n})(BP);var qP={},HP={},KP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ob,r=cb;function n(a,i){return t.cloneDeepWith(a,(o,l,c,u)=>{const d=i==null?void 0:i(o,l,c,u);if(d!=null)return d;if(typeof a=="object")switch(Object.prototype.toString.call(a)){case r.numberTag:case r.stringTag:case r.booleanTag:{const f=new a.constructor(a==null?void 0:a.valueOf());return t.copyProperties(f,a),f}case r.argumentsTag:{const f={};return t.copyProperties(f,a),f.length=a.length,f[Symbol.iterator]=a[Symbol.iterator],f}default:return}})}e.cloneDeepWith=n})(KP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=KP;function r(n){return t.cloneDeepWith(n)}e.cloneDeep=r})(HP);var YP={},ub={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=/^(?:0|[1-9]\d*)$/;function r(n,a=Number.MAX_SAFE_INTEGER){switch(typeof n){case"number":return Number.isInteger(n)&&n>=0&&n<a;case"symbol":return!1;case"string":return t.test(n)}}e.isIndex=r})(ub);var GP={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=lb;function r(n){return n!==null&&typeof n=="object"&&t.getTag(n)==="[object Arguments]"}e.isArguments=r})(GP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=Zy,r=ub,n=GP,a=Hh;function i(o,l){let c;if(Array.isArray(l)?c=l:typeof l=="string"&&t.isDeepKey(l)&&(o==null?void 0:o[l])==null?c=a.toPath(l):c=[l],c.length===0)return!1;let u=o;for(let d=0;d<c.length;d++){const f=c[d];if((u==null||!Object.hasOwn(u,f))&&!((Array.isArray(u)||n.isArguments(u))&&r.isIndex(f)&&f<u.length))return!1;u=u[f]}return!0}e.has=i})(YP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=sb(),r=Jy,n=HP,a=qh,i=YP;function o(l,c){switch(typeof l){case"object":{Object.is(l==null?void 0:l.valueOf(),-0)&&(l="-0");break}case"number":{l=r.toKey(l);break}}return c=n.cloneDeep(c),function(u){const d=a.get(u,l);return d===void 0?i.has(u,l):c===void 0?d===void 0:t.isMatch(d,c)}}e.matchesProperty=o})(qP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=rb,r=FP,n=BP,a=qP;function i(o){if(o==null)return t.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?a.matchesProperty(o[0],o[1]):n.matches(o);case"string":case"symbol":case"number":return r.property(o)}}e.iteratee=i})(zP);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=$P,r=rb,n=IP,a=zP;function i(o,l=r.identity){return n.isArrayLikeObject(o)?t.uniqBy(Array.from(o),a.iteratee(l)):[]}e.uniqBy=i})(DP);var KR=DP.uniqBy;const d2=Si(KR);function XP(e,t,r){return t===!0?d2(e,r):typeof t=="function"?d2(e,t):e}var QP={exports:{}},ZP={},JP={exports:{}},e5={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Al=m;function YR(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var GR=typeof Object.is=="function"?Object.is:YR,XR=Al.useState,QR=Al.useEffect,ZR=Al.useLayoutEffect,JR=Al.useDebugValue;function e7(e,t){var r=t(),n=XR({inst:{value:r,getSnapshot:t}}),a=n[0].inst,i=n[1];return ZR(function(){a.value=r,a.getSnapshot=t,B0(a)&&i({inst:a})},[e,r,t]),QR(function(){return B0(a)&&i({inst:a}),e(function(){B0(a)&&i({inst:a})})},[e]),JR(r),r}function B0(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!GR(e,r)}catch{return!0}}function t7(e,t){return t()}var r7=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?t7:e7;e5.useSyncExternalStore=Al.useSyncExternalStore!==void 0?Al.useSyncExternalStore:r7;JP.exports=e5;var n7=JP.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yh=m,a7=n7;function i7(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var s7=typeof Object.is=="function"?Object.is:i7,o7=a7.useSyncExternalStore,l7=Yh.useRef,c7=Yh.useEffect,u7=Yh.useMemo,d7=Yh.useDebugValue;ZP.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=l7(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=u7(function(){function c(p){if(!u){if(u=!0,d=p,p=n(p),a!==void 0&&o.hasValue){var g=o.value;if(a(g,p))return f=g}return f=p}if(g=f,s7(d,p))return g;var x=n(p);return a!==void 0&&a(g,x)?(d=p,g):(d=p,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var l=o7(e,i[0],i[1]);return c7(function(){o.hasValue=!0,o.value=l},[l]),d7(l),l};QP.exports=ZP;var f7=QP.exports,db=m.createContext(null),m7=e=>e,kt=()=>{var e=m.useContext(db);return e?e.store.dispatch:m7},Af=()=>{},h7=()=>Af,p7=(e,t)=>e===t;function Ce(e){var t=m.useContext(db);return f7.useSyncExternalStoreWithSelector(t?t.subscription.addNestedSub:h7,t?t.store.getState:Af,t?t.store.getState:Af,t?e:Af,p7)}function g7(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function v7(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function x7(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(r=>typeof r=="function")){const r=e.map(n=>typeof n=="function"?`function ${n.name||"unnamed"}()`:typeof n).join(", ");throw new TypeError(`${t}[${r}]`)}}var f2=e=>Array.isArray(e)?e:[e];function y7(e){const t=Array.isArray(e[0])?e[0]:e;return x7(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function b7(e,t){const r=[],{length:n}=e;for(let a=0;a<n;a++)r.push(e[a].apply(null,t));return r}var w7=class{constructor(e){this.value=e}deref(){return this.value}},j7=typeof WeakRef<"u"?WeakRef:w7,_7=0,m2=1;function Xd(){return{s:_7,v:void 0,o:null,p:null}}function t5(e,t={}){let r=Xd();const{resultEqualityCheck:n}=t;let a,i=0;function o(){var f;let l=r;const{length:c}=arguments;for(let h=0,p=c;h<p;h++){const g=arguments[h];if(typeof g=="function"||typeof g=="object"&&g!==null){let x=l.o;x===null&&(l.o=x=new WeakMap);const y=x.get(g);y===void 0?(l=Xd(),x.set(g,l)):l=y}else{let x=l.p;x===null&&(l.p=x=new Map);const y=x.get(g);y===void 0?(l=Xd(),x.set(g,l)):l=y}}const u=l;let d;if(l.s===m2)d=l.v;else if(d=e.apply(null,arguments),i++,n){const h=((f=a==null?void 0:a.deref)==null?void 0:f.call(a))??a;h!=null&&n(h,d)&&(d=h,i!==0&&i--),a=typeof d=="object"&&d!==null||typeof d=="function"?new j7(d):d}return u.s=m2,u.v=d,d}return o.clearCache=()=>{r=Xd(),o.resetResultsCount()},o.resultsCount=()=>i,o.resetResultsCount=()=>{i=0},o}function N7(e,...t){const r=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,n=(...a)=>{let i=0,o=0,l,c={},u=a.pop();typeof u=="object"&&(c=u,u=a.pop()),g7(u,`createSelector expects an output function after the inputs, but received: [${typeof u}]`);const d={...r,...c},{memoize:f,memoizeOptions:h=[],argsMemoize:p=t5,argsMemoizeOptions:g=[],devModeChecks:x={}}=d,y=f2(h),v=f2(g),b=y7(a),w=f(function(){return i++,u.apply(null,arguments)},...y),j=p(function(){o++;const _=b7(b,arguments);return l=w.apply(null,_),l},...v);return Object.assign(j,{resultFunc:u,memoizedResultFunc:w,dependencies:b,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>l,recomputations:()=>i,resetRecomputations:()=>{i=0},memoize:f,argsMemoize:p})};return Object.assign(n,{withTypes:()=>n}),n}var V=N7(t5),S7=Object.assign((e,t=V)=>{v7(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const r=Object.keys(e),n=r.map(i=>e[i]);return t(n,(...i)=>i.reduce((o,l,c)=>(o[r[c]]=l,o),{}))},{withTypes:()=>S7}),r5={},n5={},a5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(n){return typeof n=="symbol"?1:n===null?2:n===void 0?3:n!==n?4:0}const r=(n,a,i)=>{if(n!==a){const o=t(n),l=t(a);if(o===l&&o===0){if(n<a)return i==="desc"?1:-1;if(n>a)return i==="desc"?-1:1}return i==="desc"?l-o:o-l}return 0};e.compareValues=r})(a5);var i5={},fb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return typeof r=="symbol"||r instanceof Symbol}e.isSymbol=t})(fb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fb,r=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function a(i,o){return Array.isArray(i)?!1:typeof i=="number"||typeof i=="boolean"||i==null||t.isSymbol(i)?!0:typeof i=="string"&&(n.test(i)||!r.test(i))||o!=null&&Object.hasOwn(o,i)}e.isKey=a})(i5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=a5,r=i5,n=Hh;function a(i,o,l,c){if(i==null)return[];l=c?void 0:l,Array.isArray(i)||(i=Object.values(i)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(l)||(l=l==null?[]:[l]),l=l.map(p=>String(p));const u=(p,g)=>{let x=p;for(let y=0;y<g.length&&x!=null;++y)x=x[g[y]];return x},d=(p,g)=>g==null||p==null?g:typeof p=="object"&&"key"in p?Object.hasOwn(g,p.key)?g[p.key]:u(g,p.path):typeof p=="function"?p(g):Array.isArray(p)?u(g,p):typeof g=="object"?g[p]:g,f=o.map(p=>(Array.isArray(p)&&p.length===1&&(p=p[0]),p==null||typeof p=="function"||Array.isArray(p)||r.isKey(p)?p:{key:p,path:n.toPath(p)}));return i.map(p=>({original:p,criteria:f.map(g=>d(g,p))})).slice().sort((p,g)=>{for(let x=0;x<f.length;x++){const y=t.compareValues(p.criteria[x],g.criteria[x],l[x]);if(y!==0)return y}return 0}).map(p=>p.original)}e.orderBy=a})(n5);var s5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n=1){const a=[],i=Math.floor(n),o=(l,c)=>{for(let u=0;u<l.length;u++){const d=l[u];Array.isArray(d)&&c<i?o(d,c+1):a.push(d)}};return o(r,0),a}e.flatten=t})(s5);var mb={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=ub,r=Kh,n=nb,a=ib;function i(o,l,c){return n.isObject(c)&&(typeof l=="number"&&r.isArrayLike(c)&&t.isIndex(l)&&l<c.length||typeof l=="string"&&l in c)?a.eq(c[l],o):!1}e.isIterateeCall=i})(mb);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=n5,r=s5,n=mb;function a(i,...o){const l=o.length;return l>1&&n.isIterateeCall(i,o[0],o[1])?o=[]:l>2&&n.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),t.orderBy(i,r.flatten(o),["asc"])}e.sortBy=a})(r5);var k7=r5.sortBy;const Gh=Si(k7);var o5=e=>e.legend.settings,C7=e=>e.legend.size,E7=e=>e.legend.payload,P7=V([E7,o5],(e,t)=>{var{itemSorter:r}=t,n=e.flat(1);return r?Gh(n,r):n});function O7(){return Ce(P7)}var Qd=1;function l5(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[t,r]=m.useState({height:0,left:0,top:0,width:0}),n=m.useCallback(a=>{if(a!=null){var i=a.getBoundingClientRect(),o={height:i.height,left:i.left,top:i.top,width:i.width};(Math.abs(o.height-t.height)>Qd||Math.abs(o.left-t.left)>Qd||Math.abs(o.top-t.top)>Qd||Math.abs(o.width-t.width)>Qd)&&r({height:o.height,left:o.left,top:o.top,width:o.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,n]}function Tr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var A7=(()=>typeof Symbol=="function"&&Symbol.observable||"@@observable")(),h2=A7,U0=()=>Math.random().toString(36).substring(7).split("").join("."),T7={INIT:`@@redux/INIT${U0()}`,REPLACE:`@@redux/REPLACE${U0()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${U0()}`},wm=T7;function hb(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function c5(e,t,r){if(typeof e!="function")throw new Error(Tr(2));if(typeof t=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Tr(0));if(typeof t=="function"&&typeof r>"u"&&(r=t,t=void 0),typeof r<"u"){if(typeof r!="function")throw new Error(Tr(1));return r(c5)(e,t)}let n=e,a=t,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((y,v)=>{o.set(v,y)}))}function d(){if(c)throw new Error(Tr(3));return a}function f(y){if(typeof y!="function")throw new Error(Tr(4));if(c)throw new Error(Tr(5));let v=!0;u();const b=l++;return o.set(b,y),function(){if(v){if(c)throw new Error(Tr(6));v=!1,u(),o.delete(b),i=null}}}function h(y){if(!hb(y))throw new Error(Tr(7));if(typeof y.type>"u")throw new Error(Tr(8));if(typeof y.type!="string")throw new Error(Tr(17));if(c)throw new Error(Tr(9));try{c=!0,a=n(a,y)}finally{c=!1}return(i=o).forEach(b=>{b()}),y}function p(y){if(typeof y!="function")throw new Error(Tr(10));n=y,h({type:wm.REPLACE})}function g(){const y=f;return{subscribe(v){if(typeof v!="object"||v===null)throw new Error(Tr(11));function b(){const j=v;j.next&&j.next(d())}return b(),{unsubscribe:y(b)}},[h2](){return this}}}return h({type:wm.INIT}),{dispatch:h,subscribe:f,getState:d,replaceReducer:p,[h2]:g}}function M7(e){Object.keys(e).forEach(t=>{const r=e[t];if(typeof r(void 0,{type:wm.INIT})>"u")throw new Error(Tr(12));if(typeof r(void 0,{type:wm.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Tr(13))})}function u5(e){const t=Object.keys(e),r={};for(let i=0;i<t.length;i++){const o=t[i];typeof e[o]=="function"&&(r[o]=e[o])}const n=Object.keys(r);let a;try{M7(r)}catch(i){a=i}return function(o={},l){if(a)throw a;let c=!1;const u={};for(let d=0;d<n.length;d++){const f=n[d],h=r[f],p=o[f],g=h(p,l);if(typeof g>"u")throw l&&l.type,new Error(Tr(14));u[f]=g,c=c||g!==p}return c=c||n.length!==Object.keys(o).length,c?u:o}}function jm(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,r)=>(...n)=>t(r(...n)))}function D7(...e){return t=>(r,n)=>{const a=t(r,n);let i=()=>{throw new Error(Tr(15))};const o={getState:a.getState,dispatch:(c,...u)=>i(c,...u)},l=e.map(c=>c(o));return i=jm(...l)(a.dispatch),{...a,dispatch:i}}}function d5(e){return hb(e)&&"type"in e&&typeof e.type=="string"}var f5=Symbol.for("immer-nothing"),p2=Symbol.for("immer-draftable"),Tn=Symbol.for("immer-state");function ma(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Tl=Object.getPrototypeOf;function xo(e){return!!e&&!!e[Tn]}function vi(e){var t;return e?m5(e)||Array.isArray(e)||!!e[p2]||!!((t=e.constructor)!=null&&t[p2])||Qh(e)||Zh(e):!1}var $7=Object.prototype.constructor.toString();function m5(e){if(!e||typeof e!="object")return!1;const t=Tl(e);if(t===null)return!0;const r=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return r===Object?!0:typeof r=="function"&&Function.toString.call(r)===$7}function _m(e,t){Xh(e)===0?Reflect.ownKeys(e).forEach(r=>{t(r,e[r],e)}):e.forEach((r,n)=>t(n,r,e))}function Xh(e){const t=e[Tn];return t?t.type_:Array.isArray(e)?1:Qh(e)?2:Zh(e)?3:0}function Fv(e,t){return Xh(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function h5(e,t,r){const n=Xh(e);n===2?e.set(t,r):n===3?e.add(r):e[t]=r}function I7(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Qh(e){return e instanceof Map}function Zh(e){return e instanceof Set}function Us(e){return e.copy_||e.base_}function Bv(e,t){if(Qh(e))return new Map(e);if(Zh(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const r=m5(e);if(t===!0||t==="class_only"&&!r){const n=Object.getOwnPropertyDescriptors(e);delete n[Tn];let a=Reflect.ownKeys(n);for(let i=0;i<a.length;i++){const o=a[i],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(Tl(e),n)}else{const n=Tl(e);if(n!==null&&r)return{...e};const a=Object.create(n);return Object.assign(a,e)}}function pb(e,t=!1){return Jh(e)||xo(e)||!vi(e)||(Xh(e)>1&&(e.set=e.add=e.clear=e.delete=L7),Object.freeze(e),t&&Object.entries(e).forEach(([r,n])=>pb(n,!0))),e}function L7(){ma(2)}function Jh(e){return Object.isFrozen(e)}var R7={};function yo(e){const t=R7[e];return t||ma(0,e),t}var Su;function p5(){return Su}function z7(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function g2(e,t){t&&(yo("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Uv(e){Wv(e),e.drafts_.forEach(F7),e.drafts_=null}function Wv(e){e===Su&&(Su=e.parent_)}function v2(e){return Su=z7(Su,e)}function F7(e){const t=e[Tn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function x2(e,t){t.unfinalizedDrafts_=t.drafts_.length;const r=t.drafts_[0];return e!==void 0&&e!==r?(r[Tn].modified_&&(Uv(t),ma(4)),vi(e)&&(e=Nm(t,e),t.parent_||Sm(t,e)),t.patches_&&yo("Patches").generateReplacementPatches_(r[Tn].base_,e,t.patches_,t.inversePatches_)):e=Nm(t,r,[]),Uv(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==f5?e:void 0}function Nm(e,t,r){if(Jh(t))return t;const n=t[Tn];if(!n)return _m(t,(a,i)=>y2(e,n,t,a,i,r)),t;if(n.scope_!==e)return t;if(!n.modified_)return Sm(e,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const a=n.copy_;let i=a,o=!1;n.type_===3&&(i=new Set(a),a.clear(),o=!0),_m(i,(l,c)=>y2(e,n,a,l,c,r,o)),Sm(e,a,!1),r&&e.patches_&&yo("Patches").generatePatches_(n,r,e.patches_,e.inversePatches_)}return n.copy_}function y2(e,t,r,n,a,i,o){if(xo(a)){const l=i&&t&&t.type_!==3&&!Fv(t.assigned_,n)?i.concat(n):void 0,c=Nm(e,a,l);if(h5(r,n,c),xo(c))e.canAutoFreeze_=!1;else return}else o&&r.add(a);if(vi(a)&&!Jh(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Nm(e,a),(!t||!t.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(r,n)&&Sm(e,a)}}function Sm(e,t,r=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&pb(t,r)}function B7(e,t){const r=Array.isArray(e),n={type_:r?1:0,scope_:t?t.scope_:p5(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=n,i=gb;r&&(a=[n],i=ku);const{revoke:o,proxy:l}=Proxy.revocable(a,i);return n.draft_=l,n.revoke_=o,l}var gb={get(e,t){if(t===Tn)return e;const r=Us(e);if(!Fv(r,t))return U7(e,r,t);const n=r[t];return e.finalized_||!vi(n)?n:n===W0(e.base_,t)?(V0(e),e.copy_[t]=qv(n,e)):n},has(e,t){return t in Us(e)},ownKeys(e){return Reflect.ownKeys(Us(e))},set(e,t,r){const n=g5(Us(e),t);if(n!=null&&n.set)return n.set.call(e.draft_,r),!0;if(!e.modified_){const a=W0(Us(e),t),i=a==null?void 0:a[Tn];if(i&&i.base_===r)return e.copy_[t]=r,e.assigned_[t]=!1,!0;if(I7(r,a)&&(r!==void 0||Fv(e.base_,t)))return!0;V0(e),Vv(e)}return e.copy_[t]===r&&(r!==void 0||t in e.copy_)||Number.isNaN(r)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=r,e.assigned_[t]=!0),!0},deleteProperty(e,t){return W0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,V0(e),Vv(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const r=Us(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:n.enumerable,value:r[t]}},defineProperty(){ma(11)},getPrototypeOf(e){return Tl(e.base_)},setPrototypeOf(){ma(12)}},ku={};_m(gb,(e,t)=>{ku[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ku.deleteProperty=function(e,t){return ku.set.call(this,e,t,void 0)};ku.set=function(e,t,r){return gb.set.call(this,e[0],t,r,e[0])};function W0(e,t){const r=e[Tn];return(r?Us(r):e)[t]}function U7(e,t,r){var a;const n=g5(t,r);return n?"value"in n?n.value:(a=n.get)==null?void 0:a.call(e.draft_):void 0}function g5(e,t){if(!(t in e))return;let r=Tl(e);for(;r;){const n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Tl(r)}}function Vv(e){e.modified_||(e.modified_=!0,e.parent_&&Vv(e.parent_))}function V0(e){e.copy_||(e.copy_=Bv(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var W7=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,r,n)=>{if(typeof t=="function"&&typeof r!="function"){const i=r;r=t;const o=this;return function(c=i,...u){return o.produce(c,d=>r.call(this,d,...u))}}typeof r!="function"&&ma(6),n!==void 0&&typeof n!="function"&&ma(7);let a;if(vi(t)){const i=v2(this),o=qv(t,void 0);let l=!0;try{a=r(o),l=!1}finally{l?Uv(i):Wv(i)}return g2(i,n),x2(a,i)}else if(!t||typeof t!="object"){if(a=r(t),a===void 0&&(a=t),a===f5&&(a=void 0),this.autoFreeze_&&pb(a,!0),n){const i=[],o=[];yo("Patches").generateReplacementPatches_(t,a,i,o),n(i,o)}return a}else ma(1,t)},this.produceWithPatches=(t,r)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let n,a;return[this.produce(t,r,(o,l)=>{n=o,a=l}),n,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){vi(e)||ma(8),xo(e)&&(e=xa(e));const t=v2(this),r=qv(e,void 0);return r[Tn].isManual_=!0,Wv(t),r}finishDraft(e,t){const r=e&&e[Tn];(!r||!r.isManual_)&&ma(9);const{scope_:n}=r;return g2(n,t),x2(void 0,n)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let r;for(r=t.length-1;r>=0;r--){const a=t[r];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}r>-1&&(t=t.slice(r+1));const n=yo("Patches").applyPatches_;return xo(e)?n(e,t):this.produce(e,a=>n(a,t))}};function qv(e,t){const r=Qh(e)?yo("MapSet").proxyMap_(e,t):Zh(e)?yo("MapSet").proxySet_(e,t):B7(e,t);return(t?t.scope_:p5()).drafts_.push(r),r}function xa(e){return xo(e)||ma(10,e),v5(e)}function v5(e){if(!vi(e)||Jh(e))return e;const t=e[Tn];let r;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,r=Bv(e,t.scope_.immer_.useStrictShallowCopy_)}else r=Bv(e,!0);return _m(r,(n,a)=>{h5(r,n,v5(a))}),t&&(t.finalized_=!1),r}var Mn=new W7,x5=Mn.produce;Mn.produceWithPatches.bind(Mn);Mn.setAutoFreeze.bind(Mn);Mn.setUseStrictShallowCopy.bind(Mn);Mn.applyPatches.bind(Mn);Mn.createDraft.bind(Mn);Mn.finishDraft.bind(Mn);function y5(e){return({dispatch:r,getState:n})=>a=>i=>typeof i=="function"?i(r,n,e):a(i)}var V7=y5(),q7=y5,H7=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?jm:jm.apply(null,arguments)};function ea(e,t){function r(...n){if(t){let a=t(...n);if(!a)throw new Error(Pn(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:n[0]}}return r.toString=()=>`${e}`,r.type=e,r.match=n=>d5(n)&&n.type===e,r}var b5=class Tc extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Tc.prototype)}static get[Symbol.species](){return Tc}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Tc(...t[0].concat(this)):new Tc(...t.concat(this))}};function b2(e){return vi(e)?x5(e,()=>{}):e}function Zd(e,t,r){return e.has(t)?e.get(t):e.set(t,r(t)).get(t)}function K7(e){return typeof e=="boolean"}var Y7=()=>function(t){const{thunk:r=!0,immutableCheck:n=!0,serializableCheck:a=!0,actionCreatorCheck:i=!0}=t??{};let o=new b5;return r&&(K7(r)?o.push(V7):o.push(q7(r.extraArgument))),o},w5="RTK_autoBatch",Tt=()=>e=>({payload:e,meta:{[w5]:!0}}),w2=e=>t=>{setTimeout(t,e)},j5=(e={type:"raf"})=>t=>(...r)=>{const n=t(...r);let a=!0,i=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:w2(10):e.type==="callback"?e.queueNotification:w2(e.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(d=>d()))};return Object.assign({},n,{subscribe(d){const f=()=>a&&d(),h=n.subscribe(f);return l.add(d),()=>{h(),l.delete(d)}},dispatch(d){var f;try{return a=!((f=d==null?void 0:d.meta)!=null&&f[w5]),i=!a,i&&(o||(o=!0,c(u))),n.dispatch(d)}finally{a=!0}}})},G7=e=>function(r){const{autoBatch:n=!0}=r??{};let a=new b5(e);return n&&a.push(j5(typeof n=="object"?n:void 0)),a};function X7(e){const t=Y7(),{reducer:r=void 0,middleware:n,devTools:a=!0,duplicateMiddlewareCheck:i=!0,preloadedState:o=void 0,enhancers:l=void 0}=e||{};let c;if(typeof r=="function")c=r;else if(hb(r))c=u5(r);else throw new Error(Pn(1));let u;typeof n=="function"?u=n(t):u=t();let d=jm;a&&(d=H7({trace:!1,...typeof a=="object"&&a}));const f=D7(...u),h=G7(f);let p=typeof l=="function"?l(h):h();const g=d(...p);return c5(c,o,g)}function _5(e){const t={},r=[];let n;const a={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(Pn(28));if(l in t)throw new Error(Pn(29));return t[l]=o,a},addMatcher(i,o){return r.push({matcher:i,reducer:o}),a},addDefaultCase(i){return n=i,a}};return e(a),[t,r,n]}function Q7(e){return typeof e=="function"}function Z7(e,t){let[r,n,a]=_5(t),i;if(Q7(e))i=()=>b2(e());else{const l=b2(e);i=()=>l}function o(l=i(),c){let u=[r[c.type],...n.filter(({matcher:d})=>d(c)).map(({reducer:d})=>d)];return u.filter(d=>!!d).length===0&&(u=[a]),u.reduce((d,f)=>{if(f)if(xo(d)){const p=f(d,c);return p===void 0?d:p}else{if(vi(d))return x5(d,h=>f(h,c));{const h=f(d,c);if(h===void 0){if(d===null)return d;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return d},l)}return o.getInitialState=i,o}var J7="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",e9=(e=21)=>{let t="",r=e;for(;r--;)t+=J7[Math.random()*64|0];return t},t9=Symbol.for("rtk-slice-createasyncthunk");function r9(e,t){return`${e}/${t}`}function n9({creators:e}={}){var r;const t=(r=e==null?void 0:e.asyncThunk)==null?void 0:r[t9];return function(a){const{name:i,reducerPath:o=i}=a;if(!i)throw new Error(Pn(11));typeof process<"u";const l=(typeof a.reducers=="function"?a.reducers(i9()):a.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},d={addCase(j,N){const _=typeof j=="string"?j:j.type;if(!_)throw new Error(Pn(12));if(_ in u.sliceCaseReducersByType)throw new Error(Pn(13));return u.sliceCaseReducersByType[_]=N,d},addMatcher(j,N){return u.sliceMatchers.push({matcher:j,reducer:N}),d},exposeAction(j,N){return u.actionCreators[j]=N,d},exposeCaseReducer(j,N){return u.sliceCaseReducersByName[j]=N,d}};c.forEach(j=>{const N=l[j],_={reducerName:j,type:r9(i,j),createNotation:typeof a.reducers=="function"};o9(N)?c9(_,N,d,t):s9(_,N,d)});function f(){const[j={},N=[],_=void 0]=typeof a.extraReducers=="function"?_5(a.extraReducers):[a.extraReducers],S={...j,...u.sliceCaseReducersByType};return Z7(a.initialState,C=>{for(let O in S)C.addCase(O,S[O]);for(let O of u.sliceMatchers)C.addMatcher(O.matcher,O.reducer);for(let O of N)C.addMatcher(O.matcher,O.reducer);_&&C.addDefaultCase(_)})}const h=j=>j,p=new Map,g=new WeakMap;let x;function y(j,N){return x||(x=f()),x(j,N)}function v(){return x||(x=f()),x.getInitialState()}function b(j,N=!1){function _(C){let O=C[j];return typeof O>"u"&&N&&(O=Zd(g,_,v)),O}function S(C=h){const O=Zd(p,N,()=>new WeakMap);return Zd(O,C,()=>{const A={};for(const[T,D]of Object.entries(a.selectors??{}))A[T]=a9(D,C,()=>Zd(g,C,v),N);return A})}return{reducerPath:j,getSelectors:S,get selectors(){return S(_)},selectSlice:_}}const w={name:i,reducer:y,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:v,...b(o),injectInto(j,{reducerPath:N,..._}={}){const S=N??o;return j.inject({reducerPath:S,reducer:y},_),{...w,...b(S,!0)}}};return w}}function a9(e,t,r,n){function a(i,...o){let l=t(i);return typeof l>"u"&&n&&(l=r()),e(l,...o)}return a.unwrapped=e,a}var yn=n9();function i9(){function e(t,r){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...r}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...r){return t(...r)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,r){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:r}},asyncThunk:e}}function s9({type:e,reducerName:t,createNotation:r},n,a){let i,o;if("reducer"in n){if(r&&!l9(n))throw new Error(Pn(17));i=n.reducer,o=n.prepare}else i=n;a.addCase(e,i).exposeCaseReducer(t,i).exposeAction(t,o?ea(e,o):ea(e))}function o9(e){return e._reducerDefinitionType==="asyncThunk"}function l9(e){return e._reducerDefinitionType==="reducerWithPrepare"}function c9({type:e,reducerName:t},r,n,a){if(!a)throw new Error(Pn(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:d}=r,f=a(e,i,d);n.exposeAction(t,f),o&&n.addCase(f.fulfilled,o),l&&n.addCase(f.pending,l),c&&n.addCase(f.rejected,c),u&&n.addMatcher(f.settled,u),n.exposeCaseReducer(t,{fulfilled:o||Jd,pending:l||Jd,rejected:c||Jd,settled:u||Jd})}function Jd(){}var u9="task",N5="listener",S5="completed",vb="cancelled",d9=`task-${vb}`,f9=`task-${S5}`,Hv=`${N5}-${vb}`,m9=`${N5}-${S5}`,ep=class{constructor(e){r0(this,"name","TaskAbortError");r0(this,"message");this.code=e,this.message=`${u9} ${vb} (reason: ${e})`}},xb=(e,t)=>{if(typeof e!="function")throw new TypeError(Pn(32))},km=()=>{},k5=(e,t=km)=>(e.catch(t),e),C5=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),io=(e,t)=>{const r=e.signal;r.aborted||("reason"in r||Object.defineProperty(r,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},so=e=>{if(e.aborted){const{reason:t}=e;throw new ep(t)}};function E5(e,t){let r=km;return new Promise((n,a)=>{const i=()=>a(new ep(e.reason));if(e.aborted){i();return}r=C5(e,i),t.finally(()=>r()).then(n,a)}).finally(()=>{r=km})}var h9=async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(r){return{status:r instanceof ep?"cancelled":"rejected",error:r}}finally{t==null||t()}},Cm=e=>t=>k5(E5(e,t).then(r=>(so(e),r))),P5=e=>{const t=Cm(e);return r=>t(new Promise(n=>setTimeout(n,r)))},{assign:vl}=Object,j2={},tp="listenerMiddleware",p9=(e,t)=>{const r=n=>C5(e,()=>io(n,e.reason));return(n,a)=>{xb(n);const i=new AbortController;r(i);const o=h9(async()=>{so(e),so(i.signal);const l=await n({pause:Cm(i.signal),delay:P5(i.signal),signal:i.signal});return so(i.signal),l},()=>io(i,f9));return a!=null&&a.autoJoin&&t.push(o.catch(km)),{result:Cm(e)(o),cancel(){io(i,d9)}}}},g9=(e,t)=>{const r=async(n,a)=>{so(t);let i=()=>{};const l=[new Promise((c,u)=>{let d=e({predicate:n,effect:(f,h)=>{h.unsubscribe(),c([f,h.getState(),h.getOriginalState()])}});i=()=>{d(),u()}})];a!=null&&l.push(new Promise(c=>setTimeout(c,a,null)));try{const c=await E5(t,Promise.race(l));return so(t),c}finally{i()}};return(n,a)=>k5(r(n,a))},O5=e=>{let{type:t,actionCreator:r,matcher:n,predicate:a,effect:i}=e;if(t)a=ea(t).match;else if(r)t=r.type,a=r.match;else if(n)a=n;else if(!a)throw new Error(Pn(21));return xb(i),{predicate:a,type:t,effect:i}},A5=vl(e=>{const{type:t,predicate:r,effect:n}=O5(e);return{id:e9(),effect:n,type:t,predicate:r,pending:new Set,unsubscribe:()=>{throw new Error(Pn(22))}}},{withTypes:()=>A5}),_2=(e,t)=>{const{type:r,effect:n,predicate:a}=O5(t);return Array.from(e.values()).find(i=>(typeof r=="string"?i.type===r:i.predicate===a)&&i.effect===n)},Kv=e=>{e.pending.forEach(t=>{io(t,Hv)})},v9=e=>()=>{e.forEach(Kv),e.clear()},N2=(e,t,r)=>{try{e(t,r)}catch(n){setTimeout(()=>{throw n},0)}},T5=vl(ea(`${tp}/add`),{withTypes:()=>T5}),x9=ea(`${tp}/removeAll`),M5=vl(ea(`${tp}/remove`),{withTypes:()=>M5}),y9=(...e)=>{console.error(`${tp}/error`,...e)},Ju=(e={})=>{const t=new Map,{extra:r,onError:n=y9}=e;xb(n);const a=d=>(d.unsubscribe=()=>t.delete(d.id),t.set(d.id,d),f=>{d.unsubscribe(),f!=null&&f.cancelActive&&Kv(d)}),i=d=>{const f=_2(t,d)??A5(d);return a(f)};vl(i,{withTypes:()=>i});const o=d=>{const f=_2(t,d);return f&&(f.unsubscribe(),d.cancelActive&&Kv(f)),!!f};vl(o,{withTypes:()=>o});const l=async(d,f,h,p)=>{const g=new AbortController,x=g9(i,g.signal),y=[];try{d.pending.add(g),await Promise.resolve(d.effect(f,vl({},h,{getOriginalState:p,condition:(v,b)=>x(v,b).then(Boolean),take:x,delay:P5(g.signal),pause:Cm(g.signal),extra:r,signal:g.signal,fork:p9(g.signal,y),unsubscribe:d.unsubscribe,subscribe:()=>{t.set(d.id,d)},cancelActiveListeners:()=>{d.pending.forEach((v,b,w)=>{v!==g&&(io(v,Hv),w.delete(v))})},cancel:()=>{io(g,Hv),d.pending.delete(g)},throwIfCancelled:()=>{so(g.signal)}})))}catch(v){v instanceof ep||N2(n,v,{raisedBy:"effect"})}finally{await Promise.all(y),io(g,m9),d.pending.delete(g)}},c=v9(t);return{middleware:d=>f=>h=>{if(!d5(h))return f(h);if(T5.match(h))return i(h.payload);if(x9.match(h)){c();return}if(M5.match(h))return o(h.payload);let p=d.getState();const g=()=>{if(p===j2)throw new Error(Pn(23));return p};let x;try{if(x=f(h),t.size>0){const y=d.getState(),v=Array.from(t.values());for(const b of v){let w=!1;try{w=b.predicate(h,y,p)}catch(j){w=!1,N2(n,j,{raisedBy:"predicate"})}w&&l(b,h,d,g)}}}finally{p=j2}return x},startListening:i,stopListening:o,clearListeners:c}};function Pn(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var b9={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},D5=yn({name:"chartLayout",initialState:b9,reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var r,n,a,i;e.margin.top=(r=t.payload.top)!==null&&r!==void 0?r:0,e.margin.right=(n=t.payload.right)!==null&&n!==void 0?n:0,e.margin.bottom=(a=t.payload.bottom)!==null&&a!==void 0?a:0,e.margin.left=(i=t.payload.left)!==null&&i!==void 0?i:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:w9,setLayout:j9,setChartSize:_9,setScale:N9}=D5.actions,S9=D5.reducer;function $5(e,t,r){return Array.isArray(e)&&e&&t+r!==0?e.slice(t,r+1):e}function Ut(e){return Number.isFinite(e)}function Ba(e){return typeof e=="number"&&e>0&&Number.isFinite(e)}function S2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?S2(Object(r),!0).forEach(function(n){k9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k9(e,t,r){return(t=C9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function C9(e){var t=E9(e,"string");return typeof t=="symbol"?t:t+""}function E9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function vt(e,t,r){return It(e)||It(t)?r:Fa(t)?vo(e,t,r):typeof t=="function"?t(e):r}var P9=(e,t,r)=>{if(t&&r){var{width:n,height:a}=r,{align:i,verticalAlign:o,layout:l}=t;if((l==="vertical"||l==="horizontal"&&o==="middle")&&i!=="center"&&Se(e[i]))return cl(cl({},e),{},{[i]:e[i]+(n||0)});if((l==="horizontal"||l==="vertical"&&i==="center")&&o!=="middle"&&Se(e[o]))return cl(cl({},e),{},{[o]:e[o]+(a||0)})}return e},As=(e,t)=>e==="horizontal"&&t==="xAxis"||e==="vertical"&&t==="yAxis"||e==="centric"&&t==="angleAxis"||e==="radial"&&t==="radiusAxis",I5=(e,t,r,n)=>{if(n)return e.map(l=>l.coordinate);var a,i,o=e.map(l=>(l.coordinate===t&&(a=!0),l.coordinate===r&&(i=!0),l.coordinate));return a||o.push(t),i||o.push(r),o},L5=(e,t,r)=>{if(!e)return null;var{duplicateDomain:n,type:a,range:i,scale:o,realScaleType:l,isCategorical:c,categoricalDomain:u,tickCount:d,ticks:f,niceTicks:h,axisType:p}=e;if(!o)return null;var g=l==="scaleBand"&&o.bandwidth?o.bandwidth()/2:2,x=(t||r)&&a==="category"&&o.bandwidth?o.bandwidth()/g:0;if(x=p==="angleAxis"&&i&&i.length>=2?kr(i[0]-i[1])*2*x:x,t&&(f||h)){var y=(f||h||[]).map((v,b)=>{var w=n?n.indexOf(v):v;return{coordinate:o(w)+x,value:v,offset:x,index:b}});return y.filter(v=>!ba(v.coordinate))}return c&&u?u.map((v,b)=>({coordinate:o(v)+x,value:v,index:b,offset:x})):o.ticks&&!r&&d!=null?o.ticks(d).map((v,b)=>({coordinate:o(v)+x,value:v,offset:x,index:b})):o.domain().map((v,b)=>({coordinate:o(v)+x,value:n?n[v]:v,index:b,offset:x}))},k2=1e-4,O9=e=>{var t=e.domain();if(!(!t||t.length<=2)){var r=t.length,n=e.range(),a=Math.min(n[0],n[1])-k2,i=Math.max(n[0],n[1])+k2,o=e(t[0]),l=e(t[r-1]);(o<a||o>i||l<a||l>i)&&e.domain([t[0],t[r-1]])}},A9=(e,t)=>{if(!t||t.length!==2||!Se(t[0])||!Se(t[1]))return e;var r=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]),a=[e[0],e[1]];return(!Se(e[0])||e[0]<r)&&(a[0]=r),(!Se(e[1])||e[1]>n)&&(a[1]=n),a[0]>n&&(a[0]=n),a[1]<r&&(a[1]=r),a},T9=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var i=0,o=0,l=0;l<r;++l){var c=e[l],u=c==null?void 0:c[a];if(u!=null){var d=u[1],f=u[0],h=ba(d)?f:d;h>=0?(u[0]=i,u[1]=i+h,i=d):(u[0]=o,u[1]=o+h,o=d)}}}},M9=e=>{var t,r=e.length;if(!(r<=0)){var n=(t=e[0])===null||t===void 0?void 0:t.length;if(!(n==null||n<=0))for(var a=0;a<n;++a)for(var i=0,o=0;o<r;++o){var l=e[o],c=l==null?void 0:l[a];if(c!=null){var u=ba(c[1])?c[0]:c[1];u>=0?(c[0]=i,c[1]=i+u,i=c[1]):(c[0]=0,c[1]=0)}}}},D9={sign:T9,expand:gR,none:go,silhouette:vR,wiggle:xR,positive:M9},$9=(e,t,r)=>{var n,a=(n=D9[r])!==null&&n!==void 0?n:go,i=pR().keys(t).value((l,c)=>Number(vt(l,c,0))).order(Rv).offset(a),o=i(e);return o.forEach((l,c)=>{l.forEach((u,d)=>{var f=vt(e[d],t[c],0);Array.isArray(f)&&f.length===2&&Se(f[0])&&Se(f[1])&&(u[0]=f[0],u[1]=f[1])})}),o};function I9(e){return e==null?void 0:String(e)}function C2(e){var{axis:t,ticks:r,bandSize:n,entry:a,index:i,dataKey:o}=e;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!It(a[t.dataKey])){var l=AP(r,"value",a[t.dataKey]);if(l)return l.coordinate+n/2}return r[i]?r[i].coordinate+n/2:null}var c=vt(a,It(o)?t.dataKey:o);return It(c)?null:t.scale(c)}var E2=e=>{var{axis:t,ticks:r,offset:n,bandSize:a,entry:i,index:o}=e;if(t.type==="category")return r[o]?r[o].coordinate+n:null;var l=vt(i,t.dataKey,t.scale.domain()[o]);return It(l)?null:t.scale(l)-a/2+n},L9=e=>{var{numericAxis:t}=e,r=t.scale.domain();if(t.type==="number"){var n=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);return n<=0&&a>=0?0:a<0?a:n}return r[0]},R9=e=>{var t=e.flat(2).filter(Se);return[Math.min(...t),Math.max(...t)]},z9=e=>[e[0]===1/0?0:e[0],e[1]===-1/0?0:e[1]],F9=(e,t,r)=>{if(e!=null)return z9(Object.keys(e).reduce((n,a)=>{var i=e[a];if(!i)return n;var{stackedData:o}=i,l=o.reduce((c,u)=>{var d=$5(u,t,r),f=R9(d);return!Ut(f[0])||!Ut(f[1])?c:[Math.min(c[0],f[0]),Math.max(c[1],f[1])]},[1/0,-1/0]);return[Math.min(l[0],n[0]),Math.max(l[1],n[1])]},[1/0,-1/0]))},P2=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,O2=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ml=(e,t,r)=>{if(e&&e.scale&&e.scale.bandwidth){var n=e.scale.bandwidth();if(!r||n>0)return n}if(e&&t&&t.length>=2){for(var a=Gh(t,d=>d.coordinate),i=1/0,o=1,l=a.length;o<l;o++){var c=a[o],u=a[o-1];i=Math.min(((c==null?void 0:c.coordinate)||0)-((u==null?void 0:u.coordinate)||0),i)}return i===1/0?0:i}return r?void 0:0};function A2(e){var{tooltipEntrySettings:t,dataKey:r,payload:n,value:a,name:i}=e;return cl(cl({},t),{},{dataKey:r,payload:n,value:a,name:i})}function Kl(e,t){if(e)return String(e);if(typeof t=="string")return t}var B9=(e,t)=>{if(t==="horizontal")return e.chartX;if(t==="vertical")return e.chartY},U9=(e,t)=>t==="centric"?e.angle:e.radius,Pi=e=>e.layout.width,Oi=e=>e.layout.height,W9=e=>e.layout.scale,R5=e=>e.layout.margin,rp=V(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),np=V(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),z5="data-recharts-item-index",F5="data-recharts-item-id",ed=60;function T2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ef(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?T2(Object(r),!0).forEach(function(n){V9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):T2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function V9(e,t,r){return(t=q9(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function q9(e){var t=H9(e,"string");return typeof t=="symbol"?t:t+""}function H9(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K9=e=>e.brush.height;function Y9(e){var t=np(e);return t.reduce((r,n)=>{if(n.orientation==="left"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:ed;return r+a}return r},0)}function G9(e){var t=np(e);return t.reduce((r,n)=>{if(n.orientation==="right"&&!n.mirror&&!n.hide){var a=typeof n.width=="number"?n.width:ed;return r+a}return r},0)}function X9(e){var t=rp(e);return t.reduce((r,n)=>n.orientation==="top"&&!n.mirror&&!n.hide?r+n.height:r,0)}function Q9(e){var t=rp(e);return t.reduce((r,n)=>n.orientation==="bottom"&&!n.mirror&&!n.hide?r+n.height:r,0)}var pr=V([Pi,Oi,R5,K9,Y9,G9,X9,Q9,o5,C7],(e,t,r,n,a,i,o,l,c,u)=>{var d={left:(r.left||0)+a,right:(r.right||0)+i},f={top:(r.top||0)+o,bottom:(r.bottom||0)+l},h=ef(ef({},f),d),p=h.bottom;h.bottom+=n,h=P9(h,c,u);var g=e-h.left-h.right,x=t-h.top-h.bottom;return ef(ef({brushBottom:p},h),{},{width:Math.max(g,0),height:Math.max(x,0)})}),Z9=V(pr,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),yb=V(Pi,Oi,(e,t)=>({x:0,y:0,width:e,height:t})),J9=m.createContext(null),Hr=()=>m.useContext(J9)!=null,ap=e=>e.brush,ip=V([ap,pr,R5],(e,t,r)=>({height:e.height,x:Se(e.x)?e.x:t.left,y:Se(e.y)?e.y:t.top+t.height+t.brushBottom-((r==null?void 0:r.bottom)||0),width:Se(e.width)?e.width:t.width})),B5={},U5={},W5={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r,n,{signal:a,edges:i}={}){let o,l=null;const c=i!=null&&i.includes("leading"),u=i==null||i.includes("trailing"),d=()=>{l!==null&&(r.apply(o,l),o=void 0,l=null)},f=()=>{u&&d(),x()};let h=null;const p=()=>{h!=null&&clearTimeout(h),h=setTimeout(()=>{h=null,f()},n)},g=()=>{h!==null&&(clearTimeout(h),h=null)},x=()=>{g(),o=void 0,l=null},y=()=>{d()},v=function(...b){if(a!=null&&a.aborted)return;o=this,l=b;const w=h==null;p(),c&&w&&d()};return v.schedule=p,v.cancel=x,v.flush=y,a==null||a.addEventListener("abort",x,{once:!0}),v}e.debounce=t})(W5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=W5;function r(n,a=0,i={}){typeof i!="object"&&(i={});const{leading:o=!1,trailing:l=!0,maxWait:c}=i,u=Array(2);o&&(u[0]="leading"),l&&(u[1]="trailing");let d,f=null;const h=t.debounce(function(...x){d=n.apply(this,x),f=null},a,{edges:u}),p=function(...x){return c!=null&&(f===null&&(f=Date.now()),Date.now()-f>=c)?(d=n.apply(this,x),f=Date.now(),h.cancel(),h.schedule(),d):(h.apply(this,x),d)},g=()=>(h.flush(),d);return p.cancel=h.cancel,p.flush=g,p}e.debounce=r})(U5);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=U5;function r(n,a=0,i={}){const{leading:o=!0,trailing:l=!0}=i;return t.debounce(n,a,{leading:o,maxWait:a,trailing:l})}e.throttle=r})(B5);var ez=B5.throttle;const tz=Si(ez);var Em=function(t,r){for(var n=arguments.length,a=new Array(n>2?n-2:0),i=2;i<n;i++)a[i-2]=arguments[i];if(typeof console<"u"&&console.warn&&(r===void 0&&console.warn("LogUtils requires an error message argument"),!t))if(r===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(r.replace(/%s/g,()=>a[o++]))}},V5=(e,t,r)=>{var{width:n="100%",height:a="100%",aspect:i,maxHeight:o}=r,l=gi(n)?e:Number(n),c=gi(a)?t:Number(a);return i&&i>0&&(l?c=l/i:c&&(l=c*i),o&&c!=null&&c>o&&(c=o)),{calculatedWidth:l,calculatedHeight:c}},rz={width:0,height:0,overflow:"visible"},nz={width:0,overflowX:"visible"},az={height:0,overflowY:"visible"},iz={},sz=e=>{var{width:t,height:r}=e,n=gi(t),a=gi(r);return n&&a?rz:n?nz:a?az:iz};function oz(e){var{width:t,height:r,aspect:n}=e,a=t,i=r;return a===void 0&&i===void 0?(a="100%",i="100%"):a===void 0?a=n&&n>0?void 0:"100%":i===void 0&&(i=n&&n>0?void 0:"100%"),{width:a,height:i}}function Yv(){return Yv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yv.apply(null,arguments)}function M2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function D2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?M2(Object(r),!0).forEach(function(n){lz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):M2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lz(e,t,r){return(t=cz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cz(e){var t=uz(e,"string");return typeof t=="symbol"?t:t+""}function uz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q5=m.createContext({width:-1,height:-1});function dz(e){return Ba(e.width)&&Ba(e.height)}function H5(e){var{children:t,width:r,height:n}=e,a=m.useMemo(()=>({width:r,height:n}),[r,n]);return dz(a)?m.createElement(q5.Provider,{value:a},t):null}var bb=()=>m.useContext(q5),fz=m.forwardRef((e,t)=>{var{aspect:r,initialDimension:n={width:-1,height:-1},width:a,height:i,minWidth:o=0,minHeight:l,maxHeight:c,children:u,debounce:d=0,id:f,className:h,onResize:p,style:g={}}=e,x=m.useRef(null),y=m.useRef();y.current=p,m.useImperativeHandle(t,()=>x.current);var[v,b]=m.useState({containerWidth:n.width,containerHeight:n.height}),w=m.useCallback((C,O)=>{b(A=>{var T=Math.round(C),D=Math.round(O);return A.containerWidth===T&&A.containerHeight===D?A:{containerWidth:T,containerHeight:D}})},[]);m.useEffect(()=>{if(x.current==null||typeof ResizeObserver>"u")return Qu;var C=D=>{var q,{width:re,height:K}=D[0].contentRect;w(re,K),(q=y.current)===null||q===void 0||q.call(y,re,K)};d>0&&(C=tz(C,d,{trailing:!0,leading:!1}));var O=new ResizeObserver(C),{width:A,height:T}=x.current.getBoundingClientRect();return w(A,T),O.observe(x.current),()=>{O.disconnect()}},[w,d]);var{containerWidth:j,containerHeight:N}=v;Em(!r||r>0,"The aspect(%s) must be greater than zero.",r);var{calculatedWidth:_,calculatedHeight:S}=V5(j,N,{width:a,height:i,aspect:r,maxHeight:c});return Em(_!=null&&_>0||S!=null&&S>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,_,S,a,i,o,l,r),m.createElement("div",{id:f?"".concat(f):void 0,className:nt("recharts-responsive-container",h),style:D2(D2({},g),{},{width:a,height:i,minWidth:o,minHeight:l,maxHeight:c}),ref:x},m.createElement("div",{style:sz({width:a,height:i})},m.createElement(H5,{width:_,height:S},u)))}),Tf=m.forwardRef((e,t)=>{var r=bb();if(Ba(r.width)&&Ba(r.height))return e.children;var{width:n,height:a}=oz({width:e.width,height:e.height,aspect:e.aspect}),{calculatedWidth:i,calculatedHeight:o}=V5(void 0,void 0,{width:n,height:a,aspect:e.aspect,maxHeight:e.maxHeight});return Se(i)&&Se(o)?m.createElement(H5,{width:i,height:o},e.children):m.createElement(fz,Yv({},e,{width:n,height:a,ref:t}))});function K5(e){if(e)return{x:e.x,y:e.y,upperWidth:"upperWidth"in e?e.upperWidth:e.width,lowerWidth:"lowerWidth"in e?e.lowerWidth:e.width,width:e.width,height:e.height}}var sp=()=>{var e,t=Hr(),r=Ce(Z9),n=Ce(ip),a=(e=Ce(ap))===null||e===void 0?void 0:e.padding;return!t||!n||!a?r:{width:n.width-a.left-a.right,height:n.height-a.top-a.bottom,x:a.left,y:a.top}},mz={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Y5=()=>{var e;return(e=Ce(pr))!==null&&e!==void 0?e:mz},wb=()=>Ce(Pi),jb=()=>Ce(Oi),hz=()=>Ce(e=>e.layout.margin),Ze=e=>e.layout.layoutType,Yl=()=>Ce(Ze),pz=()=>{var e=Yl();return e!==void 0},op=e=>{var t=kt(),r=Hr(),{width:n,height:a}=e,i=bb(),o=n,l=a;return i&&(o=i.width>0?i.width:n,l=i.height>0?i.height:a),m.useEffect(()=>{!r&&Ba(o)&&Ba(l)&&t(_9({width:o,height:l}))},[t,r,o,l]),null},gz={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},G5=yn({name:"legend",initialState:gz,reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload:{reducer(e,t){e.payload.push(t.payload)},prepare:Tt()},replaceLegendPayload:{reducer(e,t){var{prev:r,next:n}=t.payload,a=xa(e).payload.indexOf(r);a>-1&&(e.payload[a]=n)},prepare:Tt()},removeLegendPayload:{reducer(e,t){var r=xa(e).payload.indexOf(t.payload);r>-1&&e.payload.splice(r,1)},prepare:Tt()}}}),{setLegendSize:$2,setLegendSettings:vz,addLegendPayload:X5,replaceLegendPayload:Q5,removeLegendPayload:Z5}=G5.actions,xz=G5.reducer,yz=["contextPayload"];function Gv(){return Gv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gv.apply(null,arguments)}function I2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Dl(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?I2(Object(r),!0).forEach(function(n){bz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bz(e,t,r){return(t=wz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wz(e){var t=jz(e,"string");return typeof t=="symbol"?t:t+""}function jz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _z(e,t){if(e==null)return{};var r,n,a=Nz(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function Nz(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Sz(e){return e.value}function kz(e){var{contextPayload:t}=e,r=_z(e,yz),n=XP(t,e.payloadUniqBy,Sz),a=Dl(Dl({},r),{},{payload:n});return m.isValidElement(e.content)?m.cloneElement(e.content,a):typeof e.content=="function"?m.createElement(e.content,a):m.createElement(qR,a)}function Cz(e,t,r,n,a,i){var{layout:o,align:l,verticalAlign:c}=t,u,d;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(l==="center"&&o==="vertical"?u={left:((n||0)-i.width)/2}:u=l==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(c==="middle"?d={top:((a||0)-i.height)/2}:d=c==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),Dl(Dl({},u),d)}function Ez(e){var t=kt();return m.useEffect(()=>{t(vz(e))},[t,e]),null}function Pz(e){var t=kt();return m.useEffect(()=>(t($2(e)),()=>{t($2({width:0,height:0}))}),[t,e]),null}function Oz(e,t,r,n){return e==="vertical"&&Se(t)?{height:t}:e==="horizontal"?{width:r||n}:null}var Az={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function Xv(e){var t=ar(e,Az),r=O7(),n=z8(),a=hz(),{width:i,height:o,wrapperStyle:l,portal:c}=t,[u,d]=l5([r]),f=wb(),h=jb();if(f==null||h==null)return null;var p=f-((a==null?void 0:a.left)||0)-((a==null?void 0:a.right)||0),g=Oz(t.layout,o,i,p),x=c?l:Dl(Dl({position:"absolute",width:(g==null?void 0:g.width)||i||"auto",height:(g==null?void 0:g.height)||o||"auto"},Cz(l,t,a,f,h,u)),l),y=c??n;if(y==null||r==null)return null;var v=m.createElement("div",{className:"recharts-legend-wrapper",style:x,ref:d},m.createElement(Ez,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!c&&m.createElement(Pz,{width:u.width,height:u.height}),m.createElement(kz,Gv({},t,g,{margin:a,chartWidth:f,chartHeight:h,contextPayload:r})));return Da.createPortal(v,y)}Xv.displayName="Legend";function Qv(){return Qv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qv.apply(null,arguments)}function L2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function q0(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?L2(Object(r),!0).forEach(function(n){Tz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Tz(e,t,r){return(t=Mz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mz(e){var t=Dz(e,"string");return typeof t=="symbol"?t:t+""}function Dz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $z(e){return Array.isArray(e)&&Fa(e[0])&&Fa(e[1])?e.join(" ~ "):e}var Iz=e=>{var{separator:t=" : ",contentStyle:r={},itemStyle:n={},labelStyle:a={},payload:i,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:u,label:d,labelFormatter:f,accessibilityLayer:h=!1}=e,p=()=>{if(i&&i.length){var N={padding:0,margin:0},_=(l?Gh(i,l):i).map((S,C)=>{if(S.type==="none")return null;var O=S.formatter||o||$z,{value:A,name:T}=S,D=A,q=T;if(O){var re=O(A,T,S,C,i);if(Array.isArray(re))[D,q]=re;else if(re!=null)D=re;else return null}var K=q0({display:"block",paddingTop:4,paddingBottom:4,color:S.color||"#000"},n);return m.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(C),style:K},Fa(q)?m.createElement("span",{className:"recharts-tooltip-item-name"},q):null,Fa(q)?m.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,m.createElement("span",{className:"recharts-tooltip-item-value"},D),m.createElement("span",{className:"recharts-tooltip-item-unit"},S.unit||""))});return m.createElement("ul",{className:"recharts-tooltip-item-list",style:N},_)}return null},g=q0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},r),x=q0({margin:0},a),y=!It(d),v=y?d:"",b=nt("recharts-default-tooltip",c),w=nt("recharts-tooltip-label",u);y&&f&&i!==void 0&&i!==null&&(v=f(d,i));var j=h?{role:"status","aria-live":"assertive"}:{};return m.createElement("div",Qv({className:b,style:g},j),m.createElement("p",{className:w,style:x},m.isValidElement(v)?v:"".concat(v)),p())},vc="recharts-tooltip-wrapper",Lz={visibility:"hidden"};function Rz(e){var{coordinate:t,translateX:r,translateY:n}=e;return nt(vc,{["".concat(vc,"-right")]:Se(r)&&t&&Se(t.x)&&r>=t.x,["".concat(vc,"-left")]:Se(r)&&t&&Se(t.x)&&r<t.x,["".concat(vc,"-bottom")]:Se(n)&&t&&Se(t.y)&&n>=t.y,["".concat(vc,"-top")]:Se(n)&&t&&Se(t.y)&&n<t.y})}function R2(e){var{allowEscapeViewBox:t,coordinate:r,key:n,offsetTopLeft:a,position:i,reverseDirection:o,tooltipDimension:l,viewBox:c,viewBoxDimension:u}=e;if(i&&Se(i[n]))return i[n];var d=r[n]-l-(a>0?a:0),f=r[n]+a;if(t[n])return o[n]?d:f;var h=c[n];if(h==null)return 0;if(o[n]){var p=d,g=h;return p<g?Math.max(f,h):Math.max(d,h)}if(u==null)return 0;var x=f+l,y=h+u;return x>y?Math.max(d,h):Math.max(f,h)}function zz(e){var{translateX:t,translateY:r,useTranslate3d:n}=e;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function Fz(e){var{allowEscapeViewBox:t,coordinate:r,offsetTopLeft:n,position:a,reverseDirection:i,tooltipBox:o,useTranslate3d:l,viewBox:c}=e,u,d,f;return o.height>0&&o.width>0&&r?(d=R2({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=R2({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=zz({translateX:d,translateY:f,useTranslate3d:l})):u=Lz,{cssProperties:u,cssClasses:Rz({translateX:d,translateY:f,coordinate:r})}}function z2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function tf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?z2(Object(r),!0).forEach(function(n){Zv(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):z2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Zv(e,t,r){return(t=Bz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bz(e){var t=Uz(e,"string");return typeof t=="symbol"?t:t+""}function Uz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class Wz extends m.PureComponent{constructor(){super(...arguments),Zv(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Zv(this,"handleKeyDown",t=>{if(t.key==="Escape"){var r,n,a,i;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(r=(n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==null&&r!==void 0?r:0,y:(a=(i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==null&&a!==void 0?a:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var t,r;this.state.dismissed&&(((t=this.props.coordinate)===null||t===void 0?void 0:t.x)!==this.state.dismissedAtCoordinate.x||((r=this.props.coordinate)===null||r===void 0?void 0:r.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:t,allowEscapeViewBox:r,animationDuration:n,animationEasing:a,children:i,coordinate:o,hasPayload:l,isAnimationActive:c,offset:u,position:d,reverseDirection:f,useTranslate3d:h,viewBox:p,wrapperStyle:g,lastBoundingBox:x,innerRef:y,hasPortalFromProps:v}=this.props,{cssClasses:b,cssProperties:w}=Fz({allowEscapeViewBox:r,coordinate:o,offsetTopLeft:u,position:d,reverseDirection:f,tooltipBox:{height:x.height,width:x.width},useTranslate3d:h,viewBox:p}),j=v?{}:tf(tf({transition:c&&t?"transform ".concat(n,"ms ").concat(a):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&t&&l?"visible":"hidden",position:"absolute",top:0,left:0}),N=tf(tf({},j),{},{visibility:!this.state.dismissed&&t&&l?"visible":"hidden"},g);return m.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:b,style:N,ref:y},i)}}var J5=()=>{var e;return(e=Ce(t=>t.rootProps.accessibilityLayer))!==null&&e!==void 0?e:!0};function Jv(){return Jv=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Jv.apply(null,arguments)}function F2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function B2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?F2(Object(r),!0).forEach(function(n){Vz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Vz(e,t,r){return(t=qz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qz(e){var t=Hz(e,"string");return typeof t=="symbol"?t:t+""}function Hz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var U2={curveBasisClosed:aR,curveBasisOpen:iR,curveBasis:nR,curveBumpX:W8,curveBumpY:V8,curveLinearClosed:sR,curveLinear:Wh,curveMonotoneX:oR,curveMonotoneY:lR,curveNatural:cR,curveStep:uR,curveStepAfter:fR,curveStepBefore:dR},Pm=e=>Ut(e.x)&&Ut(e.y),W2=e=>e.base!=null&&Pm(e.base)&&Pm(e),xc=e=>e.x,yc=e=>e.y,Kz=(e,t)=>{if(typeof e=="function")return e;var r="curve".concat(Xu(e));return(r==="curveMonotone"||r==="curveBump")&&t?U2["".concat(r).concat(t==="vertical"?"Y":"X")]:U2[r]||Wh},Yz=e=>{var{type:t="linear",points:r=[],baseLine:n,layout:a,connectNulls:i=!1}=e,o=Kz(t,a),l=i?r.filter(Pm):r,c;if(Array.isArray(n)){var u=r.map((p,g)=>B2(B2({},p),{},{base:n[g]}));a==="vertical"?c=Gd().y(yc).x1(xc).x0(p=>p.base.x):c=Gd().x(xc).y1(yc).y0(p=>p.base.y);var d=c.defined(W2).curve(o),f=i?u.filter(W2):u;return d(f)}a==="vertical"&&Se(n)?c=Gd().y(yc).x1(xc).x0(n):Se(n)?c=Gd().x(xc).y1(yc).y0(n):c=xP().x(xc).y(yc);var h=c.defined(Pm).curve(o);return h(l)},_b=e=>{var{className:t,points:r,path:n,pathRef:a}=e,i=Yl();if((!r||!r.length)&&!n)return null;var o={type:e.type,points:e.points,baseLine:e.baseLine,layout:e.layout||i,connectNulls:e.connectNulls},l=r&&r.length?Yz(o):n;return m.createElement("path",Jv({},An(e),tb(e),{className:nt("recharts-curve",t),d:l===null?void 0:l,ref:a}))},Gz=["x","y","top","left","width","height","className"];function ex(){return ex=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ex.apply(null,arguments)}function V2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Xz(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?V2(Object(r),!0).forEach(function(n){Qz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Qz(e,t,r){return(t=Zz(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Zz(e){var t=Jz(e,"string");return typeof t=="symbol"?t:t+""}function Jz(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eF(e,t){if(e==null)return{};var r,n,a=tF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var rF=(e,t,r,n,a,i)=>"M".concat(e,",").concat(a,"v").concat(n,"M").concat(i,",").concat(t,"h").concat(r),nF=e=>{var{x:t=0,y:r=0,top:n=0,left:a=0,width:i=0,height:o=0,className:l}=e,c=eF(e,Gz),u=Xz({x:t,y:r,top:n,left:a,width:i,height:o},c);return!Se(t)||!Se(r)||!Se(i)||!Se(o)||!Se(n)||!Se(a)?null:m.createElement("path",ex({},en(u),{className:nt("recharts-cross",l),d:rF(t,r,i,o,n,a)}))};function aF(e,t,r,n){var a=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-a,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function q2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function H2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?q2(Object(r),!0).forEach(function(n){iF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):q2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iF(e,t,r){return(t=sF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sF(e){var t=oF(e,"string");return typeof t=="symbol"?t:t+""}function oF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lF=e=>e.replace(/([A-Z])/g,t=>"-".concat(t.toLowerCase())),eO=(e,t,r)=>e.map(n=>"".concat(lF(n)," ").concat(t,"ms ").concat(r)).join(","),cF=(e,t)=>[Object.keys(e),Object.keys(t)].reduce((r,n)=>r.filter(a=>n.includes(a))),Cu=(e,t)=>Object.keys(t).reduce((r,n)=>H2(H2({},r),{},{[n]:e(n,t[n])}),{});function K2(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function fr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(r),!0).forEach(function(n){uF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):K2(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function uF(e,t,r){return(t=dF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dF(e){var t=fF(e,"string");return typeof t=="symbol"?t:t+""}function fF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Om=(e,t,r)=>e+(t-e)*r,tx=e=>{var{from:t,to:r}=e;return t!==r},tO=(e,t,r)=>{var n=Cu((a,i)=>{if(tx(i)){var[o,l]=e(i.from,i.to,i.velocity);return fr(fr({},i),{},{from:o,velocity:l})}return i},t);return r<1?Cu((a,i)=>tx(i)&&n[a]!=null?fr(fr({},i),{},{velocity:Om(i.velocity,n[a].velocity,r),from:Om(i.from,n[a].from,r)}):i,t):tO(e,n,r-1)};function mF(e,t,r,n,a,i){var o,l=n.reduce((h,p)=>fr(fr({},h),{},{[p]:{from:e[p],velocity:0,to:t[p]}}),{}),c=()=>Cu((h,p)=>p.from,l),u=()=>!Object.values(l).filter(tx).length,d=null,f=h=>{o||(o=h);var p=h-o,g=p/r.dt;l=tO(r,l,g),a(fr(fr(fr({},e),t),c())),o=h,u()||(d=i.setTimeout(f))};return()=>(d=i.setTimeout(f),()=>{var h;(h=d)===null||h===void 0||h()})}function hF(e,t,r,n,a,i,o){var l=null,c=a.reduce((f,h)=>{var p=e[h],g=t[h];return p==null||g==null?f:fr(fr({},f),{},{[h]:[p,g]})},{}),u,d=f=>{u||(u=f);var h=(f-u)/n,p=Cu((x,y)=>Om(...y,r(h)),c);if(i(fr(fr(fr({},e),t),p)),h<1)l=o.setTimeout(d);else{var g=Cu((x,y)=>Om(...y,r(1)),c);i(fr(fr(fr({},e),t),g))}};return()=>(l=o.setTimeout(d),()=>{var f;(f=l)===null||f===void 0||f()})}const pF=(e,t,r,n,a,i)=>{var o=cF(e,t);return r==null?()=>(a(fr(fr({},e),t)),()=>{}):r.isStepper===!0?mF(e,t,r,o,a,i):hF(e,t,r,n,o,a,i)};var Am=1e-4,rO=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],nO=(e,t)=>e.map((r,n)=>r*t**n).reduce((r,n)=>r+n),Y2=(e,t)=>r=>{var n=rO(e,t);return nO(n,r)},gF=(e,t)=>r=>{var n=rO(e,t),a=[...n.map((i,o)=>i*o).slice(1),0];return nO(a,r)},vF=e=>{var t,r=e.split("(");if(r.length!==2||r[0]!=="cubic-bezier")return null;var n=(t=r[1])===null||t===void 0||(t=t.split(")")[0])===null||t===void 0?void 0:t.split(",");if(n==null||n.length!==4)return null;var a=n.map(i=>parseFloat(i));return[a[0],a[1],a[2],a[3]]},xF=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(r.length===1)switch(r[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var a=vF(r[0]);if(a)return a}}return r.length===4?r:[0,0,1,1]},yF=(e,t,r,n)=>{var a=Y2(e,r),i=Y2(t,n),o=gF(e,r),l=u=>u>1?1:u<0?0:u,c=u=>{for(var d=u>1?1:u,f=d,h=0;h<8;++h){var p=a(f)-d,g=o(f);if(Math.abs(p-d)<Am||g<Am)return i(f);f=l(f-p/g)}return i(f)};return c.isStepper=!1,c},G2=function(){return yF(...xF(...arguments))},bF=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:r=100,damping:n=8,dt:a=17}=t,i=(o,l,c)=>{var u=-(o-l)*r,d=c*n,f=c+(u-d)*a/1e3,h=c*a/1e3+o;return Math.abs(h-l)<Am&&Math.abs(f)<Am?[l,0]:[h,f]};return i.isStepper=!0,i.dt=a,i},wF=e=>{if(typeof e=="string")switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return G2(e);case"spring":return bF();default:if(e.split("(")[0]==="cubic-bezier")return G2(e)}return typeof e=="function"?e:null};function jF(e){var t,r=()=>null,n=!1,a=null,i=o=>{if(!n){if(Array.isArray(o)){if(!o.length)return;var l=o,[c,...u]=l;if(typeof c=="number"){a=e.setTimeout(i.bind(null,u),c);return}i(c),a=e.setTimeout(i.bind(null,u));return}typeof o=="string"&&(t=o,r(t)),typeof o=="object"&&(t=o,r(t)),typeof o=="function"&&o()}};return{stop:()=>{n=!0},start:o=>{n=!1,a&&(a(),a=null),i(o)},subscribe:o=>(r=o,()=>{r=()=>null}),getTimeoutController:()=>e}}class _F{setTimeout(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=performance.now(),a=null,i=o=>{o-n>=r?t(o):typeof requestAnimationFrame=="function"&&(a=requestAnimationFrame(i))};return a=requestAnimationFrame(i),()=>{a!=null&&cancelAnimationFrame(a)}}}function NF(){return jF(new _F)}var SF=m.createContext(NF);function kF(e,t){var r=m.useContext(SF);return m.useMemo(()=>t??r(e),[e,t,r])}var CF=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),lp={devToolsEnabled:!0,isSsr:CF()},EF={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},X2={t:0},H0={t:1};function td(e){var t=ar(e,EF),{isActive:r,canBegin:n,duration:a,easing:i,begin:o,onAnimationEnd:l,onAnimationStart:c,children:u}=t,d=r==="auto"?!lp.isSsr:r,f=kF(t.animationId,t.animationManager),[h,p]=m.useState(d?X2:H0),g=m.useRef(null);return m.useEffect(()=>{d||p(H0)},[d]),m.useEffect(()=>{if(!d||!n)return Qu;var x=pF(X2,H0,wF(i),a,p,f.getTimeoutController()),y=()=>{g.current=x()};return f.start([c,o,y,a,l]),()=>{f.stop(),g.current&&g.current(),l()}},[d,n,a,i,o,c,l,f]),u(h.t)}function rd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",r=m.useRef(Nu(t)),n=m.useRef(e);return n.current!==e&&(r.current=Nu(t),n.current=e),r.current}var PF=["radius"],OF=["radius"],Q2,Z2,J2,e_,t_,r_,n_,a_,i_,s_;function o_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function l_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?o_(Object(r),!0).forEach(function(n){AF(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AF(e,t,r){return(t=TF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TF(e){var t=MF(e,"string");return typeof t=="symbol"?t:t+""}function MF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Tm(){return Tm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Tm.apply(null,arguments)}function c_(e,t){if(e==null)return{};var r,n,a=DF(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function DF(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function Ca(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var u_=(e,t,r,n,a)=>{var i=ts(r),o=ts(n),l=Math.min(Math.abs(i)/2,Math.abs(o)/2),c=o>=0?1:-1,u=i>=0?1:-1,d=o>=0&&i>=0||o<0&&i<0?1:0,f;if(l>0&&a instanceof Array){for(var h=[0,0,0,0],p=0,g=4;p<g;p++)h[p]=a[p]>l?l:a[p];f=qt(Q2||(Q2=Ca(["M",",",""])),e,t+c*h[0]),h[0]>0&&(f+=qt(Z2||(Z2=Ca(["A ",",",",0,0,",",",",",""])),h[0],h[0],d,e+u*h[0],t)),f+=qt(J2||(J2=Ca(["L ",",",""])),e+r-u*h[1],t),h[1]>0&&(f+=qt(e_||(e_=Ca(["A ",",",",0,0,",`,
        `,",",""])),h[1],h[1],d,e+r,t+c*h[1])),f+=qt(t_||(t_=Ca(["L ",",",""])),e+r,t+n-c*h[2]),h[2]>0&&(f+=qt(r_||(r_=Ca(["A ",",",",0,0,",`,
        `,",",""])),h[2],h[2],d,e+r-u*h[2],t+n)),f+=qt(n_||(n_=Ca(["L ",",",""])),e+u*h[3],t+n),h[3]>0&&(f+=qt(a_||(a_=Ca(["A ",",",",0,0,",`,
        `,",",""])),h[3],h[3],d,e,t+n-c*h[3])),f+="Z"}else if(l>0&&a===+a&&a>0){var x=Math.min(l,a);f=qt(i_||(i_=Ca(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),e,t+c*x,x,x,d,e+u*x,t,e+r-u*x,t,x,x,d,e+r,t+c*x,e+r,t+n-c*x,x,x,d,e+r-u*x,t+n,e+u*x,t+n,x,x,d,e,t+n-c*x)}else f=qt(s_||(s_=Ca(["M ",","," h "," v "," h "," Z"])),e,t,r,n,-r);return f},d_={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},aO=e=>{var t=ar(e,d_),r=m.useRef(null),[n,a]=m.useState(-1);m.useEffect(()=>{if(r.current&&r.current.getTotalLength)try{var z=r.current.getTotalLength();z&&a(z)}catch{}},[]);var{x:i,y:o,width:l,height:c,radius:u,className:d}=t,{animationEasing:f,animationDuration:h,animationBegin:p,isAnimationActive:g,isUpdateAnimationActive:x}=t,y=m.useRef(l),v=m.useRef(c),b=m.useRef(i),w=m.useRef(o),j=m.useMemo(()=>({x:i,y:o,width:l,height:c,radius:u}),[i,o,l,c,u]),N=rd(j,"rectangle-");if(i!==+i||o!==+o||l!==+l||c!==+c||l===0||c===0)return null;var _=nt("recharts-rectangle",d);if(!x){var S=en(t),C=c_(S,PF);return m.createElement("path",Tm({},C,{x:ts(i),y:ts(o),width:ts(l),height:ts(c),radius:typeof u=="number"?u:void 0,className:_,d:u_(i,o,l,c,u)}))}var O=y.current,A=v.current,T=b.current,D=w.current,q="0px ".concat(n===-1?1:n,"px"),re="".concat(n,"px 0px"),K=eO(["strokeDasharray"],h,typeof f=="string"?f:d_.animationEasing);return m.createElement(td,{animationId:N,key:N,canBegin:n>0,duration:h,easing:f,isActive:x,begin:p},z=>{var P=Mt(O,l,z),M=Mt(A,c,z),L=Mt(T,i,z),G=Mt(D,o,z);r.current&&(y.current=P,v.current=M,b.current=L,w.current=G);var $;g?z>0?$={transition:K,strokeDasharray:re}:$={strokeDasharray:q}:$={strokeDasharray:re};var U=en(t),E=c_(U,OF);return m.createElement("path",Tm({},E,{radius:typeof u=="number"?u:void 0,className:_,d:u_(L,G,P,M,u),ref:r,style:l_(l_({},$),t.style)}))})};function f_(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function m_(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?f_(Object(r),!0).forEach(function(n){$F(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):f_(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $F(e,t,r){return(t=IF(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IF(e){var t=LF(e,"string");return typeof t=="symbol"?t:t+""}function LF(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Mm=Math.PI/180,RF=e=>e*180/Math.PI,rr=(e,t,r,n)=>({x:e+Math.cos(-Mm*n)*r,y:t+Math.sin(-Mm*n)*r}),iO=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},zF=(e,t)=>{var{x:r,y:n}=e,{x:a,y:i}=t;return Math.sqrt((r-a)**2+(n-i)**2)},FF=(e,t)=>{var{x:r,y:n}=e,{cx:a,cy:i}=t,o=zF({x:r,y:n},{x:a,y:i});if(o<=0)return{radius:o,angle:0};var l=(r-a)/o,c=Math.acos(l);return n>i&&(c=2*Math.PI-c),{radius:o,angle:RF(c),angleInRadian:c}},BF=e=>{var{startAngle:t,endAngle:r}=e,n=Math.floor(t/360),a=Math.floor(r/360),i=Math.min(n,a);return{startAngle:t-i*360,endAngle:r-i*360}},UF=(e,t)=>{var{startAngle:r,endAngle:n}=t,a=Math.floor(r/360),i=Math.floor(n/360),o=Math.min(a,i);return e+o*360},WF=(e,t)=>{var{chartX:r,chartY:n}=e,{radius:a,angle:i}=FF({x:r,y:n},t),{innerRadius:o,outerRadius:l}=t;if(a<o||a>l||a===0)return null;var{startAngle:c,endAngle:u}=BF(t),d=i,f;if(c<=u){for(;d>u;)d-=360;for(;d<c;)d+=360;f=d>=c&&d<=u}else{for(;d>c;)d-=360;for(;d<u;)d+=360;f=d>=u&&d<=c}return f?m_(m_({},t),{},{radius:a,angle:UF(d,t)}):null};function sO(e){var{cx:t,cy:r,radius:n,startAngle:a,endAngle:i}=e,o=rr(t,r,n,a),l=rr(t,r,n,i);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:a,endAngle:i}}var h_,p_,g_,v_,x_,y_,b_;function rx(){return rx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},rx.apply(null,arguments)}function Zs(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var VF=(e,t)=>{var r=kr(t-e),n=Math.min(Math.abs(t-e),359.999);return r*n},rf=e=>{var{cx:t,cy:r,radius:n,angle:a,sign:i,isExternal:o,cornerRadius:l,cornerIsExternal:c}=e,u=l*(o?1:-1)+n,d=Math.asin(l/u)/Mm,f=c?a:a+i*d,h=rr(t,r,u,f),p=rr(t,r,n,f),g=c?a-i*d:a,x=rr(t,r,u*Math.cos(d*Mm),g);return{center:h,circleTangency:p,lineTangency:x,theta:d}},oO=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:i,endAngle:o}=e,l=VF(i,o),c=i+l,u=rr(t,r,a,i),d=rr(t,r,a,c),f=qt(h_||(h_=Zs(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),u.x,u.y,a,a,+(Math.abs(l)>180),+(i>c),d.x,d.y);if(n>0){var h=rr(t,r,n,i),p=rr(t,r,n,c);f+=qt(p_||(p_=Zs(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),p.x,p.y,n,n,+(Math.abs(l)>180),+(i<=c),h.x,h.y)}else f+=qt(g_||(g_=Zs(["L ",","," Z"])),t,r);return f},qF=e=>{var{cx:t,cy:r,innerRadius:n,outerRadius:a,cornerRadius:i,forceCornerRadius:o,cornerIsExternal:l,startAngle:c,endAngle:u}=e,d=kr(u-c),{circleTangency:f,lineTangency:h,theta:p}=rf({cx:t,cy:r,radius:a,angle:c,sign:d,cornerRadius:i,cornerIsExternal:l}),{circleTangency:g,lineTangency:x,theta:y}=rf({cx:t,cy:r,radius:a,angle:u,sign:-d,cornerRadius:i,cornerIsExternal:l}),v=l?Math.abs(c-u):Math.abs(c-u)-p-y;if(v<0)return o?qt(v_||(v_=Zs(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),h.x,h.y,i,i,i*2,i,i,-i*2):oO({cx:t,cy:r,innerRadius:n,outerRadius:a,startAngle:c,endAngle:u});var b=qt(x_||(x_=Zs(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),h.x,h.y,i,i,+(d<0),f.x,f.y,a,a,+(v>180),+(d<0),g.x,g.y,i,i,+(d<0),x.x,x.y);if(n>0){var{circleTangency:w,lineTangency:j,theta:N}=rf({cx:t,cy:r,radius:n,angle:c,sign:d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),{circleTangency:_,lineTangency:S,theta:C}=rf({cx:t,cy:r,radius:n,angle:u,sign:-d,isExternal:!0,cornerRadius:i,cornerIsExternal:l}),O=l?Math.abs(c-u):Math.abs(c-u)-N-C;if(O<0&&i===0)return"".concat(b,"L").concat(t,",").concat(r,"Z");b+=qt(y_||(y_=Zs(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),S.x,S.y,i,i,+(d<0),_.x,_.y,n,n,+(O>180),+(d>0),w.x,w.y,i,i,+(d<0),j.x,j.y)}else b+=qt(b_||(b_=Zs(["L",",","Z"])),t,r);return b},HF={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},lO=e=>{var t=ar(e,HF),{cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d,className:f}=t;if(i<a||u===d)return null;var h=nt("recharts-sector",f),p=i-a,g=Vr(o,p,0,!0),x;return g>0&&Math.abs(u-d)<360?x=qF({cx:r,cy:n,innerRadius:a,outerRadius:i,cornerRadius:Math.min(g,p/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:u,endAngle:d}):x=oO({cx:r,cy:n,innerRadius:a,outerRadius:i,startAngle:u,endAngle:d}),m.createElement("path",rx({},en(t),{className:h,d:x}))};function KF(e,t,r){if(e==="horizontal")return[{x:t.x,y:r.top},{x:t.x,y:r.top+r.height}];if(e==="vertical")return[{x:r.left,y:t.y},{x:r.left+r.width,y:t.y}];if(MP(t)){if(e==="centric"){var{cx:n,cy:a,innerRadius:i,outerRadius:o,angle:l}=t,c=rr(n,a,i,l),u=rr(n,a,o,l);return[{x:c.x,y:c.y},{x:u.x,y:u.y}]}return sO(t)}}var cO={},uO={},dO={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=fb;function r(n){return t.isSymbol(n)?NaN:Number(n)}e.toNumber=r})(dO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=dO;function r(n){return n?(n=t.toNumber(n),n===1/0||n===-1/0?(n<0?-1:1)*Number.MAX_VALUE:n===n?n:0):n===0?n:0}e.toFinite=r})(uO);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=mb,r=uO;function n(a,i,o){o&&typeof o!="number"&&t.isIterateeCall(a,i,o)&&(i=o=void 0),a=r.toFinite(a),i===void 0?(i=a,a=0):i=r.toFinite(i),o=o===void 0?a<i?1:-1:r.toFinite(o);const l=Math.max(Math.ceil((i-a)/(o||1)),0),c=new Array(l);for(let u=0;u<l;u++)c[u]=a,a+=o;return c}e.range=n})(cO);var YF=cO.range;const fO=Si(YF);function ms(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function GF(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nb(e){let t,r,n;e.length!==2?(t=ms,r=(l,c)=>ms(e(l),c),n=(l,c)=>e(l)-c):(t=e===ms||e===GF?e:XF,r=e,n=e);function a(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=a(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:a,center:o,right:i}}function XF(){return 0}function mO(e){return e===null?NaN:+e}function*QF(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let n of e)(n=t(n,++r,e))!=null&&(n=+n)>=n&&(yield n)}}const ZF=Nb(ms),JF=ZF.right;Nb(mO).center;const nd=JF;class w_ extends Map{constructor(t,r=rB){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,a]of t)this.set(n,a)}get(t){return super.get(j_(this,t))}has(t){return super.has(j_(this,t))}set(t,r){return super.set(eB(this,t),r)}delete(t){return super.delete(tB(this,t))}}function j_({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function eB({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function tB({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function rB(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nB(e=ms){if(e===ms)return hO;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function hO(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const aB=Math.sqrt(50),iB=Math.sqrt(10),sB=Math.sqrt(2);function Dm(e,t,r){const n=(t-e)/Math.max(0,r),a=Math.floor(Math.log10(n)),i=n/Math.pow(10,a),o=i>=aB?10:i>=iB?5:i>=sB?2:1;let l,c,u;return a<0?(u=Math.pow(10,-a)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,a)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Dm(e,t,r*2):[l,c,u]}function nx(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[a,i,o]=n?Dm(t,e,r):Dm(e,t,r);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(i-u)/-o;else for(let u=0;u<l;++u)c[u]=(i-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(a+u)/-o;else for(let u=0;u<l;++u)c[u]=(a+u)*o;return c}function ax(e,t,r){return t=+t,e=+e,r=+r,Dm(e,t,r)[2]}function ix(e,t,r){t=+t,e=+e,r=+r;const n=t<e,a=n?ax(t,e,r):ax(e,t,r);return(n?-1:1)*(a<0?1/-a:a)}function __(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r<a||r===void 0&&a>=a)&&(r=a)}return r}function N_(e,t){let r;if(t===void 0)for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);else{let n=-1;for(let a of e)(a=t(a,++n,e))!=null&&(r>a||r===void 0&&a>=a)&&(r=a)}return r}function pO(e,t,r=0,n=1/0,a){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(a=a===void 0?hO:nB(a);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),h=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),p=Math.max(r,Math.floor(t-u*f/c+h)),g=Math.min(n,Math.floor(t+(c-u)*f/c+h));pO(e,t,p,g,a)}const i=e[t];let o=r,l=n;for(bc(e,r,t),a(e[n],i)>0&&bc(e,r,n);o<l;){for(bc(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[r],i)===0?bc(e,r,l):(++l,bc(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function bc(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function oB(e,t,r){if(e=Float64Array.from(QF(e,r)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return N_(e);if(t>=1)return __(e);var n,a=(n-1)*t,i=Math.floor(a),o=__(pO(e,i).subarray(0,i+1)),l=N_(e.subarray(i+1));return o+(l-o)*(a-i)}}function lB(e,t,r=mO){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,a=(n-1)*t,i=Math.floor(a),o=+r(e[i],i,e),l=+r(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function cB(e,t,r){e=+e,t=+t,r=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+r;for(var n=-1,a=Math.max(0,Math.ceil((t-e)/r))|0,i=new Array(a);++n<a;)i[n]=e+n*r;return i}function ra(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ai(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const sx=Symbol("implicit");function Sb(){var e=new w_,t=[],r=[],n=sx;function a(i){let o=e.get(i);if(o===void 0){if(n!==sx)return n;e.set(i,o=t.push(i)-1)}return r[o%r.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new w_;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(r=Array.from(i),a):r.slice()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return Sb(t,r).unknown(n)},ra.apply(a,arguments),a}function kb(){var e=Sb().unknown(void 0),t=e.domain,r=e.range,n=0,a=1,i,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var h=t().length,p=a<n,g=p?a:n,x=p?n:a;i=(x-g)/Math.max(1,h-c+u*2),l&&(i=Math.floor(i)),g+=(x-g-i*(h-c))*d,o=i*(1-c),l&&(g=Math.round(g),o=Math.round(o));var y=cB(h).map(function(v){return g+i*v});return r(p?y.reverse():y)}return e.domain=function(h){return arguments.length?(t(h),f()):t()},e.range=function(h){return arguments.length?([n,a]=h,n=+n,a=+a,f()):[n,a]},e.rangeRound=function(h){return[n,a]=h,n=+n,a=+a,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,f()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,u=+h),f()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),f()):c},e.paddingOuter=function(h){return arguments.length?(u=+h,f()):u},e.align=function(h){return arguments.length?(d=Math.max(0,Math.min(1,h)),f()):d},e.copy=function(){return kb(t(),[n,a]).round(l).paddingInner(c).paddingOuter(u).align(d)},ra.apply(f(),arguments)}function gO(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return gO(t())},e}function uB(){return gO(kb.apply(null,arguments).paddingInner(1))}function Cb(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function vO(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function ad(){}var Eu=.7,$m=1/Eu,xl="\\s*([+-]?\\d+)\\s*",Pu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ra="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",dB=/^#([0-9a-f]{3,8})$/,fB=new RegExp(`^rgb\\(${xl},${xl},${xl}\\)$`),mB=new RegExp(`^rgb\\(${Ra},${Ra},${Ra}\\)$`),hB=new RegExp(`^rgba\\(${xl},${xl},${xl},${Pu}\\)$`),pB=new RegExp(`^rgba\\(${Ra},${Ra},${Ra},${Pu}\\)$`),gB=new RegExp(`^hsl\\(${Pu},${Ra},${Ra}\\)$`),vB=new RegExp(`^hsla\\(${Pu},${Ra},${Ra},${Pu}\\)$`),S_={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Cb(ad,Ou,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:k_,formatHex:k_,formatHex8:xB,formatHsl:yB,formatRgb:C_,toString:C_});function k_(){return this.rgb().formatHex()}function xB(){return this.rgb().formatHex8()}function yB(){return xO(this).formatHsl()}function C_(){return this.rgb().formatRgb()}function Ou(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=dB.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?E_(t):r===3?new fn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?nf(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?nf(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=fB.exec(e))?new fn(t[1],t[2],t[3],1):(t=mB.exec(e))?new fn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=hB.exec(e))?nf(t[1],t[2],t[3],t[4]):(t=pB.exec(e))?nf(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=gB.exec(e))?A_(t[1],t[2]/100,t[3]/100,1):(t=vB.exec(e))?A_(t[1],t[2]/100,t[3]/100,t[4]):S_.hasOwnProperty(e)?E_(S_[e]):e==="transparent"?new fn(NaN,NaN,NaN,0):null}function E_(e){return new fn(e>>16&255,e>>8&255,e&255,1)}function nf(e,t,r,n){return n<=0&&(e=t=r=NaN),new fn(e,t,r,n)}function bB(e){return e instanceof ad||(e=Ou(e)),e?(e=e.rgb(),new fn(e.r,e.g,e.b,e.opacity)):new fn}function ox(e,t,r,n){return arguments.length===1?bB(e):new fn(e,t,r,n??1)}function fn(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Cb(fn,ox,vO(ad,{brighter(e){return e=e==null?$m:Math.pow($m,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new fn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new fn(oo(this.r),oo(this.g),oo(this.b),Im(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:P_,formatHex:P_,formatHex8:wB,formatRgb:O_,toString:O_}));function P_(){return`#${Js(this.r)}${Js(this.g)}${Js(this.b)}`}function wB(){return`#${Js(this.r)}${Js(this.g)}${Js(this.b)}${Js((isNaN(this.opacity)?1:this.opacity)*255)}`}function O_(){const e=Im(this.opacity);return`${e===1?"rgb(":"rgba("}${oo(this.r)}, ${oo(this.g)}, ${oo(this.b)}${e===1?")":`, ${e})`}`}function Im(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function oo(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Js(e){return e=oo(e),(e<16?"0":"")+e.toString(16)}function A_(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new ha(e,t,r,n)}function xO(e){if(e instanceof ha)return new ha(e.h,e.s,e.l,e.opacity);if(e instanceof ad||(e=Ou(e)),!e)return new ha;if(e instanceof ha)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,a=Math.min(t,r,n),i=Math.max(t,r,n),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(r-n)/l+(r<n)*6:r===i?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new ha(o,l,c,e.opacity)}function jB(e,t,r,n){return arguments.length===1?xO(e):new ha(e,t,r,n??1)}function ha(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Cb(ha,jB,vO(ad,{brighter(e){return e=e==null?$m:Math.pow($m,e),new ha(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Eu:Math.pow(Eu,e),new ha(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new fn(K0(e>=240?e-240:e+120,a,n),K0(e,a,n),K0(e<120?e+240:e-120,a,n),this.opacity)},clamp(){return new ha(T_(this.h),af(this.s),af(this.l),Im(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Im(this.opacity);return`${e===1?"hsl(":"hsla("}${T_(this.h)}, ${af(this.s)*100}%, ${af(this.l)*100}%${e===1?")":`, ${e})`}`}}));function T_(e){return e=(e||0)%360,e<0?e+360:e}function af(e){return Math.max(0,Math.min(1,e||0))}function K0(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Eb=e=>()=>e;function _B(e,t){return function(r){return e+r*t}}function NB(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function SB(e){return(e=+e)==1?yO:function(t,r){return r-t?NB(t,r,e):Eb(isNaN(t)?r:t)}}function yO(e,t){var r=t-e;return r?_B(e,r):Eb(isNaN(e)?t:e)}const M_=function e(t){var r=SB(t);function n(a,i){var o=r((a=ox(a)).r,(i=ox(i)).r),l=r(a.g,i.g),c=r(a.b,i.b),u=yO(a.opacity,i.opacity);return function(d){return a.r=o(d),a.g=l(d),a.b=c(d),a.opacity=u(d),a+""}}return n.gamma=e,n}(1);function kB(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),a;return function(i){for(a=0;a<r;++a)n[a]=e[a]*(1-i)+t[a]*i;return n}}function CB(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function EB(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,a=new Array(n),i=new Array(r),o;for(o=0;o<n;++o)a[o]=Gl(e[o],t[o]);for(;o<r;++o)i[o]=t[o];return function(l){for(o=0;o<n;++o)i[o]=a[o](l);return i}}function PB(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Lm(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function OB(e,t){var r={},n={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?r[a]=Gl(e[a],t[a]):n[a]=t[a];return function(i){for(a in r)n[a]=r[a](i);return n}}var lx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Y0=new RegExp(lx.source,"g");function AB(e){return function(){return e}}function TB(e){return function(t){return e(t)+""}}function MB(e,t){var r=lx.lastIndex=Y0.lastIndex=0,n,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=lx.exec(e))&&(a=Y0.exec(t));)(i=a.index)>r&&(i=t.slice(r,i),l[o]?l[o]+=i:l[++o]=i),(n=n[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:Lm(n,a)})),r=Y0.lastIndex;return r<t.length&&(i=t.slice(r),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?TB(c[0].x):AB(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Gl(e,t){var r=typeof t,n;return t==null||r==="boolean"?Eb(t):(r==="number"?Lm:r==="string"?(n=Ou(t))?(t=n,M_):MB:t instanceof Ou?M_:t instanceof Date?PB:CB(t)?kB:Array.isArray(t)?EB:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?OB:Lm)(e,t)}function Pb(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function DB(e,t){t===void 0&&(t=e,e=Gl);for(var r=0,n=t.length-1,a=t[0],i=new Array(n<0?0:n);r<n;)i[r]=e(a,a=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return i[l](o-l)}}function $B(e){return function(){return e}}function Rm(e){return+e}var D_=[0,1];function Zr(e){return e}function cx(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:$B(isNaN(t)?NaN:.5)}function IB(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function LB(e,t,r){var n=e[0],a=e[1],i=t[0],o=t[1];return a<n?(n=cx(a,n),i=r(o,i)):(n=cx(n,a),i=r(i,o)),function(l){return i(n(l))}}function RB(e,t,r){var n=Math.min(e.length,t.length)-1,a=new Array(n),i=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)a[o]=cx(e[o],e[o+1]),i[o]=r(t[o],t[o+1]);return function(l){var c=nd(e,l,1,n)-1;return i[c](a[c](l))}}function id(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function cp(){var e=D_,t=D_,r=Gl,n,a,i,o=Zr,l,c,u;function d(){var h=Math.min(e.length,t.length);return o!==Zr&&(o=IB(e[0],e[h-1])),l=h>2?RB:LB,c=u=null,f}function f(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(n),t,r)))(n(o(h)))}return f.invert=function(h){return o(a((u||(u=l(t,e.map(n),Lm)))(h)))},f.domain=function(h){return arguments.length?(e=Array.from(h,Rm),d()):e.slice()},f.range=function(h){return arguments.length?(t=Array.from(h),d()):t.slice()},f.rangeRound=function(h){return t=Array.from(h),r=Pb,d()},f.clamp=function(h){return arguments.length?(o=h?!0:Zr,d()):o!==Zr},f.interpolate=function(h){return arguments.length?(r=h,d()):r},f.unknown=function(h){return arguments.length?(i=h,f):i},function(h,p){return n=h,a=p,d()}}function Ob(){return cp()(Zr,Zr)}function zB(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function zm(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function $l(e){return e=zm(Math.abs(e)),e?e[1]:NaN}function FB(e,t){return function(r,n){for(var a=r.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),i.push(r.substring(a-=l,a+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function BB(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var UB=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Au(e){if(!(t=UB.exec(e)))throw new Error("invalid format: "+e);var t;return new Ab({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Au.prototype=Ab.prototype;function Ab(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Ab.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function WB(e){e:for(var t=e.length,r=1,n=-1,a;r<t;++r)switch(e[r]){case".":n=a=r;break;case"0":n===0&&(n=r),a=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(a+1):e}var bO;function VB(e,t){var r=zm(e,t);if(!r)return e+"";var n=r[0],a=r[1],i=a-(bO=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=n.length;return i===o?n:i>o?n+new Array(i-o+1).join("0"):i>0?n.slice(0,i)+"."+n.slice(i):"0."+new Array(1-i).join("0")+zm(e,Math.max(0,t+i-1))[0]}function $_(e,t){var r=zm(e,t);if(!r)return e+"";var n=r[0],a=r[1];return a<0?"0."+new Array(-a).join("0")+n:n.length>a+1?n.slice(0,a+1)+"."+n.slice(a+1):n+new Array(a-n.length+2).join("0")}const I_={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zB,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>$_(e*100,t),r:$_,s:VB,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function L_(e){return e}var R_=Array.prototype.map,z_=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function qB(e){var t=e.grouping===void 0||e.thousands===void 0?L_:FB(R_.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?L_:BB(R_.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=Au(f);var h=f.fill,p=f.align,g=f.sign,x=f.symbol,y=f.zero,v=f.width,b=f.comma,w=f.precision,j=f.trim,N=f.type;N==="n"?(b=!0,N="g"):I_[N]||(w===void 0&&(w=12),j=!0,N="g"),(y||h==="0"&&p==="=")&&(y=!0,h="0",p="=");var _=x==="$"?r:x==="#"&&/[boxX]/.test(N)?"0"+N.toLowerCase():"",S=x==="$"?n:/[%p]/.test(N)?o:"",C=I_[N],O=/[defgprs%]/.test(N);w=w===void 0?6:/[gprs]/.test(N)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function A(T){var D=_,q=S,re,K,z;if(N==="c")q=C(T)+q,T="";else{T=+T;var P=T<0||1/T<0;if(T=isNaN(T)?c:C(Math.abs(T),w),j&&(T=WB(T)),P&&+T==0&&g!=="+"&&(P=!1),D=(P?g==="("?g:l:g==="-"||g==="("?"":g)+D,q=(N==="s"?z_[8+bO/3]:"")+q+(P&&g==="("?")":""),O){for(re=-1,K=T.length;++re<K;)if(z=T.charCodeAt(re),48>z||z>57){q=(z===46?a+T.slice(re+1):T.slice(re))+q,T=T.slice(0,re);break}}}b&&!y&&(T=t(T,1/0));var M=D.length+T.length+q.length,L=M<v?new Array(v-M+1).join(h):"";switch(b&&y&&(T=t(L+T,L.length?v-q.length:1/0),L=""),p){case"<":T=D+T+q+L;break;case"=":T=D+L+T+q;break;case"^":T=L.slice(0,M=L.length>>1)+D+T+q+L.slice(M);break;default:T=L+D+T+q;break}return i(T)}return A.toString=function(){return f+""},A}function d(f,h){var p=u((f=Au(f),f.type="f",f)),g=Math.max(-8,Math.min(8,Math.floor($l(h)/3)))*3,x=Math.pow(10,-g),y=z_[8+g/3];return function(v){return p(x*v)+y}}return{format:u,formatPrefix:d}}var sf,Tb,wO;HB({thousands:",",grouping:[3],currency:["$",""]});function HB(e){return sf=qB(e),Tb=sf.format,wO=sf.formatPrefix,sf}function KB(e){return Math.max(0,-$l(Math.abs(e)))}function YB(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor($l(t)/3)))*3-$l(Math.abs(e)))}function GB(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,$l(t)-$l(e))+1}function jO(e,t,r,n){var a=ix(e,t,r),i;switch(n=Au(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(i=YB(a,o))&&(n.precision=i),wO(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(i=GB(a,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=i-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(i=KB(a))&&(n.precision=i-(n.type==="%")*2);break}}return Tb(n)}function Ts(e){var t=e.domain;return e.ticks=function(r){var n=t();return nx(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var a=t();return jO(a[0],a[a.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),a=0,i=n.length-1,o=n[a],l=n[i],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=a,a=i,i=u);d-- >0;){if(u=ax(o,l,r),u===c)return n[a]=o,n[i]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function _O(){var e=Ob();return e.copy=function(){return id(e,_O())},ra.apply(e,arguments),Ts(e)}function NO(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Rm),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return NO(e).unknown(t)},e=arguments.length?Array.from(e,Rm):[0,1],Ts(r)}function SO(e,t){e=e.slice();var r=0,n=e.length-1,a=e[r],i=e[n],o;return i<a&&(o=r,r=n,n=o,o=a,a=i,i=o),e[r]=t.floor(a),e[n]=t.ceil(i),e}function F_(e){return Math.log(e)}function B_(e){return Math.exp(e)}function XB(e){return-Math.log(-e)}function QB(e){return-Math.exp(-e)}function ZB(e){return isFinite(e)?+("1e"+e):e<0?0:e}function JB(e){return e===10?ZB:e===Math.E?Math.exp:t=>Math.pow(e,t)}function eU(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function U_(e){return(t,r)=>-e(-t,r)}function Mb(e){const t=e(F_,B_),r=t.domain;let n=10,a,i;function o(){return a=eU(n),i=JB(n),r()[0]<0?(a=U_(a),i=U_(i),e(XB,QB)):e(F_,B_),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let h=a(u),p=a(d),g,x;const y=l==null?10:+l;let v=[];if(!(n%1)&&p-h<y){if(h=Math.floor(h),p=Math.ceil(p),u>0){for(;h<=p;++h)for(g=1;g<n;++g)if(x=h<0?g/i(-h):g*i(h),!(x<u)){if(x>d)break;v.push(x)}}else for(;h<=p;++h)for(g=n-1;g>=1;--g)if(x=h>0?g/i(-h):g*i(h),!(x<u)){if(x>d)break;v.push(x)}v.length*2<y&&(v=nx(u,d,y))}else v=nx(h,p,Math.min(p-h,y)).map(i);return f?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=Au(c)).precision==null&&(c.trim=!0),c=Tb(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/i(Math.round(a(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(SO(r(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function kO(){const e=Mb(cp()).domain([1,10]);return e.copy=()=>id(e,kO()).base(e.base()),ra.apply(e,arguments),e}function W_(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function V_(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Db(e){var t=1,r=e(W_(t),V_(t));return r.constant=function(n){return arguments.length?e(W_(t=+n),V_(t)):t},Ts(r)}function CO(){var e=Db(cp());return e.copy=function(){return id(e,CO()).constant(e.constant())},ra.apply(e,arguments)}function q_(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function tU(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function rU(e){return e<0?-e*e:e*e}function $b(e){var t=e(Zr,Zr),r=1;function n(){return r===1?e(Zr,Zr):r===.5?e(tU,rU):e(q_(r),q_(1/r))}return t.exponent=function(a){return arguments.length?(r=+a,n()):r},Ts(t)}function Ib(){var e=$b(cp());return e.copy=function(){return id(e,Ib()).exponent(e.exponent())},ra.apply(e,arguments),e}function nU(){return Ib.apply(null,arguments).exponent(.5)}function H_(e){return Math.sign(e)*e*e}function aU(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function EO(){var e=Ob(),t=[0,1],r=!1,n;function a(i){var o=aU(e(i));return isNaN(o)?n:r?Math.round(o):o}return a.invert=function(i){return e.invert(H_(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,Rm)).map(H_)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(r=!!i,a):r},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return EO(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},ra.apply(a,arguments),Ts(a)}function PO(){var e=[],t=[],r=[],n;function a(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=lB(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?n:t[nd(r,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(ms),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(n=o,i):n},i.quantiles=function(){return r.slice()},i.copy=function(){return PO().domain(e).range(t).unknown(n)},ra.apply(i,arguments)}function OO(){var e=0,t=1,r=1,n=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[nd(n,c,0,r)]:i}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var u=a.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return OO().domain([e,t]).range(a).unknown(i)},ra.apply(Ts(o),arguments)}function AO(){var e=[.5],t=[0,1],r,n=1;function a(i){return i!=null&&i<=i?t[nd(e,i,0,n)]:r}return a.domain=function(i){return arguments.length?(e=Array.from(i),n=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),n=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(r=i,a):r},a.copy=function(){return AO().domain(e).range(t).unknown(r)},ra.apply(a,arguments)}const G0=new Date,X0=new Date;function gr(e,t,r,n){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let u;do c.push(u=new Date(+i)),t(i,l),e(i);while(u<i&&i<o);return c},a.filter=i=>gr(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),r&&(a.count=(i,o)=>(G0.setTime(+i),X0.setTime(+o),e(G0),e(X0),Math.floor(r(G0,X0))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(n?o=>n(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const Fm=gr(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Fm.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?gr(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):Fm);Fm.range;const ni=1e3,Yn=ni*60,ai=Yn*60,xi=ai*24,Lb=xi*7,K_=xi*30,Q0=xi*365,eo=gr(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ni)},(e,t)=>(t-e)/ni,e=>e.getUTCSeconds());eo.range;const Rb=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ni)},(e,t)=>{e.setTime(+e+t*Yn)},(e,t)=>(t-e)/Yn,e=>e.getMinutes());Rb.range;const zb=gr(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Yn)},(e,t)=>(t-e)/Yn,e=>e.getUTCMinutes());zb.range;const Fb=gr(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ni-e.getMinutes()*Yn)},(e,t)=>{e.setTime(+e+t*ai)},(e,t)=>(t-e)/ai,e=>e.getHours());Fb.range;const Bb=gr(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ai)},(e,t)=>(t-e)/ai,e=>e.getUTCHours());Bb.range;const sd=gr(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Yn)/xi,e=>e.getDate()-1);sd.range;const up=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xi,e=>e.getUTCDate()-1);up.range;const TO=gr(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/xi,e=>Math.floor(e/xi));TO.range;function Po(e){return gr(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Yn)/Lb)}const dp=Po(0),Bm=Po(1),iU=Po(2),sU=Po(3),Il=Po(4),oU=Po(5),lU=Po(6);dp.range;Bm.range;iU.range;sU.range;Il.range;oU.range;lU.range;function Oo(e){return gr(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/Lb)}const fp=Oo(0),Um=Oo(1),cU=Oo(2),uU=Oo(3),Ll=Oo(4),dU=Oo(5),fU=Oo(6);fp.range;Um.range;cU.range;uU.range;Ll.range;dU.range;fU.range;const Ub=gr(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());Ub.range;const Wb=gr(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());Wb.range;const yi=gr(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());yi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});yi.range;const bi=gr(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());bi.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:gr(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});bi.range;function MO(e,t,r,n,a,i){const o=[[eo,1,ni],[eo,5,5*ni],[eo,15,15*ni],[eo,30,30*ni],[i,1,Yn],[i,5,5*Yn],[i,15,15*Yn],[i,30,30*Yn],[a,1,ai],[a,3,3*ai],[a,6,6*ai],[a,12,12*ai],[n,1,xi],[n,2,2*xi],[r,1,Lb],[t,1,K_],[t,3,3*K_],[e,1,Q0]];function l(u,d,f){const h=d<u;h&&([u,d]=[d,u]);const p=f&&typeof f.range=="function"?f:c(u,d,f),g=p?p.range(u,+d+1):[];return h?g.reverse():g}function c(u,d,f){const h=Math.abs(d-u)/f,p=Nb(([,,y])=>y).right(o,h);if(p===o.length)return e.every(ix(u/Q0,d/Q0,f));if(p===0)return Fm.every(Math.max(ix(u,d,f),1));const[g,x]=o[h/o[p-1][2]<o[p][2]/h?p-1:p];return g.every(x)}return[l,c]}const[mU,hU]=MO(bi,Wb,fp,TO,Bb,zb),[pU,gU]=MO(yi,Ub,dp,sd,Fb,Rb);function Z0(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function J0(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function wc(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function vU(e){var t=e.dateTime,r=e.date,n=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=jc(a),d=_c(a),f=jc(i),h=_c(i),p=jc(o),g=_c(o),x=jc(l),y=_c(l),v=jc(c),b=_c(c),w={a:P,A:M,b:L,B:G,c:null,d:J_,e:J_,f:FU,g:XU,G:ZU,H:LU,I:RU,j:zU,L:DO,m:BU,M:UU,p:$,q:U,Q:rN,s:nN,S:WU,u:VU,U:qU,V:HU,w:KU,W:YU,x:null,X:null,y:GU,Y:QU,Z:JU,"%":tN},j={a:E,A:Q,b:J,B:de,c:null,d:eN,e:eN,f:nW,g:mW,G:pW,H:eW,I:tW,j:rW,L:IO,m:aW,M:iW,p:ae,q:pe,Q:rN,s:nN,S:sW,u:oW,U:lW,V:cW,w:uW,W:dW,x:null,X:null,y:fW,Y:hW,Z:gW,"%":tN},N={a:A,A:T,b:D,B:q,c:re,d:Q_,e:Q_,f:MU,g:X_,G:G_,H:Z_,I:Z_,j:PU,L:TU,m:EU,M:OU,p:O,q:CU,Q:$U,s:IU,S:AU,u:jU,U:_U,V:NU,w:wU,W:SU,x:K,X:z,y:X_,Y:G_,Z:kU,"%":DU};w.x=_(r,w),w.X=_(n,w),w.c=_(t,w),j.x=_(r,j),j.X=_(n,j),j.c=_(t,j);function _(k,H){return function(ne){var Y=[],me=-1,ee=0,he=k.length,je,Ae,Ue;for(ne instanceof Date||(ne=new Date(+ne));++me<he;)k.charCodeAt(me)===37&&(Y.push(k.slice(ee,me)),(Ae=Y_[je=k.charAt(++me)])!=null?je=k.charAt(++me):Ae=je==="e"?" ":"0",(Ue=H[je])&&(je=Ue(ne,Ae)),Y.push(je),ee=me+1);return Y.push(k.slice(ee,me)),Y.join("")}}function S(k,H){return function(ne){var Y=wc(1900,void 0,1),me=C(Y,k,ne+="",0),ee,he;if(me!=ne.length)return null;if("Q"in Y)return new Date(Y.Q);if("s"in Y)return new Date(Y.s*1e3+("L"in Y?Y.L:0));if(H&&!("Z"in Y)&&(Y.Z=0),"p"in Y&&(Y.H=Y.H%12+Y.p*12),Y.m===void 0&&(Y.m="q"in Y?Y.q:0),"V"in Y){if(Y.V<1||Y.V>53)return null;"w"in Y||(Y.w=1),"Z"in Y?(ee=J0(wc(Y.y,0,1)),he=ee.getUTCDay(),ee=he>4||he===0?Um.ceil(ee):Um(ee),ee=up.offset(ee,(Y.V-1)*7),Y.y=ee.getUTCFullYear(),Y.m=ee.getUTCMonth(),Y.d=ee.getUTCDate()+(Y.w+6)%7):(ee=Z0(wc(Y.y,0,1)),he=ee.getDay(),ee=he>4||he===0?Bm.ceil(ee):Bm(ee),ee=sd.offset(ee,(Y.V-1)*7),Y.y=ee.getFullYear(),Y.m=ee.getMonth(),Y.d=ee.getDate()+(Y.w+6)%7)}else("W"in Y||"U"in Y)&&("w"in Y||(Y.w="u"in Y?Y.u%7:"W"in Y?1:0),he="Z"in Y?J0(wc(Y.y,0,1)).getUTCDay():Z0(wc(Y.y,0,1)).getDay(),Y.m=0,Y.d="W"in Y?(Y.w+6)%7+Y.W*7-(he+5)%7:Y.w+Y.U*7-(he+6)%7);return"Z"in Y?(Y.H+=Y.Z/100|0,Y.M+=Y.Z%100,J0(Y)):Z0(Y)}}function C(k,H,ne,Y){for(var me=0,ee=H.length,he=ne.length,je,Ae;me<ee;){if(Y>=he)return-1;if(je=H.charCodeAt(me++),je===37){if(je=H.charAt(me++),Ae=N[je in Y_?H.charAt(me++):je],!Ae||(Y=Ae(k,ne,Y))<0)return-1}else if(je!=ne.charCodeAt(Y++))return-1}return Y}function O(k,H,ne){var Y=u.exec(H.slice(ne));return Y?(k.p=d.get(Y[0].toLowerCase()),ne+Y[0].length):-1}function A(k,H,ne){var Y=p.exec(H.slice(ne));return Y?(k.w=g.get(Y[0].toLowerCase()),ne+Y[0].length):-1}function T(k,H,ne){var Y=f.exec(H.slice(ne));return Y?(k.w=h.get(Y[0].toLowerCase()),ne+Y[0].length):-1}function D(k,H,ne){var Y=v.exec(H.slice(ne));return Y?(k.m=b.get(Y[0].toLowerCase()),ne+Y[0].length):-1}function q(k,H,ne){var Y=x.exec(H.slice(ne));return Y?(k.m=y.get(Y[0].toLowerCase()),ne+Y[0].length):-1}function re(k,H,ne){return C(k,t,H,ne)}function K(k,H,ne){return C(k,r,H,ne)}function z(k,H,ne){return C(k,n,H,ne)}function P(k){return o[k.getDay()]}function M(k){return i[k.getDay()]}function L(k){return c[k.getMonth()]}function G(k){return l[k.getMonth()]}function $(k){return a[+(k.getHours()>=12)]}function U(k){return 1+~~(k.getMonth()/3)}function E(k){return o[k.getUTCDay()]}function Q(k){return i[k.getUTCDay()]}function J(k){return c[k.getUTCMonth()]}function de(k){return l[k.getUTCMonth()]}function ae(k){return a[+(k.getUTCHours()>=12)]}function pe(k){return 1+~~(k.getUTCMonth()/3)}return{format:function(k){var H=_(k+="",w);return H.toString=function(){return k},H},parse:function(k){var H=S(k+="",!1);return H.toString=function(){return k},H},utcFormat:function(k){var H=_(k+="",j);return H.toString=function(){return k},H},utcParse:function(k){var H=S(k+="",!0);return H.toString=function(){return k},H}}}var Y_={"-":"",_:" ",0:"0"},Pr=/^\s*\d+/,xU=/^%/,yU=/[\\^$*+?|[\]().{}]/g;function at(e,t,r){var n=e<0?"-":"",a=(n?-e:e)+"",i=a.length;return n+(i<r?new Array(r-i+1).join(t)+a:a)}function bU(e){return e.replace(yU,"\\$&")}function jc(e){return new RegExp("^(?:"+e.map(bU).join("|")+")","i")}function _c(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function wU(e,t,r){var n=Pr.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function jU(e,t,r){var n=Pr.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function _U(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function NU(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function SU(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function G_(e,t,r){var n=Pr.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function X_(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function kU(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function CU(e,t,r){var n=Pr.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function EU(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function Q_(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function PU(e,t,r){var n=Pr.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function Z_(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function OU(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function AU(e,t,r){var n=Pr.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function TU(e,t,r){var n=Pr.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function MU(e,t,r){var n=Pr.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function DU(e,t,r){var n=xU.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function $U(e,t,r){var n=Pr.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function IU(e,t,r){var n=Pr.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function J_(e,t){return at(e.getDate(),t,2)}function LU(e,t){return at(e.getHours(),t,2)}function RU(e,t){return at(e.getHours()%12||12,t,2)}function zU(e,t){return at(1+sd.count(yi(e),e),t,3)}function DO(e,t){return at(e.getMilliseconds(),t,3)}function FU(e,t){return DO(e,t)+"000"}function BU(e,t){return at(e.getMonth()+1,t,2)}function UU(e,t){return at(e.getMinutes(),t,2)}function WU(e,t){return at(e.getSeconds(),t,2)}function VU(e){var t=e.getDay();return t===0?7:t}function qU(e,t){return at(dp.count(yi(e)-1,e),t,2)}function $O(e){var t=e.getDay();return t>=4||t===0?Il(e):Il.ceil(e)}function HU(e,t){return e=$O(e),at(Il.count(yi(e),e)+(yi(e).getDay()===4),t,2)}function KU(e){return e.getDay()}function YU(e,t){return at(Bm.count(yi(e)-1,e),t,2)}function GU(e,t){return at(e.getFullYear()%100,t,2)}function XU(e,t){return e=$O(e),at(e.getFullYear()%100,t,2)}function QU(e,t){return at(e.getFullYear()%1e4,t,4)}function ZU(e,t){var r=e.getDay();return e=r>=4||r===0?Il(e):Il.ceil(e),at(e.getFullYear()%1e4,t,4)}function JU(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+at(t/60|0,"0",2)+at(t%60,"0",2)}function eN(e,t){return at(e.getUTCDate(),t,2)}function eW(e,t){return at(e.getUTCHours(),t,2)}function tW(e,t){return at(e.getUTCHours()%12||12,t,2)}function rW(e,t){return at(1+up.count(bi(e),e),t,3)}function IO(e,t){return at(e.getUTCMilliseconds(),t,3)}function nW(e,t){return IO(e,t)+"000"}function aW(e,t){return at(e.getUTCMonth()+1,t,2)}function iW(e,t){return at(e.getUTCMinutes(),t,2)}function sW(e,t){return at(e.getUTCSeconds(),t,2)}function oW(e){var t=e.getUTCDay();return t===0?7:t}function lW(e,t){return at(fp.count(bi(e)-1,e),t,2)}function LO(e){var t=e.getUTCDay();return t>=4||t===0?Ll(e):Ll.ceil(e)}function cW(e,t){return e=LO(e),at(Ll.count(bi(e),e)+(bi(e).getUTCDay()===4),t,2)}function uW(e){return e.getUTCDay()}function dW(e,t){return at(Um.count(bi(e)-1,e),t,2)}function fW(e,t){return at(e.getUTCFullYear()%100,t,2)}function mW(e,t){return e=LO(e),at(e.getUTCFullYear()%100,t,2)}function hW(e,t){return at(e.getUTCFullYear()%1e4,t,4)}function pW(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Ll(e):Ll.ceil(e),at(e.getUTCFullYear()%1e4,t,4)}function gW(){return"+0000"}function tN(){return"%"}function rN(e){return+e}function nN(e){return Math.floor(+e/1e3)}var Wo,RO,zO;vW({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function vW(e){return Wo=vU(e),RO=Wo.format,Wo.parse,zO=Wo.utcFormat,Wo.utcParse,Wo}function xW(e){return new Date(e)}function yW(e){return e instanceof Date?+e:+new Date(+e)}function Vb(e,t,r,n,a,i,o,l,c,u){var d=Ob(),f=d.invert,h=d.domain,p=u(".%L"),g=u(":%S"),x=u("%I:%M"),y=u("%I %p"),v=u("%a %d"),b=u("%b %d"),w=u("%B"),j=u("%Y");function N(_){return(c(_)<_?p:l(_)<_?g:o(_)<_?x:i(_)<_?y:n(_)<_?a(_)<_?v:b:r(_)<_?w:j)(_)}return d.invert=function(_){return new Date(f(_))},d.domain=function(_){return arguments.length?h(Array.from(_,yW)):h().map(xW)},d.ticks=function(_){var S=h();return e(S[0],S[S.length-1],_??10)},d.tickFormat=function(_,S){return S==null?N:u(S)},d.nice=function(_){var S=h();return(!_||typeof _.range!="function")&&(_=t(S[0],S[S.length-1],_??10)),_?h(SO(S,_)):d},d.copy=function(){return id(d,Vb(e,t,r,n,a,i,o,l,c,u))},d}function bW(){return ra.apply(Vb(pU,gU,yi,Ub,dp,sd,Fb,Rb,eo,RO).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function wW(){return ra.apply(Vb(mU,hU,bi,Wb,fp,up,Bb,zb,eo,zO).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function mp(){var e=0,t=1,r,n,a,i,o=Zr,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(a===0?.5:(f=(i(f)-r)*a,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=i(e=+e),n=i(t=+t),a=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(h){var p,g;return arguments.length?([p,g]=h,o=f(p,g),u):[o(0),o(1)]}}return u.range=d(Gl),u.rangeRound=d(Pb),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return i=f,r=f(e),n=f(t),a=r===n?0:1/(n-r),u}}function Ms(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function FO(){var e=Ts(mp()(Zr));return e.copy=function(){return Ms(e,FO())},Ai.apply(e,arguments)}function BO(){var e=Mb(mp()).domain([1,10]);return e.copy=function(){return Ms(e,BO()).base(e.base())},Ai.apply(e,arguments)}function UO(){var e=Db(mp());return e.copy=function(){return Ms(e,UO()).constant(e.constant())},Ai.apply(e,arguments)}function qb(){var e=$b(mp());return e.copy=function(){return Ms(e,qb()).exponent(e.exponent())},Ai.apply(e,arguments)}function jW(){return qb.apply(null,arguments).exponent(.5)}function WO(){var e=[],t=Zr;function r(n){if(n!=null&&!isNaN(n=+n))return t((nd(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let a of n)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(ms),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,a)=>t(a/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(a,i)=>oB(e,i/n))},r.copy=function(){return WO(t).domain(e)},Ai.apply(r,arguments)}function hp(){var e=0,t=.5,r=1,n=1,a,i,o,l,c,u=Zr,d,f=!1,h;function p(x){return isNaN(x=+x)?h:(x=.5+((x=+d(x))-i)*(n*x<n*i?l:c),u(f?Math.max(0,Math.min(1,x)):x))}p.domain=function(x){return arguments.length?([e,t,r]=x,a=d(e=+e),i=d(t=+t),o=d(r=+r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p):[e,t,r]},p.clamp=function(x){return arguments.length?(f=!!x,p):f},p.interpolator=function(x){return arguments.length?(u=x,p):u};function g(x){return function(y){var v,b,w;return arguments.length?([v,b,w]=y,u=DB(x,[v,b,w]),p):[u(0),u(.5),u(1)]}}return p.range=g(Gl),p.rangeRound=g(Pb),p.unknown=function(x){return arguments.length?(h=x,p):h},function(x){return d=x,a=x(e),i=x(t),o=x(r),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),n=i<a?-1:1,p}}function VO(){var e=Ts(hp()(Zr));return e.copy=function(){return Ms(e,VO())},Ai.apply(e,arguments)}function qO(){var e=Mb(hp()).domain([.1,1,10]);return e.copy=function(){return Ms(e,qO()).base(e.base())},Ai.apply(e,arguments)}function HO(){var e=Db(hp());return e.copy=function(){return Ms(e,HO()).constant(e.constant())},Ai.apply(e,arguments)}function Hb(){var e=$b(hp());return e.copy=function(){return Ms(e,Hb()).exponent(e.exponent())},Ai.apply(e,arguments)}function _W(){return Hb.apply(null,arguments).exponent(.5)}const Mc=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:kb,scaleDiverging:VO,scaleDivergingLog:qO,scaleDivergingPow:Hb,scaleDivergingSqrt:_W,scaleDivergingSymlog:HO,scaleIdentity:NO,scaleImplicit:sx,scaleLinear:_O,scaleLog:kO,scaleOrdinal:Sb,scalePoint:uB,scalePow:Ib,scaleQuantile:PO,scaleQuantize:OO,scaleRadial:EO,scaleSequential:FO,scaleSequentialLog:BO,scaleSequentialPow:qb,scaleSequentialQuantile:WO,scaleSequentialSqrt:jW,scaleSequentialSymlog:UO,scaleSqrt:nU,scaleSymlog:CO,scaleThreshold:AO,scaleTime:bW,scaleUtc:wW,tickFormat:jO},Symbol.toStringTag,{value:"Module"}));var Ti=e=>e.chartData,pp=V([Ti],e=>{var t=e.chartData!=null?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),Kb=(e,t,r,n)=>n?pp(e):Ti(e),NW=(e,t,r)=>r?pp(e):Ti(e);function xs(e){if(Array.isArray(e)&&e.length===2){var[t,r]=e;if(Ut(t)&&Ut(r))return!0}return!1}function aN(e,t,r){return r?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}function KO(e,t){if(t&&typeof e!="function"&&Array.isArray(e)&&e.length===2){var[r,n]=e,a,i;if(Ut(r))a=r;else if(typeof r=="function")return;if(Ut(n))i=n;else if(typeof n=="function")return;var o=[a,i];if(xs(o))return o}}function SW(e,t,r){if(!(!r&&t==null)){if(typeof e=="function"&&t!=null)try{var n=e(t,r);if(xs(n))return aN(n,t,r)}catch{}if(Array.isArray(e)&&e.length===2){var[a,i]=e,o,l;if(a==="auto")t!=null&&(o=Math.min(...t));else if(Se(a))o=a;else if(typeof a=="function")try{t!=null&&(o=a(t==null?void 0:t[0]))}catch{}else if(typeof a=="string"&&P2.test(a)){var c=P2.exec(a);if(c==null||c[1]==null||t==null)o=void 0;else{var u=+c[1];o=t[0]-u}}else o=t==null?void 0:t[0];if(i==="auto")t!=null&&(l=Math.max(...t));else if(Se(i))l=i;else if(typeof i=="function")try{t!=null&&(l=i(t==null?void 0:t[1]))}catch{}else if(typeof i=="string"&&O2.test(i)){var d=O2.exec(i);if(d==null||d[1]==null||t==null)l=void 0;else{var f=+d[1];l=t[1]+f}}else l=t==null?void 0:t[1];var h=[o,l];if(xs(h))return t==null?h:aN(h,t,r)}}}var Xl=1e9,kW={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},Gb,$t=!0,ta="[DecimalError] ",lo=ta+"Invalid argument: ",Yb=ta+"Exponent out of range: ",Ql=Math.floor,Ws=Math.pow,CW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,kn,_r=1e7,Ot=7,YO=9007199254740991,Wm=Ql(YO/Ot),Ne={};Ne.absoluteValue=Ne.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ne.comparedTo=Ne.cmp=function(e){var t,r,n,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(n=i.d.length,a=e.d.length,t=0,r=n<a?n:a;t<r;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return n===a?0:n>a^i.s<0?1:-1};Ne.decimalPlaces=Ne.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ot;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ne.dividedBy=Ne.div=function(e){return li(this,new this.constructor(e))};Ne.dividedToIntegerBy=Ne.idiv=function(e){var t=this,r=t.constructor;return yt(li(t,new r(e),0,1),r.precision)};Ne.equals=Ne.eq=function(e){return!this.cmp(e)};Ne.exponent=function(){return nr(this)};Ne.greaterThan=Ne.gt=function(e){return this.cmp(e)>0};Ne.greaterThanOrEqualTo=Ne.gte=function(e){return this.cmp(e)>=0};Ne.isInteger=Ne.isint=function(){return this.e>this.d.length-2};Ne.isNegative=Ne.isneg=function(){return this.s<0};Ne.isPositive=Ne.ispos=function(){return this.s>0};Ne.isZero=function(){return this.s===0};Ne.lessThan=Ne.lt=function(e){return this.cmp(e)<0};Ne.lessThanOrEqualTo=Ne.lte=function(e){return this.cmp(e)<1};Ne.logarithm=Ne.log=function(e){var t,r=this,n=r.constructor,a=n.precision,i=a+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(kn))throw Error(ta+"NaN");if(r.s<1)throw Error(ta+(r.s?"NaN":"-Infinity"));return r.eq(kn)?new n(0):($t=!1,t=li(Tu(r,i),Tu(e,i),i),$t=!0,yt(t,a))};Ne.minus=Ne.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?QO(t,e):GO(t,(e.s=-e.s,e))};Ne.modulo=Ne.mod=function(e){var t,r=this,n=r.constructor,a=n.precision;if(e=new n(e),!e.s)throw Error(ta+"NaN");return r.s?($t=!1,t=li(r,e,0,1).times(e),$t=!0,r.minus(t)):yt(new n(r),a)};Ne.naturalExponential=Ne.exp=function(){return XO(this)};Ne.naturalLogarithm=Ne.ln=function(){return Tu(this)};Ne.negated=Ne.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ne.plus=Ne.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?GO(t,e):QO(t,(e.s=-e.s,e))};Ne.precision=Ne.sd=function(e){var t,r,n,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(lo+e);if(t=nr(a)+1,n=a.d.length-1,r=n*Ot+1,n=a.d[n],n){for(;n%10==0;n/=10)r--;for(n=a.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Ne.squareRoot=Ne.sqrt=function(){var e,t,r,n,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(ta+"NaN")}for(e=nr(l),$t=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=$a(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Ql((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(a.toString()),r=c.precision,a=o=r+3;;)if(i=n,n=i.plus(li(l,i,o+2)).times(.5),$a(i.d).slice(0,o)===(t=$a(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(yt(i,r+1,0),i.times(i).eq(l)){n=i;break}}else if(t!="9999")break;o+=4}return $t=!0,yt(n,r)};Ne.times=Ne.mul=function(e){var t,r,n,a,i,o,l,c,u,d=this,f=d.constructor,h=d.d,p=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=h.length,u=p.length,c<u&&(i=h,h=p,p=i,o=c,c=u,u=o),i=[],o=c+u,n=o;n--;)i.push(0);for(n=u;--n>=0;){for(t=0,a=c+n;a>n;)l=i[a]+p[n]*h[a-n-1]+t,i[a--]=l%_r|0,t=l/_r|0;i[a]=(i[a]+t)%_r|0}for(;!i[--o];)i.pop();return t?++r:i.shift(),e.d=i,e.e=r,$t?yt(e,f.precision):e};Ne.toDecimalPlaces=Ne.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(Ua(e,0,Xl),t===void 0?t=n.rounding:Ua(t,0,8),yt(r,e+nr(r)+1,t))};Ne.toExponential=function(e,t){var r,n=this,a=n.constructor;return e===void 0?r=bo(n,!0):(Ua(e,0,Xl),t===void 0?t=a.rounding:Ua(t,0,8),n=yt(new a(n),e+1,t),r=bo(n,!0,e+1)),r};Ne.toFixed=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?bo(a):(Ua(e,0,Xl),t===void 0?t=i.rounding:Ua(t,0,8),n=yt(new i(a),e+nr(a)+1,t),r=bo(n.abs(),!1,e+nr(n)+1),a.isneg()&&!a.isZero()?"-"+r:r)};Ne.toInteger=Ne.toint=function(){var e=this,t=e.constructor;return yt(new t(e),nr(e)+1,t.rounding)};Ne.toNumber=function(){return+this};Ne.toPower=Ne.pow=function(e){var t,r,n,a,i,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(kn);if(l=new c(l),!l.s){if(e.s<1)throw Error(ta+"Infinity");return l}if(l.eq(kn))return l;if(n=c.precision,e.eq(kn))return yt(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,i=l.s,o){if((r=d<0?-d:d)<=YO){for(a=new c(kn),t=Math.ceil(n/Ot+4),$t=!1;r%2&&(a=a.times(l),sN(a.d,t)),r=Ql(r/2),r!==0;)l=l.times(l),sN(l.d,t);return $t=!0,e.s<0?new c(kn).div(a):yt(a,n)}}else if(i<0)throw Error(ta+"NaN");return i=i<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,$t=!1,a=e.times(Tu(l,n+u)),$t=!0,a=XO(a),a.s=i,a};Ne.toPrecision=function(e,t){var r,n,a=this,i=a.constructor;return e===void 0?(r=nr(a),n=bo(a,r<=i.toExpNeg||r>=i.toExpPos)):(Ua(e,1,Xl),t===void 0?t=i.rounding:Ua(t,0,8),a=yt(new i(a),e,t),r=nr(a),n=bo(a,e<=r||r<=i.toExpNeg,e)),n};Ne.toSignificantDigits=Ne.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(Ua(e,1,Xl),t===void 0?t=n.rounding:Ua(t,0,8)),yt(new n(r),e,t)};Ne.toString=Ne.valueOf=Ne.val=Ne.toJSON=Ne[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=nr(e),r=e.constructor;return bo(e,t<=r.toExpNeg||t>=r.toExpPos)};function GO(e,t){var r,n,a,i,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),$t?yt(t,f):t;if(c=e.d,u=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(n=c,i=-i,l=u.length):(n=u,a=o,l=c.length),o=Math.ceil(f/Ot),l=o>l?o+1:l+1,i>l&&(i=l,n.length=1),n.reverse();i--;)n.push(0);n.reverse()}for(l=c.length,i=u.length,l-i<0&&(i=l,n=u,u=c,c=n),r=0;i;)r=(c[--i]=c[i]+u[i]+r)/_r|0,c[i]%=_r;for(r&&(c.unshift(r),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,$t?yt(t,f):t}function Ua(e,t,r){if(e!==~~e||e<t||e>r)throw Error(lo+e)}function $a(e){var t,r,n,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)n=e[t]+"",r=Ot-n.length,r&&(i+=Wi(r)),i+=n;o=e[t],n=o+"",r=Ot-n.length,r&&(i+=Wi(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var li=function(){function e(n,a){var i,o=0,l=n.length;for(n=n.slice();l--;)i=n[l]*a+o,n[l]=i%_r|0,o=i/_r|0;return o&&n.unshift(o),n}function t(n,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(n[l]!=a[l]){c=n[l]>a[l]?1:-1;break}return c}function r(n,a,i){for(var o=0;i--;)n[i]-=o,o=n[i]<a[i]?1:0,n[i]=o*_r+n[i]-a[i];for(;!n[0]&&n.length>1;)n.shift()}return function(n,a,i,o){var l,c,u,d,f,h,p,g,x,y,v,b,w,j,N,_,S,C,O=n.constructor,A=n.s==a.s?1:-1,T=n.d,D=a.d;if(!n.s)return new O(n);if(!a.s)throw Error(ta+"Division by zero");for(c=n.e-a.e,S=D.length,N=T.length,p=new O(A),g=p.d=[],u=0;D[u]==(T[u]||0);)++u;if(D[u]>(T[u]||0)&&--c,i==null?b=i=O.precision:o?b=i+(nr(n)-nr(a))+1:b=i,b<0)return new O(0);if(b=b/Ot+2|0,u=0,S==1)for(d=0,D=D[0],b++;(u<N||d)&&b--;u++)w=d*_r+(T[u]||0),g[u]=w/D|0,d=w%D|0;else{for(d=_r/(D[0]+1)|0,d>1&&(D=e(D,d),T=e(T,d),S=D.length,N=T.length),j=S,x=T.slice(0,S),y=x.length;y<S;)x[y++]=0;C=D.slice(),C.unshift(0),_=D[0],D[1]>=_r/2&&++_;do d=0,l=t(D,x,S,y),l<0?(v=x[0],S!=y&&(v=v*_r+(x[1]||0)),d=v/_|0,d>1?(d>=_r&&(d=_r-1),f=e(D,d),h=f.length,y=x.length,l=t(f,x,h,y),l==1&&(d--,r(f,S<h?C:D,h))):(d==0&&(l=d=1),f=D.slice()),h=f.length,h<y&&f.unshift(0),r(x,f,y),l==-1&&(y=x.length,l=t(D,x,S,y),l<1&&(d++,r(x,S<y?C:D,y))),y=x.length):l===0&&(d++,x=[0]),g[u++]=d,l&&x[0]?x[y++]=T[j]||0:(x=[T[j]],y=1);while((j++<N||x[0]!==void 0)&&b--)}return g[0]||g.shift(),p.e=c,yt(p,o?i+nr(p)+1:i)}}();function XO(e,t){var r,n,a,i,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(nr(e)>16)throw Error(Yb+nr(e));if(!e.s)return new d(kn);for(t==null?($t=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(Ws(2,u))/Math.LN10*2+5|0,l+=n,r=a=i=new d(kn),d.precision=l;;){if(a=yt(a.times(e),l),r=r.times(++c),o=i.plus(li(a,r,l)),$a(o.d).slice(0,l)===$a(i.d).slice(0,l)){for(;u--;)i=yt(i.times(i),l);return d.precision=f,t==null?($t=!0,yt(i,f)):i}i=o}}function nr(e){for(var t=e.e*Ot,r=e.d[0];r>=10;r/=10)t++;return t}function eg(e,t,r){if(t>e.LN10.sd())throw $t=!0,r&&(e.precision=r),Error(ta+"LN10 precision limit exceeded");return yt(new e(e.LN10),t)}function Wi(e){for(var t="";e--;)t+="0";return t}function Tu(e,t){var r,n,a,i,o,l,c,u,d,f=1,h=10,p=e,g=p.d,x=p.constructor,y=x.precision;if(p.s<1)throw Error(ta+(p.s?"NaN":"-Infinity"));if(p.eq(kn))return new x(0);if(t==null?($t=!1,u=y):u=t,p.eq(10))return t==null&&($t=!0),eg(x,u);if(u+=h,x.precision=u,r=$a(g),n=r.charAt(0),i=nr(p),Math.abs(i)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)p=p.times(e),r=$a(p.d),n=r.charAt(0),f++;i=nr(p),n>1?(p=new x("0."+r),i++):p=new x(n+"."+r.slice(1))}else return c=eg(x,u+2,y).times(i+""),p=Tu(new x(n+"."+r.slice(1)),u-h).plus(c),x.precision=y,t==null?($t=!0,yt(p,y)):p;for(l=o=p=li(p.minus(kn),p.plus(kn),u),d=yt(p.times(p),u),a=3;;){if(o=yt(o.times(d),u),c=l.plus(li(o,new x(a),u)),$a(c.d).slice(0,u)===$a(l.d).slice(0,u))return l=l.times(2),i!==0&&(l=l.plus(eg(x,u+2,y).times(i+""))),l=li(l,new x(f),u),x.precision=y,t==null?($t=!0,yt(l,y)):l;l=c,a+=2}}function iN(e,t){var r,n,a;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(n,a),t){if(a-=n,r=r-n-1,e.e=Ql(r/Ot),e.d=[],n=(r+1)%Ot,r<0&&(n+=Ot),n<a){for(n&&e.d.push(+t.slice(0,n)),a-=Ot;n<a;)e.d.push(+t.slice(n,n+=Ot));t=t.slice(n),n=Ot-t.length}else n-=a;for(;n--;)t+="0";if(e.d.push(+t),$t&&(e.e>Wm||e.e<-Wm))throw Error(Yb+r)}else e.s=0,e.e=0,e.d=[0];return e}function yt(e,t,r){var n,a,i,o,l,c,u,d,f=e.d;for(o=1,i=f[0];i>=10;i/=10)o++;if(n=t-o,n<0)n+=Ot,a=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ot),i=f.length,d>=i)return e;for(u=i=f[d],o=1;i>=10;i/=10)o++;n%=Ot,a=n-Ot+o}if(r!==void 0&&(i=Ws(10,o-a-1),l=u/i%10|0,c=t<0||f[d+1]!==void 0||u%i,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?a>0?u/Ws(10,o-a):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(i=nr(e),f.length=1,t=t-i-1,f[0]=Ws(10,(Ot-t%Ot)%Ot),e.e=Ql(-t/Ot)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,i=1,d--):(f.length=d+1,i=Ws(10,Ot-n),f[d]=a>0?(u/Ws(10,o-a)%Ws(10,a)|0)*i:0),c)for(;;)if(d==0){(f[0]+=i)==_r&&(f[0]=1,++e.e);break}else{if(f[d]+=i,f[d]!=_r)break;f[d--]=0,i=1}for(n=f.length;f[--n]===0;)f.pop();if($t&&(e.e>Wm||e.e<-Wm))throw Error(Yb+nr(e));return e}function QO(e,t){var r,n,a,i,o,l,c,u,d,f,h=e.constructor,p=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),$t?yt(t,p):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),a=Math.max(Math.ceil(p/Ot),l)+2,o>a&&(o=a,r.length=1),r.reverse(),a=o;a--;)r.push(0);r.reverse()}else{for(a=c.length,l=f.length,d=a<l,d&&(l=a),a=0;a<l;a++)if(c[a]!=f[a]){d=c[a]<f[a];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,a=f.length-l;a>0;--a)c[l++]=0;for(a=f.length;a>o;){if(c[--a]<f[a]){for(i=a;i&&c[--i]===0;)c[i]=_r-1;--c[i],c[a]+=_r}c[a]-=f[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,$t?yt(t,p):t):new h(0)}function bo(e,t,r){var n,a=nr(e),i=$a(e.d),o=i.length;return t?(r&&(n=r-o)>0?i=i.charAt(0)+"."+i.slice(1)+Wi(n):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Wi(-a-1)+i,r&&(n=r-o)>0&&(i+=Wi(n))):a>=o?(i+=Wi(a+1-o),r&&(n=r-a-1)>0&&(i=i+"."+Wi(n))):((n=a+1)<o&&(i=i.slice(0,n)+"."+i.slice(n)),r&&(n=r-o)>0&&(a+1===o&&(i+="."),i+=Wi(n))),e.s<0?"-"+i:i}function sN(e,t){if(e.length>t)return e.length=t,!0}function ZO(e){var t,r,n;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(lo+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return iN(o,i.toString())}else if(typeof i!="string")throw Error(lo+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,CW.test(i))iN(o,i);else throw Error(lo+i)}if(a.prototype=Ne,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=ZO,a.config=a.set=EW,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return a.config(e),a}function EW(e){if(!e||typeof e!="object")throw Error(ta+"Object expected");var t,r,n,a=["precision",1,Xl,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((n=e[r=a[t]])!==void 0)if(Ql(n)===n&&n>=a[t+1]&&n<=a[t+2])this[r]=n;else throw Error(lo+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(lo+r+": "+n);return this}var Gb=ZO(kW);kn=new Gb(1);const ut=Gb;var PW=e=>e,JO={"@@functional/placeholder":!0},e4=e=>e===JO,oN=e=>function t(){return arguments.length===0||arguments.length===1&&e4(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},t4=(e,t)=>e===1?t:oN(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];var i=n.filter(o=>o!==JO).length;return i>=e?t(...n):t4(e-i,oN(function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];var u=n.map(d=>e4(d)?l.shift():d);return t(...u,...l)}))}),OW=e=>t4(e.length,e),ux=(e,t)=>{for(var r=[],n=e;n<t;++n)r[n-e]=n;return r},AW=OW((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(r=>t[r]).map(e)),TW=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return PW;var a=r.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce((l,c)=>c(l),i(...arguments))}};function r4(e){var t;return e===0?t=1:t=Math.floor(new ut(e).abs().log(10).toNumber())+1,t}function n4(e,t,r){for(var n=new ut(e),a=0,i=[];n.lt(t)&&a<1e5;)i.push(n.toNumber()),n=n.add(r),a++;return i}var a4=e=>{var[t,r]=e,[n,a]=[t,r];return t>r&&([n,a]=[r,t]),[n,a]},i4=(e,t,r)=>{if(e.lte(0))return new ut(0);var n=r4(e.toNumber()),a=new ut(10).pow(n),i=e.div(a),o=n!==1?.05:.1,l=new ut(Math.ceil(i.div(o).toNumber())).add(r).mul(o),c=l.mul(a);return t?new ut(c.toNumber()):new ut(Math.ceil(c.toNumber()))},MW=(e,t,r)=>{var n=new ut(1),a=new ut(e);if(!a.isint()&&r){var i=Math.abs(e);i<1?(n=new ut(10).pow(r4(e)-1),a=new ut(Math.floor(a.div(n).toNumber())).mul(n)):i>1&&(a=new ut(Math.floor(e)))}else e===0?a=new ut(Math.floor((t-1)/2)):r||(a=new ut(Math.floor(e)));var o=Math.floor((t-1)/2),l=TW(AW(c=>a.add(new ut(c-o).mul(n)).toNumber()),ux);return l(0,t)},s4=function(t,r,n,a){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((r-t)/(n-1)))return{step:new ut(0),tickMin:new ut(0),tickMax:new ut(0)};var o=i4(new ut(r).sub(t).div(n-1),a,i),l;t<=0&&r>=0?l=new ut(0):(l=new ut(t).add(r).div(2),l=l.sub(new ut(l).mod(o)));var c=Math.ceil(l.sub(t).div(o).toNumber()),u=Math.ceil(new ut(r).sub(l).div(o).toNumber()),d=c+u+1;return d>n?s4(t,r,n,a,i+1):(d<n&&(u=r>0?u+(n-d):u,c=r>0?c:c+(n-d)),{step:o,tickMin:l.sub(new ut(c).mul(o)),tickMax:l.add(new ut(u).mul(o))})},DW=function(t){var[r,n]=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),[l,c]=a4([r,n]);if(l===-1/0||c===1/0){var u=c===1/0?[l,...ux(0,a-1).map(()=>1/0)]:[...ux(0,a-1).map(()=>-1/0),c];return r>n?u.reverse():u}if(l===c)return MW(l,a,i);var{step:d,tickMin:f,tickMax:h}=s4(l,c,o,i,0),p=n4(f,h.add(new ut(.1).mul(d)),d);return r>n?p.reverse():p},$W=function(t,r){var[n,a]=t,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,l]=a4([n,a]);if(o===-1/0||l===1/0)return[n,a];if(o===l)return[o];var c=Math.max(r,2),u=i4(new ut(l).sub(o).div(c-1),i,0),d=[...n4(new ut(o),new ut(l),u),l];return i===!1&&(d=d.map(f=>Math.round(f))),n>a?d.reverse():d},o4=e=>e.rootProps.maxBarSize,IW=e=>e.rootProps.barGap,l4=e=>e.rootProps.barCategoryGap,LW=e=>e.rootProps.barSize,od=e=>e.rootProps.stackOffset,c4=e=>e.rootProps.reverseStackOrder,Xb=e=>e.options.chartName,Qb=e=>e.rootProps.syncId,u4=e=>e.rootProps.syncMethod,Zb=e=>e.options.eventEmitter,Gt={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Za={allowDecimals:!1,allowDuplicatedCategory:!0,angleAxisId:0,axisLine:!0,axisLineType:"polygon",cx:0,cy:0,orientation:"outer",reversed:!1,scale:"auto",tick:!0,tickLine:!0,tickSize:8,type:"category",zIndex:Gt.axis},Sn={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,angle:0,axisLine:!0,includeHidden:!1,hide:!1,label:!1,orientation:"right",radiusAxisId:0,reversed:!1,scale:"auto",stroke:"#ccc",tick:!0,tickCount:5,type:"number",zIndex:Gt.axis},gp=(e,t)=>{if(!(!e||!t))return e!=null&&e.reversed?[t[1],t[0]]:t},RW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Za.angleAxisId,includeHidden:!1,name:void 0,reversed:Za.reversed,scale:Za.scale,tick:Za.tick,tickCount:void 0,ticks:void 0,type:Za.type,unit:void 0},zW={allowDataOverflow:Sn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Sn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sn.scale,tick:Sn.tick,tickCount:Sn.tickCount,ticks:void 0,type:Sn.type,unit:void 0},FW={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:Za.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Za.angleAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Za.scale,tick:Za.tick,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},BW={allowDataOverflow:Sn.allowDataOverflow,allowDecimals:!1,allowDuplicatedCategory:Sn.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Sn.radiusAxisId,includeHidden:!1,name:void 0,reversed:!1,scale:Sn.scale,tick:Sn.tick,tickCount:Sn.tickCount,ticks:void 0,type:"category",unit:void 0},Jb=(e,t)=>e.polarAxis.angleAxis[t]!=null?e.polarAxis.angleAxis[t]:e.layout.layoutType==="radial"?FW:RW,e1=(e,t)=>e.polarAxis.radiusAxis[t]!=null?e.polarAxis.radiusAxis[t]:e.layout.layoutType==="radial"?BW:zW,vp=e=>e.polarOptions,t1=V([Pi,Oi,pr],iO),d4=V([vp,t1],(e,t)=>{if(e!=null)return Vr(e.innerRadius,t,0)}),f4=V([vp,t1],(e,t)=>{if(e!=null)return Vr(e.outerRadius,t,t*.8)}),UW=e=>{if(e==null)return[0,0];var{startAngle:t,endAngle:r}=e;return[t,r]},m4=V([vp],UW);V([Jb,m4],gp);var h4=V([t1,d4,f4],(e,t,r)=>{if(!(e==null||t==null||r==null))return[t,r]});V([e1,h4],gp);var p4=V([Ze,vp,d4,f4,Pi,Oi],(e,t,r,n,a,i)=>{if(!(e!=="centric"&&e!=="radial"||t==null||r==null||n==null)){var{cx:o,cy:l,startAngle:c,endAngle:u}=t;return{cx:Vr(o,a,a/2),cy:Vr(l,i,i/2),innerRadius:r,outerRadius:n,startAngle:c,endAngle:u,clockWise:!1}}}),Lt=(e,t)=>t,ld=(e,t,r)=>r;function r1(e){return e==null?void 0:e.id}function g4(e,t,r){var{chartData:n=[]}=t,{allowDuplicatedCategory:a,dataKey:i}=r,o=new Map;return e.forEach(l=>{var c,u=(c=l.data)!==null&&c!==void 0?c:n;if(!(u==null||u.length===0)){var d=r1(l);u.forEach((f,h)=>{var p=i==null||a?h:String(vt(f,i,null)),g=vt(f,l.dataKey,0),x;o.has(p)?x=o.get(p):x={},Object.assign(x,{[d]:g}),o.set(p,x)})}}),Array.from(o.values())}function xp(e){return"stackId"in e&&e.stackId!=null&&e.dataKey!=null}var yp=(e,t)=>e===t?!0:e==null||t==null?!1:e[0]===t[0]&&e[1]===t[1];function bp(e,t){return Array.isArray(e)&&Array.isArray(t)&&e.length===0&&t.length===0?!0:e===t}function WW(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return!1}var vr=e=>{var t=Ze(e);return t==="horizontal"?"xAxis":t==="vertical"?"yAxis":t==="centric"?"angleAxis":"radiusAxis"},Zl=e=>e.tooltip.settings.axisId;function lN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lN(Object(r),!0).forEach(function(n){VW(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VW(e,t,r){return(t=qW(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qW(e){var t=HW(e,"string");return typeof t=="symbol"?t:t+""}function HW(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dx=[0,"auto"],br={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},v4=(e,t)=>e.cartesianAxis.xAxis[t],Mi=(e,t)=>{var r=v4(e,t);return r??br},wr={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:dx,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:ed},x4=(e,t)=>e.cartesianAxis.yAxis[t],Di=(e,t)=>{var r=x4(e,t);return r??wr},KW={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},n1=(e,t)=>{var r=e.cartesianAxis.zAxis[t];return r??KW},Wt=(e,t,r)=>{switch(t){case"xAxis":return Mi(e,r);case"yAxis":return Di(e,r);case"zAxis":return n1(e,r);case"angleAxis":return Jb(e,r);case"radiusAxis":return e1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},YW=(e,t,r)=>{switch(t){case"xAxis":return Mi(e,r);case"yAxis":return Di(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},cd=(e,t,r)=>{switch(t){case"xAxis":return Mi(e,r);case"yAxis":return Di(e,r);case"angleAxis":return Jb(e,r);case"radiusAxis":return e1(e,r);default:throw new Error("Unexpected axis type: ".concat(t))}},y4=e=>e.graphicalItems.cartesianItems.some(t=>t.type==="bar")||e.graphicalItems.polarItems.some(t=>t.type==="radialBar");function a1(e,t){return r=>{switch(e){case"xAxis":return"xAxisId"in r&&r.xAxisId===t;case"yAxis":return"yAxisId"in r&&r.yAxisId===t;case"zAxis":return"zAxisId"in r&&r.zAxisId===t;case"angleAxis":return"angleAxisId"in r&&r.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in r&&r.radiusAxisId===t;default:return!1}}}var wp=e=>e.graphicalItems.cartesianItems,GW=V([Lt,ld],a1),i1=(e,t,r)=>e.filter(r).filter(n=>(t==null?void 0:t.includeHidden)===!0?!0:!n.hide),ud=V([wp,Wt,GW],i1,{memoizeOptions:{resultEqualityCheck:bp}}),b4=V([ud],e=>e.filter(t=>t.type==="area"||t.type==="bar").filter(xp)),w4=e=>e.filter(t=>!("stackId"in t)||t.stackId===void 0),XW=V([ud],w4),s1=e=>e.map(t=>t.data).filter(Boolean).flat(1),QW=V([ud],s1,{memoizeOptions:{resultEqualityCheck:bp}}),o1=(e,t)=>{var{chartData:r=[],dataStartIndex:n,dataEndIndex:a}=t;return e.length>0?e:r.slice(n,a+1)},l1=V([QW,Kb],o1),c1=(e,t,r)=>(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:vt(n,t.dataKey)})):r.length>0?r.map(n=>n.dataKey).flatMap(n=>e.map(a=>({value:vt(a,n)}))):e.map(n=>({value:n})),jp=V([l1,Wt,ud],c1);function j4(e,t){switch(e){case"xAxis":return t.direction==="x";case"yAxis":return t.direction==="y";default:return!1}}function Mf(e){if(Fa(e)||e instanceof Date){var t=Number(e);if(Ut(t))return t}}function cN(e){if(Array.isArray(e)){var t=[Mf(e[0]),Mf(e[1])];return xs(t)?t:void 0}var r=Mf(e);if(r!=null)return[r,r]}function wi(e){return e.map(Mf).filter(jR)}function ZW(e,t,r){return!r||typeof t!="number"||ba(t)?[]:r.length?wi(r.flatMap(n=>{var a=vt(e,n.dataKey),i,o;if(Array.isArray(a)?[i,o]=a:i=o=a,!(!Ut(i)||!Ut(o)))return[t-i,t+o]})):[]}var xr=e=>{var t=vr(e),r=Zl(e);return cd(e,t,r)},dd=V([xr],e=>e==null?void 0:e.dataKey),JW=V([b4,Kb,xr],g4),_4=(e,t,r,n)=>{var a={},i=t.reduce((o,l)=>{if(l.stackId==null)return o;var c=o[l.stackId];return c==null&&(c=[]),c.push(l),o[l.stackId]=c,o},a);return Object.fromEntries(Object.entries(i).map(o=>{var[l,c]=o,u=n?[...c].reverse():c,d=u.map(r1);return[l,{stackedData:$9(e,d,r),graphicalItems:u}]}))},fx=V([JW,b4,od,c4],_4),N4=(e,t,r,n)=>{var{dataStartIndex:a,dataEndIndex:i}=t;if(n==null&&r!=="zAxis"){var o=F9(e,a,i);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},eV=V([Wt],e=>e.allowDataOverflow),u1=e=>{var t;if(e==null||!("domain"in e))return dx;if(e.domain!=null)return e.domain;if("ticks"in e&&e.ticks!=null){if(e.type==="number"){var r=wi(e.ticks);return[Math.min(...r),Math.max(...r)]}if(e.type==="category")return e.ticks.map(String)}return(t=e==null?void 0:e.domain)!==null&&t!==void 0?t:dx},d1=V([Wt],u1),f1=V([d1,eV],KO),tV=V([fx,Ti,Lt,f1],N4,{memoizeOptions:{resultEqualityCheck:yp}}),_p=e=>e.errorBars,rV=(e,t,r)=>e.flatMap(n=>t[n.id]).filter(Boolean).filter(n=>j4(r,n)),qm=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var a=r.filter(Boolean);if(a.length!==0){var i=a.flat(),o=Math.min(...i),l=Math.max(...i);return[o,l]}},m1=(e,t,r,n,a)=>{var i,o;if(r.length>0&&e.forEach(l=>{r.forEach(c=>{var u,d,f=(u=n[c.id])===null||u===void 0?void 0:u.filter(v=>j4(a,v)),h=vt(l,(d=t.dataKey)!==null&&d!==void 0?d:c.dataKey),p=ZW(l,h,f);if(p.length>=2){var g=Math.min(...p),x=Math.max(...p);(i==null||g<i)&&(i=g),(o==null||x>o)&&(o=x)}var y=cN(h);y!=null&&(i=i==null?y[0]:Math.min(i,y[0]),o=o==null?y[1]:Math.max(o,y[1]))})}),(t==null?void 0:t.dataKey)!=null&&e.forEach(l=>{var c=cN(vt(l,t.dataKey));c!=null&&(i=i==null?c[0]:Math.min(i,c[0]),o=o==null?c[1]:Math.max(o,c[1]))}),Ut(i)&&Ut(o))return[i,o]},nV=V([l1,Wt,XW,_p,Lt],m1,{memoizeOptions:{resultEqualityCheck:yp}});function aV(e){var{value:t}=e;if(Fa(t)||t instanceof Date)return t}var iV=(e,t,r)=>{var n=e.map(aV).filter(a=>a!=null);return r&&(t.dataKey==null||t.allowDuplicatedCategory&&OP(n))?fO(0,e.length):t.allowDuplicatedCategory?n:Array.from(new Set(n))},S4=e=>e.referenceElements.dots,Jl=(e,t,r)=>e.filter(n=>n.ifOverflow==="extendDomain").filter(n=>t==="xAxis"?n.xAxisId===r:n.yAxisId===r),sV=V([S4,Lt,ld],Jl),k4=e=>e.referenceElements.areas,oV=V([k4,Lt,ld],Jl),C4=e=>e.referenceElements.lines,lV=V([C4,Lt,ld],Jl),E4=(e,t)=>{if(e!=null){var r=wi(e.map(n=>t==="xAxis"?n.x:n.y));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},cV=V(sV,Lt,E4),P4=(e,t)=>{if(e!=null){var r=wi(e.flatMap(n=>[t==="xAxis"?n.x1:n.y1,t==="xAxis"?n.x2:n.y2]));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},uV=V([oV,Lt],P4);function dV(e){var t;if(e.x!=null)return wi([e.x]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.x);return r==null||r.length===0?[]:wi(r)}function fV(e){var t;if(e.y!=null)return wi([e.y]);var r=(t=e.segment)===null||t===void 0?void 0:t.map(n=>n.y);return r==null||r.length===0?[]:wi(r)}var O4=(e,t)=>{if(e!=null){var r=e.flatMap(n=>t==="xAxis"?dV(n):fV(n));if(r.length!==0)return[Math.min(...r),Math.max(...r)]}},mV=V([lV,Lt],O4),hV=V(cV,mV,uV,(e,t,r)=>qm(e,r,t)),h1=(e,t,r,n,a,i,o,l)=>{if(r!=null)return r;var c=o==="vertical"&&l==="xAxis"||o==="horizontal"&&l==="yAxis",u=c?qm(n,i,a):qm(i,a);return SW(t,u,e.allowDataOverflow)},pV=V([Wt,d1,f1,tV,nV,hV,Ze,Lt],h1,{memoizeOptions:{resultEqualityCheck:yp}}),gV=[0,1],p1=(e,t,r,n,a,i,o)=>{if(!((e==null||r==null||r.length===0)&&o===void 0)){var{dataKey:l,type:c}=e,u=As(t,i);if(u&&l==null){var d;return fO(0,(d=r==null?void 0:r.length)!==null&&d!==void 0?d:0)}return c==="category"?iV(n,e,u):a==="expand"?gV:o}},g1=V([Wt,Ze,l1,jp,od,Lt,pV],p1),A4=(e,t,r,n,a)=>{if(e!=null){var{scale:i,type:o}=e;if(i==="auto")return t==="radial"&&a==="radiusAxis"?"band":t==="radial"&&a==="angleAxis"?"linear":o==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?"point":o==="category"?"band":"linear";if(typeof i=="string"){var l="scale".concat(Xu(i));return l in Mc?l:"point"}}},ec=V([Wt,Ze,y4,Xb,Lt],A4);function vV(e){if(e!=null){if(e in Mc)return Mc[e]();var t="scale".concat(Xu(e));if(t in Mc)return Mc[t]()}}function v1(e,t,r,n){if(!(r==null||n==null)){if(typeof e.scale=="function")return e.scale.copy().domain(r).range(n);var a=vV(t);if(a!=null){var i=a.domain(r).range(n);return O9(i),i}}}var x1=(e,t,r)=>{var n=u1(t);if(!(r!=="auto"&&r!=="linear")){if(t!=null&&t.tickCount&&Array.isArray(n)&&(n[0]==="auto"||n[1]==="auto")&&xs(e))return DW(e,t.tickCount,t.allowDecimals);if(t!=null&&t.tickCount&&t.type==="number"&&xs(e))return $W(e,t.tickCount,t.allowDecimals)}},y1=V([g1,cd,ec],x1),b1=(e,t,r,n)=>{if(n!=="angleAxis"&&(e==null?void 0:e.type)==="number"&&xs(t)&&Array.isArray(r)&&r.length>0){var a=t[0],i=r[0],o=t[1],l=r[r.length-1];return[Math.min(a,i),Math.max(o,l)]}return t},xV=V([Wt,g1,y1,Lt],b1),yV=V(jp,Wt,(e,t)=>{if(!(!t||t.type!=="number")){var r=1/0,n=Array.from(wi(e.map(f=>f.value))).sort((f,h)=>f-h),a=n[0],i=n[n.length-1];if(a==null||i==null)return 1/0;var o=i-a;if(o===0)return 1/0;for(var l=0;l<n.length-1;l++){var c=n[l],u=n[l+1];if(!(c==null||u==null)){var d=u-c;r=Math.min(r,d)}}return r/o}}),T4=V(yV,Ze,l4,pr,(e,t,r,n,a)=>a,(e,t,r,n,a)=>{if(!Ut(e))return 0;var i=t==="vertical"?n.height:n.width;if(a==="gap")return e*i/2;if(a==="no-gap"){var o=Vr(r,e*i),l=e*i/2;return l-o-(l-o)/i*o}return 0}),bV=(e,t,r)=>{var n=Mi(e,t);return n==null||typeof n.padding!="string"?0:T4(e,"xAxis",t,r,n.padding)},wV=(e,t,r)=>{var n=Di(e,t);return n==null||typeof n.padding!="string"?0:T4(e,"yAxis",t,r,n.padding)},jV=V(Mi,bV,(e,t)=>{var r,n;if(e==null)return{left:0,right:0};var{padding:a}=e;return typeof a=="string"?{left:t,right:t}:{left:((r=a.left)!==null&&r!==void 0?r:0)+t,right:((n=a.right)!==null&&n!==void 0?n:0)+t}}),_V=V(Di,wV,(e,t)=>{var r,n;if(e==null)return{top:0,bottom:0};var{padding:a}=e;return typeof a=="string"?{top:t,bottom:t}:{top:((r=a.top)!==null&&r!==void 0?r:0)+t,bottom:((n=a.bottom)!==null&&n!==void 0?n:0)+t}}),NV=V([pr,jV,ip,ap,(e,t,r)=>r],(e,t,r,n,a)=>{var{padding:i}=n;return a?[i.left,r.width-i.right]:[e.left+t.left,e.left+e.width-t.right]}),SV=V([pr,Ze,_V,ip,ap,(e,t,r)=>r],(e,t,r,n,a,i)=>{var{padding:o}=a;return i?[n.height-o.bottom,o.top]:t==="horizontal"?[e.top+e.height-r.bottom,e.top+r.top]:[e.top+r.top,e.top+e.height-r.bottom]}),fd=(e,t,r,n)=>{var a;switch(t){case"xAxis":return NV(e,r,n);case"yAxis":return SV(e,r,n);case"zAxis":return(a=n1(e,r))===null||a===void 0?void 0:a.range;case"angleAxis":return m4(e);case"radiusAxis":return h4(e,r);default:return}},M4=V([Wt,fd],gp),Np=V([Wt,ec,xV,M4],v1);V([ud,_p,Lt],rV);function D4(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Sp=(e,t)=>t,kp=(e,t,r)=>r,kV=V(rp,Sp,kp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(D4)),CV=V(np,Sp,kp,(e,t,r)=>e.filter(n=>n.orientation===t).filter(n=>n.mirror===r).sort(D4)),$4=(e,t)=>({width:e.width,height:t.height}),EV=(e,t)=>{var r=typeof t.width=="number"?t.width:ed;return{width:r,height:e.height}},I4=V(pr,Mi,$4),PV=(e,t,r)=>{switch(t){case"top":return e.top;case"bottom":return r-e.bottom;default:return 0}},OV=(e,t,r)=>{switch(t){case"left":return e.left;case"right":return r-e.right;default:return 0}},AV=V(Oi,pr,kV,Sp,kp,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var c=$4(t,l);o==null&&(o=PV(t,n,e));var u=n==="top"&&!a||n==="bottom"&&a;i[l.id]=o-Number(u)*c.height,o+=(u?-1:1)*c.height}),i}),TV=V(Pi,pr,CV,Sp,kp,(e,t,r,n,a)=>{var i={},o;return r.forEach(l=>{var c=EV(t,l);o==null&&(o=OV(t,n,e));var u=n==="left"&&!a||n==="right"&&a;i[l.id]=o-Number(u)*c.width,o+=(u?-1:1)*c.width}),i}),MV=(e,t)=>{var r=Mi(e,t);if(r!=null)return AV(e,r.orientation,r.mirror)},DV=V([pr,Mi,MV,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:e.left,y:0}:{x:e.left,y:a}}}),$V=(e,t)=>{var r=Di(e,t);if(r!=null)return TV(e,r.orientation,r.mirror)},IV=V([pr,Di,$V,(e,t)=>t],(e,t,r,n)=>{if(t!=null){var a=r==null?void 0:r[n];return a==null?{x:0,y:e.top}:{x:a,y:e.top}}}),L4=V(pr,Di,(e,t)=>{var r=typeof t.width=="number"?t.width:ed;return{width:r,height:e.height}}),uN=(e,t,r)=>{switch(t){case"xAxis":return I4(e,r).width;case"yAxis":return L4(e,r).height;default:return}},R4=(e,t,r,n)=>{if(r!=null){var{allowDuplicatedCategory:a,type:i,dataKey:o}=r,l=As(e,n),c=t.map(u=>u.value);if(o&&l&&i==="category"&&a&&OP(c))return c}},w1=V([Ze,jp,Wt,Lt],R4),z4=(e,t,r,n)=>{if(!(r==null||r.dataKey==null)){var{type:a,scale:i}=r,o=As(e,n);if(o&&(a==="number"||i!=="auto"))return t.map(l=>l.value)}},j1=V([Ze,jp,cd,Lt],z4),dN=V([Ze,YW,ec,Np,w1,j1,fd,y1,Lt],(e,t,r,n,a,i,o,l,c)=>{if(t!=null){var u=As(e,c);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:c,categoricalDomain:i,duplicateDomain:a,isCategorical:u,niceTicks:l,range:o,realScaleType:r,scale:n}}}),LV=(e,t,r,n,a,i,o,l,c)=>{if(!(t==null||n==null)){var u=As(e,c),{type:d,ticks:f,tickCount:h}=t,p=r==="scaleBand"&&typeof n.bandwidth=="function"?n.bandwidth()/2:2,g=d==="category"&&n.bandwidth?n.bandwidth()/p:0;g=c==="angleAxis"&&i!=null&&i.length>=2?kr(i[0]-i[1])*2*g:g;var x=f||a;if(x){var y=x.map((v,b)=>{var w=o?o.indexOf(v):v;return{index:b,coordinate:n(w)+g,value:v,offset:g}});return y.filter(v=>Ut(v.coordinate))}return u&&l?l.map((v,b)=>({coordinate:n(v)+g,value:v,index:b,offset:g})).filter(v=>Ut(v.coordinate)):n.ticks?n.ticks(h).map(v=>({coordinate:n(v)+g,value:v,offset:g})):n.domain().map((v,b)=>({coordinate:n(v)+g,value:o?o[v]:v,index:b,offset:g}))}},F4=V([Ze,cd,ec,Np,y1,fd,w1,j1,Lt],LV),RV=(e,t,r,n,a,i,o)=>{if(!(t==null||r==null||n==null||n[0]===n[1])){var l=As(e,o),{tickCount:c}=t,u=0;return u=o==="angleAxis"&&(n==null?void 0:n.length)>=2?kr(n[0]-n[1])*2*u:u,l&&i?i.map((d,f)=>({coordinate:r(d)+u,value:d,index:f,offset:u})):r.ticks?r.ticks(c).map(d=>({coordinate:r(d)+u,value:d,offset:u})):r.domain().map((d,f)=>({coordinate:r(d)+u,value:a?a[d]:d,index:f,offset:u}))}},ys=V([Ze,cd,Np,fd,w1,j1,Lt],RV),bs=V(Wt,Np,(e,t)=>{if(!(e==null||t==null))return Vm(Vm({},e),{},{scale:t})}),zV=V([Wt,ec,g1,M4],v1);V((e,t,r)=>n1(e,r),zV,(e,t)=>{if(!(e==null||t==null))return Vm(Vm({},e),{},{scale:t})});var FV=V([Ze,rp,np],(e,t,r)=>{switch(e){case"horizontal":return t.some(n=>n.reversed)?"right-to-left":"left-to-right";case"vertical":return r.some(n=>n.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),B4=e=>e.options.defaultTooltipEventType,U4=e=>e.options.validateTooltipEventTypes;function W4(e,t,r){if(e==null)return t;var n=e?"axis":"item";return r==null?t:r.includes(n)?n:t}function _1(e,t){var r=B4(e),n=U4(e);return W4(t,r,n)}function BV(e){return Ce(t=>_1(t,e))}var V4=(e,t)=>{var r,n=Number(t);if(!(ba(n)||t==null))return n>=0?e==null||(r=e[n])===null||r===void 0?void 0:r.value:void 0},UV=e=>e.tooltip.settings,Xi={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},WV={itemInteraction:{click:Xi,hover:Xi},axisInteraction:{click:Xi,hover:Xi},keyboardInteraction:Xi,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},q4=yn({name:"tooltip",initialState:WV,reducers:{addTooltipEntrySettings:{reducer(e,t){e.tooltipItemPayloads.push(t.payload)},prepare:Tt()},replaceTooltipEntrySettings:{reducer(e,t){var{prev:r,next:n}=t.payload,a=xa(e).tooltipItemPayloads.indexOf(r);a>-1&&(e.tooltipItemPayloads[a]=n)},prepare:Tt()},removeTooltipEntrySettings:{reducer(e,t){var r=xa(e).tooltipItemPayloads.indexOf(t.payload);r>-1&&e.tooltipItemPayloads.splice(r,1)},prepare:Tt()},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.graphicalItemId=t.payload.activeGraphicalItemId,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate}}}),{addTooltipEntrySettings:VV,replaceTooltipEntrySettings:qV,removeTooltipEntrySettings:HV,setTooltipSettingsState:KV,setActiveMouseOverItemIndex:H4,mouseLeaveItem:YV,mouseLeaveChart:K4,setActiveClickItemIndex:GV,setMouseOverAxisIndex:Y4,setMouseClickAxisIndex:XV,setSyncInteraction:mx,setKeyboardInteraction:hx}=q4.actions,QV=q4.reducer;function fN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function of(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?fN(Object(r),!0).forEach(function(n){ZV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):fN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ZV(e,t,r){return(t=JV(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JV(e){var t=eq(e,"string");return typeof t=="symbol"?t:t+""}function eq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tq(e,t,r){return t==="axis"?r==="click"?e.axisInteraction.click:e.axisInteraction.hover:r==="click"?e.itemInteraction.click:e.itemInteraction.hover}function rq(e){return e.index!=null}var G4=(e,t,r,n)=>{if(t==null)return Xi;var a=tq(e,t,r);if(a==null)return Xi;if(a.active)return a;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&e.syncInteraction.index!=null)return e.syncInteraction;var i=e.settings.active===!0;if(rq(a)){if(i)return of(of({},a),{},{active:!0})}else if(n!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:n,graphicalItemId:void 0};return of(of({},Xi),{},{coordinate:a.coordinate})};function nq(e){if(typeof e=="number")return Number.isFinite(e)?e:void 0;if(e instanceof Date){var t=e.valueOf();return Number.isFinite(t)?t:void 0}var r=Number(e);return Number.isFinite(r)?r:void 0}function aq(e,t){var r=nq(e),n=t[0],a=t[1];if(r===void 0)return!1;var i=Math.min(n,a),o=Math.max(n,a);return r>=i&&r<=o}function iq(e,t,r){if(r==null||t==null)return!0;var n=vt(e,t);return n==null||!xs(r)?!0:aq(n,r)}var N1=(e,t,r,n)=>{var a=e==null?void 0:e.index;if(a==null)return null;var i=Number(a);if(!Ut(i))return a;var o=0,l=1/0;t.length>0&&(l=t.length-1);var c=Math.max(o,Math.min(i,l)),u=t[c];return u==null||iq(u,r,n)?String(c):null},X4=(e,t,r,n,a,i,o,l)=>{if(!(i==null||l==null)){var c=o[0],u=c==null?void 0:l(c.positions,i);if(u!=null)return u;var d=a==null?void 0:a[Number(i)];if(d)switch(r){case"horizontal":return{x:d.coordinate,y:(n.top+t)/2};default:return{x:(n.left+e)/2,y:d.coordinate}}}},Q4=(e,t,r,n)=>{if(t==="axis")return e.tooltipItemPayloads;if(e.tooltipItemPayloads.length===0)return[];var a;if(r==="hover"?a=e.itemInteraction.hover.graphicalItemId:a=e.itemInteraction.click.graphicalItemId,a==null&&n!=null){var i=e.tooltipItemPayloads[0];return i!=null?[i]:[]}return e.tooltipItemPayloads.filter(o=>{var l;return((l=o.settings)===null||l===void 0?void 0:l.graphicalItemId)===a})},md=e=>e.options.tooltipPayloadSearcher,tc=e=>e.tooltip;function mN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function hN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mN(Object(r),!0).forEach(function(n){sq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function sq(e,t,r){return(t=oq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oq(e){var t=lq(e,"string");return typeof t=="symbol"?t:t+""}function lq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cq(e,t){return e??t}var Z4=(e,t,r,n,a,i,o)=>{if(!(t==null||i==null)){var{chartData:l,computedData:c,dataStartIndex:u,dataEndIndex:d}=r,f=[];return e.reduce((h,p)=>{var g,{dataDefinedOnItem:x,settings:y}=p,v=cq(x,l),b=Array.isArray(v)?$5(v,u,d):v,w=(g=y==null?void 0:y.dataKey)!==null&&g!==void 0?g:n,j=y==null?void 0:y.nameKey,N;if(n&&Array.isArray(b)&&!Array.isArray(b[0])&&o==="axis"?N=AP(b,n,a):N=i(b,t,c,j),Array.isArray(N))N.forEach(S=>{var C=hN(hN({},y),{},{name:S.name,unit:S.unit,color:void 0,fill:void 0});h.push(A2({tooltipEntrySettings:C,dataKey:S.dataKey,payload:S.payload,value:vt(S.payload,S.dataKey),name:S.name}))});else{var _;h.push(A2({tooltipEntrySettings:y,dataKey:w,payload:N,value:vt(N,w),name:(_=vt(N,j))!==null&&_!==void 0?_:y==null?void 0:y.name}))}return h},f)}},S1=V([xr,Ze,y4,Xb,vr],A4),uq=V([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),dq=V([vr,Zl],a1),rc=V([uq,xr,dq],i1,{memoizeOptions:{resultEqualityCheck:bp}}),fq=V([rc],e=>e.filter(xp)),mq=V([rc],s1,{memoizeOptions:{resultEqualityCheck:bp}}),nc=V([mq,Ti],o1),hq=V([fq,Ti,xr],g4),k1=V([nc,xr,rc],c1),J4=V([xr],u1),pq=V([xr],e=>e.allowDataOverflow),e3=V([J4,pq],KO),gq=V([rc],e=>e.filter(xp)),vq=V([hq,gq,od,c4],_4),xq=V([vq,Ti,vr,e3],N4),yq=V([rc],w4),bq=V([nc,xr,yq,_p,vr],m1,{memoizeOptions:{resultEqualityCheck:yp}}),wq=V([S4,vr,Zl],Jl),jq=V([wq,vr],E4),_q=V([k4,vr,Zl],Jl),Nq=V([_q,vr],P4),Sq=V([C4,vr,Zl],Jl),kq=V([Sq,vr],O4),Cq=V([jq,kq,Nq],qm),Eq=V([xr,J4,e3,xq,bq,Cq,Ze,vr],h1),hd=V([xr,Ze,nc,k1,od,vr,Eq],p1),Pq=V([hd,xr,S1],x1),Oq=V([xr,hd,Pq,vr],b1),t3=e=>{var t=vr(e),r=Zl(e),n=!1;return fd(e,t,r,n)},r3=V([xr,t3],gp),n3=V([xr,S1,Oq,r3],v1),Aq=V([Ze,k1,xr,vr],R4),Tq=V([Ze,k1,xr,vr],z4),Mq=(e,t,r,n,a,i,o,l)=>{if(t){var{type:c}=t,u=As(e,l);if(n){var d=r==="scaleBand"&&n.bandwidth?n.bandwidth()/2:2,f=c==="category"&&n.bandwidth?n.bandwidth()/d:0;return f=l==="angleAxis"&&a!=null&&(a==null?void 0:a.length)>=2?kr(a[0]-a[1])*2*f:f,u&&o?o.map((h,p)=>({coordinate:n(h)+f,value:h,index:p,offset:f})):n.domain().map((h,p)=>({coordinate:n(h)+f,value:i?i[h]:h,index:p,offset:f}))}}},$i=V([Ze,xr,S1,n3,t3,Aq,Tq,vr],Mq),C1=V([B4,U4,UV],(e,t,r)=>W4(r.shared,e,t)),a3=e=>e.tooltip.settings.trigger,E1=e=>e.tooltip.settings.defaultIndex,pd=V([tc,C1,a3,E1],G4),ws=V([pd,nc,dd,hd],N1),i3=V([$i,ws],V4),P1=V([pd],e=>{if(e)return e.dataKey}),Dq=V([pd],e=>{if(e)return e.graphicalItemId}),s3=V([tc,C1,a3,E1],Q4),$q=V([Pi,Oi,Ze,pr,$i,E1,s3,md],X4),Iq=V([pd,$q],(e,t)=>e!=null&&e.coordinate?e.coordinate:t),Lq=V([pd],e=>{var t;return(t=e==null?void 0:e.active)!==null&&t!==void 0?t:!1}),Rq=V([s3,ws,Ti,dd,i3,md,C1],Z4),zq=V([Rq],e=>{if(e!=null){var t=e.map(r=>r.payload).filter(r=>r!=null);return Array.from(new Set(t))}});function pN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function gN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pN(Object(r),!0).forEach(function(n){Fq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Fq(e,t,r){return(t=Bq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Bq(e){var t=Uq(e,"string");return typeof t=="symbol"?t:t+""}function Uq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wq=()=>Ce(xr),Vq=()=>{var e=Wq(),t=Ce($i),r=Ce(n3);return Ml(!e||!r?void 0:gN(gN({},e),{},{scale:r}),t)};function vN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?vN(Object(r),!0).forEach(function(n){qq(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qq(e,t,r){return(t=Hq(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hq(e){var t=Kq(e,"string");return typeof t=="symbol"?t:t+""}function Kq(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Yq=(e,t,r,n)=>{var a=t.find(i=>i&&i.index===r);if(a){if(e==="horizontal")return{x:a.coordinate,y:n.chartY};if(e==="vertical")return{x:n.chartX,y:a.coordinate}}return{x:0,y:0}},Gq=(e,t,r,n)=>{var a=t.find(u=>u&&u.index===r);if(a){if(e==="centric"){var i=a.coordinate,{radius:o}=n;return Vo(Vo(Vo({},n),rr(n.cx,n.cy,o,i)),{},{angle:i,radius:o})}var l=a.coordinate,{angle:c}=n;return Vo(Vo(Vo({},n),rr(n.cx,n.cy,l,c)),{},{angle:c,radius:l})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function Xq(e,t){var{chartX:r,chartY:n}=e;return r>=t.left&&r<=t.left+t.width&&n>=t.top&&n<=t.top+t.height}var o3=(e,t,r,n,a)=>{var i,o=(i=t==null?void 0:t.length)!==null&&i!==void 0?i:0;if(o<=1||e==null)return 0;if(n==="angleAxis"&&a!=null&&Math.abs(Math.abs(a[1]-a[0])-360)<=1e-6)for(var l=0;l<o;l++){var c,u,d,f,h,p=l>0?(c=r[l-1])===null||c===void 0?void 0:c.coordinate:(u=r[o-1])===null||u===void 0?void 0:u.coordinate,g=(d=r[l])===null||d===void 0?void 0:d.coordinate,x=l>=o-1?(f=r[0])===null||f===void 0?void 0:f.coordinate:(h=r[l+1])===null||h===void 0?void 0:h.coordinate,y=void 0;if(!(p==null||g==null||x==null))if(kr(g-p)!==kr(x-g)){var v=[];if(kr(x-g)===kr(a[1]-a[0])){y=x;var b=g+a[1]-a[0];v[0]=Math.min(b,(b+p)/2),v[1]=Math.max(b,(b+p)/2)}else{y=p;var w=x+a[1]-a[0];v[0]=Math.min(g,(w+g)/2),v[1]=Math.max(g,(w+g)/2)}var j=[Math.min(g,(y+g)/2),Math.max(g,(y+g)/2)];if(e>j[0]&&e<=j[1]||e>=v[0]&&e<=v[1]){var N;return(N=r[l])===null||N===void 0?void 0:N.index}}else{var _=Math.min(p,x),S=Math.max(p,x);if(e>(_+g)/2&&e<=(S+g)/2){var C;return(C=r[l])===null||C===void 0?void 0:C.index}}}else if(t)for(var O=0;O<o;O++){var A=t[O];if(A!=null){var T=t[O+1],D=t[O-1];if(O===0&&T!=null&&e<=(A.coordinate+T.coordinate)/2||O===o-1&&D!=null&&e>(A.coordinate+D.coordinate)/2||O>0&&O<o-1&&D!=null&&T!=null&&e>(A.coordinate+D.coordinate)/2&&e<=(A.coordinate+T.coordinate)/2)return A.index}}return-1},Qq=()=>Ce(Xb),O1=(e,t)=>t,l3=(e,t,r)=>r,A1=(e,t,r,n)=>n,Zq=V($i,e=>Gh(e,t=>t.coordinate)),T1=V([tc,O1,l3,A1],G4),M1=V([T1,nc,dd,hd],N1),Jq=(e,t,r)=>{if(t!=null){var n=tc(e);return t==="axis"?r==="hover"?n.axisInteraction.hover.dataKey:n.axisInteraction.click.dataKey:r==="hover"?n.itemInteraction.hover.dataKey:n.itemInteraction.click.dataKey}},c3=V([tc,O1,l3,A1],Q4),Hm=V([Pi,Oi,Ze,pr,$i,A1,c3,md],X4),eH=V([T1,Hm],(e,t)=>{var r;return(r=e.coordinate)!==null&&r!==void 0?r:t}),u3=V([$i,M1],V4),tH=V([c3,M1,Ti,dd,u3,md,O1],Z4),rH=V([T1,M1],(e,t)=>({isActive:e.active&&t!=null,activeIndex:t})),nH=(e,t,r,n,a,i,o)=>{if(!(!e||!r||!n||!a)&&Xq(e,o)){var l=B9(e,t),c=o3(l,i,a,r,n),u=Yq(t,a,c,e);return{activeIndex:String(c),activeCoordinate:u}}},aH=(e,t,r,n,a,i,o)=>{if(!(!e||!n||!a||!i||!r)){var l=WF(e,r);if(l){var c=U9(l,t),u=o3(c,o,i,n,a),d=Gq(t,i,u,l);return{activeIndex:String(u),activeCoordinate:d}}}},iH=(e,t,r,n,a,i,o,l)=>{if(!(!e||!t||!n||!a||!i))return t==="horizontal"||t==="vertical"?nH(e,t,n,a,i,o,l):aH(e,t,r,n,a,i,o)},sH=V(e=>e.zIndex.zIndexMap,(e,t)=>t,(e,t,r)=>r,(e,t,r)=>{if(t!=null){var n=e[t];if(n!=null)return r?n.panoramaElement:n.element}}),oH=V(e=>e.zIndex.zIndexMap,e=>{var t=Object.keys(e).map(n=>parseInt(n,10)).concat(Object.values(Gt)),r=Array.from(new Set(t));return r.sort((n,a)=>n-a)},{memoizeOptions:{resultEqualityCheck:WW}});function xN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function yN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xN(Object(r),!0).forEach(function(n){lH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function lH(e,t,r){return(t=cH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function cH(e){var t=uH(e,"string");return typeof t=="symbol"?t:t+""}function uH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var dH={},fH={zIndexMap:Object.values(Gt).reduce((e,t)=>yN(yN({},e),{},{[t]:{element:void 0,panoramaElement:void 0,consumers:0}}),dH)},mH=new Set(Object.values(Gt));function hH(e){return mH.has(e)}var d3=yn({name:"zIndex",initialState:fH,reducers:{registerZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]?e.zIndexMap[r].consumers+=1:e.zIndexMap[r]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:Tt()},unregisterZIndexPortal:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(e.zIndexMap[r].consumers-=1,e.zIndexMap[r].consumers<=0&&!hH(r)&&delete e.zIndexMap[r])},prepare:Tt()},registerZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r,element:n,isPanorama:a}=t.payload;e.zIndexMap[r]?a?e.zIndexMap[r].panoramaElement=n:e.zIndexMap[r].element=n:e.zIndexMap[r]={consumers:0,element:a?void 0:n,panoramaElement:a?n:void 0}},prepare:Tt()},unregisterZIndexPortalElement:{reducer:(e,t)=>{var{zIndex:r}=t.payload;e.zIndexMap[r]&&(t.payload.isPanorama?e.zIndexMap[r].panoramaElement=void 0:e.zIndexMap[r].element=void 0)},prepare:Tt()}}}),{registerZIndexPortal:pH,unregisterZIndexPortal:gH,registerZIndexPortalElement:vH,unregisterZIndexPortalElement:xH}=d3.actions,yH=d3.reducer;function bn(e){var{zIndex:t,children:r}=e,n=pz(),a=n&&t!==void 0&&t!==0,i=Hr(),o=kt();m.useLayoutEffect(()=>a?(o(pH({zIndex:t})),()=>{o(gH({zIndex:t}))}):Qu,[o,t,a]);var l=Ce(c=>sH(c,t,i));return a?l?Da.createPortal(r,l):null:r}function px(){return px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},px.apply(null,arguments)}function bN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function lf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bN(Object(r),!0).forEach(function(n){bH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function bH(e,t,r){return(t=wH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wH(e){var t=jH(e,"string");return typeof t=="symbol"?t:t+""}function jH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function _H(e){var{cursor:t,cursorComp:r,cursorProps:n}=e;return m.isValidElement(t)?m.cloneElement(t,n):m.createElement(r,n)}function NH(e){var t,{coordinate:r,payload:n,index:a,offset:i,tooltipAxisBandSize:o,layout:l,cursor:c,tooltipEventType:u,chartName:d}=e,f=r,h=n,p=a;if(!c||!f||d!=="ScatterChart"&&u!=="axis")return null;var g,x,y;if(d==="ScatterChart")g=f,x=nF,y=Gt.cursorLine;else if(d==="BarChart")g=aF(l,f,i,o),x=aO,y=Gt.cursorRectangle;else if(l==="radial"&&MP(f)){var{cx:v,cy:b,radius:w,startAngle:j,endAngle:N}=sO(f);g={cx:v,cy:b,startAngle:j,endAngle:N,innerRadius:w,outerRadius:w},x=lO,y=Gt.cursorLine}else g={points:KF(l,f,i)},x=_b,y=Gt.cursorLine;var _=typeof c=="object"&&"className"in c?c.className:void 0,S=lf(lf(lf(lf({stroke:"#ccc",pointerEvents:"none"},i),g),po(c)),{},{payload:h,payloadIndex:p,className:nt("recharts-tooltip-cursor",_)});return m.createElement(bn,{zIndex:(t=e.zIndex)!==null&&t!==void 0?t:y},m.createElement(_H,{cursor:c,cursorComp:x,cursorProps:S}))}function SH(e){var t=Vq(),r=Y5(),n=Yl(),a=Qq();return t==null||r==null||n==null||a==null?null:m.createElement(NH,px({},e,{offset:r,layout:n,tooltipAxisBandSize:t,chartName:a}))}var f3=m.createContext(null),kH=()=>m.useContext(f3),m3={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function a(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function i(c,u,d,f,h){if(typeof d!="function")throw new TypeError("The listener must be a function");var p=new a(d,f||c,h),g=r?r+u:u;return c._events[g]?c._events[g].fn?c._events[g]=[c._events[g],p]:c._events[g].push(p):(c._events[g]=p,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var h=0,p=f.length,g=new Array(p);h<p;h++)g[h]=f[h].fn;return g},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,h,p,g){var x=r?r+u:u;if(!this._events[x])return!1;var y=this._events[x],v=arguments.length,b,w;if(y.fn){switch(y.once&&this.removeListener(u,y.fn,void 0,!0),v){case 1:return y.fn.call(y.context),!0;case 2:return y.fn.call(y.context,d),!0;case 3:return y.fn.call(y.context,d,f),!0;case 4:return y.fn.call(y.context,d,f,h),!0;case 5:return y.fn.call(y.context,d,f,h,p),!0;case 6:return y.fn.call(y.context,d,f,h,p,g),!0}for(w=1,b=new Array(v-1);w<v;w++)b[w-1]=arguments[w];y.fn.apply(y.context,b)}else{var j=y.length,N;for(w=0;w<j;w++)switch(y[w].once&&this.removeListener(u,y[w].fn,void 0,!0),v){case 1:y[w].fn.call(y[w].context);break;case 2:y[w].fn.call(y[w].context,d);break;case 3:y[w].fn.call(y[w].context,d,f);break;case 4:y[w].fn.call(y[w].context,d,f,h);break;default:if(!b)for(N=1,b=new Array(v-1);N<v;N++)b[N-1]=arguments[N];y[w].fn.apply(y[w].context,b)}}return!0},l.prototype.on=function(u,d,f){return i(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return i(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,h){var p=r?r+u:u;if(!this._events[p])return this;if(!d)return o(this,p),this;var g=this._events[p];if(g.fn)g.fn===d&&(!h||g.once)&&(!f||g.context===f)&&o(this,p);else{for(var x=0,y=[],v=g.length;x<v;x++)(g[x].fn!==d||h&&!g[x].once||f&&g[x].context!==f)&&y.push(g[x]);y.length?this._events[p]=y.length===1?y[0]:y:o(this,p)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(m3);var CH=m3.exports;const EH=Si(CH);var Mu=new EH,gx="recharts.syncEvent.tooltip",wN="recharts.syncEvent.brush";function D1(e,t){if(t){var r=Number.parseInt(t,10);if(!ba(r))return e==null?void 0:e[r]}}var PH={chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},h3=yn({name:"options",initialState:PH,reducers:{createEventEmitter:e=>{e.eventEmitter==null&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),OH=h3.reducer,{createEventEmitter:AH}=h3.actions;function TH(e){return e.tooltip.syncInteraction}var MH={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},p3=yn({name:"chartData",initialState:MH,reducers:{setChartData(e,t){if(e.chartData=t.payload,t.payload==null){e.dataStartIndex=0,e.dataEndIndex=0;return}t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:r,endIndex:n}=t.payload;r!=null&&(e.dataStartIndex=r),n!=null&&(e.dataEndIndex=n)}}}),{setChartData:jN,setDataStartEndIndexes:DH,setComputedData:_le}=p3.actions,$H=p3.reducer,IH=["x","y"];function _N(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function qo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_N(Object(r),!0).forEach(function(n){LH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_N(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function LH(e,t,r){return(t=RH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function RH(e){var t=zH(e,"string");return typeof t=="symbol"?t:t+""}function zH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FH(e,t){if(e==null)return{};var r,n,a=BH(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function BH(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function UH(){var e=Ce(Qb),t=Ce(Zb),r=kt(),n=Ce(u4),a=Ce($i),i=Yl(),o=sp(),l=Ce(c=>c.rootProps.className);m.useEffect(()=>{if(e==null)return Qu;var c=(u,d,f)=>{if(t!==f&&e===u){if(n==="index"){var h;if(o&&d!==null&&d!==void 0&&(h=d.payload)!==null&&h!==void 0&&h.coordinate&&d.payload.sourceViewBox){var p=d.payload.coordinate,{x:g,y:x}=p,y=FH(p,IH),{x:v,y:b,width:w,height:j}=d.payload.sourceViewBox,N=qo(qo({},y),{},{x:o.x+(w?(g-v)/w:0)*o.width,y:o.y+(j?(x-b)/j:0)*o.height});r(qo(qo({},d),{},{payload:qo(qo({},d.payload),{},{coordinate:N})}))}else r(d);return}if(a!=null){var _;if(typeof n=="function"){var S={activeTooltipIndex:d.payload.index==null?void 0:Number(d.payload.index),isTooltipActive:d.payload.active,activeIndex:d.payload.index==null?void 0:Number(d.payload.index),activeLabel:d.payload.label,activeDataKey:d.payload.dataKey,activeCoordinate:d.payload.coordinate},C=n(a,S);_=a[C]}else n==="value"&&(_=a.find(z=>String(z.value)===d.payload.label));var{coordinate:O}=d.payload;if(_==null||d.payload.active===!1||O==null||o==null){r(mx({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:A,y:T}=O,D=Math.min(A,o.x+o.width),q=Math.min(T,o.y+o.height),re={x:i==="horizontal"?_.coordinate:D,y:i==="horizontal"?q:_.coordinate},K=mx({active:d.payload.active,coordinate:re,dataKey:d.payload.dataKey,index:String(_.index),label:d.payload.label,sourceViewBox:d.payload.sourceViewBox,graphicalItemId:d.payload.graphicalItemId});r(K)}}};return Mu.on(gx,c),()=>{Mu.off(gx,c)}},[l,r,t,e,n,a,i,o])}function WH(){var e=Ce(Qb),t=Ce(Zb),r=kt();m.useEffect(()=>{if(e==null)return Qu;var n=(a,i,o)=>{t!==o&&e===a&&r(DH(i))};return Mu.on(wN,n),()=>{Mu.off(wN,n)}},[r,t,e])}function VH(){var e=kt();m.useEffect(()=>{e(AH())},[e]),UH(),WH()}function qH(e,t,r,n,a,i){var o=Ce(p=>Jq(p,e,t)),l=Ce(Zb),c=Ce(Qb),u=Ce(u4),d=Ce(TH),f=d==null?void 0:d.active,h=sp();m.useEffect(()=>{if(!f&&c!=null&&l!=null){var p=mx({active:i,coordinate:r,dataKey:o,index:a,label:typeof n=="number"?String(n):n,sourceViewBox:h,graphicalItemId:void 0});Mu.emit(gx,c,p,l)}},[f,r,o,a,n,l,c,u,i,h])}function NN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function SN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NN(Object(r),!0).forEach(function(n){HH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function HH(e,t,r){return(t=KH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function KH(e){var t=YH(e,"string");return typeof t=="symbol"?t:t+""}function YH(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function GH(e){return e.dataKey}function XH(e,t){return m.isValidElement(e)?m.cloneElement(e,t):typeof e=="function"?m.createElement(e,t):m.createElement(Iz,t)}var kN=[],QH={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Df(e){var t,r,n=ar(e,QH),{active:a,allowEscapeViewBox:i,animationDuration:o,animationEasing:l,content:c,filterNull:u,isAnimationActive:d,offset:f,payloadUniqBy:h,position:p,reverseDirection:g,useTranslate3d:x,wrapperStyle:y,cursor:v,shared:b,trigger:w,defaultIndex:j,portal:N,axisId:_}=n,S=kt(),C=typeof j=="number"?String(j):j;m.useEffect(()=>{S(KV({shared:b,trigger:w,axisId:_,active:a,defaultIndex:C}))},[S,b,w,_,a,C]);var O=sp(),A=J5(),T=BV(b),{activeIndex:D,isActive:q}=(t=Ce(ae=>rH(ae,T,w,C)))!==null&&t!==void 0?t:{},re=Ce(ae=>tH(ae,T,w,C)),K=Ce(ae=>u3(ae,T,w,C)),z=Ce(ae=>eH(ae,T,w,C)),P=re,M=kH(),L=(r=a??q)!==null&&r!==void 0?r:!1,[G,$]=l5([P,L]),U=T==="axis"?K:void 0;qH(T,w,z,U,D,L);var E=N??M;if(E==null||O==null||T==null)return null;var Q=P??kN;L||(Q=kN),u&&Q.length&&(Q=XP(Q.filter(ae=>ae.value!=null&&(ae.hide!==!0||n.includeHidden)),h,GH));var J=Q.length>0,de=m.createElement(Wz,{allowEscapeViewBox:i,animationDuration:o,animationEasing:l,isAnimationActive:d,active:L,coordinate:z,hasPayload:J,offset:f,position:p,reverseDirection:g,useTranslate3d:x,viewBox:O,wrapperStyle:y,lastBoundingBox:G,innerRef:$,hasPortalFromProps:!!N},XH(c,SN(SN({},n),{},{payload:Q,label:U,active:L,activeIndex:D,coordinate:z,accessibilityLayer:A})));return m.createElement(m.Fragment,null,Da.createPortal(de,E),L&&m.createElement(SH,{cursor:v,tooltipEventType:T,coordinate:z,payload:Q,index:D}))}var gd=e=>null;gd.displayName="Cell";function ZH(e,t,r){return(t=JH(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function JH(e){var t=eK(e,"string");return typeof t=="symbol"?t:t+""}function eK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class tK{constructor(t){ZH(this,"cache",new Map),this.maxSize=t}get(t){var r=this.cache.get(t);return r!==void 0&&(this.cache.delete(t),this.cache.set(t,r)),r}set(t,r){if(this.cache.has(t))this.cache.delete(t);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;n!=null&&this.cache.delete(n)}this.cache.set(t,r)}clear(){this.cache.clear()}size(){return this.cache.size}}function CN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function rK(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?CN(Object(r),!0).forEach(function(n){nK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):CN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function nK(e,t,r){return(t=aK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aK(e){var t=iK(e,"string");return typeof t=="symbol"?t:t+""}function iK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sK={cacheSize:2e3,enableCache:!0},g3=rK({},sK),EN=new tK(g3.cacheSize),oK={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},PN="recharts_measurement_span";function lK(e,t){var r=t.fontSize||"",n=t.fontFamily||"",a=t.fontWeight||"",i=t.fontStyle||"",o=t.letterSpacing||"",l=t.textTransform||"";return"".concat(e,"|").concat(r,"|").concat(n,"|").concat(a,"|").concat(i,"|").concat(o,"|").concat(l)}var ON=(e,t)=>{try{var r=document.getElementById(PN);r||(r=document.createElement("span"),r.setAttribute("id",PN),r.setAttribute("aria-hidden","true"),document.body.appendChild(r)),Object.assign(r.style,oK,t),r.textContent="".concat(e);var n=r.getBoundingClientRect();return{width:n.width,height:n.height}}catch{return{width:0,height:0}}},Xc=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||lp.isSsr)return{width:0,height:0};if(!g3.enableCache)return ON(t,r);var n=lK(t,r),a=EN.get(n);if(a)return a;var i=ON(t,r);return EN.set(n,i),i},v3;function cK(e,t,r){return(t=uK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uK(e){var t=dK(e,"string");return typeof t=="symbol"?t:t+""}function dK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TN=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,fK=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,mK=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,hK={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},pK=["cm","mm","pt","pc","in","Q","px"];function gK(e){return pK.includes(e)}var ul="NaN";function vK(e,t){return e*hK[t]}class Dr{static parse(t){var r,[,n,a]=(r=mK.exec(t))!==null&&r!==void 0?r:[];return n==null?Dr.NaN:new Dr(parseFloat(n),a??"")}constructor(t,r){this.num=t,this.unit=r,this.num=t,this.unit=r,ba(t)&&(this.unit=""),r!==""&&!fK.test(r)&&(this.num=NaN,this.unit=""),gK(r)&&(this.num=vK(t,r),this.unit="px")}add(t){return this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num+t.num,this.unit)}subtract(t){return this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num-t.num,this.unit)}multiply(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num*t.num,this.unit||t.unit)}divide(t){return this.unit!==""&&t.unit!==""&&this.unit!==t.unit?new Dr(NaN,""):new Dr(this.num/t.num,this.unit||t.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return ba(this.num)}}v3=Dr;cK(Dr,"NaN",new v3(NaN,""));function x3(e){if(e==null||e.includes(ul))return ul;for(var t=e;t.includes("*")||t.includes("/");){var r,[,n,a,i]=(r=AN.exec(t))!==null&&r!==void 0?r:[],o=Dr.parse(n??""),l=Dr.parse(i??""),c=a==="*"?o.multiply(l):o.divide(l);if(c.isNaN())return ul;t=t.replace(AN,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,[,d,f,h]=(u=TN.exec(t))!==null&&u!==void 0?u:[],p=Dr.parse(d??""),g=Dr.parse(h??""),x=f==="+"?p.add(g):p.subtract(g);if(x.isNaN())return ul;t=t.replace(TN,x.toString())}return t}var MN=/\(([^()]*)\)/;function xK(e){for(var t=e,r;(r=MN.exec(t))!=null;){var[,n]=r;t=t.replace(MN,x3(n))}return t}function yK(e){var t=e.replace(/\s+/g,"");return t=xK(t),t=x3(t),t}function bK(e){try{return yK(e)}catch{return ul}}function tg(e){var t=bK(e.slice(5,-1));return t===ul?"":t}var wK=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],jK=["dx","dy","angle","className","breakAll"];function vx(){return vx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},vx.apply(null,arguments)}function DN(e,t){if(e==null)return{};var r,n,a=_K(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function _K(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var y3=/[ \f\n\r\t\v\u2028\u2029]+/,b3=e=>{var{children:t,breakAll:r,style:n}=e;try{var a=[];It(t)||(r?a=t.toString().split(""):a=t.toString().split(y3));var i=a.map(l=>({word:l,width:Xc(l,n).width})),o=r?0:Xc("",n).width;return{wordsWithComputedWidth:i,spaceWidth:o}}catch{return null}};function NK(e){return e==="start"||e==="middle"||e==="end"||e==="inherit"}var w3=(e,t,r,n)=>e.reduce((a,i)=>{var{word:o,width:l}=i,c=a[a.length-1];if(c&&l!=null&&(t==null||n||c.width+l+r<Number(t)))c.words.push(o),c.width+=l+r;else{var u={words:[o],width:l};a.push(u)}return a},[]),j3=e=>e.reduce((t,r)=>t.width>r.width?t:r),SK="",$N=(e,t,r,n,a,i,o,l)=>{var c=e.slice(0,t),u=b3({breakAll:r,style:n,children:c+SK});if(!u)return[!1,[]];var d=w3(u.wordsWithComputedWidth,i,o,l),f=d.length>a||j3(d).width>Number(i);return[f,d]},kK=(e,t,r,n,a)=>{var{maxLines:i,children:o,style:l,breakAll:c}=e,u=Se(i),d=String(o),f=w3(t,n,r,a);if(!u||a)return f;var h=f.length>i||j3(f).width>Number(n);if(!h)return f;for(var p=0,g=d.length-1,x=0,y;p<=g&&x<=d.length-1;){var v=Math.floor((p+g)/2),b=v-1,[w,j]=$N(d,b,c,l,i,n,r,a),[N]=$N(d,v,c,l,i,n,r,a);if(!w&&!N&&(p=v+1),w&&N&&(g=v-1),!w&&N){y=j;break}x++}return y||f},IN=e=>{var t=It(e)?[]:e.toString().split(y3);return[{words:t,width:void 0}]},CK=e=>{var{width:t,scaleToFit:r,children:n,style:a,breakAll:i,maxLines:o}=e;if((t||r)&&!lp.isSsr){var l,c,u=b3({breakAll:i,children:n,style:a});if(u){var{wordsWithComputedWidth:d,spaceWidth:f}=u;l=d,c=f}else return IN(n);return kK({breakAll:i,children:n,maxLines:o,style:a},l,c,t,!!r)}return IN(n)},_3="#808080",EK={angle:0,breakAll:!1,capHeight:"0.71em",fill:_3,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},Cp=m.forwardRef((e,t)=>{var r=ar(e,EK),{x:n,y:a,lineHeight:i,capHeight:o,fill:l,scaleToFit:c,textAnchor:u,verticalAnchor:d}=r,f=DN(r,wK),h=m.useMemo(()=>CK({breakAll:f.breakAll,children:f.children,maxLines:f.maxLines,scaleToFit:c,style:f.style,width:f.width}),[f.breakAll,f.children,f.maxLines,c,f.style,f.width]),{dx:p,dy:g,angle:x,className:y,breakAll:v}=f,b=DN(f,jK);if(!Fa(n)||!Fa(a)||h.length===0)return null;var w=Number(n)+(Se(p)?p:0),j=Number(a)+(Se(g)?g:0);if(!Ut(w)||!Ut(j))return null;var N;switch(d){case"start":N=tg("calc(".concat(o,")"));break;case"middle":N=tg("calc(".concat((h.length-1)/2," * -").concat(i," + (").concat(o," / 2))"));break;default:N=tg("calc(".concat(h.length-1," * -").concat(i,")"));break}var _=[];if(c){var S=h[0].width,{width:C}=f;_.push("scale(".concat(Se(C)&&Se(S)?C/S:1,")"))}return x&&_.push("rotate(".concat(x,", ").concat(w,", ").concat(j,")")),_.length&&(b.transform=_.join(" ")),m.createElement("text",vx({},en(b),{ref:t,x:w,y:j,className:nt("recharts-text",y),textAnchor:u,fill:l.includes("url")?_3:l}),h.map((O,A)=>{var T=O.words.join(v?"":" ");return m.createElement("tspan",{x:w,dy:A===0?N:i,key:"".concat(T,"-").concat(A)},T)}))});Cp.displayName="Text";var PK=["labelRef"],OK=["content"];function LN(e,t){if(e==null)return{};var r,n,a=AK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function AK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function RN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RN(Object(r),!0).forEach(function(n){TK(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function TK(e,t,r){return(t=MK(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function MK(e){var t=DK(e,"string");return typeof t=="symbol"?t:t+""}function DK(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ja.apply(null,arguments)}var N3=m.createContext(null),$K=e=>{var{x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:o,children:l}=e,c=m.useMemo(()=>({x:t,y:r,upperWidth:n,lowerWidth:a,width:i,height:o}),[t,r,n,a,i,o]);return m.createElement(N3.Provider,{value:c},l)},S3=()=>{var e=m.useContext(N3),t=sp();return e||K5(t)},IK=m.createContext(null),LK=()=>{var e=m.useContext(IK),t=Ce(p4);return e||t},RK=e=>{var{value:t,formatter:r}=e,n=It(e.children)?t:e.children;return typeof r=="function"?r(n):n},$1=e=>e!=null&&typeof e=="function",zK=(e,t)=>{var r=kr(t-e),n=Math.min(Math.abs(t-e),360);return r*n},FK=(e,t,r,n,a)=>{var{offset:i,className:o}=e,{cx:l,cy:c,innerRadius:u,outerRadius:d,startAngle:f,endAngle:h,clockWise:p}=a,g=(u+d)/2,x=zK(f,h),y=x>=0?1:-1,v,b;switch(t){case"insideStart":v=f+y*i,b=p;break;case"insideEnd":v=h-y*i,b=!p;break;case"end":v=h+y*i,b=p;break;default:throw new Error("Unsupported position ".concat(t))}b=x<=0?b:!b;var w=rr(l,c,g,v),j=rr(l,c,g,v+(b?1:-1)*359),N="M".concat(w.x,",").concat(w.y,`
    A`).concat(g,",").concat(g,",0,1,").concat(b?0:1,`,
    `).concat(j.x,",").concat(j.y),_=It(e.id)?Nu("recharts-radial-line-"):e.id;return m.createElement("text",Ja({},n,{dominantBaseline:"central",className:nt("recharts-radial-bar-label",o)}),m.createElement("defs",null,m.createElement("path",{id:_,d:N})),m.createElement("textPath",{xlinkHref:"#".concat(_)},r))},BK=(e,t,r)=>{var{cx:n,cy:a,innerRadius:i,outerRadius:o,startAngle:l,endAngle:c}=e,u=(l+c)/2;if(r==="outside"){var{x:d,y:f}=rr(n,a,o+t,u);return{x:d,y:f,textAnchor:d>=n?"start":"end",verticalAnchor:"middle"}}if(r==="center")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"middle"};if(r==="centerTop")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"start"};if(r==="centerBottom")return{x:n,y:a,textAnchor:"middle",verticalAnchor:"end"};var h=(i+o)/2,{x:p,y:g}=rr(n,a,h,u);return{x:p,y:g,textAnchor:"middle",verticalAnchor:"middle"}},xx=e=>"cx"in e&&Se(e.cx),UK=(e,t)=>{var{parentViewBox:r,offset:n,position:a}=e,i;r!=null&&!xx(r)&&(i=r);var{x:o,y:l,upperWidth:c,lowerWidth:u,height:d}=t,f=o,h=o+(c-u)/2,p=(f+h)/2,g=(c+u)/2,x=f+c/2,y=d>=0?1:-1,v=y*n,b=y>0?"end":"start",w=y>0?"start":"end",j=c>=0?1:-1,N=j*n,_=j>0?"end":"start",S=j>0?"start":"end";if(a==="top"){var C={x:f+c/2,y:l-v,textAnchor:"middle",verticalAnchor:b};return Qt(Qt({},C),i?{height:Math.max(l-i.y,0),width:c}:{})}if(a==="bottom"){var O={x:h+u/2,y:l+d+v,textAnchor:"middle",verticalAnchor:w};return Qt(Qt({},O),i?{height:Math.max(i.y+i.height-(l+d),0),width:u}:{})}if(a==="left"){var A={x:p-N,y:l+d/2,textAnchor:_,verticalAnchor:"middle"};return Qt(Qt({},A),i?{width:Math.max(A.x-i.x,0),height:d}:{})}if(a==="right"){var T={x:p+g+N,y:l+d/2,textAnchor:S,verticalAnchor:"middle"};return Qt(Qt({},T),i?{width:Math.max(i.x+i.width-T.x,0),height:d}:{})}var D=i?{width:g,height:d}:{};return a==="insideLeft"?Qt({x:p+N,y:l+d/2,textAnchor:S,verticalAnchor:"middle"},D):a==="insideRight"?Qt({x:p+g-N,y:l+d/2,textAnchor:_,verticalAnchor:"middle"},D):a==="insideTop"?Qt({x:f+c/2,y:l+v,textAnchor:"middle",verticalAnchor:w},D):a==="insideBottom"?Qt({x:h+u/2,y:l+d-v,textAnchor:"middle",verticalAnchor:b},D):a==="insideTopLeft"?Qt({x:f+N,y:l+v,textAnchor:S,verticalAnchor:w},D):a==="insideTopRight"?Qt({x:f+c-N,y:l+v,textAnchor:_,verticalAnchor:w},D):a==="insideBottomLeft"?Qt({x:h+N,y:l+d-v,textAnchor:S,verticalAnchor:b},D):a==="insideBottomRight"?Qt({x:h+u-N,y:l+d-v,textAnchor:_,verticalAnchor:b},D):a&&typeof a=="object"&&(Se(a.x)||gi(a.x))&&(Se(a.y)||gi(a.y))?Qt({x:o+Vr(a.x,g),y:l+Vr(a.y,d),textAnchor:"end",verticalAnchor:"end"},D):Qt({x,y:l+d/2,textAnchor:"middle",verticalAnchor:"middle"},D)},WK={angle:0,offset:5,zIndex:Gt.label,position:"middle",textBreakAll:!1};function Vi(e){var t=ar(e,WK),{viewBox:r,position:n,value:a,children:i,content:o,className:l="",textBreakAll:c,labelRef:u}=t,d=LK(),f=S3(),h=n==="center"?f:d??f,p,g,x;if(r==null?p=h:xx(r)?p=r:p=K5(r),!p||It(a)&&It(i)&&!m.isValidElement(o)&&typeof o!="function")return null;var y=Qt(Qt({},t),{},{viewBox:p});if(m.isValidElement(o)){var v=LN(y,PK);return m.cloneElement(o,v)}if(typeof o=="function"){var b=LN(y,OK);if(g=m.createElement(o,b),m.isValidElement(g))return g}else g=RK(t);var w=en(t);if(xx(p)){if(n==="insideStart"||n==="insideEnd"||n==="end")return FK(t,n,g,w,p);x=BK(p,t.offset,t.position)}else x=UK(t,p);return m.createElement(bn,{zIndex:t.zIndex},m.createElement(Cp,Ja({ref:u,className:nt("recharts-label",l)},w,x,{textAnchor:NK(w.textAnchor)?w.textAnchor:x.textAnchor,breakAll:c}),g))}Vi.displayName="Label";var VK=(e,t,r)=>{if(!e)return null;var n={viewBox:t,labelRef:r};return e===!0?m.createElement(Vi,Ja({key:"label-implicit"},n)):Fa(e)?m.createElement(Vi,Ja({key:"label-implicit",value:e},n)):m.isValidElement(e)?e.type===Vi?m.cloneElement(e,Qt({key:"label-implicit"},n)):m.createElement(Vi,Ja({key:"label-implicit",content:e},n)):$1(e)?m.createElement(Vi,Ja({key:"label-implicit",content:e},n)):e&&typeof e=="object"?m.createElement(Vi,Ja({},e,{key:"label-implicit"},n)):null};function qK(e){var{label:t,labelRef:r}=e,n=S3();return VK(t,n,r)||null}var k3={},C3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return r[r.length-1]}e.last=t})(C3);var E3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){return Array.isArray(r)?r:Array.from(r)}e.toArray=t})(E3);(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});const t=C3,r=E3,n=Kh;function a(i){if(n.isArrayLike(i))return t.last(r.toArray(i))}e.last=a})(k3);var HK=k3.last;const KK=Si(HK);var YK=["valueAccessor"],GK=["dataKey","clockWise","id","textBreakAll","zIndex"];function Km(){return Km=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Km.apply(null,arguments)}function zN(e,t){if(e==null)return{};var r,n,a=XK(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function XK(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var QK=e=>Array.isArray(e.value)?KK(e.value):e.value,P3=m.createContext(void 0),O3=P3.Provider,A3=m.createContext(void 0),ZK=A3.Provider;function JK(){return m.useContext(P3)}function eY(){return m.useContext(A3)}function $f(e){var{valueAccessor:t=QK}=e,r=zN(e,YK),{dataKey:n,clockWise:a,id:i,textBreakAll:o,zIndex:l}=r,c=zN(r,GK),u=JK(),d=eY(),f=u||d;return!f||!f.length?null:m.createElement(bn,{zIndex:l??Gt.label},m.createElement(Er,{className:"recharts-label-list"},f.map((h,p)=>{var g,x=It(n)?t(h,p):vt(h&&h.payload,n),y=It(i)?{}:{id:"".concat(i,"-").concat(p)};return m.createElement(Vi,Km({key:"label-".concat(p)},en(h),c,y,{fill:(g=r.fill)!==null&&g!==void 0?g:h.fill,parentViewBox:h.parentViewBox,value:x,textBreakAll:o,viewBox:h.viewBox,index:p,zIndex:0}))})))}$f.displayName="LabelList";function I1(e){var{label:t}=e;return t?t===!0?m.createElement($f,{key:"labelList-implicit"}):m.isValidElement(t)||$1(t)?m.createElement($f,{key:"labelList-implicit",content:t}):typeof t=="object"?m.createElement($f,Km({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}function yx(){return yx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},yx.apply(null,arguments)}var T3=e=>{var{cx:t,cy:r,r:n,className:a}=e,i=nt("recharts-dot",a);return Se(t)&&Se(r)&&Se(n)?m.createElement("circle",yx({},An(e),tb(e),{className:i,cx:t,cy:r,r:n})):null},M3=e=>e.graphicalItems.polarItems,tY=V([Lt,ld],a1),Ep=V([M3,Wt,tY],i1),rY=V([Ep],s1),Pp=V([rY,pp],o1),nY=V([Pp,Wt,Ep],c1);V([Pp,Wt,Ep],(e,t,r)=>r.length>0?e.flatMap(n=>r.flatMap(a=>{var i,o=vt(n,(i=t.dataKey)!==null&&i!==void 0?i:a.dataKey);return{value:o,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(n=>({value:vt(n,t.dataKey),errorDomain:[]})):e.map(n=>({value:n,errorDomain:[]})));var FN=()=>{},aY=V([Pp,Wt,Ep,_p,Lt],m1),iY=V([Wt,d1,f1,FN,aY,FN,Ze,Lt],h1),D3=V([Wt,Ze,Pp,nY,od,Lt,iY],p1),sY=V([D3,Wt,ec],x1);V([Wt,D3,sY,Lt],b1);var oY={radiusAxis:{},angleAxis:{}},$3=yn({name:"polarAxis",initialState:oY,reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}});$3.actions;var lY=$3.reducer;function BN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function UN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?BN(Object(r),!0).forEach(function(n){cY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):BN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function cY(e,t,r){return(t=uY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function uY(e){var t=dY(e,"string");return typeof t=="symbol"?t:t+""}function dY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fY=(e,t)=>t,L1=V([M3,fY],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),mY=[],R1=(e,t,r)=>(r==null?void 0:r.length)===0?mY:r,I3=V([pp,L1,R1],(e,t,r)=>{var{chartData:n}=e;if(t!=null){var a;if((t==null?void 0:t.data)!=null&&t.data.length>0?a=t.data:a=n,(!a||!a.length)&&r!=null&&(a=r.map(i=>UN(UN({},t.presentationProps),i.props))),a!=null)return a}}),hY=V([I3,L1,R1],(e,t,r)=>{if(!(e==null||t==null))return e.map((n,a)=>{var i,o=vt(n,t.nameKey,t.name),l;return r!=null&&(i=r[a])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?l=r[a].props.fill:typeof n=="object"&&n!=null&&"fill"in n?l=n.fill:l=t.fill,{value:Kl(o,t.dataKey),color:l,payload:n,type:t.legendType}})}),pY=V([I3,L1,R1,pr],(e,t,r,n)=>{if(!(t==null||e==null))return pG({offset:n,pieSettings:t,displayedData:e,cells:r})}),L3={exports:{}},wt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z1=Symbol.for("react.transitional.element"),F1=Symbol.for("react.portal"),Op=Symbol.for("react.fragment"),Ap=Symbol.for("react.strict_mode"),Tp=Symbol.for("react.profiler"),Mp=Symbol.for("react.consumer"),Dp=Symbol.for("react.context"),$p=Symbol.for("react.forward_ref"),Ip=Symbol.for("react.suspense"),Lp=Symbol.for("react.suspense_list"),Rp=Symbol.for("react.memo"),zp=Symbol.for("react.lazy"),gY=Symbol.for("react.view_transition"),vY=Symbol.for("react.client.reference");function na(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case z1:switch(e=e.type,e){case Op:case Tp:case Ap:case Ip:case Lp:case gY:return e;default:switch(e=e&&e.$$typeof,e){case Dp:case $p:case zp:case Rp:return e;case Mp:return e;default:return t}}case F1:return t}}}wt.ContextConsumer=Mp;wt.ContextProvider=Dp;wt.Element=z1;wt.ForwardRef=$p;wt.Fragment=Op;wt.Lazy=zp;wt.Memo=Rp;wt.Portal=F1;wt.Profiler=Tp;wt.StrictMode=Ap;wt.Suspense=Ip;wt.SuspenseList=Lp;wt.isContextConsumer=function(e){return na(e)===Mp};wt.isContextProvider=function(e){return na(e)===Dp};wt.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===z1};wt.isForwardRef=function(e){return na(e)===$p};wt.isFragment=function(e){return na(e)===Op};wt.isLazy=function(e){return na(e)===zp};wt.isMemo=function(e){return na(e)===Rp};wt.isPortal=function(e){return na(e)===F1};wt.isProfiler=function(e){return na(e)===Tp};wt.isStrictMode=function(e){return na(e)===Ap};wt.isSuspense=function(e){return na(e)===Ip};wt.isSuspenseList=function(e){return na(e)===Lp};wt.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Op||e===Tp||e===Ap||e===Ip||e===Lp||typeof e=="object"&&e!==null&&(e.$$typeof===zp||e.$$typeof===Rp||e.$$typeof===Dp||e.$$typeof===Mp||e.$$typeof===$p||e.$$typeof===vY||e.getModuleId!==void 0)};wt.typeOf=na;L3.exports=wt;var xY=L3.exports,WN=e=>typeof e=="string"?e:e?e.displayName||e.name||"Component":"",VN=null,rg=null,R3=e=>{if(e===VN&&Array.isArray(rg))return rg;var t=[];return m.Children.forEach(e,r=>{It(r)||(xY.isFragment(r)?t=t.concat(R3(r.props.children)):t.push(r))}),rg=t,VN=e,t};function B1(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(a=>WN(a)):n=[WN(t)],R3(e).forEach(a=>{var i=vo(a,"type.displayName")||vo(a,"type.name");i&&n.indexOf(i)!==-1&&r.push(a)}),r}var z3=e=>e&&typeof e=="object"&&"clipDot"in e?!!e.clipDot:!0,F3={};(function(e){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});function t(r){var a;if(typeof r!="object"||r==null)return!1;if(Object.getPrototypeOf(r)===null)return!0;if(Object.prototype.toString.call(r)!=="[object Object]"){const i=r[Symbol.toStringTag];return i==null||!((a=Object.getOwnPropertyDescriptor(r,Symbol.toStringTag))!=null&&a.writable)?!1:r.toString()===`[object ${i}]`}let n=r;for(;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(r)===n}e.isPlainObject=t})(F3);var yY=F3.isPlainObject;const bY=Si(yY);var qN,HN,KN,YN,GN;function XN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function QN(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?XN(Object(r),!0).forEach(function(n){wY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):XN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wY(e,t,r){return(t=jY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jY(e){var t=_Y(e,"string");return typeof t=="symbol"?t:t+""}function _Y(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ym(){return Ym=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ym.apply(null,arguments)}function Nc(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var ZN=(e,t,r,n,a)=>{var i=r-n,o;return o=qt(qN||(qN=Nc(["M ",",",""])),e,t),o+=qt(HN||(HN=Nc(["L ",",",""])),e+r,t),o+=qt(KN||(KN=Nc(["L ",",",""])),e+r-i/2,t+a),o+=qt(YN||(YN=Nc(["L ",",",""])),e+r-i/2-n,t+a),o+=qt(GN||(GN=Nc(["L ",","," Z"])),e,t),o},NY={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},SY=e=>{var t=ar(e,NY),{x:r,y:n,upperWidth:a,lowerWidth:i,height:o,className:l}=t,{animationEasing:c,animationDuration:u,animationBegin:d,isUpdateAnimationActive:f}=t,h=m.useRef(null),[p,g]=m.useState(-1),x=m.useRef(a),y=m.useRef(i),v=m.useRef(o),b=m.useRef(r),w=m.useRef(n),j=rd(e,"trapezoid-");if(m.useEffect(()=>{if(h.current&&h.current.getTotalLength)try{var re=h.current.getTotalLength();re&&g(re)}catch{}},[]),r!==+r||n!==+n||a!==+a||i!==+i||o!==+o||a===0&&i===0||o===0)return null;var N=nt("recharts-trapezoid",l);if(!f)return m.createElement("g",null,m.createElement("path",Ym({},en(t),{className:N,d:ZN(r,n,a,i,o)})));var _=x.current,S=y.current,C=v.current,O=b.current,A=w.current,T="0px ".concat(p===-1?1:p,"px"),D="".concat(p,"px 0px"),q=eO(["strokeDasharray"],u,c);return m.createElement(td,{animationId:j,key:j,canBegin:p>0,duration:u,easing:c,isActive:f,begin:d},re=>{var K=Mt(_,a,re),z=Mt(S,i,re),P=Mt(C,o,re),M=Mt(O,r,re),L=Mt(A,n,re);h.current&&(x.current=K,y.current=z,v.current=P,b.current=M,w.current=L);var G=re>0?{transition:q,strokeDasharray:D}:{strokeDasharray:T};return m.createElement("path",Ym({},en(t),{className:N,d:ZN(M,L,K,z,P),ref:h,style:QN(QN({},G),t.style)}))})},kY=["option","shapeType","activeClassName"];function CY(e,t){if(e==null)return{};var r,n,a=EY(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function EY(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function JN(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Gm(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JN(Object(r),!0).forEach(function(n){PY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JN(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PY(e,t,r){return(t=OY(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OY(e){var t=AY(e,"string");return typeof t=="symbol"?t:t+""}function AY(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function TY(e,t){return Gm(Gm({},t),e)}function MY(e,t){return e==="symbols"}function eS(e){var{shapeType:t,elementProps:r}=e;switch(t){case"rectangle":return m.createElement(aO,r);case"trapezoid":return m.createElement(SY,r);case"sector":return m.createElement(lO,r);case"symbols":if(MY(t))return m.createElement(eb,r);break;case"curve":return m.createElement(_b,r);default:return null}}function DY(e){return m.isValidElement(e)?e.props:e}function U1(e){var{option:t,shapeType:r,activeClassName:n="recharts-active-shape"}=e,a=CY(e,kY),i;if(m.isValidElement(t))i=m.cloneElement(t,Gm(Gm({},a),DY(t)));else if(typeof t=="function")i=t(a,a.index);else if(bY(t)&&typeof t!="boolean"){var o=TY(t,a);i=m.createElement(eS,{shapeType:r,elementProps:o})}else{var l=a;i=m.createElement(eS,{shapeType:r,elementProps:l})}return a.isActive?m.createElement(Er,{className:n},i):i}var W1=(e,t,r)=>{var n=kt();return(a,i)=>o=>{e==null||e(a,i,o),n(H4({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}},V1=e=>{var t=kt();return(r,n)=>a=>{e==null||e(r,n,a),t(YV())}},q1=(e,t,r)=>{var n=kt();return(a,i)=>o=>{e==null||e(a,i,o),n(GV({activeIndex:String(i),activeDataKey:t,activeCoordinate:a.tooltipPosition,activeGraphicalItemId:r}))}};function H1(e){var{tooltipEntrySettings:t}=e,r=kt(),n=Hr(),a=m.useRef(null);return m.useLayoutEffect(()=>{n||(a.current===null?r(VV(t)):a.current!==t&&r(qV({prev:a.current,next:t})),a.current=t)},[t,r,n]),m.useLayoutEffect(()=>()=>{a.current&&(r(HV(a.current)),a.current=null)},[r]),null}function B3(e){var{legendPayload:t}=e,r=kt(),n=Hr(),a=m.useRef(null);return m.useLayoutEffect(()=>{n||(a.current===null?r(X5(t)):a.current!==t&&r(Q5({prev:a.current,next:t})),a.current=t)},[r,n,t]),m.useLayoutEffect(()=>()=>{a.current&&(r(Z5(a.current)),a.current=null)},[r]),null}function $Y(e){var{legendPayload:t}=e,r=kt(),n=Ce(Ze),a=m.useRef(null);return m.useLayoutEffect(()=>{n!=="centric"&&n!=="radial"||(a.current===null?r(X5(t)):a.current!==t&&r(Q5({prev:a.current,next:t})),a.current=t)},[r,n,t]),m.useLayoutEffect(()=>()=>{a.current&&(r(Z5(a.current)),a.current=null)},[r]),null}var ng,IY=()=>{var[e]=m.useState(()=>Nu("uid-"));return e},LY=(ng=zf["useId".toString()])!==null&&ng!==void 0?ng:IY;function RY(e,t){var r=LY();return t||(e?"".concat(e,"-").concat(r):r)}var zY=m.createContext(void 0),K1=e=>{var{id:t,type:r,children:n}=e,a=RY("recharts-".concat(r),t);return m.createElement(zY.Provider,{value:a},n(a))},FY={cartesianItems:[],polarItems:[]},U3=yn({name:"graphicalItems",initialState:FY,reducers:{addCartesianGraphicalItem:{reducer(e,t){e.cartesianItems.push(t.payload)},prepare:Tt()},replaceCartesianGraphicalItem:{reducer(e,t){var{prev:r,next:n}=t.payload,a=xa(e).cartesianItems.indexOf(r);a>-1&&(e.cartesianItems[a]=n)},prepare:Tt()},removeCartesianGraphicalItem:{reducer(e,t){var r=xa(e).cartesianItems.indexOf(t.payload);r>-1&&e.cartesianItems.splice(r,1)},prepare:Tt()},addPolarGraphicalItem:{reducer(e,t){e.polarItems.push(t.payload)},prepare:Tt()},removePolarGraphicalItem:{reducer(e,t){var r=xa(e).polarItems.indexOf(t.payload);r>-1&&e.polarItems.splice(r,1)},prepare:Tt()}}}),{addCartesianGraphicalItem:BY,replaceCartesianGraphicalItem:UY,removeCartesianGraphicalItem:WY,addPolarGraphicalItem:VY,removePolarGraphicalItem:qY}=U3.actions,HY=U3.reducer,KY=e=>{var t=kt(),r=m.useRef(null);return m.useLayoutEffect(()=>{r.current===null?t(BY(e)):r.current!==e&&t(UY({prev:r.current,next:e})),r.current=e},[t,e]),m.useLayoutEffect(()=>()=>{r.current&&(t(WY(r.current)),r.current=null)},[t]),null},W3=m.memo(KY);function YY(e){var t=kt();return m.useLayoutEffect(()=>(t(VY(e)),()=>{t(qY(e))}),[t,e]),null}var GY=["key"],XY=["onMouseEnter","onClick","onMouseLeave"],QY=["id"],ZY=["id"];function tS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tS(Object(r),!0).forEach(function(n){JY(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function JY(e,t,r){return(t=eG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eG(e){var t=tG(e,"string");return typeof t=="symbol"?t:t+""}function tG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function js(){return js=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},js.apply(null,arguments)}function Fp(e,t){if(e==null)return{};var r,n,a=rG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function rG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nG(e){var t=m.useMemo(()=>B1(e.children,gd),[e.children]),r=Ce(n=>hY(n,e.id,t));return r==null?null:m.createElement($Y,{legendPayload:r})}var aG=m.memo(e=>{var{dataKey:t,nameKey:r,sectors:n,stroke:a,strokeWidth:i,fill:o,name:l,hide:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:n.map(h=>h.tooltipPayload),positions:n.map(h=>h.tooltipPosition),settings:{stroke:a,strokeWidth:i,fill:o,dataKey:t,nameKey:r,name:Kl(l,t),hide:c,type:u,color:o,unit:"",graphicalItemId:d}};return m.createElement(H1,{tooltipEntrySettings:f})}),iG=(e,t)=>e>t?"start":e<t?"end":"middle",sG=(e,t,r)=>Vr(typeof t=="function"?t(e):t,r,r*.8),oG=(e,t,r)=>{var{top:n,left:a,width:i,height:o}=t,l=iO(i,o),c=a+Vr(e.cx,i,i/2),u=n+Vr(e.cy,o,o/2),d=Vr(e.innerRadius,l,0),f=sG(r,e.outerRadius,l),h=e.maxRadius||Math.sqrt(i*i+o*o)/2;return{cx:c,cy:u,innerRadius:d,outerRadius:f,maxRadius:h}},lG=(e,t)=>{var r=kr(t-e),n=Math.min(Math.abs(t-e),360);return r*n};function cG(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var uG=(e,t)=>{if(m.isValidElement(e))return m.cloneElement(e,t);if(typeof e=="function")return e(t);var r=nt("recharts-pie-label-line",typeof e!="boolean"?e.className:""),n=Fp(t,GY);return m.createElement(_b,js({},n,{type:"linear",className:r}))},dG=(e,t,r)=>{if(m.isValidElement(e))return m.cloneElement(e,t);var n=r;if(typeof e=="function"&&(n=e(t),m.isValidElement(n)))return n;var a=nt("recharts-pie-label-text",cG(e));return m.createElement(Cp,js({},t,{alignmentBaseline:"middle",className:a}),n)};function fG(e){var{sectors:t,props:r,showLabels:n}=e,{label:a,labelLine:i,dataKey:o}=r;if(!n||!a||!t)return null;var l=An(r),c=po(a),u=po(i),d=typeof a=="object"&&"offsetRadius"in a&&typeof a.offsetRadius=="number"&&a.offsetRadius||20,f=t.map((h,p)=>{var g=(h.startAngle+h.endAngle)/2,x=rr(h.cx,h.cy,h.outerRadius+d,g),y=Kt(Kt(Kt(Kt({},l),h),{},{stroke:"none"},c),{},{index:p,textAnchor:iG(x.x,h.cx)},x),v=Kt(Kt(Kt(Kt({},l),h),{},{fill:"none",stroke:h.fill},u),{},{index:p,points:[rr(h.cx,h.cy,h.outerRadius,g),x],key:"line"});return m.createElement(bn,{zIndex:Gt.label,key:"label-".concat(h.startAngle,"-").concat(h.endAngle,"-").concat(h.midAngle,"-").concat(p)},m.createElement(Er,null,i&&uG(i,v),dG(a,y,vt(h,o))))});return m.createElement(Er,{className:"recharts-pie-labels"},f)}function mG(e){var{sectors:t,props:r,showLabels:n}=e,{label:a}=r;return typeof a=="object"&&a!=null&&"position"in a?m.createElement(I1,{label:a}):m.createElement(fG,{sectors:t,props:r,showLabels:n})}function hG(e){var{sectors:t,activeShape:r,inactiveShape:n,allOtherPieProps:a,shape:i,id:o}=e,l=Ce(ws),c=Ce(P1),u=Ce(Dq),{onMouseEnter:d,onClick:f,onMouseLeave:h}=a,p=Fp(a,XY),g=W1(d,a.dataKey,o),x=V1(h),y=q1(f,a.dataKey,o);return t==null||t.length===0?null:m.createElement(m.Fragment,null,t.map((v,b)=>{if((v==null?void 0:v.startAngle)===0&&(v==null?void 0:v.endAngle)===0&&t.length!==1)return null;var w=u==null||u===o,j=String(b)===l&&(c==null||a.dataKey===c)&&w,N=l?n:null,_=r&&j?r:N,S=Kt(Kt({},v),{},{stroke:v.stroke,tabIndex:-1,[z5]:b,[F5]:o});return m.createElement(Er,js({key:"sector-".concat(v==null?void 0:v.startAngle,"-").concat(v==null?void 0:v.endAngle,"-").concat(v.midAngle,"-").concat(b),tabIndex:-1,className:"recharts-pie-sector"},Zu(p,v,b),{onMouseEnter:g(v,b),onMouseLeave:x(v,b),onClick:y(v,b)}),m.createElement(U1,js({option:i??_,index:b,shapeType:"sector",isActive:j},S)))}))}function pG(e){var t,{pieSettings:r,displayedData:n,cells:a,offset:i}=e,{cornerRadius:o,startAngle:l,endAngle:c,dataKey:u,nameKey:d,tooltipType:f}=r,h=Math.abs(r.minAngle),p=lG(l,c),g=Math.abs(p),x=n.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,y=n.filter(_=>vt(_,u,0)!==0).length,v=(g>=360?y:y-1)*x,b=g-y*h-v,w=n.reduce((_,S)=>{var C=vt(S,u,0);return _+(Se(C)?C:0)},0),j;if(w>0){var N;j=n.map((_,S)=>{var C=vt(_,u,0),O=vt(_,d,S),A=oG(r,i,_),T=(Se(C)?C:0)/w,D,q=Kt(Kt({},_),a&&a[S]&&a[S].props);S?D=N.endAngle+kr(p)*x*(C!==0?1:0):D=l;var re=D+kr(p)*((C!==0?h:0)+T*b),K=(D+re)/2,z=(A.innerRadius+A.outerRadius)/2,P=[{name:O,value:C,payload:q,dataKey:u,type:f,graphicalItemId:r.id}],M=rr(A.cx,A.cy,z,K);return N=Kt(Kt(Kt(Kt({},r.presentationProps),{},{percent:T,cornerRadius:typeof o=="string"?parseFloat(o):o,name:O,tooltipPayload:P,midAngle:K,middleRadius:z,tooltipPosition:M},q),A),{},{value:C,dataKey:u,startAngle:D,endAngle:re,payload:q,paddingAngle:kr(p)*x}),N})}return j}function gG(e){var{showLabels:t,sectors:r,children:n}=e,a=m.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return m.createElement(ZK,{value:t?a:void 0},n)}function vG(e){var{props:t,previousSectorsRef:r,id:n}=e,{sectors:a,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,activeShape:u,inactiveShape:d,onAnimationStart:f,onAnimationEnd:h}=t,p=rd(t,"recharts-pie-"),g=r.current,[x,y]=m.useState(!1),v=m.useCallback(()=>{typeof h=="function"&&h(),y(!1)},[h]),b=m.useCallback(()=>{typeof f=="function"&&f(),y(!0)},[f]);return m.createElement(gG,{showLabels:!x,sectors:a},m.createElement(td,{animationId:p,begin:o,duration:l,isActive:i,easing:c,onAnimationStart:b,onAnimationEnd:v,key:p},w=>{var j=[],N=a&&a[0],_=N==null?void 0:N.startAngle;return a==null||a.forEach((S,C)=>{var O=g&&g[C],A=C>0?vo(S,"paddingAngle",0):0;if(O){var T=Mt(O.endAngle-O.startAngle,S.endAngle-S.startAngle,w),D=Kt(Kt({},S),{},{startAngle:_+A,endAngle:_+T+A});j.push(D),_=D.endAngle}else{var{endAngle:q,startAngle:re}=S,K=Mt(0,q-re,w),z=Kt(Kt({},S),{},{startAngle:_+A,endAngle:_+K+A});j.push(z),_=z.endAngle}}),r.current=j,m.createElement(Er,null,m.createElement(hG,{sectors:j,activeShape:u,inactiveShape:d,allOtherPieProps:t,shape:t.shape,id:n}))}),m.createElement(mG,{showLabels:!x,sectors:a,props:t}),t.children)}var xG={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Gt.area};function yG(e){var{id:t}=e,r=Fp(e,QY),{hide:n,className:a,rootTabIndex:i}=e,o=m.useMemo(()=>B1(e.children,gd),[e.children]),l=Ce(d=>pY(d,t,o)),c=m.useRef(null),u=nt("recharts-pie",a);return n||l==null?(c.current=null,m.createElement(Er,{tabIndex:i,className:u})):m.createElement(bn,{zIndex:e.zIndex},m.createElement(aG,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:l,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),m.createElement(Er,{tabIndex:i,className:u},m.createElement(vG,{props:Kt(Kt({},r),{},{sectors:l}),previousSectorsRef:c,id:t})))}function V3(e){var t=ar(e,xG),{id:r}=t,n=Fp(t,ZY),a=An(n);return m.createElement(K1,{id:r,type:"pie"},i=>m.createElement(m.Fragment,null,m.createElement(YY,{type:"pie",id:i,data:n.data,dataKey:n.dataKey,hide:n.hide,angleAxisId:0,radiusAxisId:0,name:n.name,nameKey:n.nameKey,tooltipType:n.tooltipType,legendType:n.legendType,fill:n.fill,cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,paddingAngle:n.paddingAngle,minAngle:n.minAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius,cornerRadius:n.cornerRadius,presentationProps:a,maxRadius:t.maxRadius}),m.createElement(nG,js({},n,{id:i})),m.createElement(yG,js({},n,{id:i}))))}V3.displayName="Pie";var bG=["points"];function rS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ag(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rS(Object(r),!0).forEach(function(n){wG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wG(e,t,r){return(t=jG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jG(e){var t=_G(e,"string");return typeof t=="symbol"?t:t+""}function _G(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xm(){return Xm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xm.apply(null,arguments)}function NG(e,t){if(e==null)return{};var r,n,a=SG(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SG(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function kG(e){var{option:t,dotProps:r,className:n}=e;if(m.isValidElement(t))return m.cloneElement(t,r);if(typeof t=="function")return t(r);var a=nt(n,typeof t!="boolean"?t.className:""),i=r??{},o=NG(i,bG);return m.createElement(T3,Xm({},o,{className:a}))}function CG(e,t){return e==null?!1:t?!0:e.length===1}function EG(e){var{points:t,dot:r,className:n,dotClassName:a,dataKey:i,baseProps:o,needClip:l,clipPathId:c,zIndex:u=Gt.scatter}=e;if(!CG(t,r))return null;var d=z3(r),f=T8(r),h=t.map((g,x)=>{var y,v,b=ag(ag(ag({r:3},o),f),{},{index:x,cx:(y=g.x)!==null&&y!==void 0?y:void 0,cy:(v=g.y)!==null&&v!==void 0?v:void 0,dataKey:i,value:g.value,payload:g.payload,points:t});return m.createElement(kG,{key:"dot-".concat(x),option:r,dotProps:b,className:a})}),p={};return l&&c!=null&&(p.clipPath="url(#clipPath-".concat(d?"":"dots-").concat(c,")")),m.createElement(bn,{zIndex:u},m.createElement(Er,Xm({className:n},p),h))}function nS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function aS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?nS(Object(r),!0).forEach(function(n){PG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PG(e,t,r){return(t=OG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function OG(e){var t=AG(e,"string");return typeof t=="symbol"?t:t+""}function AG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var q3=0,TG={xAxis:{},yAxis:{},zAxis:{}},H3=yn({name:"cartesianAxis",initialState:TG,reducers:{addXAxis:{reducer(e,t){e.xAxis[t.payload.id]=t.payload},prepare:Tt()},replaceXAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.xAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.xAxis[r.id],e.xAxis[n.id]=n)},prepare:Tt()},removeXAxis:{reducer(e,t){delete e.xAxis[t.payload.id]},prepare:Tt()},addYAxis:{reducer(e,t){e.yAxis[t.payload.id]=t.payload},prepare:Tt()},replaceYAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.yAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.yAxis[r.id],e.yAxis[n.id]=n)},prepare:Tt()},removeYAxis:{reducer(e,t){delete e.yAxis[t.payload.id]},prepare:Tt()},addZAxis:{reducer(e,t){e.zAxis[t.payload.id]=t.payload},prepare:Tt()},replaceZAxis:{reducer(e,t){var{prev:r,next:n}=t.payload;e.zAxis[r.id]!==void 0&&(r.id!==n.id&&delete e.zAxis[r.id],e.zAxis[n.id]=n)},prepare:Tt()},removeZAxis:{reducer(e,t){delete e.zAxis[t.payload.id]},prepare:Tt()},updateYAxisWidth(e,t){var{id:r,width:n}=t.payload,a=e.yAxis[r];if(a){var i=a.widthHistory||[];if(i.length===3&&i[0]===i[2]&&n===i[1]&&n!==a.width&&Math.abs(n-i[0])<=1)return;var o=[...i,n].slice(-3);e.yAxis[r]=aS(aS({},e.yAxis[r]),{},{width:n,widthHistory:o})}}}}),{addXAxis:MG,replaceXAxis:DG,removeXAxis:$G,addYAxis:IG,replaceYAxis:LG,removeYAxis:RG,addZAxis:Nle,replaceZAxis:Sle,removeZAxis:kle,updateYAxisWidth:zG}=H3.actions,FG=H3.reducer,BG=V([pr],e=>({top:e.top,bottom:e.bottom,left:e.left,right:e.right})),UG=V([BG,Pi,Oi],(e,t,r)=>{if(!(!e||t==null||r==null))return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,r-e.top-e.bottom)}}),Y1=()=>Ce(UG),WG=()=>Ce(zq);function iS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function ig(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iS(Object(r),!0).forEach(function(n){VG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VG(e,t,r){return(t=qG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qG(e){var t=HG(e,"string");return typeof t=="symbol"?t:t+""}function HG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var KG=e=>{var{point:t,childIndex:r,mainColor:n,activeDot:a,dataKey:i,clipPath:o}=e;if(a===!1||t.x==null||t.y==null)return null;var l={index:r,dataKey:i,cx:t.x,cy:t.y,r:4,fill:n??"none",strokeWidth:2,stroke:"#fff",payload:t.payload,value:t.value},c=ig(ig(ig({},l),po(a)),tb(a)),u;return m.isValidElement(a)?u=m.cloneElement(a,c):typeof a=="function"?u=a(c):u=m.createElement(T3,c),m.createElement(Er,{className:"recharts-active-dot",clipPath:o},u)};function YG(e){var{points:t,mainColor:r,activeDot:n,itemDataKey:a,clipPath:i,zIndex:o=Gt.activeDot}=e,l=Ce(ws),c=WG();if(t==null||c==null)return null;var u=t.find(d=>c.includes(d.payload));return It(u)?null:m.createElement(bn,{zIndex:o},m.createElement(KG,{point:u,childIndex:Number(l),mainColor:r,dataKey:a,activeDot:n,clipPath:i}))}var sS=(e,t,r)=>{var n=r??e;if(!It(n))return Vr(n,t,0)},GG=(e,t,r)=>{var n={},a=e.filter(xp),i=e.filter(u=>u.stackId==null),o=a.reduce((u,d)=>(u[d.stackId]||(u[d.stackId]=[]),u[d.stackId].push(d),u),n),l=Object.entries(o).map(u=>{var[d,f]=u,h=f.map(g=>g.dataKey),p=sS(t,r,f[0].barSize);return{stackId:d,dataKeys:h,barSize:p}}),c=i.map(u=>{var d=[u.dataKey].filter(h=>h!=null),f=sS(t,r,u.barSize);return{stackId:void 0,dataKeys:d,barSize:f}});return[...l,...c]};function oS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function cf(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?oS(Object(r),!0).forEach(function(n){XG(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):oS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XG(e,t,r){return(t=QG(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function QG(e){var t=ZG(e,"string");return typeof t=="symbol"?t:t+""}function ZG(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function JG(e,t,r,n,a){var i=n.length;if(!(i<1)){var o=Vr(e,r,0,!0),l,c=[];if(Ut(n[0].barSize)){var u=!1,d=r/i,f=n.reduce((v,b)=>v+(b.barSize||0),0);f+=(i-1)*o,f>=r&&(f-=(i-1)*o,o=0),f>=r&&d>0&&(u=!0,d*=.9,f=i*d);var h=(r-f)/2>>0,p={offset:h-o,size:0};l=n.reduce((v,b)=>{var w,j={stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:p.offset+p.size+o,size:u?d:(w=b.barSize)!==null&&w!==void 0?w:0}},N=[...v,j];return p=N[N.length-1].position,N},c)}else{var g=Vr(t,r,0,!0);r-2*g-(i-1)*o<=0&&(o=0);var x=(r-2*g-(i-1)*o)/i;x>1&&(x>>=0);var y=Ut(a)?Math.min(x,a):x;l=n.reduce((v,b,w)=>[...v,{stackId:b.stackId,dataKeys:b.dataKeys,position:{offset:g+(x+o)*w+(x-y)/2,size:y}}],c)}return l}}var eX=(e,t,r,n,a,i,o)=>{var l=It(o)?t:o,c=JG(r,n,a!==i?a:i,e,l);return a!==i&&c!=null&&(c=c.map(u=>cf(cf({},u),{},{position:cf(cf({},u.position),{},{offset:u.position.offset-a/2})}))),c},tX=(e,t)=>{var r=r1(t);if(!(!e||r==null||t==null)){var{stackId:n}=t;if(n!=null){var a=e[n];if(a){var{stackedData:i}=a;if(i)return i.find(o=>o.key===r)}}}};function rX(e,t){return e&&typeof e=="object"&&"zIndex"in e&&typeof e.zIndex=="number"&&Ut(e.zIndex)?e.zIndex:t}var K3=e=>{var{chartData:t}=e,r=kt(),n=Hr();return m.useEffect(()=>n?()=>{}:(r(jN(t)),()=>{r(jN(void 0))}),[t,r,n]),null},lS={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},Y3=yn({name:"brush",initialState:lS,reducers:{setBrushSettings(e,t){return t.payload==null?lS:t.payload}}});Y3.actions;var nX=Y3.reducer;function aX(e,t,r){return(t=iX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iX(e){var t=sX(e,"string");return typeof t=="symbol"?t:t+""}function sX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}class G1{static create(t){return new G1(t)}constructor(t){this.scale=t}get domain(){return this.scale.domain}get range(){return this.scale.range}get rangeMin(){return this.range()[0]}get rangeMax(){return this.range()[1]}get bandwidth(){return this.scale.bandwidth}apply(t){var{bandAware:r,position:n}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t!==void 0){if(n)switch(n){case"start":return this.scale(t);case"middle":{var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+a}case"end":{var i=this.bandwidth?this.bandwidth():0;return this.scale(t)+i}default:return this.scale(t)}if(r){var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(t)+o}return this.scale(t)}}isInRange(t){var r=this.range(),n=r[0],a=r[r.length-1];return n<=a?t>=n&&t<=a:t>=a&&t<=n}}aX(G1,"EPS",1e-4);function oX(e){return(e%180+180)%180}var lX=function(t){var{width:r,height:n}=t,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=oX(a),o=i*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},cX={dots:[],areas:[],lines:[]},G3=yn({name:"referenceElements",initialState:cX,reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var r=xa(e).dots.findIndex(n=>n===t.payload);r!==-1&&e.dots.splice(r,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var r=xa(e).areas.findIndex(n=>n===t.payload);r!==-1&&e.areas.splice(r,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var r=xa(e).lines.findIndex(n=>n===t.payload);r!==-1&&e.lines.splice(r,1)}}});G3.actions;var uX=G3.reducer,dX=m.createContext(void 0),fX=e=>{var{children:t}=e,[r]=m.useState("".concat(Nu("recharts"),"-clip")),n=Y1();if(n==null)return null;var{x:a,y:i,width:o,height:l}=n;return m.createElement(dX.Provider,{value:r},m.createElement("defs",null,m.createElement("clipPath",{id:r},m.createElement("rect",{x:a,y:i,height:l,width:o}))),t)};function X3(e,t){if(t<1)return[];if(t===1)return e;for(var r=[],n=0;n<e.length;n+=t){var a=e[n];a!==void 0&&r.push(a)}return r}function mX(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return lX(n,r)}function hX(e,t,r){var n=r==="width",{x:a,y:i,width:o,height:l}=e;return t===1?{start:n?a:i,end:n?a+o:i+l}:{start:n?a+o:i+l,end:n?a:i}}function Du(e,t,r,n,a){if(e*t<e*n||e*t>e*a)return!1;var i=r();return e*(t-e*i/2-n)>=0&&e*(t+e*i/2-a)<=0}function pX(e,t){return X3(e,t+1)}function gX(e,t,r,n,a){for(var i=(n||[]).slice(),{start:o,end:l}=t,c=0,u=1,d=o,f=function(){var g=n==null?void 0:n[c];if(g===void 0)return{v:X3(n,u)};var x=c,y,v=()=>(y===void 0&&(y=r(g,x)),y),b=g.coordinate,w=c===0||Du(e,b,v,d,l);w||(c=0,d=o,u+=1),w&&(d=b+e*(v()/2+a),c+=u)},h;u<=i.length;)if(h=f(),h)return h.v;return[]}function vX(e,t,r,n,a){var i=(n||[]).slice(),o=i.length;if(o===0)return[];for(var{start:l,end:c}=t,u=1;u<=o;u++){for(var d=(o-1)%u,f=l,h=!0,p=function(){var b=n[g],w=g,j,N=()=>(j===void 0&&(j=r(b,w)),j),_=b.coordinate,S=g===d||Du(e,_,N,f,c);if(!S)return h=!1,1;S&&(f=_+e*(N()/2+a))},g=d;g<o&&!p();g+=u);if(h){for(var x=[],y=d;y<o;y+=u)x.push(n[y]);return x}}return[]}function cS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cS(Object(r),!0).forEach(function(n){xX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xX(e,t,r){return(t=yX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yX(e){var t=bX(e,"string");return typeof t=="symbol"?t:t+""}function bX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function wX(e,t,r,n,a){for(var i=(n||[]).slice(),o=i.length,{start:l}=t,{end:c}=t,u=function(h){var p=i[h],g,x=()=>(g===void 0&&(g=r(p,h)),g);if(h===o-1){var y=e*(p.coordinate+e*x()/2-c);i[h]=p=Br(Br({},p),{},{tickCoord:y>0?p.coordinate-y*e:p.coordinate})}else i[h]=p=Br(Br({},p),{},{tickCoord:p.coordinate});if(p.tickCoord!=null){var v=Du(e,p.tickCoord,x,l,c);v&&(c=p.tickCoord-e*(x()/2+a),i[h]=Br(Br({},p),{},{isShow:!0}))}},d=o-1;d>=0;d--)u(d);return i}function jX(e,t,r,n,a,i){var o=(n||[]).slice(),l=o.length,{start:c,end:u}=t;if(i){var d=n[l-1],f=r(d,l-1),h=e*(d.coordinate+e*f/2-u);if(o[l-1]=d=Br(Br({},d),{},{tickCoord:h>0?d.coordinate-h*e:d.coordinate}),d.tickCoord!=null){var p=Du(e,d.tickCoord,()=>f,c,u);p&&(u=d.tickCoord-e*(f/2+a),o[l-1]=Br(Br({},d),{},{isShow:!0}))}}for(var g=i?l-1:l,x=function(b){var w=o[b],j,N=()=>(j===void 0&&(j=r(w,b)),j);if(b===0){var _=e*(w.coordinate-e*N()/2-c);o[b]=w=Br(Br({},w),{},{tickCoord:_<0?w.coordinate-_*e:w.coordinate})}else o[b]=w=Br(Br({},w),{},{tickCoord:w.coordinate});if(w.tickCoord!=null){var S=Du(e,w.tickCoord,N,c,u);S&&(c=w.tickCoord+e*(N()/2+a),o[b]=Br(Br({},w),{},{isShow:!0}))}},y=0;y<g;y++)x(y);return o}function X1(e,t,r){var{tick:n,ticks:a,viewBox:i,minTickGap:o,orientation:l,interval:c,tickFormatter:u,unit:d,angle:f}=e;if(!a||!a.length||!n)return[];if(Se(c)||lp.isSsr){var h;return(h=pX(a,Se(c)?c:0))!==null&&h!==void 0?h:[]}var p=[],g=l==="top"||l==="bottom"?"width":"height",x=d&&g==="width"?Xc(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},y=(w,j)=>{var N=typeof u=="function"?u(w.value,j):w.value;return g==="width"?mX(Xc(N,{fontSize:t,letterSpacing:r}),x,f):Xc(N,{fontSize:t,letterSpacing:r})[g]},v=a.length>=2?kr(a[1].coordinate-a[0].coordinate):1,b=hX(i,v,g);return c==="equidistantPreserveStart"?gX(v,b,y,a,o):c==="equidistantPreserveEnd"?vX(v,b,y,a,o):(c==="preserveStart"||c==="preserveStartEnd"?p=jX(v,b,y,a,o,c==="preserveStartEnd"):p=wX(v,b,y,a,o),p.filter(w=>w.isShow))}var _X=e=>{var{ticks:t,label:r,labelGapWithTick:n=5,tickSize:a=0,tickMargin:i=0}=e,o=0;if(t){Array.from(t).forEach(d=>{if(d){var f=d.getBoundingClientRect();f.width>o&&(o=f.width)}});var l=r?r.getBoundingClientRect().width:0,c=a+i,u=o+c+l+(r?n:0);return Math.round(u)}return 0},NX=["axisLine","width","height","className","hide","ticks","axisType"];function SX(e,t){if(e==null)return{};var r,n,a=kX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function kX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function wo(){return wo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wo.apply(null,arguments)}function uS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function er(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uS(Object(r),!0).forEach(function(n){CX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function CX(e,t,r){return(t=EX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function EX(e){var t=PX(e,"string");return typeof t=="symbol"?t:t+""}function PX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ci={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Gt.axis};function OX(e){var{x:t,y:r,width:n,height:a,orientation:i,mirror:o,axisLine:l,otherSvgProps:c}=e;if(!l)return null;var u=er(er(er({},c),An(l)),{},{fill:"none"});if(i==="top"||i==="bottom"){var d=+(i==="top"&&!o||i==="bottom"&&o);u=er(er({},u),{},{x1:t,y1:r+d*a,x2:t+n,y2:r+d*a})}else{var f=+(i==="left"&&!o||i==="right"&&o);u=er(er({},u),{},{x1:t+f*n,y1:r,x2:t+f*n,y2:r+a})}return m.createElement("line",wo({},u,{className:nt("recharts-cartesian-axis-line",vo(l,"className"))}))}function AX(e,t,r,n,a,i,o,l,c){var u,d,f,h,p,g,x=l?-1:1,y=e.tickSize||o,v=Se(e.tickCoord)?e.tickCoord:e.coordinate;switch(i){case"top":u=d=e.coordinate,h=r+ +!l*a,f=h-x*y,g=f-x*c,p=v;break;case"left":f=h=e.coordinate,d=t+ +!l*n,u=d-x*y,p=u-x*c,g=v;break;case"right":f=h=e.coordinate,d=t+ +l*n,u=d+x*y,p=u+x*c,g=v;break;default:u=d=e.coordinate,h=r+ +l*a,f=h+x*y,g=f+x*c,p=v;break}return{line:{x1:u,y1:f,x2:d,y2:h},tick:{x:p,y:g}}}function TX(e,t){switch(e){case"left":return t?"start":"end";case"right":return t?"end":"start";default:return"middle"}}function MX(e,t){switch(e){case"left":case"right":return"middle";case"top":return t?"start":"end";default:return t?"end":"start"}}function DX(e){var{option:t,tickProps:r,value:n}=e,a,i=nt(r.className,"recharts-cartesian-axis-tick-value");if(m.isValidElement(t))a=m.cloneElement(t,er(er({},r),{},{className:i}));else if(typeof t=="function")a=t(er(er({},r),{},{className:i}));else{var o="recharts-cartesian-axis-tick-value";typeof t!="boolean"&&(o=nt(o,t==null?void 0:t.className)),a=m.createElement(Cp,wo({},r,{className:o}),n)}return a}var $X=m.forwardRef((e,t)=>{var{ticks:r=[],tick:n,tickLine:a,stroke:i,tickFormatter:o,unit:l,padding:c,tickTextProps:u,orientation:d,mirror:f,x:h,y:p,width:g,height:x,tickSize:y,tickMargin:v,fontSize:b,letterSpacing:w,getTicksConfig:j,events:N,axisType:_}=e,S=X1(er(er({},j),{},{ticks:r}),b,w),C=TX(d,f),O=MX(d,f),A=An(j),T=po(n),D={};typeof a=="object"&&(D=a);var q=er(er({},A),{},{fill:"none"},D),re=S.map(P=>er({entry:P},AX(P,h,p,g,x,d,y,f,v))),K=re.map(P=>{var{entry:M,line:L}=P;return m.createElement(Er,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(M.value,"-").concat(M.coordinate,"-").concat(M.tickCoord)},a&&m.createElement("line",wo({},q,L,{className:nt("recharts-cartesian-axis-tick-line",vo(a,"className"))})))}),z=re.map((P,M)=>{var{entry:L,tick:G}=P,$=er(er(er(er({textAnchor:C,verticalAnchor:O},A),{},{stroke:"none",fill:i},T),G),{},{index:M,payload:L,visibleTicksCount:S.length,tickFormatter:o,padding:c},u);return m.createElement(Er,wo({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(L.value,"-").concat(L.coordinate,"-").concat(L.tickCoord)},Zu(N,L,M)),n&&m.createElement(DX,{option:n,tickProps:$,value:"".concat(typeof o=="function"?o(L.value,M):L.value).concat(l||"")}))});return m.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(_,"-ticks")},z.length>0&&m.createElement(bn,{zIndex:Gt.label},m.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(_,"-tick-labels"),ref:t},z)),K.length>0&&m.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(_,"-tick-lines")},K))}),IX=m.forwardRef((e,t)=>{var{axisLine:r,width:n,height:a,className:i,hide:o,ticks:l,axisType:c}=e,u=SX(e,NX),[d,f]=m.useState(""),[h,p]=m.useState(""),g=m.useRef(null);m.useImperativeHandle(t,()=>({getCalculatedWidth:()=>{var y;return _X({ticks:g.current,label:(y=e.labelRef)===null||y===void 0?void 0:y.current,labelGapWithTick:5,tickSize:e.tickSize,tickMargin:e.tickMargin})}}));var x=m.useCallback(y=>{if(y){var v=y.getElementsByClassName("recharts-cartesian-axis-tick-value");g.current=v;var b=v[0];if(b){var w=window.getComputedStyle(b),j=w.fontSize,N=w.letterSpacing;(j!==d||N!==h)&&(f(j),p(N))}}},[d,h]);return o||n!=null&&n<=0||a!=null&&a<=0?null:m.createElement(bn,{zIndex:e.zIndex},m.createElement(Er,{className:nt("recharts-cartesian-axis",i)},m.createElement(OX,{x:e.x,y:e.y,width:n,height:a,orientation:e.orientation,mirror:e.mirror,axisLine:r,otherSvgProps:An(e)}),m.createElement($X,{ref:x,axisType:c,events:u,fontSize:d,getTicksConfig:e,height:e.height,letterSpacing:h,mirror:e.mirror,orientation:e.orientation,padding:e.padding,stroke:e.stroke,tick:e.tick,tickFormatter:e.tickFormatter,tickLine:e.tickLine,tickMargin:e.tickMargin,tickSize:e.tickSize,tickTextProps:e.tickTextProps,ticks:l,unit:e.unit,width:e.width,x:e.x,y:e.y}),m.createElement($K,{x:e.x,y:e.y,width:e.width,height:e.height,lowerWidth:e.width,upperWidth:e.width},m.createElement(qK,{label:e.label,labelRef:e.labelRef}),e.children)))}),Q1=m.forwardRef((e,t)=>{var r=ar(e,ci);return m.createElement(IX,wo({},r,{ref:t}))});Q1.displayName="CartesianAxis";var LX=["x1","y1","x2","y2","key"],RX=["offset"],zX=["xAxisId","yAxisId"],FX=["xAxisId","yAxisId"];function dS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Wr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?dS(Object(r),!0).forEach(function(n){BX(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function BX(e,t,r){return(t=UX(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UX(e){var t=WX(e,"string");return typeof t=="symbol"?t:t+""}function WX(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function to(){return to=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},to.apply(null,arguments)}function Qm(e,t){if(e==null)return{};var r,n,a=VX(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function VX(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var qX=e=>{var{fill:t}=e;if(!t||t==="none")return null;var{fillOpacity:r,x:n,y:a,width:i,height:o,ry:l}=e;return m.createElement("rect",{x:n,y:a,ry:l,width:i,height:o,stroke:"none",fill:t,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function Q3(e){var{option:t,lineItemProps:r}=e,n;if(m.isValidElement(t))n=m.cloneElement(t,r);else if(typeof t=="function")n=t(r);else{var a,{x1:i,y1:o,x2:l,y2:c,key:u}=r,d=Qm(r,LX),f=(a=An(d))!==null&&a!==void 0?a:{},h=Qm(f,RX);n=m.createElement("line",to({},h,{x1:i,y1:o,x2:l,y2:c,fill:"none",key:u}))}return n}function HX(e){var{x:t,width:r,horizontal:n=!0,horizontalPoints:a}=e;if(!n||!a||!a.length)return null;var i=Qm(e,zX),o=a.map((l,c)=>{var u=Wr(Wr({},i),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return m.createElement(Q3,{key:"line-".concat(c),option:n,lineItemProps:u})});return m.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function KX(e){var{y:t,height:r,vertical:n=!0,verticalPoints:a}=e;if(!n||!a||!a.length)return null;var i=Qm(e,FX),o=a.map((l,c)=>{var u=Wr(Wr({},i),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return m.createElement(Q3,{option:n,lineItemProps:u,key:"line-".concat(c)})});return m.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function YX(e){var{horizontalFill:t,fillOpacity:r,x:n,y:a,width:i,height:o,horizontalPoints:l,horizontal:c=!0}=e;if(!c||!t||!t.length||l==null)return null;var u=l.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%t.length;return m.createElement("rect",{key:"react-".concat(h),y:f,x:n,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},d)}function GX(e){var{vertical:t=!0,verticalFill:r,fillOpacity:n,x:a,y:i,width:o,height:l,verticalPoints:c}=e;if(!t||!r||!r.length)return null;var u=c.map(f=>Math.round(f+a-a)).sort((f,h)=>f-h);a!==u[0]&&u.unshift(0);var d=u.map((f,h)=>{var p=!u[h+1],g=p?a+o-f:u[h+1]-f;if(g<=0)return null;var x=h%r.length;return m.createElement("rect",{key:"react-".concat(h),x:f,y:i,width:g,height:l,stroke:"none",fill:r[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return m.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var XX=(e,t)=>{var{xAxis:r,width:n,height:a,offset:i}=e;return I5(X1(Wr(Wr(Wr({},ci),r),{},{ticks:L5(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.left,i.left+i.width,t)},QX=(e,t)=>{var{yAxis:r,width:n,height:a,offset:i}=e;return I5(X1(Wr(Wr(Wr({},ci),r),{},{ticks:L5(r,!0),viewBox:{x:0,y:0,width:n,height:a}})),i.top,i.top+i.height,t)},ZX={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[],xAxisId:0,yAxisId:0,syncWithTicks:!1,zIndex:Gt.grid};function Zm(e){var t=wb(),r=jb(),n=Y5(),a=Wr(Wr({},ar(e,ZX)),{},{x:Se(e.x)?e.x:n.left,y:Se(e.y)?e.y:n.top,width:Se(e.width)?e.width:n.width,height:Se(e.height)?e.height:n.height}),{xAxisId:i,yAxisId:o,x:l,y:c,width:u,height:d,syncWithTicks:f,horizontalValues:h,verticalValues:p}=a,g=Hr(),x=Ce(O=>dN(O,"xAxis",i,g)),y=Ce(O=>dN(O,"yAxis",o,g));if(!Ba(u)||!Ba(d)||!Se(l)||!Se(c))return null;var v=a.verticalCoordinatesGenerator||XX,b=a.horizontalCoordinatesGenerator||QX,{horizontalPoints:w,verticalPoints:j}=a;if((!w||!w.length)&&typeof b=="function"){var N=h&&h.length,_=b({yAxis:y?Wr(Wr({},y),{},{ticks:N?h:y.ticks}):void 0,width:t??u,height:r??d,offset:n},N?!0:f);Em(Array.isArray(_),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(typeof _,"]")),Array.isArray(_)&&(w=_)}if((!j||!j.length)&&typeof v=="function"){var S=p&&p.length,C=v({xAxis:x?Wr(Wr({},x),{},{ticks:S?p:x.ticks}):void 0,width:t??u,height:r??d,offset:n},S?!0:f);Em(Array.isArray(C),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(typeof C,"]")),Array.isArray(C)&&(j=C)}return m.createElement(bn,{zIndex:a.zIndex},m.createElement("g",{className:"recharts-cartesian-grid"},m.createElement(qX,{fill:a.fill,fillOpacity:a.fillOpacity,x:a.x,y:a.y,width:a.width,height:a.height,ry:a.ry}),m.createElement(YX,to({},a,{horizontalPoints:w})),m.createElement(GX,to({},a,{verticalPoints:j})),m.createElement(HX,to({},a,{offset:n,horizontalPoints:w,xAxis:x,yAxis:y})),m.createElement(KX,to({},a,{offset:n,verticalPoints:j,xAxis:x,yAxis:y}))))}Zm.displayName="CartesianGrid";var JX={},Z3=yn({name:"errorBars",initialState:JX,reducers:{addErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]||(e[r]=[]),e[r].push(n)},replaceErrorBar:(e,t)=>{var{itemId:r,prev:n,next:a}=t.payload;e[r]&&(e[r]=e[r].map(i=>i.dataKey===n.dataKey&&i.direction===n.direction?a:i))},removeErrorBar:(e,t)=>{var{itemId:r,errorBar:n}=t.payload;e[r]&&(e[r]=e[r].filter(a=>a.dataKey!==n.dataKey||a.direction!==n.direction))}}});Z3.actions;var eQ=Z3.reducer,tQ=["children"];function rQ(e,t){if(e==null)return{};var r,n,a=nQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function nQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var aQ={data:[],xAxisId:"xAxis-0",yAxisId:"yAxis-0",dataPointFormatter:()=>({x:0,y:0,value:0}),errorBarOffset:0},iQ=m.createContext(aQ);function J3(e){var{children:t}=e,r=rQ(e,tQ);return m.createElement(iQ.Provider,{value:r},t)}function Z1(e,t){var r,n,a=Ce(u=>Mi(u,e)),i=Ce(u=>Di(u,t)),o=(r=a==null?void 0:a.allowDataOverflow)!==null&&r!==void 0?r:br.allowDataOverflow,l=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:wr.allowDataOverflow,c=o||l;return{needClip:c,needClipX:o,needClipY:l}}function eA(e){var{xAxisId:t,yAxisId:r,clipPathId:n}=e,a=Y1(),{needClipX:i,needClipY:o,needClip:l}=Z1(t,r);if(!l||!a)return null;var{x:c,y:u,width:d,height:f}=a;return m.createElement("clipPath",{id:"clipPath-".concat(n)},m.createElement("rect",{x:i?c:c-d/2,y:o?u:u-f/2,width:i?d:d*2,height:o?f:f*2}))}var tA=(e,t,r,n)=>bs(e,"xAxis",t,n),rA=(e,t,r,n)=>ys(e,"xAxis",t,n),nA=(e,t,r,n)=>bs(e,"yAxis",r,n),aA=(e,t,r,n)=>ys(e,"yAxis",r,n),sQ=V([Ze,tA,nA,rA,aA],(e,t,r,n,a)=>As(e,"xAxis")?Ml(t,n,!1):Ml(r,a,!1)),oQ=(e,t,r,n,a)=>a;function lQ(e){return e.type==="line"}var cQ=V([wp,oQ],(e,t)=>e.filter(lQ).find(r=>r.id===t)),uQ=V([Ze,tA,nA,rA,aA,cQ,sQ,Kb],(e,t,r,n,a,i,o,l)=>{var{chartData:c,dataStartIndex:u,dataEndIndex:d}=l;if(!(i==null||t==null||r==null||n==null||a==null||n.length===0||a.length===0||o==null||e!=="horizontal"&&e!=="vertical")){var{dataKey:f,data:h}=i,p;if(h!=null&&h.length>0?p=h:p=c==null?void 0:c.slice(u,d+1),p!=null)return tZ({layout:e,xAxis:t,yAxis:r,xAxisTicks:n,yAxisTicks:a,dataKey:f,bandSize:o,displayedData:p})}});function dQ(e){var t=po(e),r=3,n=2;if(t!=null){var{r:a,strokeWidth:i}=t,o=Number(a),l=Number(i);return(Number.isNaN(o)||o<0)&&(o=r),(Number.isNaN(l)||l<0)&&(l=n),{r:o,strokeWidth:l}}return{r,strokeWidth:n}}var iA={exports:{}},sA={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vd=m;function fQ(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mQ=typeof Object.is=="function"?Object.is:fQ,hQ=vd.useSyncExternalStore,pQ=vd.useRef,gQ=vd.useEffect,vQ=vd.useMemo,xQ=vd.useDebugValue;sA.useSyncExternalStoreWithSelector=function(e,t,r,n,a){var i=pQ(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=vQ(function(){function c(p){if(!u){if(u=!0,d=p,p=n(p),a!==void 0&&o.hasValue){var g=o.value;if(a(g,p))return f=g}return f=p}if(g=f,mQ(d,p))return g;var x=n(p);return a!==void 0&&a(g,x)?(d=p,g):(d=p,f=x)}var u=!1,d,f,h=r===void 0?null:r;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,r,n,a]);var l=hQ(e,i[0],i[1]);return gQ(function(){o.hasValue=!0,o.value=l},[l]),xQ(l),l};iA.exports=sA;var yQ=iA.exports;function bQ(e){e()}function wQ(){let e=null,t=null;return{clear(){e=null,t=null},notify(){bQ(()=>{let r=e;for(;r;)r.callback(),r=r.next})},get(){const r=[];let n=e;for(;n;)r.push(n),n=n.next;return r},subscribe(r){let n=!0;const a=t={callback:r,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!n||e===null||(n=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var fS={notify(){},get:()=>[]};function jQ(e,t){let r,n=fS,a=0,i=!1;function o(x){d();const y=n.subscribe(x);let v=!1;return()=>{v||(v=!0,y(),f())}}function l(){n.notify()}function c(){g.onStateChange&&g.onStateChange()}function u(){return i}function d(){a++,r||(r=t?t.addNestedSub(c):e.subscribe(c),n=wQ())}function f(){a--,r&&a===0&&(r(),r=void 0,n.clear(),n=fS)}function h(){i||(i=!0,d())}function p(){i&&(i=!1,f())}const g={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:h,tryUnsubscribe:p,getListeners:()=>n};return g}var _Q=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",NQ=_Q(),SQ=()=>typeof navigator<"u"&&navigator.product==="ReactNative",kQ=SQ(),CQ=()=>NQ||kQ?m.useLayoutEffect:m.useEffect,EQ=CQ();function mS(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function PQ(e,t){if(mS(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(let a=0;a<r.length;a++)if(!Object.prototype.hasOwnProperty.call(t,r[a])||!mS(e[r[a]],t[r[a]]))return!1;return!0}var sg=Symbol.for("react-redux-context"),og=typeof globalThis<"u"?globalThis:{};function OQ(){if(!m.createContext)return{};const e=og[sg]??(og[sg]=new Map);let t=e.get(m.createContext);return t||(t=m.createContext(null),e.set(m.createContext,t)),t}var AQ=OQ();function TQ(e){const{children:t,context:r,serverState:n,store:a}=e,i=m.useMemo(()=>{const c=jQ(a);return{store:a,subscription:c,getServerState:n?()=>n:void 0}},[a,n]),o=m.useMemo(()=>a.getState(),[a]);EQ(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=r||AQ;return m.createElement(l.Provider,{value:i},t)}var MQ=TQ,DQ=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function $Q(e,t){return e==null&&t==null?!0:typeof e=="number"&&typeof t=="number"?e===t||e!==e&&t!==t:e===t}function Bp(e,t){var r=new Set([...Object.keys(e),...Object.keys(t)]);for(var n of r)if(DQ.has(n)){if(e[n]==null&&t[n]==null)continue;if(!PQ(e[n],t[n]))return!1}else if(!$Q(e[n],t[n]))return!1;return!0}var IQ=["id"],LQ=["type","layout","connectNulls","needClip","shape"],RQ=["activeDot","animateNewValues","animationBegin","animationDuration","animationEasing","connectNulls","dot","hide","isAnimationActive","label","legendType","xAxisId","yAxisId","id"];function $u(){return $u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},$u.apply(null,arguments)}function hS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Oa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?hS(Object(r),!0).forEach(function(n){zQ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):hS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function zQ(e,t,r){return(t=FQ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function FQ(e){var t=BQ(e,"string");return typeof t=="symbol"?t:t+""}function BQ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function J1(e,t){if(e==null)return{};var r,n,a=UQ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function UQ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var WQ=e=>{var{dataKey:t,name:r,stroke:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Kl(r,t),payload:e}]},VQ=m.memo(e=>{var{dataKey:t,data:r,stroke:n,strokeWidth:a,fill:i,name:o,hide:l,unit:c,tooltipType:u,id:d}=e,f={dataDefinedOnItem:r,positions:void 0,settings:{stroke:n,strokeWidth:a,fill:i,dataKey:t,nameKey:void 0,name:Kl(o,t),hide:l,type:u,color:n,unit:c,graphicalItemId:d}};return m.createElement(H1,{tooltipEntrySettings:f})}),oA=(e,t)=>"".concat(t,"px ").concat(e-t,"px");function qQ(e,t){for(var r=e.length%2!==0?[...e,0]:e,n=[],a=0;a<t;++a)n=[...n,...r];return n}var HQ=(e,t,r)=>{var n=r.reduce((f,h)=>f+h);if(!n)return oA(t,e);for(var a=Math.floor(e/n),i=e%n,o=t-e,l=[],c=0,u=0;c<r.length;u+=r[c],++c)if(u+r[c]>i){l=[...r.slice(0,c),i-u];break}var d=l.length%2===0?[0,o]:[o];return[...qQ(r,a),...l,...d].map(f=>"".concat(f,"px")).join(", ")};function KQ(e){var{clipPathId:t,points:r,props:n}=e,{dot:a,dataKey:i,needClip:o}=n,l=J1(n,IQ),c=An(l);return m.createElement(EG,{points:r,dot:a,className:"recharts-line-dots",dotClassName:"recharts-line-dot",dataKey:i,baseProps:c,needClip:o,clipPathId:t})}function YQ(e){var{showLabels:t,children:r,points:n}=e,a=m.useMemo(()=>n==null?void 0:n.map(i=>{var o,l,c={x:(o=i.x)!==null&&o!==void 0?o:0,y:(l=i.y)!==null&&l!==void 0?l:0,width:0,lowerWidth:0,upperWidth:0,height:0};return Oa(Oa({},c),{},{value:i.value,payload:i.payload,viewBox:c,parentViewBox:void 0,fill:void 0})}),[n]);return m.createElement(O3,{value:t?a:void 0},r)}function pS(e){var{clipPathId:t,pathRef:r,points:n,strokeDasharray:a,props:i}=e,{type:o,layout:l,connectNulls:c,needClip:u,shape:d}=i,f=J1(i,LQ),h=Oa(Oa({},en(f)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(t,")"):void 0,points:n,type:o,layout:l,connectNulls:c,strokeDasharray:a??i.strokeDasharray});return m.createElement(m.Fragment,null,(n==null?void 0:n.length)>1&&m.createElement(U1,$u({shapeType:"curve",option:d},h,{pathRef:r})),m.createElement(KQ,{points:n,clipPathId:t,props:i}))}function GQ(e){try{return e&&e.getTotalLength&&e.getTotalLength()||0}catch{return 0}}function XQ(e){var{clipPathId:t,props:r,pathRef:n,previousPointsRef:a,longestAnimatedLengthRef:i}=e,{points:o,strokeDasharray:l,isAnimationActive:c,animationBegin:u,animationDuration:d,animationEasing:f,animateNewValues:h,width:p,height:g,onAnimationEnd:x,onAnimationStart:y}=r,v=a.current,b=rd(o,"recharts-line-"),w=m.useRef(b),[j,N]=m.useState(!1),_=!j,S=m.useCallback(()=>{typeof x=="function"&&x(),N(!1)},[x]),C=m.useCallback(()=>{typeof y=="function"&&y(),N(!0)},[y]),O=GQ(n.current),A=m.useRef(0);w.current!==b&&(A.current=i.current,w.current=b);var T=A.current;return m.createElement(YQ,{points:o,showLabels:_},r.children,m.createElement(td,{animationId:b,begin:u,duration:d,isActive:c,easing:f,onAnimationEnd:S,onAnimationStart:C,key:b},D=>{var q=Mt(T,O+T,D),re=Math.min(q,O),K;if(c)if(l){var z="".concat(l).split(/[,\s]+/gim).map(L=>parseFloat(L));K=HQ(re,O,z)}else K=oA(O,re);else K=l==null?void 0:String(l);if(D>0&&O>0&&(a.current=o,i.current=Math.max(i.current,re)),v){var P=v.length/o.length,M=D===1?o:o.map((L,G)=>{var $=Math.floor(G*P);if(v[$]){var U=v[$];return Oa(Oa({},L),{},{x:Mt(U.x,L.x,D),y:Mt(U.y,L.y,D)})}return h?Oa(Oa({},L),{},{x:Mt(p*2,L.x,D),y:Mt(g/2,L.y,D)}):Oa(Oa({},L),{},{x:L.x,y:L.y})});return a.current=M,m.createElement(pS,{props:r,points:M,clipPathId:t,pathRef:n,strokeDasharray:K})}return m.createElement(pS,{props:r,points:o,clipPathId:t,pathRef:n,strokeDasharray:K})}),m.createElement(I1,{label:r.label}))}function QQ(e){var{clipPathId:t,props:r}=e,n=m.useRef(null),a=m.useRef(0),i=m.useRef(null);return m.createElement(XQ,{props:r,clipPathId:t,previousPointsRef:n,longestAnimatedLengthRef:a,pathRef:i})}var ZQ=(e,t)=>{var r,n;return{x:(r=e.x)!==null&&r!==void 0?r:void 0,y:(n=e.y)!==null&&n!==void 0?n:void 0,value:e.value,errorVal:vt(e.payload,t)}};class JQ extends m.Component{render(){var{hide:t,dot:r,points:n,className:a,xAxisId:i,yAxisId:o,top:l,left:c,width:u,height:d,id:f,needClip:h,zIndex:p}=this.props;if(t)return null;var g=nt("recharts-line",a),x=f,{r:y,strokeWidth:v}=dQ(r),b=z3(r),w=y*2+v,j=h?"url(#clipPath-".concat(b?"":"dots-").concat(x,")"):void 0;return m.createElement(bn,{zIndex:p},m.createElement(Er,{className:g},h&&m.createElement("defs",null,m.createElement(eA,{clipPathId:x,xAxisId:i,yAxisId:o}),!b&&m.createElement("clipPath",{id:"clipPath-dots-".concat(x)},m.createElement("rect",{x:c-w/2,y:l-w/2,width:u+w,height:d+w}))),m.createElement(J3,{xAxisId:i,yAxisId:o,data:n,dataPointFormatter:ZQ,errorBarOffset:0},m.createElement(QQ,{props:this.props,clipPathId:x}))),m.createElement(YG,{activeDot:this.props.activeDot,points:n,mainColor:this.props.stroke,itemDataKey:this.props.dataKey,clipPath:j}))}}var lA={activeDot:!0,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!0,fill:"#fff",hide:!1,isAnimationActive:"auto",label:!1,legendType:"line",stroke:"#3182bd",strokeWidth:1,xAxisId:0,yAxisId:0,zIndex:Gt.line,type:"linear"};function eZ(e){var t=ar(e,lA),{activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,connectNulls:l,dot:c,hide:u,isAnimationActive:d,label:f,legendType:h,xAxisId:p,yAxisId:g,id:x}=t,y=J1(t,RQ),{needClip:v}=Z1(p,g),b=Y1(),w=Yl(),j=Hr(),N=Ce(A=>uQ(A,p,g,j,x));if(w!=="horizontal"&&w!=="vertical"||N==null||b==null)return null;var{height:_,width:S,x:C,y:O}=b;return m.createElement(JQ,$u({},y,{id:x,connectNulls:l,dot:c,activeDot:r,animateNewValues:n,animationBegin:a,animationDuration:i,animationEasing:o,isAnimationActive:d,hide:u,label:f,legendType:h,xAxisId:p,yAxisId:g,points:N,layout:w,height:_,width:S,left:C,top:O,needClip:v}))}function tZ(e){var{layout:t,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,dataKey:o,bandSize:l,displayedData:c}=e;return c.map((u,d)=>{var f=vt(u,o);if(t==="horizontal"){var h=C2({axis:r,ticks:a,bandSize:l,entry:u,index:d}),p=It(f)?null:n.scale(f);return{x:h,y:p,value:f,payload:u}}var g=It(f)?null:r.scale(f),x=C2({axis:n,ticks:i,bandSize:l,entry:u,index:d});return g==null||x==null?null:{x:g,y:x,value:f,payload:u}}).filter(Boolean)}function rZ(e){var t=ar(e,lA),r=Hr();return m.createElement(K1,{id:t.id,type:"line"},n=>m.createElement(m.Fragment,null,m.createElement(B3,{legendPayload:WQ(t)}),m.createElement(VQ,{dataKey:t.dataKey,data:t.data,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:n}),m.createElement(W3,{type:"line",id:n,data:t.data,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,hide:t.hide,isPanorama:r}),m.createElement(eZ,$u({},t,{id:n}))))}var bx=m.memo(rZ,Bp);bx.displayName="Line";function Ao(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.xAxisId)!==null&&r!==void 0?r:q3}function To(e,t){var r,n;return(r=(n=e.graphicalItems.cartesianItems.find(a=>a.id===t))===null||n===void 0?void 0:n.yAxisId)!==null&&r!==void 0?r:q3}var nZ=!0,lg="Invariant failed";function aZ(e,t){if(!e){if(nZ)throw new Error(lg);var r=typeof t=="function"?t():t,n=r?"".concat(lg,": ").concat(r):lg;throw new Error(n)}}function wx(){return wx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},wx.apply(null,arguments)}function Jm(e){return m.createElement(U1,wx({shapeType:"rectangle",activeClassName:"recharts-active-bar"},e))}var iZ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return(n,a)=>{if(Se(t))return t;var i=Se(n)||It(n);return i?t(n,a):(i||aZ(!1,"minPointSize callback function received a value with type of ".concat(typeof n,". Currently only numbers or null/undefined are supported.")),r)}},sZ=(e,t,r)=>r,oZ=(e,t)=>t,xd=V([wp,oZ],(e,t)=>e.filter(r=>r.type==="bar").find(r=>r.id===t)),lZ=V([xd],e=>e==null?void 0:e.maxBarSize),cZ=(e,t,r,n)=>n,uZ=V([Ze,wp,Ao,To,sZ],(e,t,r,n,a)=>t.filter(i=>e==="horizontal"?i.xAxisId===r:i.yAxisId===n).filter(i=>i.isPanorama===a).filter(i=>i.hide===!1).filter(i=>i.type==="bar")),dZ=(e,t,r)=>{var n=Ze(e),a=Ao(e,t),i=To(e,t);if(!(a==null||i==null))return n==="horizontal"?fx(e,"yAxis",i,r):fx(e,"xAxis",a,r)},fZ=(e,t)=>{var r=Ze(e),n=Ao(e,t),a=To(e,t);if(!(n==null||a==null))return r==="horizontal"?uN(e,"xAxis",n):uN(e,"yAxis",a)},mZ=V([uZ,LW,fZ],GG),hZ=(e,t,r)=>{var n,a,i=xd(e,t);if(i!=null){var o=Ao(e,t),l=To(e,t);if(!(o==null||l==null)){var c=Ze(e),u=o4(e),{maxBarSize:d}=i,f=It(d)?u:d,h,p;return c==="horizontal"?(h=bs(e,"xAxis",o,r),p=ys(e,"xAxis",o,r)):(h=bs(e,"yAxis",l,r),p=ys(e,"yAxis",l,r)),(n=(a=Ml(h,p,!0))!==null&&a!==void 0?a:f)!==null&&n!==void 0?n:0}}},cA=(e,t,r)=>{var n=Ze(e),a=Ao(e,t),i=To(e,t);if(!(a==null||i==null)){var o,l;return n==="horizontal"?(o=bs(e,"xAxis",a,r),l=ys(e,"xAxis",a,r)):(o=bs(e,"yAxis",i,r),l=ys(e,"yAxis",i,r)),Ml(o,l)}},pZ=V([mZ,o4,IW,l4,hZ,cA,lZ],eX),gZ=(e,t,r)=>{var n=Ao(e,t);if(n!=null)return bs(e,"xAxis",n,r)},vZ=(e,t,r)=>{var n=To(e,t);if(n!=null)return bs(e,"yAxis",n,r)},xZ=(e,t,r)=>{var n=Ao(e,t);if(n!=null)return ys(e,"xAxis",n,r)},yZ=(e,t,r)=>{var n=To(e,t);if(n!=null)return ys(e,"yAxis",n,r)},bZ=V([pZ,xd],(e,t)=>{if(!(e==null||t==null)){var r=e.find(n=>n.stackId===t.stackId&&t.dataKey!=null&&n.dataKeys.includes(t.dataKey));if(r!=null)return r.position}}),wZ=V([dZ,xd],tX),jZ=V([pr,yb,gZ,vZ,xZ,yZ,bZ,Ze,NW,cA,wZ,xd,cZ],(e,t,r,n,a,i,o,l,c,u,d,f,h)=>{var{chartData:p,dataStartIndex:g,dataEndIndex:x}=c;if(!(f==null||o==null||t==null||l!=="horizontal"&&l!=="vertical"||r==null||n==null||a==null||i==null||u==null)){var{data:y}=f,v;if(y!=null&&y.length>0?v=y:v=p==null?void 0:p.slice(g,x+1),v!=null)return QZ({layout:l,barSettings:f,pos:o,parentViewBox:t,bandSize:u,xAxis:r,yAxis:n,xAxisTicks:a,yAxisTicks:i,stackedData:d,displayedData:v,offset:e,cells:h,dataStartIndex:g})}}),_Z=["index"];function jx(){return jx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jx.apply(null,arguments)}function NZ(e,t){if(e==null)return{};var r,n,a=SZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function SZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var uA=m.createContext(void 0),kZ=e=>{var t=m.useContext(uA);if(t!=null)return t.stackId;if(e!=null)return I9(e)},CZ=(e,t)=>"recharts-bar-stack-clip-path-".concat(e,"-").concat(t),EZ=e=>{var t=m.useContext(uA);if(t!=null){var{stackId:r}=t;return"url(#".concat(CZ(r,e),")")}},PZ=e=>{var{index:t}=e,r=NZ(e,_Z),n=EZ(t);return m.createElement(Er,jx({className:"recharts-bar-stack-layer",clipPath:n},r))},OZ=["onMouseEnter","onMouseLeave","onClick"],AZ=["value","background","tooltipPosition"],TZ=["id"],MZ=["onMouseEnter","onClick","onMouseLeave"];function ji(){return ji=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ji.apply(null,arguments)}function gS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?gS(Object(r),!0).forEach(function(n){DZ(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function DZ(e,t,r){return(t=$Z(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $Z(e){var t=IZ(e,"string");return typeof t=="symbol"?t:t+""}function IZ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function eh(e,t){if(e==null)return{};var r,n,a=LZ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LZ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var RZ=e=>{var{dataKey:t,name:r,fill:n,legendType:a,hide:i}=e;return[{inactive:i,dataKey:t,type:a,color:n,value:Kl(r,t),payload:e}]},zZ=m.memo(e=>{var{dataKey:t,stroke:r,strokeWidth:n,fill:a,name:i,hide:o,unit:l,tooltipType:c,id:u}=e,d={dataDefinedOnItem:void 0,positions:void 0,settings:{stroke:r,strokeWidth:n,fill:a,dataKey:t,nameKey:void 0,name:Kl(i,t),hide:o,type:c,color:a,unit:l,graphicalItemId:u}};return m.createElement(H1,{tooltipEntrySettings:d})});function FZ(e){var t=Ce(ws),{data:r,dataKey:n,background:a,allOtherBarProps:i}=e,{onMouseEnter:o,onMouseLeave:l,onClick:c}=i,u=eh(i,OZ),d=W1(o,n,i.id),f=V1(l),h=q1(c,n,i.id);if(!a||r==null)return null;var p=po(a);return m.createElement(bn,{zIndex:rX(a,Gt.barBackground)},r.map((g,x)=>{var{value:y,background:v,tooltipPosition:b}=g,w=eh(g,AZ);if(!v)return null;var j=d(g,x),N=f(g,x),_=h(g,x),S=Qr(Qr(Qr(Qr(Qr({option:a,isActive:String(x)===t},w),{},{fill:"#eee"},v),p),Zu(u,g,x)),{},{onMouseEnter:j,onMouseLeave:N,onClick:_,dataKey:n,index:x,className:"recharts-bar-background-rectangle"});return m.createElement(Jm,ji({key:"background-bar-".concat(x)},S))}))}function BZ(e){var{showLabels:t,children:r,rects:n}=e,a=n==null?void 0:n.map(i=>{var o={x:i.x,y:i.y,width:i.width,lowerWidth:i.width,upperWidth:i.width,height:i.height};return Qr(Qr({},o),{},{value:i.value,payload:i.payload,parentViewBox:i.parentViewBox,viewBox:o,fill:i.fill})});return m.createElement(O3,{value:t?a:void 0},r)}function UZ(e){var{shape:t,activeBar:r,baseProps:n,entry:a,index:i,dataKey:o}=e,l=Ce(ws),c=Ce(P1),u=r&&String(i)===l&&(c==null||o===c),d=u?r:t;return u?m.createElement(bn,{zIndex:Gt.activeBar},m.createElement(Jm,ji({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:o}))):m.createElement(Jm,ji({},n,{name:String(n.name)},a,{isActive:u,option:d,index:i,dataKey:o}))}function WZ(e){var{shape:t,baseProps:r,entry:n,index:a,dataKey:i}=e;return m.createElement(Jm,ji({},r,{name:String(r.name)},n,{isActive:!1,option:t,index:a,dataKey:i}))}function VZ(e){var t,{data:r,props:n}=e,a=(t=An(n))!==null&&t!==void 0?t:{},{id:i}=a,o=eh(a,TZ),{shape:l,dataKey:c,activeBar:u}=n,{onMouseEnter:d,onClick:f,onMouseLeave:h}=n,p=eh(n,MZ),g=W1(d,c,i),x=V1(h),y=q1(f,c,i);return r?m.createElement(m.Fragment,null,r.map((v,b)=>m.createElement(PZ,ji({index:b,key:"rectangle-".concat(v==null?void 0:v.x,"-").concat(v==null?void 0:v.y,"-").concat(v==null?void 0:v.value,"-").concat(b),className:"recharts-bar-rectangle"},Zu(p,v,b),{onMouseEnter:g(v,b),onMouseLeave:x(v,b),onClick:y(v,b)}),u?m.createElement(UZ,{shape:l,activeBar:u,baseProps:o,entry:v,index:b,dataKey:c}):m.createElement(WZ,{shape:l,baseProps:o,entry:v,index:b,dataKey:c})))):null}function qZ(e){var{props:t,previousRectanglesRef:r}=e,{data:n,layout:a,isAnimationActive:i,animationBegin:o,animationDuration:l,animationEasing:c,onAnimationEnd:u,onAnimationStart:d}=t,f=r.current,h=rd(t,"recharts-bar-"),[p,g]=m.useState(!1),x=!p,y=m.useCallback(()=>{typeof u=="function"&&u(),g(!1)},[u]),v=m.useCallback(()=>{typeof d=="function"&&d(),g(!0)},[d]);return m.createElement(BZ,{showLabels:x,rects:n},m.createElement(td,{animationId:h,begin:o,duration:l,isActive:i,easing:c,onAnimationEnd:y,onAnimationStart:v,key:h},b=>{var w=b===1?n:n==null?void 0:n.map((j,N)=>{var _=f&&f[N];if(_)return Qr(Qr({},j),{},{x:Mt(_.x,j.x,b),y:Mt(_.y,j.y,b),width:Mt(_.width,j.width,b),height:Mt(_.height,j.height,b)});if(a==="horizontal"){var S=Mt(0,j.height,b),C=Mt(j.stackedBarStart,j.y,b);return Qr(Qr({},j),{},{y:C,height:S})}var O=Mt(0,j.width,b),A=Mt(j.stackedBarStart,j.x,b);return Qr(Qr({},j),{},{width:O,x:A})});return b>0&&(r.current=w??null),w==null?null:m.createElement(Er,null,m.createElement(VZ,{props:t,data:w}))}),m.createElement(I1,{label:t.label}),t.children)}function HZ(e){var t=m.useRef(null);return m.createElement(qZ,{previousRectanglesRef:t,props:e})}var dA=0,KZ=(e,t)=>{var r=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:r,errorVal:vt(e,t)}};class YZ extends m.PureComponent{render(){var{hide:t,data:r,dataKey:n,className:a,xAxisId:i,yAxisId:o,needClip:l,background:c,id:u}=this.props;if(t||r==null)return null;var d=nt("recharts-bar",a),f=u;return m.createElement(Er,{className:d,id:u},l&&m.createElement("defs",null,m.createElement(eA,{clipPathId:f,xAxisId:i,yAxisId:o})),m.createElement(Er,{className:"recharts-bar-rectangles",clipPath:l?"url(#clipPath-".concat(f,")"):void 0},m.createElement(FZ,{data:r,dataKey:n,background:c,allOtherBarProps:this.props}),m.createElement(HZ,this.props)))}}var GZ={activeBar:!1,animationBegin:0,animationDuration:400,animationEasing:"ease",background:!1,hide:!1,isAnimationActive:"auto",label:!1,legendType:"rect",minPointSize:dA,xAxisId:0,yAxisId:0,zIndex:Gt.bar};function XZ(e){var{xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d}=e,{needClip:f}=Z1(t,r),h=Yl(),p=Hr(),g=B1(e.children,gd),x=Ce(b=>jZ(b,e.id,p,g));if(h!=="vertical"&&h!=="horizontal")return null;var y,v=x==null?void 0:x[0];return v==null||v.height==null||v.width==null?y=0:y=h==="vertical"?v.height/2:v.width/2,m.createElement(J3,{xAxisId:t,yAxisId:r,data:x,dataPointFormatter:KZ,errorBarOffset:y},m.createElement(YZ,ji({},e,{layout:h,needClip:f,data:x,xAxisId:t,yAxisId:r,hide:n,legendType:a,minPointSize:i,activeBar:o,animationBegin:l,animationDuration:c,animationEasing:u,isAnimationActive:d})))}function QZ(e){var{layout:t,barSettings:{dataKey:r,minPointSize:n},pos:a,bandSize:i,xAxis:o,yAxis:l,xAxisTicks:c,yAxisTicks:u,stackedData:d,displayedData:f,offset:h,cells:p,parentViewBox:g,dataStartIndex:x}=e,y=t==="horizontal"?l:o,v=d?y.scale.domain():null,b=L9({numericAxis:y}),w=y.scale(b);return f.map((j,N)=>{var _,S,C,O,A,T;if(d){var D=d[N+x];if(D==null)return null;_=A9(D,v)}else _=vt(j,r),Array.isArray(_)||(_=[b,_]);var q=iZ(n,dA)(_[1],N);if(t==="horizontal"){var re,[K,z]=[l.scale(_[0]),l.scale(_[1])];S=E2({axis:o,ticks:c,bandSize:i,offset:a.offset,entry:j,index:N}),C=(re=z??K)!==null&&re!==void 0?re:void 0,O=a.size;var P=K-z;if(A=ba(P)?0:P,T={x:S,y:h.top,width:O,height:h.height},Math.abs(q)>0&&Math.abs(A)<Math.abs(q)){var M=kr(A||q)*(Math.abs(q)-Math.abs(A));C-=M,A+=M}}else{var[L,G]=[o.scale(_[0]),o.scale(_[1])];if(S=L,C=E2({axis:l,ticks:u,bandSize:i,offset:a.offset,entry:j,index:N}),O=G-L,A=a.size,T={x:h.left,y:C,width:h.width,height:A},Math.abs(q)>0&&Math.abs(O)<Math.abs(q)){var $=kr(O||q)*(Math.abs(q)-Math.abs(O));O+=$}}if(S==null||C==null||O==null||A==null)return null;var U=Qr(Qr({},j),{},{stackedBarStart:w,x:S,y:C,width:O,height:A,value:d?_:_[1],payload:j,background:T,tooltipPosition:{x:S+O/2,y:C+A/2},parentViewBox:g},p&&p[N]&&p[N].props);return U}).filter(Boolean)}function ZZ(e){var t=ar(e,GZ),r=kZ(t.stackId),n=Hr();return m.createElement(K1,{id:t.id,type:"bar"},a=>m.createElement(m.Fragment,null,m.createElement(B3,{legendPayload:RZ(t)}),m.createElement(zZ,{dataKey:t.dataKey,stroke:t.stroke,strokeWidth:t.strokeWidth,fill:t.fill,name:t.name,hide:t.hide,unit:t.unit,tooltipType:t.tooltipType,id:a}),m.createElement(W3,{type:"bar",id:a,data:void 0,xAxisId:t.xAxisId,yAxisId:t.yAxisId,zAxisId:0,dataKey:t.dataKey,stackId:r,hide:t.hide,barSize:t.barSize,minPointSize:t.minPointSize,maxBarSize:t.maxBarSize,isPanorama:n}),m.createElement(bn,{zIndex:t.zIndex},m.createElement(XZ,ji({},t,{id:a})))))}var th=m.memo(ZZ,Bp);th.displayName="Bar";var JZ=["domain","range"],eJ=["domain","range"];function vS(e,t){if(e==null)return{};var r,n,a=tJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function tJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function xS(e,t){return e===t?!0:Array.isArray(e)&&e.length===2&&Array.isArray(t)&&t.length===2?e[0]===t[0]&&e[1]===t[1]:!1}function fA(e,t){if(e===t)return!0;var{domain:r,range:n}=e,a=vS(e,JZ),{domain:i,range:o}=t,l=vS(t,eJ);return!xS(r,i)||!xS(n,o)?!1:Bp(a,l)}var rJ=["dangerouslySetInnerHTML","ticks","scale"],nJ=["id","scale"];function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_x.apply(null,arguments)}function yS(e,t){if(e==null)return{};var r,n,a=aJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function aJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function iJ(e){var t=kt(),r=m.useRef(null);return m.useLayoutEffect(()=>{r.current===null?t(MG(e)):r.current!==e&&t(DG({prev:r.current,next:e})),r.current=e},[e,t]),m.useLayoutEffect(()=>()=>{r.current&&(t($G(r.current)),r.current=null)},[t]),null}var sJ=e=>{var{xAxisId:t,className:r}=e,n=Ce(yb),a=Hr(),i="xAxis",o=Ce(h=>F4(h,i,t,a)),l=Ce(h=>I4(h,t)),c=Ce(h=>DV(h,t)),u=Ce(h=>v4(h,t));if(l==null||c==null||u==null)return null;var d=yS(e,rJ),f=yS(u,nJ);return m.createElement(Q1,_x({},d,f,{x:c.x,y:c.y,width:l.width,height:l.height,className:nt("recharts-".concat(i," ").concat(i),r),viewBox:n,ticks:o,axisType:i}))},oJ={allowDataOverflow:br.allowDataOverflow,allowDecimals:br.allowDecimals,allowDuplicatedCategory:br.allowDuplicatedCategory,angle:br.angle,axisLine:ci.axisLine,height:br.height,hide:!1,includeHidden:br.includeHidden,interval:br.interval,minTickGap:br.minTickGap,mirror:br.mirror,orientation:br.orientation,padding:br.padding,reversed:br.reversed,scale:br.scale,tick:br.tick,tickCount:br.tickCount,tickLine:ci.tickLine,tickSize:ci.tickSize,type:br.type,xAxisId:0},lJ=e=>{var t=ar(e,oJ);return m.createElement(m.Fragment,null,m.createElement(iJ,{allowDataOverflow:t.allowDataOverflow,allowDecimals:t.allowDecimals,allowDuplicatedCategory:t.allowDuplicatedCategory,angle:t.angle,dataKey:t.dataKey,domain:t.domain,height:t.height,hide:t.hide,id:t.xAxisId,includeHidden:t.includeHidden,interval:t.interval,minTickGap:t.minTickGap,mirror:t.mirror,name:t.name,orientation:t.orientation,padding:t.padding,reversed:t.reversed,scale:t.scale,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit}),m.createElement(sJ,t))},rh=m.memo(lJ,fA);rh.displayName="XAxis";var cJ=["dangerouslySetInnerHTML","ticks","scale"],uJ=["id","scale"];function Nx(){return Nx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Nx.apply(null,arguments)}function bS(e,t){if(e==null)return{};var r,n,a=dJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function dJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function fJ(e){var t=kt(),r=m.useRef(null);return m.useLayoutEffect(()=>{r.current===null?t(IG(e)):r.current!==e&&t(LG({prev:r.current,next:e})),r.current=e},[e,t]),m.useLayoutEffect(()=>()=>{r.current&&(t(RG(r.current)),r.current=null)},[t]),null}var mJ=e=>{var{yAxisId:t,className:r,width:n,label:a}=e,i=m.useRef(null),o=m.useRef(null),l=Ce(yb),c=Hr(),u=kt(),d="yAxis",f=Ce(v=>L4(v,t)),h=Ce(v=>IV(v,t)),p=Ce(v=>F4(v,d,t,c)),g=Ce(v=>x4(v,t));if(m.useLayoutEffect(()=>{if(!(n!=="auto"||!f||$1(a)||m.isValidElement(a)||g==null)){var v=i.current;if(v){var b=v.getCalculatedWidth();Math.round(f.width)!==Math.round(b)&&u(zG({id:t,width:b}))}}},[p,f,u,a,t,n,g]),f==null||h==null||g==null)return null;var x=bS(e,cJ),y=bS(g,uJ);return m.createElement(Q1,Nx({},x,y,{ref:i,labelRef:o,x:h.x,y:h.y,tickTextProps:n==="auto"?{width:void 0}:{width:n},width:f.width,height:f.height,className:nt("recharts-".concat(d," ").concat(d),r),viewBox:l,ticks:p,axisType:d}))},hJ={allowDataOverflow:wr.allowDataOverflow,allowDecimals:wr.allowDecimals,allowDuplicatedCategory:wr.allowDuplicatedCategory,angle:wr.angle,axisLine:ci.axisLine,hide:!1,includeHidden:wr.includeHidden,interval:wr.interval,minTickGap:wr.minTickGap,mirror:wr.mirror,orientation:wr.orientation,padding:wr.padding,reversed:wr.reversed,scale:wr.scale,tick:wr.tick,tickCount:wr.tickCount,tickLine:ci.tickLine,tickSize:ci.tickSize,type:wr.type,width:wr.width,yAxisId:0},pJ=e=>{var t=ar(e,hJ);return m.createElement(m.Fragment,null,m.createElement(fJ,{interval:t.interval,id:t.yAxisId,scale:t.scale,type:t.type,domain:t.domain,allowDataOverflow:t.allowDataOverflow,dataKey:t.dataKey,allowDuplicatedCategory:t.allowDuplicatedCategory,allowDecimals:t.allowDecimals,tickCount:t.tickCount,padding:t.padding,includeHidden:t.includeHidden,reversed:t.reversed,ticks:t.ticks,width:t.width,orientation:t.orientation,mirror:t.mirror,hide:t.hide,unit:t.unit,name:t.name,angle:t.angle,minTickGap:t.minTickGap,tick:t.tick,tickFormatter:t.tickFormatter}),m.createElement(mJ,t))},Qc=m.memo(pJ,fA);Qc.displayName="YAxis";var gJ=(e,t)=>t,ew=V([gJ,Ze,p4,vr,r3,$i,Zq,pr],iH),tw=e=>{var t=e.currentTarget.getBoundingClientRect(),r=t.width/e.currentTarget.offsetWidth,n=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/r),chartY:Math.round((e.clientY-t.top)/n)}},mA=ea("mouseClick"),hA=Ju();hA.startListening({actionCreator:mA,effect:(e,t)=>{var r=e.payload,n=ew(t.getState(),tw(r));(n==null?void 0:n.activeIndex)!=null&&t.dispatch(XV({activeIndex:n.activeIndex,activeDataKey:void 0,activeCoordinate:n.activeCoordinate}))}});var Sx=ea("mouseMove"),pA=Ju(),uf=null;pA.startListening({actionCreator:Sx,effect:(e,t)=>{var r=e.payload;uf!==null&&cancelAnimationFrame(uf);var n=tw(r);uf=requestAnimationFrame(()=>{var a=t.getState(),i=_1(a,a.tooltip.settings.shared);if(i==="axis"){var o=ew(a,n);(o==null?void 0:o.activeIndex)!=null?t.dispatch(Y4({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):t.dispatch(K4())}uf=null})}});function vJ(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":e==="children"&&typeof t=="object"&&t!==null?"<<CHILDREN>>":t}var wS={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},gA=yn({name:"rootProps",initialState:wS,reducers:{updateOptions:(e,t)=>{var r;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=(r=t.payload.barGap)!==null&&r!==void 0?r:wS.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className,e.baseValue=t.payload.baseValue,e.reverseStackOrder=t.payload.reverseStackOrder}}}),xJ=gA.reducer,{updateOptions:yJ}=gA.actions,vA=yn({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:bJ}=vA.actions,wJ=vA.reducer,xA=ea("keyDown"),yA=ea("focus"),rw=Ju();rw.startListening({actionCreator:xA,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip,i=e.payload;if(!(i!=="ArrowRight"&&i!=="ArrowLeft"&&i!=="Enter")){var o=N1(a,nc(r),dd(r),hd(r)),l=o==null?-1:Number(o);if(!(!Number.isFinite(l)||l<0)){var c=$i(r);if(i==="Enter"){var u=Hm(r,"axis","hover",String(a.index));t.dispatch(hx({active:!a.active,activeIndex:a.index,activeCoordinate:u}));return}var d=FV(r),f=d==="left-to-right"?1:-1,h=i==="ArrowRight"?1:-1,p=l+h*f;if(!(c==null||p>=c.length||p<0)){var g=Hm(r,"axis","hover",String(p));t.dispatch(hx({active:!0,activeIndex:p.toString(),activeCoordinate:g}))}}}}}});rw.startListening({actionCreator:yA,effect:(e,t)=>{var r=t.getState(),n=r.rootProps.accessibilityLayer!==!1;if(n){var{keyboardInteraction:a}=r.tooltip;if(!a.active&&a.index==null){var i="0",o=Hm(r,"axis","hover",String(i));t.dispatch(hx({active:!0,activeIndex:i,activeCoordinate:o}))}}}});var Un=ea("externalEvent"),bA=Ju(),cg=new Map;bA.startListening({actionCreator:Un,effect:(e,t)=>{var{handler:r,reactEvent:n}=e.payload;if(r!=null){n.persist();var a=n.type,i=cg.get(a);i!==void 0&&cancelAnimationFrame(i);var o=requestAnimationFrame(()=>{try{var l=t.getState(),c={activeCoordinate:Iq(l),activeDataKey:P1(l),activeIndex:ws(l),activeLabel:i3(l),activeTooltipIndex:ws(l),isTooltipActive:Lq(l)};r(c,n)}finally{cg.delete(a)}});cg.set(a,o)}}});var jJ=V([tc],e=>e.tooltipItemPayloads),_J=V([jJ,md,(e,t)=>t,(e,t,r)=>r],(e,t,r,n)=>{var a=e.find(l=>l.settings.graphicalItemId===n);if(a!=null){var{positions:i}=a;if(i!=null){var o=t(i,r);return o}}}),wA=ea("touchMove"),jA=Ju();jA.startListening({actionCreator:wA,effect:(e,t)=>{var r=e.payload;if(!(r.touches==null||r.touches.length===0)){var n=t.getState(),a=_1(n,n.tooltip.settings.shared);if(a==="axis"){var i=r.touches[0];if(i==null)return;var o=ew(n,tw({clientX:i.clientX,clientY:i.clientY,currentTarget:r.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&t.dispatch(Y4({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(a==="item"){var l,c=r.touches[0];if(document.elementFromPoint==null||c==null)return;var u=document.elementFromPoint(c.clientX,c.clientY);if(!u||!u.getAttribute)return;var d=u.getAttribute(z5),f=(l=u.getAttribute(F5))!==null&&l!==void 0?l:void 0,h=rc(n).find(x=>x.id===f);if(d==null||h==null||f==null)return;var{dataKey:p}=h,g=_J(n,d,f);t.dispatch(H4({activeDataKey:p,activeIndex:d,activeCoordinate:g,activeGraphicalItemId:f}))}}}});var NJ=u5({brush:nX,cartesianAxis:FG,chartData:$H,errorBars:eQ,graphicalItems:HY,layout:S9,legend:xz,options:OH,polarAxis:lY,polarOptions:wJ,referenceElements:uX,rootProps:xJ,tooltip:QV,zIndex:yH}),SJ=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return X7({reducer:NJ,preloadedState:t,middleware:n=>{var a;return n({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((a="es6")!==null&&a!==void 0?a:"")}).concat([hA.middleware,pA.middleware,rw.middleware,bA.middleware,jA.middleware])},enhancers:n=>{var a=n;return typeof n=="function"&&(a=n()),a.concat(j5({type:"raf"}))},devTools:{serialize:{replacer:vJ},name:"recharts-".concat(r)}})};function _A(e){var{preloadedState:t,children:r,reduxStoreName:n}=e,a=Hr(),i=m.useRef(null);if(a)return r;i.current==null&&(i.current=SJ(t,n));var o=db;return m.createElement(MQ,{context:o,store:i.current},r)}function kJ(e){var{layout:t,margin:r}=e,n=kt(),a=Hr();return m.useEffect(()=>{a||(n(j9(t)),n(w9(r)))},[n,a,t,r]),null}var NA=m.memo(kJ,Bp);function SA(e){var t=kt();return m.useEffect(()=>{t(yJ(e))},[t,e]),null}function jS(e){var{zIndex:t,isPanorama:r}=e,n=m.useRef(null),a=kt();return m.useLayoutEffect(()=>(n.current&&a(vH({zIndex:t,element:n.current,isPanorama:r})),()=>{a(xH({zIndex:t,isPanorama:r}))}),[a,t,r]),m.createElement("g",{tabIndex:-1,ref:n})}function _S(e){var{children:t,isPanorama:r}=e,n=Ce(oH);if(!n||n.length===0)return t;var a=n.filter(o=>o<0),i=n.filter(o=>o>0);return m.createElement(m.Fragment,null,a.map(o=>m.createElement(jS,{key:o,zIndex:o,isPanorama:r})),t,i.map(o=>m.createElement(jS,{key:o,zIndex:o,isPanorama:r})))}var CJ=["children"];function EJ(e,t){if(e==null)return{};var r,n,a=PJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function PJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}function nh(){return nh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nh.apply(null,arguments)}var OJ={width:"100%",height:"100%",display:"block"},AJ=m.forwardRef((e,t)=>{var r=wb(),n=jb(),a=J5();if(!Ba(r)||!Ba(n))return null;var{children:i,otherAttributes:o,title:l,desc:c}=e,u,d;return o!=null&&(typeof o.tabIndex=="number"?u=o.tabIndex:u=a?0:void 0,typeof o.role=="string"?d=o.role:d=a?"application":void 0),m.createElement(Yy,nh({},o,{title:l,desc:c,role:d,tabIndex:u,width:r,height:n,style:OJ,ref:t}),i)}),TJ=e=>{var{children:t}=e,r=Ce(ip);if(!r)return null;var{width:n,height:a,y:i,x:o}=r;return m.createElement(Yy,{width:n,height:a,x:o,y:i},t)},NS=m.forwardRef((e,t)=>{var{children:r}=e,n=EJ(e,CJ),a=Hr();return a?m.createElement(TJ,null,m.createElement(_S,{isPanorama:!0},r)):m.createElement(AJ,nh({ref:t},n),m.createElement(_S,{isPanorama:!1},r))});function MJ(){var e=kt(),[t,r]=m.useState(null),n=Ce(W9);return m.useEffect(()=>{if(t!=null){var a=t.getBoundingClientRect(),i=a.width/t.offsetWidth;Ut(i)&&i!==n&&e(N9(i))}},[t,e,n]),r}function SS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function DJ(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SS(Object(r),!0).forEach(function(n){$J(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function $J(e,t,r){return(t=IJ(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function IJ(e){var t=LJ(e,"string");return typeof t=="symbol"?t:t+""}function LJ(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jo.apply(null,arguments)}var RJ=()=>(VH(),null);function ah(e){if(typeof e=="number")return e;if(typeof e=="string"){var t=parseFloat(e);if(!Number.isNaN(t))return t}return 0}var zJ=m.forwardRef((e,t)=>{var r,n,a=m.useRef(null),[i,o]=m.useState({containerWidth:ah((r=e.style)===null||r===void 0?void 0:r.width),containerHeight:ah((n=e.style)===null||n===void 0?void 0:n.height)}),l=m.useCallback((u,d)=>{o(f=>{var h=Math.round(u),p=Math.round(d);return f.containerWidth===h&&f.containerHeight===p?f:{containerWidth:h,containerHeight:p}})},[]),c=m.useCallback(u=>{if(typeof t=="function"&&t(u),u!=null&&typeof ResizeObserver<"u"){var{width:d,height:f}=u.getBoundingClientRect();l(d,f);var h=g=>{var{width:x,height:y}=g[0].contentRect;l(x,y)},p=new ResizeObserver(h);p.observe(u),a.current=p}},[t,l]);return m.useEffect(()=>()=>{var u=a.current;u!=null&&u.disconnect()},[l]),m.createElement(m.Fragment,null,m.createElement(op,{width:i.containerWidth,height:i.containerHeight}),m.createElement("div",jo({ref:c},e)))}),FJ=m.forwardRef((e,t)=>{var{width:r,height:n}=e,[a,i]=m.useState({containerWidth:ah(r),containerHeight:ah(n)}),o=m.useCallback((c,u)=>{i(d=>{var f=Math.round(c),h=Math.round(u);return d.containerWidth===f&&d.containerHeight===h?d:{containerWidth:f,containerHeight:h}})},[]),l=m.useCallback(c=>{if(typeof t=="function"&&t(c),c!=null){var{width:u,height:d}=c.getBoundingClientRect();o(u,d)}},[t,o]);return m.createElement(m.Fragment,null,m.createElement(op,{width:a.containerWidth,height:a.containerHeight}),m.createElement("div",jo({ref:l},e)))}),BJ=m.forwardRef((e,t)=>{var{width:r,height:n}=e;return m.createElement(m.Fragment,null,m.createElement(op,{width:r,height:n}),m.createElement("div",jo({ref:t},e)))}),UJ=m.forwardRef((e,t)=>{var{width:r,height:n}=e;return gi(r)||gi(n)?m.createElement(FJ,jo({},e,{ref:t})):m.createElement(BJ,jo({},e,{ref:t}))});function WJ(e){return e===!0?zJ:UJ}var VJ=m.forwardRef((e,t)=>{var{children:r,className:n,height:a,onClick:i,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:u,onMouseLeave:d,onMouseMove:f,onMouseUp:h,onTouchEnd:p,onTouchMove:g,onTouchStart:x,style:y,width:v,responsive:b,dispatchTouchEvents:w=!0}=e,j=m.useRef(null),N=kt(),[_,S]=m.useState(null),[C,O]=m.useState(null),A=MJ(),T=bb(),D=(T==null?void 0:T.width)>0?T.width:v,q=(T==null?void 0:T.height)>0?T.height:a,re=m.useCallback(k=>{A(k),typeof t=="function"&&t(k),S(k),O(k),k!=null&&(j.current=k)},[A,t,S,O]),K=m.useCallback(k=>{N(mA(k)),N(Un({handler:i,reactEvent:k}))},[N,i]),z=m.useCallback(k=>{N(Sx(k)),N(Un({handler:u,reactEvent:k}))},[N,u]),P=m.useCallback(k=>{N(K4()),N(Un({handler:d,reactEvent:k}))},[N,d]),M=m.useCallback(k=>{N(Sx(k)),N(Un({handler:f,reactEvent:k}))},[N,f]),L=m.useCallback(()=>{N(yA())},[N]),G=m.useCallback(k=>{N(xA(k.key))},[N]),$=m.useCallback(k=>{N(Un({handler:o,reactEvent:k}))},[N,o]),U=m.useCallback(k=>{N(Un({handler:l,reactEvent:k}))},[N,l]),E=m.useCallback(k=>{N(Un({handler:c,reactEvent:k}))},[N,c]),Q=m.useCallback(k=>{N(Un({handler:h,reactEvent:k}))},[N,h]),J=m.useCallback(k=>{N(Un({handler:x,reactEvent:k}))},[N,x]),de=m.useCallback(k=>{w&&N(wA(k)),N(Un({handler:g,reactEvent:k}))},[N,w,g]),ae=m.useCallback(k=>{N(Un({handler:p,reactEvent:k}))},[N,p]),pe=WJ(b);return m.createElement(f3.Provider,{value:_},m.createElement(fP.Provider,{value:C},m.createElement(pe,{width:D??(y==null?void 0:y.width),height:q??(y==null?void 0:y.height),className:nt("recharts-wrapper",n),style:DJ({position:"relative",cursor:"default",width:D,height:q},y),onClick:K,onContextMenu:$,onDoubleClick:U,onFocus:L,onKeyDown:G,onMouseDown:E,onMouseEnter:z,onMouseLeave:P,onMouseMove:M,onMouseUp:Q,onTouchEnd:ae,onTouchMove:de,onTouchStart:J,ref:re},m.createElement(RJ,null),r)))}),qJ=["width","height","responsive","children","className","style","compact","title","desc"];function HJ(e,t){if(e==null)return{};var r,n,a=KJ(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function KJ(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var kA=m.forwardRef((e,t)=>{var{width:r,height:n,responsive:a,children:i,className:o,style:l,compact:c,title:u,desc:d}=e,f=HJ(e,qJ),h=An(f);return c?m.createElement(m.Fragment,null,m.createElement(op,{width:r,height:n}),m.createElement(NS,{otherAttributes:h,title:u,desc:d},i)):m.createElement(VJ,{className:o,style:l,width:r,height:n,responsive:a??!1,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},m.createElement(NS,{otherAttributes:h,title:u,desc:d,ref:t},m.createElement(fX,null,i)))});function kx(){return kx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kx.apply(null,arguments)}var YJ={top:5,right:5,bottom:5,left:5},GJ={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:YJ,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},CA=m.forwardRef(function(t,r){var n,a=ar(t.categoricalChartProps,GJ),{chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,categoricalChartProps:u}=t,d={chartName:i,defaultTooltipEventType:o,validateTooltipEventTypes:l,tooltipPayloadSearcher:c,eventEmitter:void 0};return m.createElement(_A,{preloadedState:{options:d},reduxStoreName:(n=u.id)!==null&&n!==void 0?n:i},m.createElement(K3,{chartData:u.data}),m.createElement(NA,{layout:a.layout,margin:a.margin}),m.createElement(SA,{baseValue:a.baseValue,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),m.createElement(kA,kx({},a,{ref:r})))}),XJ=["axis"],QJ=m.forwardRef((e,t)=>m.createElement(CA,{chartName:"LineChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:XJ,tooltipPayloadSearcher:D1,categoricalChartProps:e,ref:t})),ZJ=["axis","item"],EA=m.forwardRef((e,t)=>m.createElement(CA,{chartName:"BarChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:ZJ,tooltipPayloadSearcher:D1,categoricalChartProps:e,ref:t}));function JJ(e){var t=kt();return m.useEffect(()=>{t(bJ(e))},[t,e]),null}var eee=["layout"];function Cx(){return Cx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Cx.apply(null,arguments)}function tee(e,t){if(e==null)return{};var r,n,a=ree(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function ree(e,t){if(e==null)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)!==-1)continue;r[n]=e[n]}return r}var nee={top:5,right:5,bottom:5,left:5},PA={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:nee,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},aee=m.forwardRef(function(t,r){var n,a=ar(t.categoricalChartProps,PA),{layout:i}=a,o=tee(a,eee),{chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d}=t,f={chartName:l,defaultTooltipEventType:c,validateTooltipEventTypes:u,tooltipPayloadSearcher:d,eventEmitter:void 0};return m.createElement(_A,{preloadedState:{options:f},reduxStoreName:(n=a.id)!==null&&n!==void 0?n:l},m.createElement(K3,{chartData:a.data}),m.createElement(NA,{layout:i,margin:a.margin}),m.createElement(SA,{baseValue:void 0,accessibilityLayer:a.accessibilityLayer,barCategoryGap:a.barCategoryGap,maxBarSize:a.maxBarSize,stackOffset:a.stackOffset,barGap:a.barGap,barSize:a.barSize,syncId:a.syncId,syncMethod:a.syncMethod,className:a.className,reverseStackOrder:a.reverseStackOrder}),m.createElement(JJ,{cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius}),m.createElement(kA,Cx({},o,{ref:r})))});function kS(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),r.push.apply(r,n)}return r}function CS(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kS(Object(r),!0).forEach(function(n){iee(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kS(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function iee(e,t,r){return(t=see(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function see(e){var t=oee(e,"string");return typeof t=="symbol"?t:t+""}function oee(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var lee=["item"],cee=CS(CS({},PA),{},{layout:"centric",startAngle:0,endAngle:360}),uee=m.forwardRef((e,t)=>{var r=ar(e,cee);return m.createElement(aee,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:lee,tooltipPayloadSearcher:D1,categoricalChartProps:r,ref:t})});function ih(e){"@babel/helpers - typeof";return ih=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ih(e)}function xn(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ft(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function ir(e){ft(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||ih(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Xo(e,t){ft(2,arguments);var r=ir(e),n=xn(t);return isNaN(n)?new Date(NaN):(n&&r.setDate(r.getDate()+n),r)}function dee(e,t){ft(2,arguments);var r=ir(e),n=xn(t);if(isNaN(n))return new Date(NaN);if(!n)return r;var a=r.getDate(),i=new Date(r.getTime());i.setMonth(r.getMonth()+n+1,0);var o=i.getDate();return a>=o?i:(r.setFullYear(i.getFullYear(),i.getMonth(),a),r)}function fee(e,t){ft(2,arguments);var r=ir(e).getTime(),n=xn(t);return new Date(r+n)}var mee={};function ac(){return mee}function ug(e,t){var r,n,a,i,o,l,c,u;ft(1,arguments);var d=ac(),f=xn((r=(n=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ir(e),p=h.getDay(),g=(p<f?7:0)+p-f;return h.setDate(h.getDate()-g),h.setHours(0,0,0,0),h}function hee(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Ex(e){ft(1,arguments);var t=ir(e);return t.setHours(0,0,0,0),t}var OA=6e4,AA=36e5;function Sc(e,t){ft(2,arguments);var r=Ex(e),n=Ex(t);return r.getTime()===n.getTime()}function pee(e){return ft(1,arguments),e instanceof Date||ih(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function gee(e){if(ft(1,arguments),!pee(e)&&typeof e!="number")return!1;var t=ir(e);return!isNaN(Number(t))}function vee(e){ft(1,arguments);var t=ir(e);return t.setHours(23,59,59,999),t}function TA(e){ft(1,arguments);var t=ir(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Px(e){ft(1,arguments);var t=ir(e);return t.setDate(1),t.setHours(0,0,0,0),t}function xee(e){ft(1,arguments);var t=ir(e),r=t.getFullYear();return t.setFullYear(r+1,0,0),t.setHours(23,59,59,999),t}function yee(e){ft(1,arguments);var t=ir(e),r=new Date(0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function ES(e,t){var r,n,a,i,o,l,c,u;ft(1,arguments);var d=ac(),f=xn((r=(n=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ir(e),p=h.getDay(),g=(p<f?-7:0)+6-(p-f);return h.setDate(h.getDate()+g),h.setHours(23,59,59,999),h}function bee(e,t){ft(2,arguments);var r=xn(t);return fee(e,-r)}var wee=864e5;function jee(e){ft(1,arguments);var t=ir(e),r=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var n=t.getTime(),a=r-n;return Math.floor(a/wee)+1}function sh(e){ft(1,arguments);var t=1,r=ir(e),n=r.getUTCDay(),a=(n<t?7:0)+n-t;return r.setUTCDate(r.getUTCDate()-a),r.setUTCHours(0,0,0,0),r}function MA(e){ft(1,arguments);var t=ir(e),r=t.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(r+1,0,4),n.setUTCHours(0,0,0,0);var a=sh(n),i=new Date(0);i.setUTCFullYear(r,0,4),i.setUTCHours(0,0,0,0);var o=sh(i);return t.getTime()>=a.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function _ee(e){ft(1,arguments);var t=MA(e),r=new Date(0);r.setUTCFullYear(t,0,4),r.setUTCHours(0,0,0,0);var n=sh(r);return n}var Nee=6048e5;function See(e){ft(1,arguments);var t=ir(e),r=sh(t).getTime()-_ee(t).getTime();return Math.round(r/Nee)+1}function oh(e,t){var r,n,a,i,o,l,c,u;ft(1,arguments);var d=ac(),f=xn((r=(n=(a=(i=t==null?void 0:t.weekStartsOn)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&a!==void 0?a:d.weekStartsOn)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&r!==void 0?r:0);if(!(f>=0&&f<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=ir(e),p=h.getUTCDay(),g=(p<f?7:0)+p-f;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function DA(e,t){var r,n,a,i,o,l,c,u;ft(1,arguments);var d=ir(e),f=d.getUTCFullYear(),h=ac(),p=xn((r=(n=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:h.firstWeekContainsDate)!==null&&n!==void 0?n:(c=h.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(f+1,0,p),g.setUTCHours(0,0,0,0);var x=oh(g,t),y=new Date(0);y.setUTCFullYear(f,0,p),y.setUTCHours(0,0,0,0);var v=oh(y,t);return d.getTime()>=x.getTime()?f+1:d.getTime()>=v.getTime()?f:f-1}function kee(e,t){var r,n,a,i,o,l,c,u;ft(1,arguments);var d=ac(),f=xn((r=(n=(a=(i=t==null?void 0:t.firstWeekContainsDate)!==null&&i!==void 0?i:t==null||(o=t.locale)===null||o===void 0||(l=o.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&a!==void 0?a:d.firstWeekContainsDate)!==null&&n!==void 0?n:(c=d.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&r!==void 0?r:1),h=DA(e,t),p=new Date(0);p.setUTCFullYear(h,0,f),p.setUTCHours(0,0,0,0);var g=oh(p,t);return g}var Cee=6048e5;function Eee(e,t){ft(1,arguments);var r=ir(e),n=oh(r,t).getTime()-kee(r,t).getTime();return Math.round(n/Cee)+1}function ct(e,t){for(var r=e<0?"-":"",n=Math.abs(e).toString();n.length<t;)n="0"+n;return r+n}var Pee={y:function(t,r){var n=t.getUTCFullYear(),a=n>0?n:1-n;return ct(r==="yy"?a%100:a,r.length)},M:function(t,r){var n=t.getUTCMonth();return r==="M"?String(n+1):ct(n+1,2)},d:function(t,r){return ct(t.getUTCDate(),r.length)},a:function(t,r){var n=t.getUTCHours()/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function(t,r){return ct(t.getUTCHours()%12||12,r.length)},H:function(t,r){return ct(t.getUTCHours(),r.length)},m:function(t,r){return ct(t.getUTCMinutes(),r.length)},s:function(t,r){return ct(t.getUTCSeconds(),r.length)},S:function(t,r){var n=r.length,a=t.getUTCMilliseconds(),i=Math.floor(a*Math.pow(10,n-3));return ct(i,r.length)}};const zi=Pee;var Ho={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Oee={G:function(t,r,n){var a=t.getUTCFullYear()>0?1:0;switch(r){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(t,r,n){if(r==="yo"){var a=t.getUTCFullYear(),i=a>0?a:1-a;return n.ordinalNumber(i,{unit:"year"})}return zi.y(t,r)},Y:function(t,r,n,a){var i=DA(t,a),o=i>0?i:1-i;if(r==="YY"){var l=o%100;return ct(l,2)}return r==="Yo"?n.ordinalNumber(o,{unit:"year"}):ct(o,r.length)},R:function(t,r){var n=MA(t);return ct(n,r.length)},u:function(t,r){var n=t.getUTCFullYear();return ct(n,r.length)},Q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"Q":return String(a);case"QQ":return ct(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(t,r,n){var a=Math.ceil((t.getUTCMonth()+1)/3);switch(r){case"q":return String(a);case"qq":return ct(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(t,r,n){var a=t.getUTCMonth();switch(r){case"M":case"MM":return zi.M(t,r);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(t,r,n){var a=t.getUTCMonth();switch(r){case"L":return String(a+1);case"LL":return ct(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(t,r,n,a){var i=Eee(t,a);return r==="wo"?n.ordinalNumber(i,{unit:"week"}):ct(i,r.length)},I:function(t,r,n){var a=See(t);return r==="Io"?n.ordinalNumber(a,{unit:"week"}):ct(a,r.length)},d:function(t,r,n){return r==="do"?n.ordinalNumber(t.getUTCDate(),{unit:"date"}):zi.d(t,r)},D:function(t,r,n){var a=jee(t);return r==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):ct(a,r.length)},E:function(t,r,n){var a=t.getUTCDay();switch(r){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"e":return String(o);case"ee":return ct(o,2);case"eo":return n.ordinalNumber(o,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,r,n,a){var i=t.getUTCDay(),o=(i-a.weekStartsOn+8)%7||7;switch(r){case"c":return String(o);case"cc":return ct(o,r.length);case"co":return n.ordinalNumber(o,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,r,n){var a=t.getUTCDay(),i=a===0?7:a;switch(r){case"i":return String(i);case"ii":return ct(i,r.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(t,r,n){var a=t.getUTCHours(),i=a/12>=1?"pm":"am";switch(r){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,r,n){var a=t.getUTCHours(),i;switch(a===12?i=Ho.noon:a===0?i=Ho.midnight:i=a/12>=1?"pm":"am",r){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,r,n){var a=t.getUTCHours(),i;switch(a>=17?i=Ho.evening:a>=12?i=Ho.afternoon:a>=4?i=Ho.morning:i=Ho.night,r){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,r,n){if(r==="ho"){var a=t.getUTCHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return zi.h(t,r)},H:function(t,r,n){return r==="Ho"?n.ordinalNumber(t.getUTCHours(),{unit:"hour"}):zi.H(t,r)},K:function(t,r,n){var a=t.getUTCHours()%12;return r==="Ko"?n.ordinalNumber(a,{unit:"hour"}):ct(a,r.length)},k:function(t,r,n){var a=t.getUTCHours();return a===0&&(a=24),r==="ko"?n.ordinalNumber(a,{unit:"hour"}):ct(a,r.length)},m:function(t,r,n){return r==="mo"?n.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):zi.m(t,r)},s:function(t,r,n){return r==="so"?n.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):zi.s(t,r)},S:function(t,r){return zi.S(t,r)},X:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();if(o===0)return"Z";switch(r){case"X":return OS(o);case"XXXX":case"XX":return Vs(o);case"XXXXX":case"XXX":default:return Vs(o,":")}},x:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"x":return OS(o);case"xxxx":case"xx":return Vs(o);case"xxxxx":case"xxx":default:return Vs(o,":")}},O:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"O":case"OO":case"OOO":return"GMT"+PS(o,":");case"OOOO":default:return"GMT"+Vs(o,":")}},z:function(t,r,n,a){var i=a._originalDate||t,o=i.getTimezoneOffset();switch(r){case"z":case"zz":case"zzz":return"GMT"+PS(o,":");case"zzzz":default:return"GMT"+Vs(o,":")}},t:function(t,r,n,a){var i=a._originalDate||t,o=Math.floor(i.getTime()/1e3);return ct(o,r.length)},T:function(t,r,n,a){var i=a._originalDate||t,o=i.getTime();return ct(o,r.length)}};function PS(e,t){var r=e>0?"-":"+",n=Math.abs(e),a=Math.floor(n/60),i=n%60;if(i===0)return r+String(a);var o=t||"";return r+String(a)+o+ct(i,2)}function OS(e,t){if(e%60===0){var r=e>0?"-":"+";return r+ct(Math.abs(e)/60,2)}return Vs(e,t)}function Vs(e,t){var r=t||"",n=e>0?"-":"+",a=Math.abs(e),i=ct(Math.floor(a/60),2),o=ct(a%60,2);return n+i+r+o}const Aee=Oee;var AS=function(t,r){switch(t){case"P":return r.date({width:"short"});case"PP":return r.date({width:"medium"});case"PPP":return r.date({width:"long"});case"PPPP":default:return r.date({width:"full"})}},$A=function(t,r){switch(t){case"p":return r.time({width:"short"});case"pp":return r.time({width:"medium"});case"ppp":return r.time({width:"long"});case"pppp":default:return r.time({width:"full"})}},Tee=function(t,r){var n=t.match(/(P+)(p+)?/)||[],a=n[1],i=n[2];if(!i)return AS(t,r);var o;switch(a){case"P":o=r.dateTime({width:"short"});break;case"PP":o=r.dateTime({width:"medium"});break;case"PPP":o=r.dateTime({width:"long"});break;case"PPPP":default:o=r.dateTime({width:"full"});break}return o.replace("{{date}}",AS(a,r)).replace("{{time}}",$A(i,r))},Mee={p:$A,P:Tee};const Dee=Mee;var $ee=["D","DD"],Iee=["YY","YYYY"];function Lee(e){return $ee.indexOf(e)!==-1}function Ree(e){return Iee.indexOf(e)!==-1}function TS(e,t,r){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(r,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var zee={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Fee=function(t,r,n){var a,i=zee[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",r.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};const Bee=Fee;function yl(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.width?String(t.width):e.defaultWidth,n=e.formats[r]||e.formats[e.defaultWidth];return n}}var Uee={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Wee={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Vee={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},qee={date:yl({formats:Uee,defaultWidth:"full"}),time:yl({formats:Wee,defaultWidth:"full"}),dateTime:yl({formats:Vee,defaultWidth:"full"})};const Hee=qee;var Kee={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Yee=function(t,r,n,a){return Kee[t]};const Gee=Yee;function Ta(e){return function(t,r){var n=r!=null&&r.context?String(r.context):"standalone",a;if(n==="formatting"&&e.formattingValues){var i=e.defaultFormattingWidth||e.defaultWidth,o=r!=null&&r.width?String(r.width):i;a=e.formattingValues[o]||e.formattingValues[i]}else{var l=e.defaultWidth,c=r!=null&&r.width?String(r.width):e.defaultWidth;a=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return a[u]}}var Xee={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Qee={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Zee={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Jee={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ete={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},tte={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rte=function(t,r){var n=Number(t),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},nte={ordinalNumber:rte,era:Ta({values:Xee,defaultWidth:"wide"}),quarter:Ta({values:Qee,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ta({values:Zee,defaultWidth:"wide"}),day:Ta({values:Jee,defaultWidth:"wide"}),dayPeriod:Ta({values:ete,defaultWidth:"wide",formattingValues:tte,defaultFormattingWidth:"wide"})};const ate=nte;function Ma(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;var o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?ste(l,function(f){return f.test(o)}):ite(l,function(f){return f.test(o)}),u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;var d=t.slice(o.length);return{value:u,rest:d}}}function ite(e,t){for(var r in e)if(e.hasOwnProperty(r)&&t(e[r]))return r}function ste(e,t){for(var r=0;r<e.length;r++)if(t(e[r]))return r}function IA(e){return function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.match(e.matchPattern);if(!n)return null;var a=n[0],i=t.match(e.parsePattern);if(!i)return null;var o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;var l=t.slice(a.length);return{value:o,rest:l}}}var ote=/^(\d+)(th|st|nd|rd)?/i,lte=/\d+/i,cte={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},ute={any:[/^b/i,/^(a|c)/i]},dte={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fte={any:[/1/i,/2/i,/3/i,/4/i]},mte={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},hte={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},pte={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},gte={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},vte={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},xte={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yte={ordinalNumber:IA({matchPattern:ote,parsePattern:lte,valueCallback:function(t){return parseInt(t,10)}}),era:Ma({matchPatterns:cte,defaultMatchWidth:"wide",parsePatterns:ute,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:dte,defaultMatchWidth:"wide",parsePatterns:fte,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ma({matchPatterns:mte,defaultMatchWidth:"wide",parsePatterns:hte,defaultParseWidth:"any"}),day:Ma({matchPatterns:pte,defaultMatchWidth:"wide",parsePatterns:gte,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:vte,defaultMatchWidth:"any",parsePatterns:xte,defaultParseWidth:"any"})};const bte=yte;var wte={code:"en-US",formatDistance:Bee,formatLong:Hee,formatRelative:Gee,localize:ate,match:bte,options:{weekStartsOn:0,firstWeekContainsDate:1}};const jte=wte;var _te=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Nte=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ste=/^'([^]*?)'?$/,kte=/''/g,Cte=/[a-zA-Z]/;function ze(e,t,r){var n,a,i,o,l,c,u,d,f,h,p,g,x,y,v,b,w,j;ft(2,arguments);var N=String(t),_=ac(),S=(n=(a=r==null?void 0:r.locale)!==null&&a!==void 0?a:_.locale)!==null&&n!==void 0?n:jte,C=xn((i=(o=(l=(c=r==null?void 0:r.firstWeekContainsDate)!==null&&c!==void 0?c:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&l!==void 0?l:_.firstWeekContainsDate)!==null&&o!==void 0?o:(f=_.locale)===null||f===void 0||(h=f.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&i!==void 0?i:1);if(!(C>=1&&C<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=xn((p=(g=(x=(y=r==null?void 0:r.weekStartsOn)!==null&&y!==void 0?y:r==null||(v=r.locale)===null||v===void 0||(b=v.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&x!==void 0?x:_.weekStartsOn)!==null&&g!==void 0?g:(w=_.locale)===null||w===void 0||(j=w.options)===null||j===void 0?void 0:j.weekStartsOn)!==null&&p!==void 0?p:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!S.localize)throw new RangeError("locale must contain localize property");if(!S.formatLong)throw new RangeError("locale must contain formatLong property");var A=ir(e);if(!gee(A))throw new RangeError("Invalid time value");var T=hee(A),D=bee(A,T),q={firstWeekContainsDate:C,weekStartsOn:O,locale:S,_originalDate:A},re=N.match(Nte).map(function(K){var z=K[0];if(z==="p"||z==="P"){var P=Dee[z];return P(K,S.formatLong)}return K}).join("").match(_te).map(function(K){if(K==="''")return"'";var z=K[0];if(z==="'")return Ete(K);var P=Aee[z];if(P)return!(r!=null&&r.useAdditionalWeekYearTokens)&&Ree(K)&&TS(K,t,String(e)),!(r!=null&&r.useAdditionalDayOfYearTokens)&&Lee(K)&&TS(K,t,String(e)),P(D,K,S.localize,q);if(z.match(Cte))throw new RangeError("Format string contains an unescaped latin alphabet character `"+z+"`");return K}).join("");return re}function Ete(e){var t=e.match(Ste);return t?t[1].replace(kte,"'"):e}function df(e,t){ft(2,arguments);var r=xn(t);return Xo(e,-r)}function ii(e,t){var r;ft(1,arguments);var n=xn((r=t==null?void 0:t.additionalDigits)!==null&&r!==void 0?r:2);if(n!==2&&n!==1&&n!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var a=Tte(e),i;if(a.date){var o=Mte(a.date,n);i=Dte(o.restDateString,o.year)}if(!i||isNaN(i.getTime()))return new Date(NaN);var l=i.getTime(),c=0,u;if(a.time&&(c=$te(a.time),isNaN(c)))return new Date(NaN);if(a.timezone){if(u=Ite(a.timezone),isNaN(u))return new Date(NaN)}else{var d=new Date(l+c),f=new Date(0);return f.setFullYear(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate()),f.setHours(d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds(),d.getUTCMilliseconds()),f}return new Date(l+c+u)}var ff={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Pte=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Ote=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ate=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Tte(e){var t={},r=e.split(ff.dateTimeDelimiter),n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],ff.timeZoneDelimiter.test(t.date)&&(t.date=e.split(ff.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){var a=ff.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Mte(e,t){var r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};var a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function Dte(e,t){if(t===null)return new Date(NaN);var r=e.match(Pte);if(!r)return new Date(NaN);var n=!!r[4],a=kc(r[1]),i=kc(r[2])-1,o=kc(r[3]),l=kc(r[4]),c=kc(r[5])-1;if(n)return Bte(t,l,c)?Lte(t,l,c):new Date(NaN);var u=new Date(0);return!zte(t,i,o)||!Fte(t,a)?new Date(NaN):(u.setUTCFullYear(t,i,Math.max(a,o)),u)}function kc(e){return e?parseInt(e):1}function $te(e){var t=e.match(Ote);if(!t)return NaN;var r=dg(t[1]),n=dg(t[2]),a=dg(t[3]);return Ute(r,n,a)?r*AA+n*OA+a*1e3:NaN}function dg(e){return e&&parseFloat(e.replace(",","."))||0}function Ite(e){if(e==="Z")return 0;var t=e.match(Ate);if(!t)return 0;var r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return Wte(n,a)?r*(n*AA+a*OA):NaN}function Lte(e,t,r){var n=new Date(0);n.setUTCFullYear(e,0,4);var a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}var Rte=[31,null,31,30,31,30,31,31,30,31,30,31];function LA(e){return e%400===0||e%4===0&&e%100!==0}function zte(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Rte[t]||(LA(e)?29:28))}function Fte(e,t){return t>=1&&t<=(LA(e)?366:365)}function Bte(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function Ute(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function Wte(e,t){return t>=0&&t<=59}function Vte(e,t){ft(2,arguments);var r=xn(t);return dee(e,-r)}var qte={lessThanXSeconds:{one:"menos de um segundo",other:"menos de {{count}} segundos"},xSeconds:{one:"1 segundo",other:"{{count}} segundos"},halfAMinute:"meio minuto",lessThanXMinutes:{one:"menos de um minuto",other:"menos de {{count}} minutos"},xMinutes:{one:"1 minuto",other:"{{count}} minutos"},aboutXHours:{one:"cerca de 1 hora",other:"cerca de {{count}} horas"},xHours:{one:"1 hora",other:"{{count}} horas"},xDays:{one:"1 dia",other:"{{count}} dias"},aboutXWeeks:{one:"cerca de 1 semana",other:"cerca de {{count}} semanas"},xWeeks:{one:"1 semana",other:"{{count}} semanas"},aboutXMonths:{one:"cerca de 1 ms",other:"cerca de {{count}} meses"},xMonths:{one:"1 ms",other:"{{count}} meses"},aboutXYears:{one:"cerca de 1 ano",other:"cerca de {{count}} anos"},xYears:{one:"1 ano",other:"{{count}} anos"},overXYears:{one:"mais de 1 ano",other:"mais de {{count}} anos"},almostXYears:{one:"quase 1 ano",other:"quase {{count}} anos"}},Hte=function(t,r,n){var a,i=qte[t];return typeof i=="string"?a=i:r===1?a=i.one:a=i.other.replace("{{count}}",String(r)),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"em "+a:"h "+a:a};const Kte=Hte;var Yte={full:"EEEE, d 'de' MMMM 'de' y",long:"d 'de' MMMM 'de' y",medium:"d MMM y",short:"dd/MM/yyyy"},Gte={full:"HH:mm:ss zzzz",long:"HH:mm:ss z",medium:"HH:mm:ss",short:"HH:mm"},Xte={full:"{{date}} 's' {{time}}",long:"{{date}} 's' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Qte={date:yl({formats:Yte,defaultWidth:"full"}),time:yl({formats:Gte,defaultWidth:"full"}),dateTime:yl({formats:Xte,defaultWidth:"full"})};const Zte=Qte;var Jte={lastWeek:function(t){var r=t.getUTCDay(),n=r===0||r===6?"ltimo":"ltima";return"'"+n+"' eeee 's' p"},yesterday:"'ontem s' p",today:"'hoje s' p",tomorrow:"'amanh s' p",nextWeek:"eeee 's' p",other:"P"},ere=function(t,r,n,a){var i=Jte[t];return typeof i=="function"?i(r):i};const tre=ere;var rre={narrow:["AC","DC"],abbreviated:["AC","DC"],wide:["antes de cristo","depois de cristo"]},nre={narrow:["1","2","3","4"],abbreviated:["T1","T2","T3","T4"],wide:["1 trimestre","2 trimestre","3 trimestre","4 trimestre"]},are={narrow:["j","f","m","a","m","j","j","a","s","o","n","d"],abbreviated:["jan","fev","mar","abr","mai","jun","jul","ago","set","out","nov","dez"],wide:["janeiro","fevereiro","maro","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"]},ire={narrow:["D","S","T","Q","Q","S","S"],short:["dom","seg","ter","qua","qui","sex","sab"],abbreviated:["domingo","segunda","tera","quarta","quinta","sexta","sbado"],wide:["domingo","segunda-feira","tera-feira","quarta-feira","quinta-feira","sexta-feira","sbado"]},sre={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"manh",afternoon:"tarde",evening:"tarde",night:"noite"}},ore={narrow:{am:"a",pm:"p",midnight:"mn",noon:"md",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},abbreviated:{am:"AM",pm:"PM",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"},wide:{am:"a.m.",pm:"p.m.",midnight:"meia-noite",noon:"meio-dia",morning:"da manh",afternoon:"da tarde",evening:"da tarde",night:"da noite"}},lre=function(t,r){var n=Number(t);return(r==null?void 0:r.unit)==="week"?n+"":n+""},cre={ordinalNumber:lre,era:Ta({values:rre,defaultWidth:"wide"}),quarter:Ta({values:nre,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Ta({values:are,defaultWidth:"wide"}),day:Ta({values:ire,defaultWidth:"wide"}),dayPeriod:Ta({values:sre,defaultWidth:"wide",formattingValues:ore,defaultFormattingWidth:"wide"})};const ure=cre;var dre=/^(\d+)[o]?/i,fre=/\d+/i,mre={narrow:/^(ac|dc|a|d)/i,abbreviated:/^(a\.?\s?c\.?|d\.?\s?c\.?)/i,wide:/^(antes de cristo|depois de cristo)/i},hre={any:[/^ac/i,/^dc/i],wide:[/^antes de cristo/i,/^depois de cristo/i]},pre={narrow:/^[1234]/i,abbreviated:/^T[1234]/i,wide:/^[1234]()? trimestre/i},gre={any:[/1/i,/2/i,/3/i,/4/i]},vre={narrow:/^[jfmajsond]/i,abbreviated:/^(jan|fev|mar|abr|mai|jun|jul|ago|set|out|nov|dez)/i,wide:/^(janeiro|fevereiro|maro|abril|maio|junho|julho|agosto|setembro|outubro|novembro|dezembro)/i},xre={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^fev/i,/^mar/i,/^abr/i,/^mai/i,/^jun/i,/^jul/i,/^ago/i,/^set/i,/^out/i,/^nov/i,/^dez/i]},yre={narrow:/^(dom|[23456]?|s[a]b)/i,short:/^(dom|[23456]?|s[a]b)/i,abbreviated:/^(dom|seg|ter|qua|qui|sex|s[a]b)/i,wide:/^(domingo|(segunda|ter[c]a|quarta|quinta|sexta)([- ]feira)?|s[a]bado)/i},bre={short:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],narrow:[/^d/i,/^2/i,/^3/i,/^4/i,/^5/i,/^6/i,/^s[a]/i],any:[/^d/i,/^seg/i,/^t/i,/^qua/i,/^qui/i,/^sex/i,/^s[a]b/i]},wre={narrow:/^(a|p|mn|md|(da) (manh|tarde|noite))/i,any:/^([ap]\.?\s?m\.?|meia[-\s]noite|meio[-\s]dia|(da) (manh|tarde|noite))/i},jre={any:{am:/^a/i,pm:/^p/i,midnight:/^mn|^meia[-\s]noite/i,noon:/^md|^meio[-\s]dia/i,morning:/manh/i,afternoon:/tarde/i,evening:/tarde/i,night:/noite/i}},_re={ordinalNumber:IA({matchPattern:dre,parsePattern:fre,valueCallback:function(t){return parseInt(t,10)}}),era:Ma({matchPatterns:mre,defaultMatchWidth:"wide",parsePatterns:hre,defaultParseWidth:"any"}),quarter:Ma({matchPatterns:pre,defaultMatchWidth:"wide",parsePatterns:gre,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ma({matchPatterns:vre,defaultMatchWidth:"wide",parsePatterns:xre,defaultParseWidth:"any"}),day:Ma({matchPatterns:yre,defaultMatchWidth:"wide",parsePatterns:bre,defaultParseWidth:"any"}),dayPeriod:Ma({matchPatterns:wre,defaultMatchWidth:"any",parsePatterns:jre,defaultParseWidth:"any"})};const Nre=_re;var Sre={code:"pt-BR",formatDistance:Kte,formatLong:Zte,formatRelative:tre,localize:ure,match:Nre,options:{weekStartsOn:0,firstWeekContainsDate:1}};const Rt=Sre;function kre(){const[e,t]=m.useState({totalClients:0,totalPets:0,activeServices:0,visitsToday:0,monthlyRevenue:0,monthlyVisits:0,lastMonthRevenue:0,lastMonthVisits:0,visitasRealizadas:0,visitasAgendadas:0,ticketMedio:0,clientesNovos:0}),[r,n]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState([]),[d,f]=m.useState(!0),[h,p]=m.useState("30d");m.useEffect(()=>{g()},[h]);const g=async()=>{try{const N=new Date,_=ze(N,"yyyy-MM-dd"),S=h==="7d"?7:h==="30d"?30:90,C=df(N,S),O=ze(C,"yyyy-MM-dd"),A=ze(df(C,S),"yyyy-MM-dd"),T=ze(df(C,1),"yyyy-MM-dd"),D=Px(N),[q,re,K,z,P,M,L]=await Promise.all([W.from("clients").select("*",{count:"exact"}),W.from("pets").select("*",{count:"exact"}),W.from("services").select("*",{count:"exact"}).neq("status_pagamento","pago"),W.from("visits").select("*",{count:"exact"}).eq("data",_),W.from("visits").select("valor, desconto_plataforma, status, tipo_visita, data").gte("data",O).lte("data",_),W.from("visits").select("valor, desconto_plataforma, status").eq("status","realizada").gte("data",A).lte("data",T),W.from("clients").select("*",{count:"exact",head:!0}).gte("created_at",ze(D,"yyyy-MM-dd"))]),G=await W.from("visits").select(`
          id, data, horario, tipo_visita, valor, status,
          clients(nome),
          leads(nome)
        `).gte("data",_).in("status",["agendada"]).order("data",{ascending:!0}).order("horario",{ascending:!0}).limit(8),$=P.data||[],U=M.data||[],E=$.filter(ee=>ee.status==="realizada").length,Q=$.filter(ee=>ee.status==="agendada").length,J=$.filter(ee=>ee.status==="realizada").reduce((ee,he)=>ee+he.valor*(1-(he.desconto_plataforma||0)/100),0),de=U.reduce((ee,he)=>ee+he.valor*(1-(he.desconto_plataforma||0)/100),0),ae=E>0?J/E:0,pe=new Map;$.forEach(ee=>{if(ee.status==="realizada"){const he=ee.tipo_visita||"outros";pe.set(he,(pe.get(he)||0)+1)}});const k=Array.from(pe.entries()).map(([ee,he])=>({name:ee==="inteira"?"Inteira":ee==="meia"?"Meia":"Outros",value:he})),H=[],ne=S<=7?S:7;for(let ee=ne-1;ee>=0;ee--){const he=df(N,ee),je=ze(he,"yyyy-MM-dd"),Ae=$.filter(Ue=>Ue.data===je&&Ue.status==="realizada");H.push({name:ze(he,"EEE",{locale:Rt}),visitas:Ae.length,receita:Ae.reduce((Ue,Pe)=>Ue+Pe.valor*(1-(Pe.desconto_plataforma||0)/100),0)})}const Y=[];for(let ee=5;ee>=0;ee--){const he=Vte(N,ee),je=Px(he),Ae=TA(he),Pe=(await W.from("visits").select("valor, desconto_plataforma").eq("status","realizada").gte("data",ze(je,"yyyy-MM-dd")).lte("data",ze(Ae,"yyyy-MM-dd"))).data||[];Y.push({name:ze(he,"MMM",{locale:Rt}),visitas:Pe.length,receita:Pe.reduce((Je,Ge)=>Je+Ge.valor*(1-(Ge.desconto_plataforma||0)/100),0)})}t({totalClients:q.count||0,totalPets:re.count||0,activeServices:K.count||0,visitsToday:z.count||0,monthlyRevenue:J,monthlyVisits:E,lastMonthRevenue:de,lastMonthVisits:U.length,visitasRealizadas:E,visitasAgendadas:Q,ticketMedio:ae,clientesNovos:L.count||0});const me=(G.data||[]).map(ee=>({...ee,clients:Array.isArray(ee.clients)?ee.clients[0]:ee.clients,leads:Array.isArray(ee.leads)?ee.leads[0]:ee.leads}));n(me),i(H),l(Y),u(k)}catch(N){console.error("Erro ao buscar dados do dashboard:",N)}finally{f(!1)}},x=N=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(N),y=N=>{const _=new Date(N+"T00:00:00"),S=new Date;S.setHours(0,0,0,0);const C=new Date(S);return C.setDate(C.getDate()+1),_.getTime()===S.getTime()?"Hoje":_.getTime()===C.getTime()?"Amanh":ze(_,"EEE, dd/MM",{locale:Rt})},v=(N,_)=>_===0?N>0?100:0:(N-_)/_*100,b=["#10b981","#3b82f6","#f59e0b","#ef4444"];if(d)return s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(In,{size:"lg",variant:"sleeping",text:"Carregando dashboard..."})});const w=v(e.monthlyRevenue,e.lastMonthRevenue),j=v(e.monthlyVisits,e.lastMonthVisits);return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Dashboard"}),s.jsxs("select",{value:h,onChange:N=>p(N.target.value),className:"input-fefelina w-auto text-sm",children:[s.jsx("option",{value:"7d",children:"ltimos 7 dias"}),s.jsx("option",{value:"30d",children:"ltimos 30 dias"}),s.jsx("option",{value:"90d",children:"ltimos 90 dias"})]})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 p-6 rounded-lg shadow-md border border-green-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-green-600",children:"Receita Mensal"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:x(e.monthlyRevenue)}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsxs("span",{className:`text-xs font-medium ${w>=0?"text-green-600":"text-red-600"}`,children:[w>=0?"":""," ",Math.abs(w).toFixed(1),"%"]}),s.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"vs ms anterior"})]})]}),s.jsx("div",{className:"bg-green-500 rounded-full p-3",children:s.jsx("span",{className:"text-white text-2xl",children:""})})]})}),s.jsx("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-6 rounded-lg shadow-md border border-blue-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Visitas Realizadas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.visitasRealizadas}),s.jsxs("div",{className:"flex items-center mt-2",children:[s.jsxs("span",{className:`text-xs font-medium ${j>=0?"text-green-600":"text-red-600"}`,children:[j>=0?"":""," ",Math.abs(j).toFixed(1),"%"]}),s.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"vs ms anterior"})]})]}),s.jsx("div",{className:"bg-blue-500 rounded-full p-3",children:s.jsx("span",{className:"text-white text-2xl",children:""})})]})}),s.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-pink-50 p-6 rounded-lg shadow-md border border-purple-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Ticket Mdio"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:x(e.ticketMedio)}),s.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:[e.totalClients," clientes ativos"]})]}),s.jsx("div",{className:"bg-purple-500 rounded-full p-3",children:s.jsx("span",{className:"text-white text-2xl",children:""})})]})}),s.jsx("div",{className:"bg-gradient-to-br from-orange-50 to-yellow-50 p-6 rounded-lg shadow-md border border-orange-100",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-orange-600",children:"Clientes Novos"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:e.clientesNovos}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"neste ms"})]}),s.jsx("div",{className:"bg-orange-500 rounded-full p-3",children:s.jsx("span",{className:"text-white text-2xl",children:""})})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Tendncia de Receita (6 meses)"}),s.jsx(Tf,{width:"100%",height:300,children:s.jsxs(QJ,{data:o,children:[s.jsx(Zm,{strokeDasharray:"3 3"}),s.jsx(rh,{dataKey:"name"}),s.jsx(Qc,{yAxisId:"left"}),s.jsx(Qc,{yAxisId:"right",orientation:"right"}),s.jsx(Df,{formatter:(N,_)=>_==="receita"?x(N):N}),s.jsx(Xv,{}),s.jsx(bx,{yAxisId:"left",type:"monotone",dataKey:"receita",stroke:"#10b981",strokeWidth:2,name:"Receita (R$)"}),s.jsx(bx,{yAxisId:"right",type:"monotone",dataKey:"visitas",stroke:"#3b82f6",strokeWidth:2,name:"Visitas"})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Visitas por Dia (ltima Semana)"}),s.jsx(Tf,{width:"100%",height:300,children:s.jsxs(EA,{data:a,children:[s.jsx(Zm,{strokeDasharray:"3 3"}),s.jsx(rh,{dataKey:"name"}),s.jsx(Qc,{}),s.jsx(Df,{}),s.jsx(Xv,{}),s.jsx(th,{dataKey:"visitas",fill:"#3b82f6",name:"Visitas"})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Distribuio por Tipo de Visita"}),s.jsx(Tf,{width:"100%",height:300,children:s.jsxs(uee,{children:[s.jsx(V3,{data:c,cx:"50%",cy:"50%",labelLine:!1,label:({name:N,percent:_})=>`${N} ${_?(_*100).toFixed(0):0}%`,outerRadius:100,fill:"#8884d8",dataKey:"value",children:c.map((N,_)=>s.jsx(gd,{fill:b[_%b.length]},`cell-${_}`))}),s.jsx(Df,{})]})})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Prximas Visitas Agendadas"}),s.jsx("div",{className:"space-y-3 max-h-[300px] overflow-y-auto",children:r.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"Nenhuma visita agendada"}):r.map(N=>{var _,S;return s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:((_=N.clients)==null?void 0:_.nome)||((S=N.leads)==null?void 0:S.nome)||"Cliente"}),s.jsxs("p",{className:"text-sm text-gray-500",children:[y(N.data),"  ",N.horario]})]}),s.jsxs("div",{className:"text-right ml-4",children:[s.jsx("p",{className:"font-semibold text-green-600",children:x(N.valor)}),s.jsx("p",{className:"text-xs text-gray-500 capitalize",children:N.tipo_visita})]})]},N.id)})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-green-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Visitas Realizadas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.visitasRealizadas})]}),s.jsx("span",{className:"text-3xl",children:""})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg shadow border-l-4 border-blue-500",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-gray-600",children:"Visitas Agendadas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.visitasAgendadas})]}),s.jsx("span",{className:"text-3xl",children:""})]})})]})]})}function Cre(e){const[t,r]=m.useState([]),[n,a]=m.useState(!0),{isAdmin:i,userProfile:o}=nn();m.useEffect(()=>{o&&l()},[o,e]);const l=async()=>{try{if(i){r([]),a(!1);return}if(!(o!=null&&o.profile_id)){r([]),a(!1);return}const{data:d,error:f}=await W.from("field_permissions").select("table_name, field_name, can_read, can_write").eq("profile_id",o.profile_id).eq("table_name",e);if(f)throw f;r(d||[])}catch(d){console.error("Erro ao carregar permisses de campo:",d),r([])}finally{a(!1)}};return{canRead:d=>{if(i)return!0;const f=t.find(h=>h.field_name===d);return f?f.can_read:!0},canWrite:d=>{if(i)return!0;const f=t.find(h=>h.field_name===d);return f?f.can_read&&f.can_write:!1},loading:n,permissions:t}}function Rl(e){const{canRead:t,loading:r}=Cre(e);return{maskField:(i,o,l="")=>r?"...":t(i)?o??"-":l,shouldShowField:i=>r?!0:t(i),loading:r,canRead:t}}const Ere=e=>{const t=e.replace(/\D/g,"");if(t.length===0)return"";const r=t.slice(0,13);if(r.length<=2)return`+${r}`;if(r.length<=4)return`+${r.slice(0,2)}(${r.slice(2)}`;if(r.length<=9)return`+${r.slice(0,2)}(${r.slice(2,4)})${r.slice(4)}`;{const n=r.slice(4);if(n.length<=4)return`+${r.slice(0,2)}(${r.slice(2,4)})${n}`;{const a=n.length===9?5:4;return`+${r.slice(0,2)}(${r.slice(2,4)})${n.slice(0,a)}-${n.slice(a)}`}}};function Pre(){const e=Ei(),{maskField:t}=Rl("clients"),{userProfile:r,canCreate:n,canUpdate:a}=nn(),i=n("clients"),o=a("clients"),[l,c]=m.useState([]),[u,d]=m.useState(!0),[f,h]=m.useState(!1),[p,g]=m.useState(!1),[x,y]=m.useState(!1),[v,b]=m.useState(!1),[w,j]=m.useState(null),[N,_]=m.useState([]),[S,C]=m.useState("alphabetical"),[O,A]=m.useState(""),[T,D]=m.useState([]),[q,re]=m.useState(!1),[K,z]=m.useState(null),[P,M]=m.useState([]),[L,G]=m.useState(!1),[$,U]=m.useState(null),[E,Q]=m.useState({nome:"",caracteristica:"",observacoes:""}),[J,de]=m.useState({nome:"",telefone:"",valor_diaria:"",valor_duas_visitas:"",endereco_completo:"",veterinario_confianca:""}),[ae,pe]=m.useState([{nome:"",caracteristica:"",observacoes:""}]);m.useEffect(()=>{k()},[S]),m.useEffect(()=>{if(O.trim()==="")D(l);else{const F=l.filter(oe=>oe.nome.toLowerCase().includes(O.toLowerCase()));D(F)}},[l,O]);const k=async()=>{d(!0);try{if(S==="recent_services"){const{data:F,error:oe}=await W.from("clients").select(`
            *,
            services (
              id,
              data_inicio,
              data_fim,
              visits (
                data,
                status
              )
            )
          `);if(oe)throw oe;const be=(F||[]).sort((Te,Me)=>{const Ye=xt=>{var ie;let Z=0;return((ie=xt.services)==null?void 0:ie.length)>0&&xt.services.forEach(fe=>{var De;if(((De=fe.visits)==null?void 0:De.length)>0&&fe.visits.forEach($e=>{if($e.status==="realizada"){const We=new Date($e.data).getTime();We>Z&&(Z=We)}}),Z===0&&fe.data_fim){const $e=new Date(fe.data_fim).getTime();$e>Z&&(Z=$e)}if(Z===0&&fe.data_inicio){const $e=new Date(fe.data_inicio).getTime();$e>Z&&(Z=$e)}}),Z},Ct=Ye(Te),ht=Ye(Me);return Ct>0&&ht>0?ht-Ct:Ct>0&&ht===0?-1:ht>0&&Ct===0?1:Te.nome.localeCompare(Me.nome)});c(be)}else{const{data:F,error:oe}=await W.from("clients").select("*").order("nome",{ascending:!0});if(oe)throw oe;c(F||[])}}catch(F){console.error("Erro ao buscar clientes:",F),c([])}d(!1)},H=async F=>{var be;if(((be=r==null?void 0:r.profile)==null?void 0:be.name)==="Administrador")e(`/clients/${F.id}`);else{z(F);try{const{data:Te,error:Me}=await W.from("pets").select("*").eq("client_id",F.id);if(Me)throw Me;M(Te||[])}catch(Te){console.error("Erro ao buscar pets:",Te),M([])}re(!0)}},ne=()=>{re(!1),z(null),M([])},Y=async F=>{if(F.preventDefault(),f){X.error("Aguarde, o cliente est sendo salvo...");return}h(!0);try{const{data:oe,error:be}=await W.from("clients").insert([{nome:J.nome,telefone:J.telefone||null,valor_diaria:parseFloat(J.valor_diaria),valor_duas_visitas:parseFloat(J.valor_duas_visitas),endereco_completo:J.endereco_completo,veterinario_confianca:J.veterinario_confianca}]).select().single();if(be)throw be;const Te=ae.filter(Me=>Me.nome.trim()!=="");if(Te.length>0){const Me=Te.map(Ct=>({client_id:oe.id,nome:Ct.nome,caracteristica:Ct.caracteristica,observacoes:Ct.observacoes||null})),{error:Ye}=await W.from("pets").insert(Me);if(Ye)throw Ye}X.success(Te.length>0?`Cliente "${J.nome}" e ${Te.length} pet(s) adicionados com sucesso!`:`Cliente "${J.nome}" adicionado com sucesso!`),de({nome:"",telefone:"",valor_diaria:"",valor_duas_visitas:"",endereco_completo:"",veterinario_confianca:""}),pe([{nome:"",caracteristica:"",observacoes:""}]),y(!1),k()}catch(oe){console.error("Erro ao adicionar cliente:",oe),X.error(`Erro ao adicionar cliente: ${oe.message}`)}finally{h(!1)}},me=F=>{const{name:oe,value:be}=F.target;de(oe==="telefone"?{...J,[oe]:Ere(be)}:{...J,[oe]:be})},ee=(F,oe,be)=>{const Te=[...ae];Te[F]={...Te[F],[oe]:be},pe(Te)},he=()=>{pe([{nome:"",caracteristica:"",observacoes:""},...ae])},je=()=>{w&&(Q({nome:"",caracteristica:"",observacoes:""}),U(null),G(!0))},Ae=F=>{Q({nome:F.nome,caracteristica:F.caracteristica||"",observacoes:F.observacoes||""}),U(F),G(!0)},Ue=async F=>{if(confirm("Tem certeza que deseja excluir este pet?"))try{const{error:oe}=await W.from("pets").delete().eq("id",F);if(oe)throw oe;X.success("Pet excludo com sucesso!"),_(N.filter(be=>be.id!==F))}catch(oe){console.error("Erro ao excluir pet:",oe),X.error("Erro ao excluir pet")}},Pe=async F=>{if(F.preventDefault(),!!w)try{if($){const{error:oe}=await W.from("pets").update({nome:E.nome,caracteristica:E.caracteristica||null,observacoes:E.observacoes||null}).eq("id",$.id);if(oe)throw oe;X.success("Pet atualizado com sucesso!"),_(N.map(be=>be.id===$.id?{...be,...E}:be))}else{const{data:oe,error:be}=await W.from("pets").insert({client_id:w.id,nome:E.nome,caracteristica:E.caracteristica||null,observacoes:E.observacoes||null}).select().single();if(be)throw be;X.success("Pet adicionado com sucesso!"),_([...N,oe])}G(!1),Q({nome:"",caracteristica:"",observacoes:""}),U(null)}catch(oe){console.error("Erro ao salvar pet:",oe),X.error("Erro ao salvar pet")}},Je=F=>{if(ae.length>1){const oe=ae.filter((be,Te)=>Te!==F);pe(oe)}},Ge=async F=>{j(F),de({nome:F.nome,telefone:F.telefone||"",valor_diaria:F.valor_diaria.toString(),valor_duas_visitas:F.valor_duas_visitas.toString(),endereco_completo:F.endereco_completo,veterinario_confianca:F.veterinario_confianca});const{data:oe,error:be}=await W.from("pets").select("*").eq("client_id",F.id);be?(console.error("Erro ao buscar pets:",be),_([])):_(oe||[]),b(!0)},mt=async F=>{if(F.preventDefault(),!!w){if(p){X.error("Aguarde, as alteraes esto sendo salvas...");return}g(!0);try{const{error:oe}=await W.from("clients").update({nome:J.nome,telefone:J.telefone||null,valor_diaria:parseFloat(J.valor_diaria),valor_duas_visitas:parseFloat(J.valor_duas_visitas),endereco_completo:J.endereco_completo,veterinario_confianca:J.veterinario_confianca,updated_at:new Date().toISOString()}).eq("id",w.id);if(oe)throw oe;const be=ae.filter(Te=>Te.nome.trim()!=="");if(be.length>0){const Te=be.map(Ye=>({client_id:w.id,nome:Ye.nome,caracteristica:Ye.caracteristica,observacoes:Ye.observacoes||null})),{error:Me}=await W.from("pets").insert(Te);if(Me)throw Me}X.success(be.length>0?`Cliente "${J.nome}" atualizado e ${be.length} novo(s) pet(s) adicionado(s)!`:`Cliente "${J.nome}" atualizado com sucesso!`),Oe(),k()}catch(oe){console.error("Erro ao atualizar cliente:",oe),X.error(`Erro ao atualizar cliente: ${oe.message}`)}finally{g(!1)}}},Oe=()=>{b(!1),j(null),_([]),de({nome:"",telefone:"",valor_diaria:"",valor_duas_visitas:"",endereco_completo:"",veterinario_confianca:""}),pe([{nome:"",caracteristica:"",observacoes:""}])};return s.jsxs("div",{children:[s.jsxs("div",{className:"sm:flex sm:items-center",children:[s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Clientes"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Lista de todos os clientes registrados no sistema."}),s.jsx("div",{className:"divider-fefelina"})]}),i&&s.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:s.jsx("button",{type:"button",onClick:()=>y(!0),className:"btn-fefelina",children:"Adicionar Cliente"})})]}),x&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-start justify-center p-4",children:s.jsxs("div",{className:"relative top-10 w-full max-w-4xl bg-white rounded-lg shadow-xl",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Adicionar Novo Cliente"}),s.jsx("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:Y,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide border-b pb-2",children:"Dados do Cliente"}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Nome"}),s.jsx("input",{type:"text",name:"nome",value:J.nome,onChange:me,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Telefone"}),s.jsx("input",{type:"text",name:"telefone",value:J.telefone,onChange:me,placeholder:"+55(47)99999-9999",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor Diria (R$)"}),s.jsx("input",{type:"number",step:"0.01",name:"valor_diaria",value:J.valor_diaria,onChange:me,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor 2 Visitas (R$)"}),s.jsx("input",{type:"number",step:"0.01",name:"valor_duas_visitas",value:J.valor_duas_visitas,onChange:me,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Endereo Completo"}),s.jsx("textarea",{name:"endereco_completo",value:J.endereco_completo,onChange:me,required:!0,rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Veterinrio de Confiana"}),s.jsx("input",{type:"text",name:"veterinario_confianca",value:J.veterinario_confianca,onChange:me,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center border-b pb-2",children:[s.jsx("h4",{className:"text-md font-medium text-gray-800",children:"Pets do Cliente"}),s.jsx("button",{type:"button",onClick:he,className:"text-sm text-primary-600 hover:text-primary-700 font-medium",children:"+ Adicionar Pet"})]}),s.jsx("div",{className:"max-h-96 overflow-y-auto space-y-4",children:ae.map((F,oe)=>s.jsxs("div",{className:"border border-gray-200 rounded-md p-3 bg-gray-50",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Pet ",oe+1]}),ae.length>1&&s.jsx("button",{type:"button",onClick:()=>Je(oe),className:"text-red-600 hover:text-red-700 text-sm",children:"Remover"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Nome do Pet"}),s.jsx("input",{type:"text",value:F.nome,onChange:be=>ee(oe,"nome",be.target.value),placeholder:"Ex: Mimi, Rex...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Caractersticas"}),s.jsx("input",{type:"text",value:F.caracteristica,onChange:be=>ee(oe,"caracteristica",be.target.value),placeholder:"Ex: Gato laranja, Cachorro pequeno porte...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Observaes"}),s.jsx("textarea",{value:F.observacoes,onChange:be=>ee(oe,"observacoes",be.target.value),placeholder:"Medicamentos, cuidados especiais...",rows:2,className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:outline-none focus:ring-primary-500 focus:border-primary-500"})]})]})]},oe))})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>{y(!1),de({nome:"",telefone:"",valor_diaria:"",valor_duas_visitas:"",endereco_completo:"",veterinario_confianca:""}),pe([{nome:"",caracteristica:"",observacoes:""}])},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:f,className:"px-3 py-1.5 text-sm font-medium text-white bg-primary-500 rounded-md hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:f?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Salvar Cliente e Pets"})]})]})})]})}),v&&w&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-start justify-center p-4",children:s.jsxs("div",{className:"relative top-10 w-full max-w-4xl bg-white rounded-lg shadow-xl",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Editar Cliente: ",w.nome]}),s.jsx("button",{onClick:()=>b(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:mt,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Nome"}),s.jsx("input",{type:"text",name:"nome",value:J.nome,onChange:me,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Telefone"}),s.jsx("input",{type:"text",name:"telefone",value:J.telefone,onChange:me,placeholder:"+55(47)99999-9999",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor Diria (R$)"}),s.jsx("input",{type:"number",step:"0.01",name:"valor_diaria",value:J.valor_diaria,onChange:me,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor 2 Visitas (R$)"}),s.jsx("input",{type:"number",step:"0.01",name:"valor_duas_visitas",value:J.valor_duas_visitas,onChange:me,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Veterinrio de Confiana"}),s.jsx("input",{type:"text",name:"veterinario_confianca",value:J.veterinario_confianca,onChange:me,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Endereo Completo"}),s.jsx("textarea",{name:"endereco_completo",value:J.endereco_completo,onChange:me,required:!0,rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsxs("h4",{className:"text-sm font-semibold text-gray-700 uppercase tracking-wide",children:["Pets (",N.length,")"]}),s.jsxs("button",{type:"button",onClick:je,className:"px-3 py-1.5 bg-primary-500 text-white text-xs font-medium rounded-md hover:bg-primary-600 transition-colors flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Pet"]})]}),N.length===0?s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4 text-center",children:s.jsx("p",{className:"text-sm text-gray-600",children:"Nenhum pet cadastrado ainda"})}):s.jsx("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Nome"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Caractersticas"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Observaes"}),s.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:N.map(F=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-3 py-2.5 text-sm font-medium text-gray-900",children:F.nome}),s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-600",children:F.caracteristica||"-"}),s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-600 max-w-xs truncate",children:F.observacoes||"-"}),s.jsx("td",{className:"px-3 py-2.5 text-center",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("button",{type:"button",onClick:()=>Ae(F),className:"text-purple-600 hover:text-purple-800 hover:bg-purple-50 p-1.5 rounded transition-colors",title:"Editar pet",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{type:"button",onClick:()=>Ue(F.id),className:"text-red-600 hover:text-red-800 hover:bg-red-50 p-1.5 rounded transition-colors",title:"Excluir pet",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]},F.id))})]})})]}),s.jsxs("div",{className:"flex justify-end gap-2 mt-6 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:Oe,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:p,className:"px-3 py-1.5 text-sm font-medium text-white bg-primary-500 rounded-md hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:p?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Salvar Alteraes"})]})]})})]})}),s.jsxs("div",{className:"mt-6 mb-4 space-y-4 sm:space-y-0 sm:flex sm:items-end sm:justify-between",children:[s.jsxs("div",{className:"flex-1 max-w-md",children:[s.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Buscar Cliente"}),s.jsxs("div",{className:"relative",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",id:"search",value:O,onChange:F=>A(F.target.value),placeholder:"Digite o nome do cliente...",className:"block w-full pl-10 pr-10 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 text-sm"}),O&&s.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:s.jsx("button",{type:"button",onClick:()=>A(""),className:"h-5 w-5 text-gray-400 hover:text-gray-600",children:s.jsx("svg",{fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]}),O&&s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:[T.length,' cliente(s) encontrado(s) para "',O,'"']})]}),s.jsxs("div",{className:"flex-shrink-0",children:[s.jsx("label",{htmlFor:"sort",className:"block text-sm font-medium text-gray-700 mb-2",children:"Ordenar por"}),s.jsxs("select",{id:"sort",value:S,onChange:F=>C(F.target.value),className:"block w-full pl-3 pr-10 py-2 text-sm border border-gray-300 bg-white rounded-md focus:outline-none focus:ring-1 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"recent_services",children:"Servios Recentes"}),s.jsx("option",{value:"alphabetical",children:"Ordem Alfabtica"})]})]})]}),s.jsx("div",{className:"mt-8 md:hidden space-y-4",children:u?s.jsx("div",{className:"text-center text-gray-500 py-4",children:"Carregando..."}):T.length===0?s.jsx("div",{className:"text-center text-gray-500 py-4",children:O?`Nenhum cliente encontrado para "${O}"`:"Nenhum cliente cadastrado ainda."}):T.map(F=>s.jsxs("div",{onClick:()=>H(F),className:"bg-white rounded-lg shadow-sm border p-4 cursor-pointer hover:bg-gray-50 transition-colors",children:[s.jsxs("div",{className:"flex justify-between items-start mb-3",children:[s.jsx("h3",{className:"font-medium text-gray-900 text-base",children:F.nome}),s.jsx("button",{onClick:oe=>{oe.stopPropagation(),Ge(F)},className:"text-primary-600 hover:text-primary-900 text-sm",children:"Editar"})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Diria:"}),s.jsx("span",{className:"font-medium",children:t("valor_diaria",`R$ ${F.valor_diaria.toFixed(2)}`)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"2 Visitas:"}),s.jsx("span",{className:"font-medium",children:t("valor_duas_visitas",`R$ ${F.valor_duas_visitas.toFixed(2)}`)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Endereo:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:F.endereco_completo})]}),F.veterinario_confianca&&s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Veterinrio:"}),s.jsx("p",{className:"text-gray-900 mt-1",children:F.veterinario_confianca})]})]})]},F.id))}),s.jsx("div",{className:"mt-8 hidden md:flex flex-col",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"inline-block min-w-full py-2 align-middle",children:s.jsx("div",{className:"overflow-hidden shadow ring-1 ring-black ring-opacity-5 md:rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-300 table-fixed",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nome"}),s.jsx("th",{className:"w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Diria"}),s.jsx("th",{className:"w-[12%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"2 Visitas"}),s.jsx("th",{className:"w-[30%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Endereo"}),s.jsx("th",{className:"w-[26%] relative px-4 py-3",children:s.jsx("span",{className:"sr-only",children:"Aes"})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-20",children:s.jsx("div",{className:"flex justify-center",children:s.jsx(In,{size:"md",variant:"paws",text:"Carregando clientes..."})})})}):T.length===0?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:O?`Nenhum cliente encontrado para "${O}"`:"Nenhum cliente cadastrado ainda."})}):T.map(F=>s.jsxs("tr",{onClick:()=>H(F),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[s.jsx("td",{className:"px-4 py-3 text-sm font-medium text-gray-900",children:F.nome}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:t("valor_diaria",`R$ ${F.valor_diaria.toFixed(2)}`)}),s.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:t("valor_duas_visitas",`R$ ${F.valor_duas_visitas.toFixed(2)}`)}),s.jsx("td",{className:"px-4 py-3 text-sm text-gray-500",children:s.jsx("div",{className:"truncate",title:F.endereco_completo,children:F.endereco_completo})}),s.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm font-medium",children:o&&s.jsx("button",{onClick:oe=>{oe.stopPropagation(),Ge(F)},className:"text-primary-600 hover:text-primary-900",title:"Editar cliente",children:"Editar"})})]},F.id))})]})})})})}),L&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-[60] flex items-center justify-center p-4",children:s.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:$?"Editar Pet":"Adicionar Pet"}),s.jsx("button",{onClick:()=>{G(!1),Q({nome:"",caracteristica:"",observacoes:""}),U(null)},className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:Pe,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Nome do Pet *"}),s.jsx("input",{type:"text",value:E.nome,onChange:F=>Q({...E,nome:F.target.value}),required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Miau, Rex, Bidu..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Caractersticas"}),s.jsx("input",{type:"text",value:E.caracteristica,onChange:F=>Q({...E,caracteristica:F.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: Gato persa branco, Cachorro SRD..."})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Observaes"}),s.jsx("textarea",{value:E.observacoes,onChange:F=>Q({...E,observacoes:F.target.value}),rows:3,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex:  assustado, gosta de brincar, alrgico a..."})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:()=>{G(!1),Q({nome:"",caracteristica:"",observacoes:""}),U(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-3 py-1.5 text-sm font-medium text-white bg-primary-500 rounded-md hover:bg-primary-600",children:$?"Salvar":"Adicionar"})]})]})})]})}),q&&K&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto pt-16 md:pt-0",children:s.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:ne}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base leading-6 font-medium text-gray-900",children:"Informaes do Cliente"}),s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Visualizao dos dados compartilhados"})]}),s.jsx("button",{onClick:ne,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-6 py-4 space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Dados do Cliente"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Nome"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:K.nome})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Telefone"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:t("telefone",K.telefone||"")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Email"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:t("email",K.email||"")})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Valor Diria"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:t("valor_diaria",`R$ ${K.valor_diaria.toFixed(2)}`)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Valor Duas Visitas"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:t("valor_duas_visitas",`R$ ${K.valor_duas_visitas.toFixed(2)}`)})]})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Endereo Completo"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:t("endereco_completo",K.endereco_completo||"")})]}),s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Veterinrio de Confiana"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:t("veterinario_confianca",K.veterinario_confianca||"")})]}),K.observacoes&&s.jsxs("div",{className:"mt-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Observaes"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:t("observacoes",K.observacoes)})]}),K.notas&&s.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Notas Internas"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900 whitespace-pre-wrap bg-orange-50 border border-orange-100 rounded-md p-3",children:t("notas",K.notas)})]})]}),s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:["Pets (",P.length,")"]}),P.length===0?s.jsx("div",{className:"bg-white border border-gray-200 rounded-md p-4 text-center",children:s.jsx("p",{className:"text-sm text-gray-500",children:"Nenhum pet cadastrado"})}):s.jsx("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-white",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Nome"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Caractersticas"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Observaes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(F=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-3 py-2.5 text-sm font-medium text-gray-900",children:F.nome}),s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-600",children:F.caracteristica||""}),s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-600",children:F.observacoes||""})]},F.id))})]})})]})]}),s.jsx("div",{className:"bg-gray-50 px-6 py-3 flex justify-end border-t border-gray-200",children:s.jsx("button",{onClick:ne,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Fechar"})})]})]})})]})}var Ore=Object.defineProperty,Are=(e,t,r)=>t in e?Ore(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,fg=(e,t,r)=>(Are(e,typeof t!="symbol"?t+"":t,r),r);let Tre=class{constructor(){fg(this,"current",this.detect()),fg(this,"handoffState","pending"),fg(this,"currentId",0)}set(t){this.current!==t&&(this.handoffState="pending",this.currentId=0,this.current=t)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},za=new Tre;function yd(e){var t;return za.isServer?null:e==null?document:(t=e==null?void 0:e.ownerDocument)!=null?t:document}function Ox(e){var t,r;return za.isServer?null:e==null?document:(r=(t=e==null?void 0:e.getRootNode)==null?void 0:t.call(e))!=null?r:document}function RA(e){var t,r;return(r=(t=Ox(e))==null?void 0:t.activeElement)!=null?r:null}function Mre(e){return RA(e)===e}function Up(e){typeof queueMicrotask=="function"?queueMicrotask(e):Promise.resolve().then(e).catch(t=>setTimeout(()=>{throw t}))}function Ii(){let e=[],t={addEventListener(r,n,a,i){return r.addEventListener(n,a,i),t.add(()=>r.removeEventListener(n,a,i))},requestAnimationFrame(...r){let n=requestAnimationFrame(...r);return t.add(()=>cancelAnimationFrame(n))},nextFrame(...r){return t.requestAnimationFrame(()=>t.requestAnimationFrame(...r))},setTimeout(...r){let n=setTimeout(...r);return t.add(()=>clearTimeout(n))},microTask(...r){let n={current:!0};return Up(()=>{n.current&&r[0]()}),t.add(()=>{n.current=!1})},style(r,n,a){let i=r.style.getPropertyValue(n);return Object.assign(r.style,{[n]:a}),this.add(()=>{Object.assign(r.style,{[n]:i})})},group(r){let n=Ii();return r(n),this.add(()=>n.dispose())},add(r){return e.includes(r)||e.push(r),()=>{let n=e.indexOf(r);if(n>=0)for(let a of e.splice(n,1))a()}},dispose(){for(let r of e.splice(0))r()}};return t}function Wp(){let[e]=m.useState(Ii);return m.useEffect(()=>()=>e.dispose(),[e]),e}let vn=(e,t)=>{za.isServer?m.useEffect(e,t):m.useLayoutEffect(e,t)};function Mo(e){let t=m.useRef(e);return vn(()=>{t.current=e},[e]),t}let bt=function(e){let t=Mo(e);return we.useCallback((...r)=>t.current(...r),[t])};function bd(e){return m.useMemo(()=>e,Object.values(e))}let Dre=m.createContext(void 0);function $re(){return m.useContext(Dre)}function Ax(...e){return Array.from(new Set(e.flatMap(t=>typeof t=="string"?t.split(" "):[]))).filter(Boolean).join(" ")}function _i(e,t,...r){if(e in t){let a=t[e];return typeof a=="function"?a(...r):a}let n=new Error(`Tried to handle "${e}" but there is no handler defined. Only defined handlers are: ${Object.keys(t).map(a=>`"${a}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,_i),n}var lh=(e=>(e[e.None=0]="None",e[e.RenderStrategy=1]="RenderStrategy",e[e.Static=2]="Static",e))(lh||{}),rs=(e=>(e[e.Unmount=0]="Unmount",e[e.Hidden=1]="Hidden",e))(rs||{});function aa(){let e=Lre();return m.useCallback(t=>Ire({mergeRefs:e,...t}),[e])}function Ire({ourProps:e,theirProps:t,slot:r,defaultTag:n,features:a,visible:i=!0,name:o,mergeRefs:l}){l=l??Rre;let c=zA(t,e);if(i)return mf(c,r,n,o,l);let u=a??0;if(u&2){let{static:d=!1,...f}=c;if(d)return mf(f,r,n,o,l)}if(u&1){let{unmount:d=!0,...f}=c;return _i(d?0:1,{0(){return null},1(){return mf({...f,hidden:!0,style:{display:"none"}},r,n,o,l)}})}return mf(c,r,n,o,l)}function mf(e,t={},r,n,a){let{as:i=r,children:o,refName:l="ref",...c}=mg(e,["unmount","static"]),u=e.ref!==void 0?{[l]:e.ref}:{},d=typeof o=="function"?o(t):o;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(t)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let f={};if(t){let h=!1,p=[];for(let[g,x]of Object.entries(t))typeof x=="boolean"&&(h=!0),x===!0&&p.push(g.replace(/([A-Z])/g,y=>`-${y.toLowerCase()}`));if(h){f["data-headlessui-state"]=p.join(" ");for(let g of p)f[`data-${g}`]=""}}if(Zc(i)&&(Object.keys(qs(c)).length>0||Object.keys(qs(f)).length>0))if(!m.isValidElement(d)||Array.isArray(d)&&d.length>1||Fre(d)){if(Object.keys(qs(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${n} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(qs(c)).concat(Object.keys(qs(f))).map(h=>`  - ${h}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(h=>`  - ${h}`).join(`
`)].join(`
`))}else{let h=d.props,p=h==null?void 0:h.className,g=typeof p=="function"?(...v)=>Ax(p(...v),c.className):Ax(p,c.className),x=g?{className:g}:{},y=zA(d.props,qs(mg(c,["ref"])));for(let v in f)v in y&&delete f[v];return m.cloneElement(d,Object.assign({},y,f,u,{ref:a(zre(d),u.ref)},x))}return m.createElement(i,Object.assign({},mg(c,["ref"]),!Zc(i)&&u,!Zc(i)&&f),d)}function Lre(){let e=m.useRef([]),t=m.useCallback(r=>{for(let n of e.current)n!=null&&(typeof n=="function"?n(r):n.current=r)},[]);return(...r)=>{if(!r.every(n=>n==null))return e.current=r,t}}function Rre(...e){return e.every(t=>t==null)?void 0:t=>{for(let r of e)r!=null&&(typeof r=="function"?r(t):r.current=t)}}function zA(...e){if(e.length===0)return{};if(e.length===1)return e[0];let t={},r={};for(let n of e)for(let a in n)a.startsWith("on")&&typeof n[a]=="function"?(r[a]!=null||(r[a]=[]),r[a].push(n[a])):t[a]=n[a];if(t.disabled||t["aria-disabled"])for(let n in r)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(n)&&(r[n]=[a=>{var i;return(i=a==null?void 0:a.preventDefault)==null?void 0:i.call(a)}]);for(let n in r)Object.assign(t,{[n](a,...i){let o=r[n];for(let l of o){if((a instanceof Event||(a==null?void 0:a.nativeEvent)instanceof Event)&&a.defaultPrevented)return;l(a,...i)}}});return t}function wn(e){var t;return Object.assign(m.forwardRef(e),{displayName:(t=e.displayName)!=null?t:e.name})}function qs(e){let t=Object.assign({},e);for(let r in t)t[r]===void 0&&delete t[r];return t}function mg(e,t=[]){let r=Object.assign({},e);for(let n of t)n in r&&delete r[n];return r}function zre(e){return we.version.split(".")[0]>="19"?e.props.ref:e.ref}function Zc(e){return e===m.Fragment||e===Symbol.for("react.fragment")}function Fre(e){return Zc(e.type)}let Bre="span";var ch=(e=>(e[e.None=1]="None",e[e.Focusable=2]="Focusable",e[e.Hidden=4]="Hidden",e))(ch||{});function Ure(e,t){var r;let{features:n=1,...a}=e,i={ref:t,"aria-hidden":(n&2)===2?!0:(r=a["aria-hidden"])!=null?r:void 0,hidden:(n&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(n&4)===4&&(n&2)!==2&&{display:"none"}}};return aa()({ourProps:i,theirProps:a,slot:{},defaultTag:Bre,name:"Hidden"})}let Tx=wn(Ure);function Wre(e){return typeof e!="object"||e===null?!1:"nodeType"in e}function hs(e){return Wre(e)&&"tagName"in e}function _o(e){return hs(e)&&"accessKey"in e}function ns(e){return hs(e)&&"tabIndex"in e}function Vre(e){return hs(e)&&"style"in e}function qre(e){return _o(e)&&e.nodeName==="IFRAME"}function Hre(e){return _o(e)&&e.nodeName==="INPUT"}let FA=Symbol();function Kre(e,t=!0){return Object.assign(e,{[FA]:t})}function Wa(...e){let t=m.useRef(e);m.useEffect(()=>{t.current=e},[e]);let r=bt(n=>{for(let a of t.current)a!=null&&(typeof a=="function"?a(n):a.current=n)});return e.every(n=>n==null||(n==null?void 0:n[FA]))?void 0:r}let nw=m.createContext(null);nw.displayName="DescriptionContext";function BA(){let e=m.useContext(nw);if(e===null){let t=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,BA),t}return e}function Yre(){let[e,t]=m.useState([]);return[e.length>0?e.join(" "):void 0,m.useMemo(()=>function(r){let n=bt(i=>(t(o=>[...o,i]),()=>t(o=>{let l=o.slice(),c=l.indexOf(i);return c!==-1&&l.splice(c,1),l}))),a=m.useMemo(()=>({register:n,slot:r.slot,name:r.name,props:r.props,value:r.value}),[n,r.slot,r.name,r.props,r.value]);return we.createElement(nw.Provider,{value:a},r.children)},[t])]}let Gre="p";function Xre(e,t){let r=m.useId(),n=$re(),{id:a=`headlessui-description-${r}`,...i}=e,o=BA(),l=Wa(t);vn(()=>o.register(a),[a,o.register]);let c=bd({...o.slot,disabled:n||!1}),u={ref:l,...o.props,id:a};return aa()({ourProps:u,theirProps:i,slot:c,defaultTag:Gre,name:o.name||"Description"})}let Qre=wn(Xre),Zre=Object.assign(Qre,{});var UA=(e=>(e.Space=" ",e.Enter="Enter",e.Escape="Escape",e.Backspace="Backspace",e.Delete="Delete",e.ArrowLeft="ArrowLeft",e.ArrowUp="ArrowUp",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.Home="Home",e.End="End",e.PageUp="PageUp",e.PageDown="PageDown",e.Tab="Tab",e))(UA||{});let Jre=m.createContext(()=>{});function ene({value:e,children:t}){return we.createElement(Jre.Provider,{value:e},t)}let WA=class extends Map{constructor(t){super(),this.factory=t}get(t){let r=super.get(t);return r===void 0&&(r=this.factory(t),this.set(t,r)),r}};var tne=Object.defineProperty,rne=(e,t,r)=>t in e?tne(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,nne=(e,t,r)=>(rne(e,typeof t!="symbol"?t+"":t,r),r),VA=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},Bn=(e,t,r)=>(VA(e,t,"read from private field"),r?r.call(e):t.get(e)),hg=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},MS=(e,t,r,n)=>(VA(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),Ea,Dc,$c;let ane=class{constructor(t){hg(this,Ea,{}),hg(this,Dc,new WA(()=>new Set)),hg(this,$c,new Set),nne(this,"disposables",Ii()),MS(this,Ea,t),za.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return Bn(this,Ea)}subscribe(t,r){if(za.isServer)return()=>{};let n={selector:t,callback:r,current:t(Bn(this,Ea))};return Bn(this,$c).add(n),this.disposables.add(()=>{Bn(this,$c).delete(n)})}on(t,r){return za.isServer?()=>{}:(Bn(this,Dc).get(t).add(r),this.disposables.add(()=>{Bn(this,Dc).get(t).delete(r)}))}send(t){let r=this.reduce(Bn(this,Ea),t);if(r!==Bn(this,Ea)){MS(this,Ea,r);for(let n of Bn(this,$c)){let a=n.selector(Bn(this,Ea));qA(n.current,a)||(n.current=a,n.callback(a))}for(let n of Bn(this,Dc).get(t.type))n(Bn(this,Ea),t)}}};Ea=new WeakMap,Dc=new WeakMap,$c=new WeakMap;function qA(e,t){return Object.is(e,t)?!0:typeof e!="object"||e===null||typeof t!="object"||t===null?!1:Array.isArray(e)&&Array.isArray(t)?e.length!==t.length?!1:pg(e[Symbol.iterator](),t[Symbol.iterator]()):e instanceof Map&&t instanceof Map||e instanceof Set&&t instanceof Set?e.size!==t.size?!1:pg(e.entries(),t.entries()):DS(e)&&DS(t)?pg(Object.entries(e)[Symbol.iterator](),Object.entries(t)[Symbol.iterator]()):!1}function pg(e,t){do{let r=e.next(),n=t.next();if(r.done&&n.done)return!0;if(r.done||n.done||!Object.is(r.value,n.value))return!1}while(!0)}function DS(e){if(Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);return t===null||Object.getPrototypeOf(t)===null}var ine=Object.defineProperty,sne=(e,t,r)=>t in e?ine(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,$S=(e,t,r)=>(sne(e,typeof t!="symbol"?t+"":t,r),r),one=(e=>(e[e.Push=0]="Push",e[e.Pop=1]="Pop",e))(one||{});let lne={0(e,t){let r=t.id,n=e.stack,a=e.stack.indexOf(r);if(a!==-1){let i=e.stack.slice();return i.splice(a,1),i.push(r),n=i,{...e,stack:n}}return{...e,stack:[...e.stack,r]}},1(e,t){let r=t.id,n=e.stack.indexOf(r);if(n===-1)return e;let a=e.stack.slice();return a.splice(n,1),{...e,stack:a}}},cne=class HA extends ane{constructor(){super(...arguments),$S(this,"actions",{push:t=>this.send({type:0,id:t}),pop:t=>this.send({type:1,id:t})}),$S(this,"selectors",{isTop:(t,r)=>t.stack[t.stack.length-1]===r,inStack:(t,r)=>t.stack.includes(r)})}static new(){return new HA({stack:[]})}reduce(t,r){return _i(r.type,lne,t,r)}};const KA=new WA(()=>cne.new());function YA(e,t,r=qA){return yQ.useSyncExternalStoreWithSelector(bt(n=>e.subscribe(une,n)),bt(()=>e.state),bt(()=>e.state),bt(t),r)}function une(e){return e}function wd(e,t){let r=m.useId(),n=KA.get(t),[a,i]=YA(n,m.useCallback(o=>[n.selectors.isTop(o,r),n.selectors.inStack(o,r)],[n,r]));return vn(()=>{if(e)return n.actions.push(r),()=>n.actions.pop(r)},[n,e,r]),e?i?a:!0:!1}let Mx=new Map,Jc=new Map;function IS(e){var t;let r=(t=Jc.get(e))!=null?t:0;return Jc.set(e,r+1),r!==0?()=>LS(e):(Mx.set(e,{"aria-hidden":e.getAttribute("aria-hidden"),inert:e.inert}),e.setAttribute("aria-hidden","true"),e.inert=!0,()=>LS(e))}function LS(e){var t;let r=(t=Jc.get(e))!=null?t:1;if(r===1?Jc.delete(e):Jc.set(e,r-1),r!==1)return;let n=Mx.get(e);n&&(n["aria-hidden"]===null?e.removeAttribute("aria-hidden"):e.setAttribute("aria-hidden",n["aria-hidden"]),e.inert=n.inert,Mx.delete(e))}function dne(e,{allowed:t,disallowed:r}={}){let n=wd(e,"inert-others");vn(()=>{var a,i;if(!n)return;let o=Ii();for(let c of(a=r==null?void 0:r())!=null?a:[])c&&o.add(IS(c));let l=(i=t==null?void 0:t())!=null?i:[];for(let c of l){if(!c)continue;let u=yd(c);if(!u)continue;let d=c.parentElement;for(;d&&d!==u.body;){for(let f of d.children)l.some(h=>f.contains(h))||o.add(IS(f));d=d.parentElement}}return o.dispose},[n,t,r])}function fne(e,t,r){let n=Mo(a=>{let i=a.getBoundingClientRect();i.x===0&&i.y===0&&i.width===0&&i.height===0&&r()});m.useEffect(()=>{if(!e)return;let a=t===null?null:_o(t)?t:t.current;if(!a)return;let i=Ii();if(typeof ResizeObserver<"u"){let o=new ResizeObserver(()=>n.current(a));o.observe(a),i.add(()=>o.disconnect())}if(typeof IntersectionObserver<"u"){let o=new IntersectionObserver(()=>n.current(a));o.observe(a),i.add(()=>o.disconnect())}return()=>i.dispose()},[t,n,e])}let uh=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","details>summary","textarea:not([disabled])"].map(e=>`${e}:not([tabindex='-1'])`).join(","),mne=["[data-autofocus]"].map(e=>`${e}:not([tabindex='-1'])`).join(",");var ei=(e=>(e[e.First=1]="First",e[e.Previous=2]="Previous",e[e.Next=4]="Next",e[e.Last=8]="Last",e[e.WrapAround=16]="WrapAround",e[e.NoScroll=32]="NoScroll",e[e.AutoFocus=64]="AutoFocus",e))(ei||{}),Dx=(e=>(e[e.Error=0]="Error",e[e.Overflow=1]="Overflow",e[e.Success=2]="Success",e[e.Underflow=3]="Underflow",e))(Dx||{}),hne=(e=>(e[e.Previous=-1]="Previous",e[e.Next=1]="Next",e))(hne||{});function pne(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(uh)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}function gne(e=document.body){return e==null?[]:Array.from(e.querySelectorAll(mne)).sort((t,r)=>Math.sign((t.tabIndex||Number.MAX_SAFE_INTEGER)-(r.tabIndex||Number.MAX_SAFE_INTEGER)))}var GA=(e=>(e[e.Strict=0]="Strict",e[e.Loose=1]="Loose",e))(GA||{});function vne(e,t=0){var r;return e===((r=yd(e))==null?void 0:r.body)?!1:_i(t,{0(){return e.matches(uh)},1(){let n=e;for(;n!==null;){if(n.matches(uh))return!0;n=n.parentElement}return!1}})}var xne=(e=>(e[e.Keyboard=0]="Keyboard",e[e.Mouse=1]="Mouse",e))(xne||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",e=>{e.metaKey||e.altKey||e.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",e=>{e.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:e.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function ui(e){e==null||e.focus({preventScroll:!0})}let yne=["textarea","input"].join(",");function bne(e){var t,r;return(r=(t=e==null?void 0:e.matches)==null?void 0:t.call(e,yne))!=null?r:!1}function wne(e,t=r=>r){return e.slice().sort((r,n)=>{let a=t(r),i=t(n);if(a===null||i===null)return 0;let o=a.compareDocumentPosition(i);return o&Node.DOCUMENT_POSITION_FOLLOWING?-1:o&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function eu(e,t,{sorted:r=!0,relativeTo:n=null,skipElements:a=[]}={}){let i=Array.isArray(e)?e.length>0?Ox(e[0]):document:Ox(e),o=Array.isArray(e)?r?wne(e):e:t&64?gne(e):pne(e);a.length>0&&o.length>1&&(o=o.filter(p=>!a.some(g=>g!=null&&"current"in g?(g==null?void 0:g.current)===p:g===p))),n=n??(i==null?void 0:i.activeElement);let l=(()=>{if(t&5)return 1;if(t&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(t&1)return 0;if(t&2)return Math.max(0,o.indexOf(n))-1;if(t&4)return Math.max(0,o.indexOf(n))+1;if(t&8)return o.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=t&32?{preventScroll:!0}:{},d=0,f=o.length,h;do{if(d>=f||d+f<=0)return 0;let p=c+d;if(t&16)p=(p+f)%f;else{if(p<0)return 3;if(p>=f)return 1}h=o[p],h==null||h.focus(u),d+=l}while(h!==RA(h));return t&6&&bne(h)&&h.select(),2}function XA(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function jne(){return/Android/gi.test(window.navigator.userAgent)}function RS(){return XA()||jne()}function hf(e,t,r,n){let a=Mo(r);m.useEffect(()=>{if(!e)return;function i(o){a.current(o)}return document.addEventListener(t,i,n),()=>document.removeEventListener(t,i,n)},[e,t,n])}function QA(e,t,r,n){let a=Mo(r);m.useEffect(()=>{if(!e)return;function i(o){a.current(o)}return window.addEventListener(t,i,n),()=>window.removeEventListener(t,i,n)},[e,t,n])}const zS=30;function _ne(e,t,r){let n=Mo(r),a=m.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let d=function f(h){return typeof h=="function"?f(h()):Array.isArray(h)||h instanceof Set?h:[h]}(t);for(let f of d)if(f!==null&&(f.contains(u)||l.composed&&l.composedPath().includes(f)))return;return!vne(u,GA.Loose)&&u.tabIndex!==-1&&l.preventDefault(),n.current(l,u)},[n,t]),i=m.useRef(null);hf(e,"pointerdown",l=>{var c,u;RS()||(i.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target)},!0),hf(e,"pointerup",l=>{if(RS()||!i.current)return;let c=i.current;return i.current=null,a(l,()=>c)},!0);let o=m.useRef({x:0,y:0});hf(e,"touchstart",l=>{o.current.x=l.touches[0].clientX,o.current.y=l.touches[0].clientY},!0),hf(e,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-o.current.x)>=zS||Math.abs(c.y-o.current.y)>=zS))return a(l,()=>ns(l.target)?l.target:null)},!0),QA(e,"blur",l=>a(l,()=>qre(window.document.activeElement)?window.document.activeElement:null),!0)}function aw(...e){return m.useMemo(()=>yd(...e),[...e])}function ZA(e,t,r,n){let a=Mo(r);m.useEffect(()=>{e=e??window;function i(o){a.current(o)}return e.addEventListener(t,i,n),()=>e.removeEventListener(t,i,n)},[e,t,n])}function Nne(e){return m.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getSnapshot)}function Sne(e,t){let r=e(),n=new Set;return{getSnapshot(){return r},subscribe(a){return n.add(a),()=>n.delete(a)},dispatch(a,...i){let o=t[a].call(r,...i);o&&(r=o,n.forEach(l=>l()))}}}function kne(){let e;return{before({doc:t}){var r;let n=t.documentElement,a=(r=t.defaultView)!=null?r:window;e=Math.max(0,a.innerWidth-n.clientWidth)},after({doc:t,d:r}){let n=t.documentElement,a=Math.max(0,n.clientWidth-n.offsetWidth),i=Math.max(0,e-a);r.style(n,"paddingRight",`${i}px`)}}}function Cne(){return XA()?{before({doc:e,d:t,meta:r}){function n(a){for(let i of r().containers)for(let o of i())if(o.contains(a))return!0;return!1}t.microTask(()=>{var a;if(window.getComputedStyle(e.documentElement).scrollBehavior!=="auto"){let l=Ii();l.style(e.documentElement,"scrollBehavior","auto"),t.add(()=>t.microTask(()=>l.dispose()))}let i=(a=window.scrollY)!=null?a:window.pageYOffset,o=null;t.addEventListener(e,"click",l=>{if(ns(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),d=e.querySelector(u);ns(d)&&!n(d)&&(o=d)}catch{}},!0),t.group(l=>{t.addEventListener(e,"touchstart",c=>{if(l.dispose(),ns(c.target)&&Vre(c.target))if(n(c.target)){let u=c.target;for(;u.parentElement&&n(u.parentElement);)u=u.parentElement;l.style(u,"overscrollBehavior","contain")}else l.style(c.target,"touchAction","none")})}),t.addEventListener(e,"touchmove",l=>{if(ns(l.target)){if(Hre(l.target))return;if(n(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),t.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;i!==c&&window.scrollTo(0,i),o&&o.isConnected&&(o.scrollIntoView({block:"nearest"}),o=null)})})}}:{}}function Ene(){return{before({doc:e,d:t}){t.style(e.documentElement,"overflow","hidden")}}}function FS(e){let t={};for(let r of e)Object.assign(t,r(t));return t}let ro=Sne(()=>new Map,{PUSH(e,t){var r;let n=(r=this.get(e))!=null?r:{doc:e,count:0,d:Ii(),meta:new Set,computedMeta:{}};return n.count++,n.meta.add(t),n.computedMeta=FS(n.meta),this.set(e,n),this},POP(e,t){let r=this.get(e);return r&&(r.count--,r.meta.delete(t),r.computedMeta=FS(r.meta)),this},SCROLL_PREVENT(e){let t={doc:e.doc,d:e.d,meta(){return e.computedMeta}},r=[Cne(),kne(),Ene()];r.forEach(({before:n})=>n==null?void 0:n(t)),r.forEach(({after:n})=>n==null?void 0:n(t))},SCROLL_ALLOW({d:e}){e.dispose()},TEARDOWN({doc:e}){this.delete(e)}});ro.subscribe(()=>{let e=ro.getSnapshot(),t=new Map;for(let[r]of e)t.set(r,r.documentElement.style.overflow);for(let r of e.values()){let n=t.get(r.doc)==="hidden",a=r.count!==0;(a&&!n||!a&&n)&&ro.dispatch(r.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",r),r.count===0&&ro.dispatch("TEARDOWN",r)}});function Pne(e,t,r=()=>({containers:[]})){let n=Nne(ro),a=t?n.get(t):void 0,i=a?a.count>0:!1;return vn(()=>{if(!(!t||!e))return ro.dispatch("PUSH",t,r),()=>ro.dispatch("POP",t,r)},[e,t]),i}function One(e,t,r=()=>[document.body]){let n=wd(e,"scroll-lock");Pne(n,t,a=>{var i;return{containers:[...(i=a.containers)!=null?i:[],r]}})}function Ane(e=0){let[t,r]=m.useState(e),n=m.useCallback(c=>r(c),[]),a=m.useCallback(c=>r(u=>u|c),[]),i=m.useCallback(c=>(t&c)===c,[t]),o=m.useCallback(c=>r(u=>u&~c),[]),l=m.useCallback(c=>r(u=>u^c),[]);return{flags:t,setFlag:n,addFlag:a,hasFlag:i,removeFlag:o,toggleFlag:l}}var BS,US;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((BS=process==null?void 0:process.env)==null?void 0:BS.NODE_ENV)==="test"&&typeof((US=Element==null?void 0:Element.prototype)==null?void 0:US.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Tne=(e=>(e[e.None=0]="None",e[e.Closed=1]="Closed",e[e.Enter=2]="Enter",e[e.Leave=4]="Leave",e))(Tne||{});function Mne(e){let t={};for(let r in e)e[r]===!0&&(t[`data-${r}`]="");return t}function Dne(e,t,r,n){let[a,i]=m.useState(r),{hasFlag:o,addFlag:l,removeFlag:c}=Ane(e&&a?3:0),u=m.useRef(!1),d=m.useRef(!1),f=Wp();return vn(()=>{var h;if(e){if(r&&i(!0),!t){r&&l(3);return}return(h=n==null?void 0:n.start)==null||h.call(n,r),$ne(t,{inFlight:u,prepare(){d.current?d.current=!1:d.current=u.current,u.current=!0,!d.current&&(r?(l(3),c(4)):(l(4),c(2)))},run(){d.current?r?(c(3),l(4)):(c(4),l(3)):r?c(1):l(1)},done(){var p;d.current&&Rne(t)||(u.current=!1,c(7),r||i(!1),(p=n==null?void 0:n.end)==null||p.call(n,r))}})}},[e,r,t,f]),e?[a,{closed:o(1),enter:o(2),leave:o(4),transition:o(2)||o(4)}]:[r,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function $ne(e,{prepare:t,run:r,done:n,inFlight:a}){let i=Ii();return Lne(e,{prepare:t,inFlight:a}),i.nextFrame(()=>{r(),i.requestAnimationFrame(()=>{i.add(Ine(e,n))})}),i.dispose}function Ine(e,t){var r,n;let a=Ii();if(!e)return a.dispose;let i=!1;a.add(()=>{i=!0});let o=(n=(r=e.getAnimations)==null?void 0:r.call(e).filter(l=>l instanceof CSSTransition))!=null?n:[];return o.length===0?(t(),a.dispose):(Promise.allSettled(o.map(l=>l.finished)).then(()=>{i||t()}),a.dispose)}function Lne(e,{inFlight:t,prepare:r}){if(t!=null&&t.current){r();return}let n=e.style.transition;e.style.transition="none",r(),e.offsetHeight,e.style.transition=n}function Rne(e){var t,r;return((r=(t=e.getAnimations)==null?void 0:t.call(e))!=null?r:[]).some(n=>n instanceof CSSTransition&&n.playState!=="finished")}function iw(e,t){let r=m.useRef([]),n=bt(e);m.useEffect(()=>{let a=[...r.current];for(let[i,o]of t.entries())if(r.current[i]!==o){let l=n(t,a);return r.current=t,l}},[n,...t])}let Vp=m.createContext(null);Vp.displayName="OpenClosedContext";var pa=(e=>(e[e.Open=1]="Open",e[e.Closed=2]="Closed",e[e.Closing=4]="Closing",e[e.Opening=8]="Opening",e))(pa||{});function qp(){return m.useContext(Vp)}function zne({value:e,children:t}){return we.createElement(Vp.Provider,{value:e},t)}function Fne({children:e}){return we.createElement(Vp.Provider,{value:null},e)}function Bne(e){function t(){document.readyState!=="loading"&&(e(),document.removeEventListener("DOMContentLoaded",t))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",t),t())}let Qi=[];Bne(()=>{function e(t){if(!ns(t.target)||t.target===document.body||Qi[0]===t.target)return;let r=t.target;r=r.closest(uh),Qi.unshift(r??t.target),Qi=Qi.filter(n=>n!=null&&n.isConnected),Qi.splice(10)}window.addEventListener("click",e,{capture:!0}),window.addEventListener("mousedown",e,{capture:!0}),window.addEventListener("focus",e,{capture:!0}),document.body.addEventListener("click",e,{capture:!0}),document.body.addEventListener("mousedown",e,{capture:!0}),document.body.addEventListener("focus",e,{capture:!0})});function JA(e){let t=bt(e),r=m.useRef(!1);m.useEffect(()=>(r.current=!1,()=>{r.current=!0,Up(()=>{r.current&&t()})}),[t])}let eT=m.createContext(!1);function Une(){return m.useContext(eT)}function WS(e){return we.createElement(eT.Provider,{value:e.force},e.children)}function Wne(e){let t=Une(),r=m.useContext(rT),[n,a]=m.useState(()=>{var i;if(!t&&r!==null)return(i=r.current)!=null?i:null;if(za.isServer)return null;let o=e==null?void 0:e.getElementById("headlessui-portal-root");if(o)return o;if(e===null)return null;let l=e.createElement("div");return l.setAttribute("id","headlessui-portal-root"),e.body.appendChild(l)});return m.useEffect(()=>{n!==null&&(e!=null&&e.body.contains(n)||e==null||e.body.appendChild(n))},[n,e]),m.useEffect(()=>{t||r!==null&&a(r.current)},[r,a,t]),n}let tT=m.Fragment,Vne=wn(function(e,t){let{ownerDocument:r=null,...n}=e,a=m.useRef(null),i=Wa(Kre(h=>{a.current=h}),t),o=aw(a.current),l=r??o,c=Wne(l),u=m.useContext($x),d=Wp(),f=aa();return JA(()=>{var h;c&&c.childNodes.length<=0&&((h=c.parentElement)==null||h.removeChild(c))}),c?Da.createPortal(we.createElement("div",{"data-headlessui-portal":"",ref:h=>{d.dispose(),u&&h&&d.add(u.register(h))}},f({ourProps:{ref:i},theirProps:n,slot:{},defaultTag:tT,name:"Portal"})),c):null});function qne(e,t){let r=Wa(t),{enabled:n=!0,ownerDocument:a,...i}=e,o=aa();return n?we.createElement(Vne,{...i,ownerDocument:a,ref:r}):o({ourProps:{ref:r},theirProps:i,slot:{},defaultTag:tT,name:"Portal"})}let Hne=m.Fragment,rT=m.createContext(null);function Kne(e,t){let{target:r,...n}=e,a={ref:Wa(t)},i=aa();return we.createElement(rT.Provider,{value:r},i({ourProps:a,theirProps:n,defaultTag:Hne,name:"Popover.Group"}))}let $x=m.createContext(null);function Yne(){let e=m.useContext($x),t=m.useRef([]),r=bt(i=>(t.current.push(i),e&&e.register(i),()=>n(i))),n=bt(i=>{let o=t.current.indexOf(i);o!==-1&&t.current.splice(o,1),e&&e.unregister(i)}),a=m.useMemo(()=>({register:r,unregister:n,portals:t}),[r,n,t]);return[t,m.useMemo(()=>function({children:i}){return we.createElement($x.Provider,{value:a},i)},[a])]}let Gne=wn(qne),nT=wn(Kne),Xne=Object.assign(Gne,{Group:nT});function Qne(e,t=typeof document<"u"?document.defaultView:null,r){let n=wd(e,"escape");ZA(t,"keydown",a=>{n&&(a.defaultPrevented||a.key===UA.Escape&&r(a))})}function Zne(){var e;let[t]=m.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[r,n]=m.useState((e=t==null?void 0:t.matches)!=null?e:!1);return vn(()=>{if(!t)return;function a(i){n(i.matches)}return t.addEventListener("change",a),()=>t.removeEventListener("change",a)},[t]),r}function Jne({defaultContainers:e=[],portals:t,mainTreeNode:r}={}){let n=bt(()=>{var a,i;let o=yd(r),l=[];for(let c of e)c!==null&&(hs(c)?l.push(c):"current"in c&&hs(c.current)&&l.push(c.current));if(t!=null&&t.current)for(let c of t.current)l.push(c);for(let c of(a=o==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?a:[])c!==document.body&&c!==document.head&&hs(c)&&c.id!=="headlessui-portal-root"&&(r&&(c.contains(r)||c.contains((i=r==null?void 0:r.getRootNode())==null?void 0:i.host))||l.some(u=>c.contains(u))||l.push(c));return l});return{resolveContainers:n,contains:bt(a=>n().some(i=>i.contains(a)))}}let aT=m.createContext(null);function VS({children:e,node:t}){let[r,n]=m.useState(null),a=iT(t??r);return we.createElement(aT.Provider,{value:a},e,a===null&&we.createElement(Tx,{features:ch.Hidden,ref:i=>{var o,l;if(i){for(let c of(l=(o=yd(i))==null?void 0:o.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&hs(c)&&c!=null&&c.contains(i)){n(c);break}}}}))}function iT(e=null){var t;return(t=m.useContext(aT))!=null?t:e}function eae(){let e=typeof document>"u";return"useSyncExternalStore"in zf?(t=>t.useSyncExternalStore)(zf)(()=>()=>{},()=>!1,()=>!e):!1}function Hp(){let e=eae(),[t,r]=m.useState(za.isHandoffComplete);return t&&za.isHandoffComplete===!1&&r(!1),m.useEffect(()=>{t!==!0&&r(!0)},[t]),m.useEffect(()=>za.handoff(),[]),e?!1:t}function sw(){let e=m.useRef(!1);return vn(()=>(e.current=!0,()=>{e.current=!1}),[]),e}var Ic=(e=>(e[e.Forwards=0]="Forwards",e[e.Backwards=1]="Backwards",e))(Ic||{});function tae(){let e=m.useRef(0);return QA(!0,"keydown",t=>{t.key==="Tab"&&(e.current=t.shiftKey?1:0)},!0),e}function sT(e){if(!e)return new Set;if(typeof e=="function")return new Set(e());let t=new Set;for(let r of e.current)hs(r.current)&&t.add(r.current);return t}let rae="div";var Ks=(e=>(e[e.None=0]="None",e[e.InitialFocus=1]="InitialFocus",e[e.TabLock=2]="TabLock",e[e.FocusLock=4]="FocusLock",e[e.RestoreFocus=8]="RestoreFocus",e[e.AutoFocus=16]="AutoFocus",e))(Ks||{});function nae(e,t){let r=m.useRef(null),n=Wa(r,t),{initialFocus:a,initialFocusFallback:i,containers:o,features:l=15,...c}=e;Hp()||(l=0);let u=aw(r.current);oae(l,{ownerDocument:u});let d=lae(l,{ownerDocument:u,container:r,initialFocus:a,initialFocusFallback:i});cae(l,{ownerDocument:u,container:r,containers:o,previousActiveElement:d});let f=tae(),h=bt(b=>{if(!_o(r.current))return;let w=r.current;(j=>j())(()=>{_i(f.current,{[Ic.Forwards]:()=>{eu(w,ei.First,{skipElements:[b.relatedTarget,i]})},[Ic.Backwards]:()=>{eu(w,ei.Last,{skipElements:[b.relatedTarget,i]})}})})}),p=wd(!!(l&2),"focus-trap#tab-lock"),g=Wp(),x=m.useRef(!1),y={ref:n,onKeyDown(b){b.key=="Tab"&&(x.current=!0,g.requestAnimationFrame(()=>{x.current=!1}))},onBlur(b){if(!(l&4))return;let w=sT(o);_o(r.current)&&w.add(r.current);let j=b.relatedTarget;ns(j)&&j.dataset.headlessuiFocusGuard!=="true"&&(oT(w,j)||(x.current?eu(r.current,_i(f.current,{[Ic.Forwards]:()=>ei.Next,[Ic.Backwards]:()=>ei.Previous})|ei.WrapAround,{relativeTo:b.target}):ns(b.target)&&ui(b.target)))}},v=aa();return we.createElement(we.Fragment,null,p&&we.createElement(Tx,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:ch.Focusable}),v({ourProps:y,theirProps:c,defaultTag:rae,name:"FocusTrap"}),p&&we.createElement(Tx,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:h,features:ch.Focusable}))}let aae=wn(nae),iae=Object.assign(aae,{features:Ks});function sae(e=!0){let t=m.useRef(Qi.slice());return iw(([r],[n])=>{n===!0&&r===!1&&Up(()=>{t.current.splice(0)}),n===!1&&r===!0&&(t.current=Qi.slice())},[e,Qi,t]),bt(()=>{var r;return(r=t.current.find(n=>n!=null&&n.isConnected))!=null?r:null})}function oae(e,{ownerDocument:t}){let r=!!(e&8),n=sae(r);iw(()=>{r||Mre(t==null?void 0:t.body)&&ui(n())},[r]),JA(()=>{r&&ui(n())})}function lae(e,{ownerDocument:t,container:r,initialFocus:n,initialFocusFallback:a}){let i=m.useRef(null),o=wd(!!(e&1),"focus-trap#initial-focus"),l=sw();return iw(()=>{if(e===0)return;if(!o){a!=null&&a.current&&ui(a.current);return}let c=r.current;c&&Up(()=>{if(!l.current)return;let u=t==null?void 0:t.activeElement;if(n!=null&&n.current){if((n==null?void 0:n.current)===u){i.current=u;return}}else if(c.contains(u)){i.current=u;return}if(n!=null&&n.current)ui(n.current);else{if(e&16){if(eu(c,ei.First|ei.AutoFocus)!==Dx.Error)return}else if(eu(c,ei.First)!==Dx.Error)return;if(a!=null&&a.current&&(ui(a.current),(t==null?void 0:t.activeElement)===a.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}i.current=t==null?void 0:t.activeElement})},[a,o,e]),i}function cae(e,{ownerDocument:t,container:r,containers:n,previousActiveElement:a}){let i=sw(),o=!!(e&4);ZA(t==null?void 0:t.defaultView,"focus",l=>{if(!o||!i.current)return;let c=sT(n);_o(r.current)&&c.add(r.current);let u=a.current;if(!u)return;let d=l.target;_o(d)?oT(c,d)?(a.current=d,ui(d)):(l.preventDefault(),l.stopPropagation(),ui(u)):ui(a.current)},!0)}function oT(e,t){for(let r of e)if(r.contains(t))return!0;return!1}function lT(e){var t;return!!(e.enter||e.enterFrom||e.enterTo||e.leave||e.leaveFrom||e.leaveTo)||!Zc((t=e.as)!=null?t:uT)||we.Children.count(e.children)===1}let Kp=m.createContext(null);Kp.displayName="TransitionContext";var uae=(e=>(e.Visible="visible",e.Hidden="hidden",e))(uae||{});function dae(){let e=m.useContext(Kp);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}function fae(){let e=m.useContext(Yp);if(e===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return e}let Yp=m.createContext(null);Yp.displayName="NestingContext";function Gp(e){return"children"in e?Gp(e.children):e.current.filter(({el:t})=>t.current!==null).filter(({state:t})=>t==="visible").length>0}function cT(e,t){let r=Mo(e),n=m.useRef([]),a=sw(),i=Wp(),o=bt((p,g=rs.Hidden)=>{let x=n.current.findIndex(({el:y})=>y===p);x!==-1&&(_i(g,{[rs.Unmount](){n.current.splice(x,1)},[rs.Hidden](){n.current[x].state="hidden"}}),i.microTask(()=>{var y;!Gp(n)&&a.current&&((y=r.current)==null||y.call(r))}))}),l=bt(p=>{let g=n.current.find(({el:x})=>x===p);return g?g.state!=="visible"&&(g.state="visible"):n.current.push({el:p,state:"visible"}),()=>o(p,rs.Unmount)}),c=m.useRef([]),u=m.useRef(Promise.resolve()),d=m.useRef({enter:[],leave:[]}),f=bt((p,g,x)=>{c.current.splice(0),t&&(t.chains.current[g]=t.chains.current[g].filter(([y])=>y!==p)),t==null||t.chains.current[g].push([p,new Promise(y=>{c.current.push(y)})]),t==null||t.chains.current[g].push([p,new Promise(y=>{Promise.all(d.current[g].map(([v,b])=>b)).then(()=>y())})]),g==="enter"?u.current=u.current.then(()=>t==null?void 0:t.wait.current).then(()=>x(g)):x(g)}),h=bt((p,g,x)=>{Promise.all(d.current[g].splice(0).map(([y,v])=>v)).then(()=>{var y;(y=c.current.shift())==null||y()}).then(()=>x(g))});return m.useMemo(()=>({children:n,register:l,unregister:o,onStart:f,onStop:h,wait:u,chains:d}),[l,o,n,f,h,d,u])}let uT=m.Fragment,dT=lh.RenderStrategy;function mae(e,t){var r,n;let{transition:a=!0,beforeEnter:i,afterEnter:o,beforeLeave:l,afterLeave:c,enter:u,enterFrom:d,enterTo:f,entered:h,leave:p,leaveFrom:g,leaveTo:x,...y}=e,[v,b]=m.useState(null),w=m.useRef(null),j=lT(e),N=Wa(...j?[w,t,b]:t===null?[]:[t]),_=(r=y.unmount)==null||r?rs.Unmount:rs.Hidden,{show:S,appear:C,initial:O}=dae(),[A,T]=m.useState(S?"visible":"hidden"),D=fae(),{register:q,unregister:re}=D;vn(()=>q(w),[q,w]),vn(()=>{if(_===rs.Hidden&&w.current){if(S&&A!=="visible"){T("visible");return}return _i(A,{hidden:()=>re(w),visible:()=>q(w)})}},[A,w,q,re,S,_]);let K=Hp();vn(()=>{if(j&&K&&A==="visible"&&w.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[w,A,K,j]);let z=O&&!C,P=C&&S&&O,M=m.useRef(!1),L=cT(()=>{M.current||(T("hidden"),re(w))},D),G=bt(ae=>{M.current=!0;let pe=ae?"enter":"leave";L.onStart(w,pe,k=>{k==="enter"?i==null||i():k==="leave"&&(l==null||l())})}),$=bt(ae=>{let pe=ae?"enter":"leave";M.current=!1,L.onStop(w,pe,k=>{k==="enter"?o==null||o():k==="leave"&&(c==null||c())}),pe==="leave"&&!Gp(L)&&(T("hidden"),re(w))});m.useEffect(()=>{j&&a||(G(S),$(S))},[S,j,a]);let U=(()=>!(!a||!j||!K||z))(),[,E]=Dne(U,v,S,{start:G,end:$}),Q=qs({ref:N,className:((n=Ax(y.className,P&&u,P&&d,E.enter&&u,E.enter&&E.closed&&d,E.enter&&!E.closed&&f,E.leave&&p,E.leave&&!E.closed&&g,E.leave&&E.closed&&x,!E.transition&&S&&h))==null?void 0:n.trim())||void 0,...Mne(E)}),J=0;A==="visible"&&(J|=pa.Open),A==="hidden"&&(J|=pa.Closed),S&&A==="hidden"&&(J|=pa.Opening),!S&&A==="visible"&&(J|=pa.Closing);let de=aa();return we.createElement(Yp.Provider,{value:L},we.createElement(zne,{value:J},de({ourProps:Q,theirProps:y,defaultTag:uT,features:dT,visible:A==="visible",name:"Transition.Child"})))}function hae(e,t){let{show:r,appear:n=!1,unmount:a=!0,...i}=e,o=m.useRef(null),l=lT(e),c=Wa(...l?[o,t]:t===null?[]:[t]);Hp();let u=qp();if(r===void 0&&u!==null&&(r=(u&pa.Open)===pa.Open),r===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[d,f]=m.useState(r?"visible":"hidden"),h=cT(()=>{r||f("hidden")}),[p,g]=m.useState(!0),x=m.useRef([r]);vn(()=>{p!==!1&&x.current[x.current.length-1]!==r&&(x.current.push(r),g(!1))},[x,r]);let y=m.useMemo(()=>({show:r,appear:n,initial:p}),[r,n,p]);vn(()=>{r?f("visible"):!Gp(h)&&o.current!==null&&f("hidden")},[r,h]);let v={unmount:a},b=bt(()=>{var N;p&&g(!1),(N=e.beforeEnter)==null||N.call(e)}),w=bt(()=>{var N;p&&g(!1),(N=e.beforeLeave)==null||N.call(e)}),j=aa();return we.createElement(Yp.Provider,{value:h},we.createElement(Kp.Provider,{value:y},j({ourProps:{...v,as:m.Fragment,children:we.createElement(fT,{ref:c,...v,...i,beforeEnter:b,beforeLeave:w})},theirProps:{},defaultTag:m.Fragment,features:dT,visible:d==="visible",name:"Transition"})))}function pae(e,t){let r=m.useContext(Kp)!==null,n=qp()!==null;return we.createElement(we.Fragment,null,!r&&n?we.createElement(Ix,{ref:t,...e}):we.createElement(fT,{ref:t,...e}))}let Ix=wn(hae),fT=wn(mae),ow=wn(pae),If=Object.assign(Ix,{Child:ow,Root:Ix});var gae=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(gae||{}),vae=(e=>(e[e.SetTitleId=0]="SetTitleId",e))(vae||{});let xae={0(e,t){return e.titleId===t.id?e:{...e,titleId:t.id}}},lw=m.createContext(null);lw.displayName="DialogContext";function Xp(e){let t=m.useContext(lw);if(t===null){let r=new Error(`<${e} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Xp),r}return t}function yae(e,t){return _i(t.type,xae,e,t)}let qS=wn(function(e,t){let r=m.useId(),{id:n=`headlessui-dialog-${r}`,open:a,onClose:i,initialFocus:o,role:l="dialog",autoFocus:c=!0,__demoMode:u=!1,unmount:d=!1,...f}=e,h=m.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(h.current||(h.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let p=qp();a===void 0&&p!==null&&(a=(p&pa.Open)===pa.Open);let g=m.useRef(null),x=Wa(g,t),y=aw(g.current),v=a?0:1,[b,w]=m.useReducer(yae,{titleId:null,descriptionId:null,panelRef:m.createRef()}),j=bt(()=>i(!1)),N=bt(E=>w({type:0,id:E})),_=Hp()?v===0:!1,[S,C]=Yne(),O={get current(){var E;return(E=b.panelRef.current)!=null?E:g.current}},A=iT(),{resolveContainers:T}=Jne({mainTreeNode:A,portals:S,defaultContainers:[O]}),D=p!==null?(p&pa.Closing)===pa.Closing:!1;dne(u||D?!1:_,{allowed:bt(()=>{var E,Q;return[(Q=(E=g.current)==null?void 0:E.closest("[data-headlessui-portal]"))!=null?Q:null]}),disallowed:bt(()=>{var E;return[(E=A==null?void 0:A.closest("body > *:not(#headlessui-portal-root)"))!=null?E:null]})});let q=KA.get(null);vn(()=>{if(_)return q.actions.push(n),()=>q.actions.pop(n)},[q,n,_]);let re=YA(q,m.useCallback(E=>q.selectors.isTop(E,n),[q,n]));_ne(re,T,E=>{E.preventDefault(),j()}),Qne(re,y==null?void 0:y.defaultView,E=>{E.preventDefault(),E.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),j()}),One(u||D?!1:_,y,T),fne(_,g,j);let[K,z]=Yre(),P=m.useMemo(()=>[{dialogState:v,close:j,setTitleId:N,unmount:d},b],[v,j,N,d,b]),M=bd({open:v===0}),L={ref:x,id:n,role:l,tabIndex:-1,"aria-modal":u?void 0:v===0?!0:void 0,"aria-labelledby":b.titleId,"aria-describedby":K,unmount:d},G=!Zne(),$=Ks.None;_&&!u&&($|=Ks.RestoreFocus,$|=Ks.TabLock,c&&($|=Ks.AutoFocus),G&&($|=Ks.InitialFocus));let U=aa();return we.createElement(Fne,null,we.createElement(WS,{force:!0},we.createElement(Xne,null,we.createElement(lw.Provider,{value:P},we.createElement(nT,{target:g},we.createElement(WS,{force:!1},we.createElement(z,{slot:M},we.createElement(C,null,we.createElement(iae,{initialFocus:o,initialFocusFallback:g,containers:T,features:$},we.createElement(ene,{value:j},U({ourProps:L,theirProps:f,slot:M,defaultTag:bae,features:wae,visible:v===0,name:"Dialog"})))))))))))}),bae="div",wae=lh.RenderStrategy|lh.Static;function jae(e,t){let{transition:r=!1,open:n,...a}=e,i=qp(),o=e.hasOwnProperty("open")||i!==null,l=e.hasOwnProperty("onClose");if(!o&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!o)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!i&&typeof e.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${e.open}`);if(typeof e.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${e.onClose}`);return(n!==void 0||r)&&!a.static?we.createElement(VS,null,we.createElement(If,{show:n,transition:r,unmount:a.unmount},we.createElement(qS,{ref:t,...a}))):we.createElement(VS,null,we.createElement(qS,{ref:t,open:n,...a}))}let _ae="div";function Nae(e,t){let r=m.useId(),{id:n=`headlessui-dialog-panel-${r}`,transition:a=!1,...i}=e,[{dialogState:o,unmount:l},c]=Xp("Dialog.Panel"),u=Wa(t,c.panelRef),d=bd({open:o===0}),f=bt(y=>{y.stopPropagation()}),h={ref:u,id:n,onClick:f},p=a?ow:m.Fragment,g=a?{unmount:l}:{},x=aa();return we.createElement(p,{...g},x({ourProps:h,theirProps:i,slot:d,defaultTag:_ae,name:"Dialog.Panel"}))}let Sae="div";function kae(e,t){let{transition:r=!1,...n}=e,[{dialogState:a,unmount:i}]=Xp("Dialog.Backdrop"),o=bd({open:a===0}),l={ref:t,"aria-hidden":!0},c=r?ow:m.Fragment,u=r?{unmount:i}:{},d=aa();return we.createElement(c,{...u},d({ourProps:l,theirProps:n,slot:o,defaultTag:Sae,name:"Dialog.Backdrop"}))}let Cae="h2";function Eae(e,t){let r=m.useId(),{id:n=`headlessui-dialog-title-${r}`,...a}=e,[{dialogState:i,setTitleId:o}]=Xp("Dialog.Title"),l=Wa(t);m.useEffect(()=>(o(n),()=>o(null)),[n,o]);let c=bd({open:i===0}),u={ref:l,id:n};return aa()({ourProps:u,theirProps:a,slot:c,defaultTag:Cae,name:"Dialog.Title"})}let Pae=wn(jae),Oae=wn(Nae);wn(kae);let Aae=wn(Eae),gg=Object.assign(Pae,{Panel:Oae,Title:Aae,Description:Zre});/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tae=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mae=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,r,n)=>n?n.toUpperCase():r.toLowerCase()),HS=e=>{const t=Mae(e);return t.charAt(0).toUpperCase()+t.slice(1)},mT=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim(),Dae=e=>{for(const t in e)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var $ae={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iae=m.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},c)=>m.createElement("svg",{ref:c,...$ae,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:mT("lucide",a),...!i&&!Dae(l)&&{"aria-hidden":"true"},...l},[...o.map(([u,d])=>m.createElement(u,d)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const He=(e,t)=>{const r=m.forwardRef(({className:n,...a},i)=>m.createElement(Iae,{ref:i,iconNode:t,className:mT(`lucide-${Tae(HS(e))}`,`lucide-${e}`,n),...a}));return r.displayName=HS(e),r};/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lae=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],Do=He("calendar",Lae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rae=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],bl=He("check",Rae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zae=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Fae=He("chevron-down",zae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bae=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Uae=He("chevron-left",Bae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wae=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Vae=He("chevron-right",Wae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qae=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Gn=He("circle-alert",qae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hae=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],KS=He("circle-check-big",Hae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kae=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zl=He("clock",Kae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yae=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],Lx=He("copy",Yae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gae=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],YS=He("credit-card",Gae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xae=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Rx=He("dollar-sign",Xae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qae=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Zae=He("download",Qae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jae=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],wl=He("eye-off",Jae);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eie=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],ps=He("eye",eie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tie=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],rie=He("file-text",tie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nie=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],aie=He("funnel",nie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iie=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],sie=He("history",iie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oie=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Iu=He("lock",oie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lie=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],cie=He("log-out",lie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uie=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],die=He("mail",uie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fie=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],mie=He("map-pin",fie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hie=[["path",{d:"M22 17a2 2 0 0 1-2 2H6.828a2 2 0 0 0-1.414.586l-2.202 2.202A.71.71 0 0 1 2 21.286V5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2z",key:"18887p"}]],pie=He("message-square",hie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gie=[["path",{d:"M5 12h14",key:"1ays0h"}]],vie=He("minus",gie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xie=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vg=He("pen-line",xie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yie=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],GS=He("pen",yie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bie=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Lu=He("phone",bie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wie=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],zx=He("plus",wie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jie=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],XS=He("refresh-cw",jie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _ie=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Nie=He("save",_ie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sie=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Fx=He("settings",Sie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kie=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],hT=He("share-2",kie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cie=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],si=He("shield",Cie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eie=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],Pie=He("trending-up",Eie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oie=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],QS=He("user-plus",Oie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Aie=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Ru=He("user",Aie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tie=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],No=He("users",Tie);/**
 * @license lucide-react v0.539.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mie=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],mn=He("x",Mie);function pT(){const[e,t]=m.useState(!1),[r,n]=m.useState(null);return{loading:e,error:r,shareClient:async({clientId:c,sharedWithUserId:u,accessLevel:d="read"})=>{t(!0),n(null);try{const{data:f,error:h}=await W.rpc("share_client_with_user",{p_client_id:c,p_shared_with_user_id:u,p_access_level:d});if(h)throw h;return f}catch(f){const h=f.message||"Erro ao compartilhar cliente";throw n(h),new Error(h)}finally{t(!1)}},unshareClient:async({clientId:c,sharedWithUserId:u})=>{t(!0),n(null);try{const{data:d,error:f}=await W.rpc("unshare_client_from_user",{p_client_id:c,p_shared_with_user_id:u});if(f)throw f;return d}catch(d){const f=d.message||"Erro ao remover compartilhamento";throw n(f),new Error(f)}finally{t(!1)}},getSharedWith:async c=>{t(!0),n(null);try{const{data:u,error:d}=await W.from("shared_clients_view").select("*").eq("client_id",c);if(d)throw d;return u||[]}catch(u){const d=u.message||"Erro ao carregar compartilhamentos";return n(d),[]}finally{t(!1)}},getActiveUsers:async()=>{t(!0),n(null);try{const{data:c,error:u}=await W.from("user_profiles").select(`
          user_id,
          full_name,
          email,
          profile:profiles(name, is_admin)
        `).eq("is_active",!0).order("full_name");if(u)throw u;return c||[]}catch(c){const u=c.message||"Erro ao carregar usurios";return n(u),[]}finally{t(!1)}}}}function Die({clientId:e,clientName:t,isOpen:r,onClose:n,onSuccess:a}){const{shareClient:i,getActiveUsers:o,loading:l}=pT(),[c,u]=m.useState([]),[d,f]=m.useState(""),[h,p]=m.useState(!1),[g,x]=m.useState(null);m.useEffect(()=>{r&&y()},[r]);const y=async()=>{const N=(await o()).map(_=>({..._,profile:Array.isArray(_.profile)?_.profile[0]:_.profile})).filter(_=>{var S;return((S=_.profile)==null?void 0:S.is_admin)!==!0});u(N)},v=async()=>{if(!d){x("Selecione um usurio");return}x(null),p(!1);try{await i({clientId:e,sharedWithUserId:d,accessLevel:"read"}),p(!0),setTimeout(()=>{a==null||a(),b()},1500)}catch(w){x(w.message)}},b=()=>{f(""),p(!1),x(null),n()};return s.jsx(If,{appear:!0,show:r,as:m.Fragment,children:s.jsxs(gg,{as:"div",className:"relative z-50",onClose:b,children:[s.jsx(If.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-25"})}),s.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:s.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:s.jsx(If.Child,{as:m.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:s.jsxs(gg.Panel,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs(gg.Title,{as:"h3",className:"text-lg font-medium leading-6 text-gray-900 flex items-center",children:[s.jsx(hT,{className:"h-5 w-5 mr-2 text-purple-600"}),"Compartilhar Cliente"]}),s.jsx("button",{onClick:b,className:"text-gray-400 hover:text-gray-500",children:s.jsx(mn,{className:"h-5 w-5"})})]}),s.jsxs("div",{className:"mt-4",children:[s.jsxs("p",{className:"text-sm text-gray-500 mb-4",children:["Compartilhar ",s.jsx("strong",{children:t})," com outro usurio. O usurio ver apenas os campos permitidos pelo perfil dele."]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"user",className:"block text-sm font-medium text-gray-700 mb-2",children:"Selecione o usurio"}),s.jsxs("select",{id:"user",value:d,onChange:w=>f(w.target.value),className:"w-full rounded-md border-gray-300 shadow-sm focus:border-purple-500 focus:ring-purple-500",disabled:l,children:[s.jsx("option",{value:"",children:"Escolha um usurio..."}),c.map(w=>{var j;return s.jsxs("option",{value:w.user_id,children:[w.full_name," - ",((j=w.profile)==null?void 0:j.name)||"Sem perfil"]},w.user_id)})]})]}),h&&s.jsx("div",{className:"rounded-md bg-green-50 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(bl,{className:"h-5 w-5 text-green-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Cliente compartilhado com sucesso!"})})]})}),g&&s.jsx("div",{className:"rounded-md bg-red-50 p-4",children:s.jsxs("div",{className:"flex",children:[s.jsx(Gn,{className:"h-5 w-5 text-red-400"}),s.jsx("div",{className:"ml-3",children:s.jsx("p",{className:"text-sm font-medium text-red-800",children:g})})]})})]})]}),s.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:b,className:"inline-flex justify-center rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2",disabled:l,children:"Cancelar"}),s.jsx("button",{type:"button",onClick:v,disabled:l||!d||h,className:"inline-flex justify-center rounded-md border border-transparent bg-purple-600 px-4 py-2 text-sm font-medium text-white hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:l?"Compartilhando...":"Compartilhar"})]})]})})})})]})})}const $ie=({clientId:e,clientName:t,onUnshare:r})=>{const{getSharedWith:n,unshareClient:a,loading:i,error:o}=pT(),[l,c]=m.useState([]),[u,d]=m.useState(null);m.useEffect(()=>{f()},[e]);const f=async()=>{const p=await n(e);c(p)},h=async(p,g)=>{try{const x=new Date().toISOString().split("T")[0],{data:y,error:v}=await W.from("services").select("id, nome_servico, data_inicio, data_fim").eq("client_id",e).eq("assigned_user_id",p).gte("data_fim",x).order("data_inicio");if(v)throw v;const{data:b,error:w}=await W.from("visits").select("id, data").eq("client_id",e).eq("assigned_user_id",p).gte("data",x).order("data");if(w)throw w;let j=`Deseja realmente remover o compartilhamento com ${g}?`;if(y&&y.length>0&&(j+=`

 ATENO: Este parceiro tem ${y.length} servio(s) ativo(s) para este cliente:`,y.slice(0,3).forEach(N=>{j+=`
 ${N.nome_servico||"Servio"} (${new Date(N.data_inicio).toLocaleDateString("pt-BR")} - ${new Date(N.data_fim).toLocaleDateString("pt-BR")})`}),y.length>3&&(j+=`
... e mais ${y.length-3} servio(s)`)),b&&b.length>0&&(j+=`

 Este parceiro tem ${b.length} visita(s) futura(s) para este cliente.`),(y&&y.length>0||b&&b.length>0)&&(j+=`

 Ao remover o compartilhamento, este parceiro perder acesso imediato a todos os dados deste cliente.`,j+=`

 Considere reassignar os servios/visitas antes de remover o compartilhamento.`),!confirm(j))return;d(p),await a({clientId:e,sharedWithUserId:p}),c(N=>N.filter(_=>_.shared_with_user_id!==p)),r==null||r(p)}catch(x){console.error("Error unsharing:",x),alert("Erro ao remover compartilhamento. Tente novamente.")}finally{d(null)}};return i?s.jsxs("div",{className:"flex items-center justify-center p-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),s.jsx("span",{className:"ml-2 text-gray-600",children:"Carregando compartilhamentos..."})]}):o?s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-red-50 border border-red-200 rounded-lg",children:[s.jsx(Gn,{className:"h-5 w-5 text-red-600"}),s.jsxs("span",{className:"text-red-700",children:["Erro ao carregar compartilhamentos: ",o]})]}):l.length===0?s.jsxs("div",{className:"flex items-center gap-2 p-4 bg-gray-50 border border-gray-200 rounded-lg",children:[s.jsx(No,{className:"h-5 w-5 text-gray-400"}),s.jsx("span",{className:"text-gray-600",children:t?`${t} no est compartilhado`:"Cliente no est compartilhado"})]}):s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(No,{className:"h-5 w-5 text-gray-600"}),s.jsxs("h3",{className:"font-medium text-gray-900",children:["Compartilhado com (",l.length,")"]})]}),s.jsx("div",{className:"space-y-2",children:l.map(p=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white border border-gray-200 rounded-lg hover:shadow-sm transition-shadow",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-gray-900",children:p.shared_with_user_name||"Usurio sem nome"}),s.jsxs("div",{className:"text-xs text-gray-400 mt-1",children:["Acesso: ",s.jsx("span",{className:"font-medium",children:p.access_level}),"  ","Desde: ",new Date(p.shared_at).toLocaleDateString("pt-BR")]})]}),s.jsx("button",{onClick:()=>h(p.shared_with_user_id,p.shared_with_user_name),disabled:u===p.shared_with_user_id,className:"ml-4 p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:"Remover compartilhamento",children:u===p.shared_with_user_id?s.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-red-600"}):s.jsx(mn,{className:"h-5 w-5"})})]},p.shared_with_user_id))})]})};function Iie({clientId:e,clientName:t,currentCredit:r,onUpdate:n}){const[a,i]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState("adicao"),[d,f]=m.useState(""),[h,p]=m.useState(""),[g,x]=m.useState(!1),[y,v]=m.useState([]),b=async()=>{if(!d||parseFloat(d)<=0){X.error("Digite um valor vlido");return}x(!0);try{const S=parseFloat(d),C=c==="adicao"?r+S:Math.max(0,r-S),{error:O}=await W.from("clients").update({credito_disponivel:C}).eq("id",e);if(O)throw O;const{error:A}=await W.from("client_credits_history").insert({client_id:e,tipo:c,valor:S,saldo_anterior:r,saldo_novo:C,descricao:h||null});if(A)throw A;X.success(c==="adicao"?`Crdito de ${j(S)} adicionado!`:`Crdito de ${j(S)} removido!`),i(!1),f(""),p(""),n()}catch(S){console.error("Erro ao gerenciar crdito:",S),X.error("Erro ao atualizar crdito")}finally{x(!1)}},w=async()=>{try{const{data:S,error:C}=await W.from("client_credits_history").select("*").eq("client_id",e).order("created_at",{ascending:!1});if(C)throw C;v(S||[]),l(!0)}catch(S){console.error("Erro ao carregar histrico:",S),X.error("Erro ao carregar histrico")}},j=S=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(S),N=S=>new Date(S).toLocaleString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}),_=S=>{switch(S){case"adicao":return" Adio";case"uso":return" Usado em Servio";case"estorno":return" Estorno";default:return S}};return s.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-emerald-50 rounded-lg p-4 border border-green-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Rx,{className:"w-5 h-5 text-green-600"}),s.jsx("h3",{className:"font-semibold text-gray-900",children:"Crditos Disponveis"})]}),s.jsxs("button",{onClick:w,className:"text-sm text-green-600 hover:text-green-700 flex items-center gap-1",children:[s.jsx(sie,{className:"w-4 h-4"}),"Histrico"]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-3xl font-bold text-green-600",children:j(r)}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:r>0?"Ser abatido no prximo servio":"Nenhum crdito disponvel"})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>{u("adicao"),i(!0)},className:"p-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",title:"Adicionar crdito",children:s.jsx(zx,{className:"w-5 h-5"})}),s.jsx("button",{onClick:()=>{u("estorno"),i(!0)},className:"p-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors",title:"Remover crdito",children:s.jsx(vie,{className:"w-5 h-5"})})]})]}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full p-6",children:[s.jsx("h3",{className:"text-lg font-semibold mb-4",children:c==="adicao"?" Adicionar Crdito":" Remover Crdito"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Cliente"}),s.jsx("input",{type:"text",value:t,disabled:!0,className:"input-fefelina bg-gray-100"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Valor (R$)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:d,onChange:S=>f(S.target.value),placeholder:"0,00",className:"input-fefelina",autoFocus:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Motivo/Descrio"}),s.jsx("textarea",{value:h,onChange:S=>p(S.target.value),placeholder:"Ex: Pagamento antecipado de servio cancelado",className:"input-fefelina",rows:3})]}),s.jsxs("div",{className:"bg-gray-50 rounded p-3 text-sm",children:[s.jsxs("p",{className:"text-gray-600",children:["Saldo atual: ",s.jsx("strong",{children:j(r)})]}),d&&parseFloat(d)>0&&s.jsxs("p",{className:"text-gray-600 mt-1",children:["Novo saldo: ",s.jsx("strong",{className:c==="adicao"?"text-green-600":"text-red-600",children:j(c==="adicao"?r+parseFloat(d):Math.max(0,r-parseFloat(d)))})]})]})]}),s.jsxs("div",{className:"flex gap-3 mt-6",children:[s.jsx("button",{onClick:()=>{i(!1),f(""),p("")},className:"btn-fefelina-secondary flex-1",disabled:g,children:"Cancelar"}),s.jsx("button",{onClick:b,className:"btn-fefelina-primary flex-1",disabled:g||!d||parseFloat(d)<=0,children:g?"Processando...":"Confirmar"})]})]})}),o&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[80vh] flex flex-col",children:[s.jsxs("div",{className:"p-6 border-b",children:[s.jsx("h3",{className:"text-lg font-semibold",children:" Histrico de Crditos"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:t})]}),s.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:y.length===0?s.jsx("p",{className:"text-gray-500 text-center py-8",children:"Nenhuma movimentao registrada"}):s.jsx("div",{className:"space-y-3",children:y.map(S=>s.jsxs("div",{className:`p-4 rounded-lg border-l-4 ${S.tipo==="adicao"?"bg-green-50 border-green-500":S.tipo==="uso"?"bg-blue-50 border-blue-500":"bg-red-50 border-red-500"}`,children:[s.jsxs("div",{className:"flex justify-between items-start mb-2",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium text-gray-900",children:_(S.tipo)}),s.jsx("p",{className:"text-xs text-gray-500",children:N(S.created_at)})]}),s.jsxs("p",{className:`text-lg font-bold ${S.tipo==="adicao"?"text-green-600":"text-red-600"}`,children:[S.tipo==="adicao"?"+":"-",j(S.valor)]})]}),S.descricao&&s.jsx("p",{className:"text-sm text-gray-600 mb-2",children:S.descricao}),s.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[s.jsxs("span",{children:["Saldo anterior: ",j(S.saldo_anterior)]}),s.jsxs("span",{children:["Saldo novo: ",j(S.saldo_novo)]})]})]},S.id))})}),s.jsx("div",{className:"p-6 border-t",children:s.jsx("button",{onClick:()=>l(!1),className:"btn-fefelina-secondary w-full",children:"Fechar"})})]})})]})}function Lie(){var $s;const{id:e}=H6(),t=Ei(),{userProfile:r,canUpdate:n,canDelete:a}=nn();m.useEffect(()=>{var I;r&&((I=r.profile)==null?void 0:I.name)!=="Administrador"&&(X.error("Acesso negado. Esta pgina  restrita a administradores."),t("/clients"))},[r,t]);const[i,o]=m.useState(null),[l,c]=m.useState([]),[u,d]=m.useState([]),[f,h]=m.useState([]),[p,g]=m.useState(!0),x=n("clients"),y=a("clients"),{maskField:v,shouldShowField:b}=Rl("clients"),{maskField:w}=Rl("services"),[j,N]=m.useState(!1),[_,S]=m.useState(!1),[C,O]=m.useState(!1),[A,T]=m.useState(""),[D,q]=m.useState(!1),[re,K]=m.useState(!1),[z,P]=m.useState([]),[M,L]=m.useState(!1),[G,$]=m.useState(!1),[U,E]=m.useState({nome:"",telefone:"",valor_diaria:"",valor_duas_visitas:"",endereco_completo:"",veterinario_confianca:""}),[Q,J]=m.useState(!1),[de,ae]=m.useState(!1),[pe,k]=m.useState({nome:"",caracteristica:"",observacoes:"",client_id:e||""}),[H,ne]=m.useState(!1),[Y,me]=m.useState(!1),[ee,he]=m.useState({nome_servico:"",client_id:e||"",status_pagamento:"pendente",desconto_plataforma_default:0}),[je,Ae]=m.useState([]),[Ue,Pe]=m.useState(!1),[Je,Ge]=m.useState(!1),[mt,Oe]=m.useState(!1),[F,oe]=m.useState(0),[be,Te]=m.useState(0),[Me,Ye]=m.useState(0),[Ct,ht]=m.useState(0),[xt,Z]=m.useState(0),[ie,fe]=m.useState(0),[De,$e]=m.useState(0),[We,ke]=m.useState(0),[ue,B]=m.useState(""),[te,ce]=m.useState(0),[ye,Ie]=m.useState([]),[Xe,Ke]=m.useState(""),[Le,jt]=m.useState("");m.useEffect(()=>{e&&(Qe(),sr())},[e]);const Qe=async()=>{try{g(!0);const{data:I,error:ge}=await W.from("clients").select("*").eq("id",e).single();if(ge)throw ge;o(I);const{data:xe,error:it}=await W.from("pets").select("*").eq("client_id",e).order("created_at",{ascending:!1});if(it)throw it;c(xe||[]);const{data:Vt,error:on}=await W.from("services").select("*").eq("client_id",e).order("data_inicio",{ascending:!1});if(on)throw on;d(Vt||[]);let Rr=[];if(Vt&&Vt.length>0){const Gr=Vt.map(Na=>Na.id),{data:Ar,error:lr}=await W.from("visits").select("*").in("service_id",Gr).order("data",{ascending:!1});if(lr)throw lr;Rr=Ar||[]}h(Rr),T(I.notas||""),P(I.tags||[]),ia(I,Vt||[],Rr||[])}catch(I){console.error("Erro ao buscar dados do cliente:",I),X.error("Erro ao carregar informaes do cliente")}finally{g(!1)}},sr=async()=>{try{const{data:I,error:ge}=await W.from("services").select("total_valor, client_id");if(ge)throw ge;if(I&&I.length>0){const xe=new Map,it=new Map;I.forEach(Gr=>{const Ar=xe.get(Gr.client_id)||0;xe.set(Gr.client_id,Ar+Gr.total_valor);const lr=it.get(Gr.client_id)||0;it.set(Gr.client_id,lr+1)});const Vt=xe.size,on=Array.from(xe.values()).reduce((Gr,Ar)=>Gr+Ar,0),Rr=I.length;oe(on/Vt),Te(Rr/Vt)}}catch(I){console.error("Erro ao buscar mtricas globais:",I)}},Or=async()=>{if(i){q(!0);try{const{error:I}=await W.from("clients").update({notas:A}).eq("id",i.id);if(I)throw I;o({...i,notas:A}),X.success("Notas salvas com sucesso!"),O(!1)}catch(I){console.error("Erro ao salvar notas:",I),X.error("Erro ao salvar notas")}finally{q(!1)}}},pt=async()=>{if(i){L(!0);try{const{error:I}=await W.from("clients").update({tags:z}).eq("id",i.id);if(I)throw I;o({...i,tags:z}),X.success("Tags atualizadas com sucesso!"),K(!1)}catch(I){console.error("Erro ao salvar tags:",I),X.error("Erro ao salvar tags")}finally{L(!1)}}},Kr=I=>{z.includes(I)?P(z.filter(ge=>ge!==I)):P([...z,I])},Va=()=>{if(!(i!=null&&i.telefone)){X.error("Telefone no cadastrado para este cliente");return}const I=i.telefone.replace(/\D/g,"");if(I.length<10){X.error("Telefone invlido ou incompleto");return}const ge=encodeURIComponent(`Ol ${i.nome}! Tudo bem? `);window.open(`https://wa.me/${I}?text=${ge}`,"_blank")},Ln=()=>{if(!(i!=null&&i.email)){X.error("Email no cadastrado para este cliente");return}const I=encodeURIComponent("Fefelina Cat Sitter"),ge=encodeURIComponent(`Ol ${i.nome},

`);window.open(`mailto:${i.email}?subject=${I}&body=${ge}`,"_blank")},ia=(I,ge,xe)=>{const it=ge.reduce((lt,cr)=>lt+cr.total_valor,0);Ye(it);const Vt=ge.filter(lt=>lt.status_pagamento==="pago").reduce((lt,cr)=>lt+cr.total_a_receber,0);ht(Vt);const on=ge.filter(lt=>lt.status_pagamento!=="pago").reduce((lt,cr)=>lt+cr.total_a_receber,0);Z(on),fe(ge.length);const Rr=xe.filter(lt=>lt.status==="realizada").length;$e(Rr);const Gr=ge.length>0?it/ge.length:0;ke(Gr);const Ar=new Date(I.created_at);if(B(Ar.toLocaleDateString("pt-BR")),ge.length>0){const lt=ge[0];jt(new Date(lt.data_inicio).toLocaleDateString("pt-BR"))}let lr=0;if(lr+=Math.min(ge.length*3,30),lr+=Math.min(Rr*2,25),lr+=Math.min(Math.floor(it/500),25),ge.length>0){const lt=Math.floor((Date.now()-new Date(ge[0].data_inicio).getTime())/864e5);lt<30?lr+=20:lt<60?lr+=15:lt<90?lr+=10:lt<180&&(lr+=5)}ce(Math.min(lr,100));const Na=new Map;ge.forEach(lt=>{const cr=new Date(lt.data_inicio),Rn=`${cr.getFullYear()}-${String(cr.getMonth()+1).padStart(2,"0")}`;Na.has(Rn)||Na.set(Rn,{count:0,revenue:0});const ot=Na.get(Rn);ot.count+=1,ot.revenue+=lt.total_valor});const Io=Array.from(Na.entries()).map(([lt,cr])=>{const[Rn,ot]=lt.split("-");return{month:new Date(parseInt(Rn),parseInt(ot)-1).toLocaleDateString("pt-BR",{month:"short",year:"numeric"}),count:cr.count,revenue:cr.revenue}}).sort((lt,cr)=>{const Rn=new Date(lt.month);return new Date(cr.month).getTime()-Rn.getTime()}).slice(0,12);if(Ie(Io),Io.length>0){const lt=Io.reduce((cr,Rn)=>Rn.count>cr.count?Rn:cr);Ke(lt.month)}},rt=I=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(I),kd=I=>{const ge=I.replace(/\D/g,"");if(ge.length===0)return"";const xe=ge.slice(0,13);if(xe.length<=2)return`+${xe}`;if(xe.length<=4)return`+${xe.slice(0,2)}(${xe.slice(2)}`;if(xe.length<=9)return`+${xe.slice(0,2)}(${xe.slice(2,4)})${xe.slice(4)}`;{const it=xe.slice(4);if(it.length<=4)return`+${xe.slice(0,2)}(${xe.slice(2,4)})${it}`;{const Vt=it.length===9?5:4;return`+${xe.slice(0,2)}(${xe.slice(2,4)})${it.slice(0,Vt)}-${it.slice(Vt)}`}}},qa=I=>{const{name:ge,value:xe}=I.target;E(ge==="telefone"?{...U,[ge]:kd(xe)}:{...U,[ge]:xe})},R=()=>{if(i){if(!x){X.error("Voc no tem permisso para editar clientes");return}E({nome:i.nome,telefone:i.telefone||"",valor_diaria:i.valor_diaria.toString(),valor_duas_visitas:i.valor_duas_visitas.toString(),endereco_completo:i.endereco_completo,veterinario_confianca:i.veterinario_confianca}),$(!0)}},se=async I=>{if(I.preventDefault(),!!i){if(Q){X.error("Aguarde, as alteraes esto sendo salvas...");return}J(!0);try{const{error:ge}=await W.from("clients").update({nome:U.nome,telefone:U.telefone||null,valor_diaria:parseFloat(U.valor_diaria),valor_duas_visitas:parseFloat(U.valor_duas_visitas),endereco_completo:U.endereco_completo,veterinario_confianca:U.veterinario_confianca,updated_at:new Date().toISOString()}).eq("id",i.id);if(ge)throw ge;X.success(`Cliente "${U.nome}" atualizado com sucesso!`),$(!1),await Qe()}catch(ge){console.error("Erro ao atualizar cliente:",ge),X.error("Erro ao atualizar cliente")}finally{J(!1)}}},ve=async()=>{if(i){Oe(!0);try{const{data:I,error:ge}=await W.from("services").select("id").eq("client_id",i.id);if(ge)throw ge;if(I&&I.length>0){const on=I.map(Gr=>Gr.id),{error:Rr}=await W.from("visits").delete().in("service_id",on);if(Rr)throw Rr}const{error:xe}=await W.from("services").delete().eq("client_id",i.id);if(xe)throw xe;const{error:it}=await W.from("pets").delete().eq("client_id",i.id);if(it)throw it;const{error:Vt}=await W.from("clients").delete().eq("id",i.id);if(Vt)throw Vt;X.success(`Cliente "${i.nome}" excludo com sucesso!`),t("/clients")}catch(I){console.error("Erro ao excluir cliente:",I),X.error("Erro ao excluir cliente")}finally{Oe(!1),Ge(!1)}}},Ee=I=>I>=80?{label:"Excelente",color:"text-green-600",bg:"bg-green-100",icon:""}:I>=60?{label:"timo",color:"text-blue-600",bg:"bg-blue-100",icon:""}:I>=40?{label:"Bom",color:"text-yellow-600",bg:"bg-yellow-100",icon:""}:I>=20?{label:"Regular",color:"text-orange-600",bg:"bg-orange-100",icon:""}:{label:"Novo",color:"text-gray-600",bg:"bg-gray-100",icon:""},Be=I=>{const ge={pendente:"bg-red-100 text-red-800",pendente_plataforma:"bg-yellow-100 text-yellow-800",pago_parcialmente:"bg-blue-100 text-blue-800",pago:"bg-green-100 text-green-800"},xe={pendente:"Pendente",pendente_plataforma:"Pendente Plataforma",pago_parcialmente:"Pago Parcialmente",pago:"Pago"};return s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${ge[I]}`,children:xe[I]})},jn=I=>{const ge={agendada:"bg-blue-100 text-blue-800",realizada:"bg-green-100 text-green-800",cancelada:"bg-red-100 text-red-800"},xe={agendada:"Agendada",realizada:"Realizada",cancelada:"Cancelada"};return s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${ge[I]}`,children:xe[I]})},or=()=>{k({nome:"",caracteristica:"",observacoes:"",client_id:e||""}),ae(!0)},Lr=()=>{ae(!1),k({nome:"",caracteristica:"",observacoes:"",client_id:e||""})},Et=async I=>{if(I.preventDefault(),H){X.error("Aguarde, o pet est sendo salvo...");return}ne(!0);try{const{error:ge}=await W.from("pets").insert([pe]);if(ge)throw ge;X.success(`Pet "${pe.nome}" adicionado com sucesso!`),await Qe(),Lr()}catch(ge){console.error("Erro ao salvar pet:",ge),X.error(`Erro ao salvar pet: ${ge.message}`)}finally{ne(!1)}},gt=()=>{he({nome_servico:"",client_id:e||"",status_pagamento:"pendente",desconto_plataforma_default:0}),Ae([]),me(!0)},Re=()=>{me(!1),he({nome_servico:"",client_id:e||"",status_pagamento:"pendente",desconto_plataforma_default:0}),Ae([])},sn=I=>i?I==="inteira"?i.valor_diaria:i.valor_duas_visitas/2:0,Yr=()=>{const I={id:`temp-${Date.now()}`,service_id:"",data:"",horario:"",tipo_visita:"inteira",valor:(i==null?void 0:i.valor_diaria)||0,status:"agendada",desconto_plataforma:ee.desconto_plataforma_default};Ae([...je,I])},$o=I=>{Ae(je.filter((ge,xe)=>xe!==I))},Ds=(I,ge,xe)=>{const it=[...je];it[I]={...it[I],[ge]:xe},ge==="tipo_visita"&&(it[I].valor=sn(xe)),Ae(it)},et=async I=>{if(I.preventDefault(),Ue){X.error("Aguarde, o servio est sendo salvo...");return}if(je.length===0){X.error("Adicione pelo menos uma visita");return}if(je.filter(xe=>!xe.data).length>0){X.error("Todas as visitas devem ter uma data preenchida");return}Pe(!0);try{const xe=[...je].sort((ot,Sa)=>new Date(ot.data).getTime()-new Date(Sa.data).getTime()),it=xe[0].data,Vt=xe[xe.length-1].data,on=xe.filter(ot=>ot.status!=="cancelada").length,Rr=xe.filter(ot=>ot.status!=="cancelada").reduce((ot,Sa)=>ot+Sa.valor,0),Gr=xe.filter(ot=>ot.status!=="cancelada").reduce((ot,Sa)=>ot+Sa.valor*(1-Sa.desconto_plataforma/100),0);let Ar=0;const lr=(i==null?void 0:i.credito_disponivel)||0;if(lr>0){Ar=Math.min(lr,Rr);const ot=lr-Ar,{error:Sa}=await W.from("clients").update({credito_disponivel:ot}).eq("id",ee.client_id);if(Sa)throw Sa}const{data:Na,error:Io}=await W.from("services").insert([{...ee,data_inicio:it,data_fim:Vt,total_visitas:on,total_valor:Rr,total_a_receber:Gr,credito_usado:Ar}]).select().single();if(Io)throw Io;if(Ar>0){const{error:ot}=await W.from("client_credits_history").insert({client_id:ee.client_id,tipo:"uso",valor:Ar,saldo_anterior:lr,saldo_novo:lr-Ar,descricao:`Crdito usado no servio ${Na.nome_servico||"sem nome"}`,service_id:Na.id});ot&&console.error("Erro ao registrar histrico de crdito:",ot)}const lt=xe.map(ot=>({service_id:Na.id,client_id:ee.client_id,data:ot.data,horario:ot.horario,tipo_visita:ot.tipo_visita,tipo_encontro:"visita_servico",valor:ot.valor,status:ot.status,desconto_plataforma:ot.desconto_plataforma,observacoes:ot.observacoes})),{error:cr}=await W.from("visits").insert(lt);if(cr)throw cr;const Rn=Ar>0?`Servio criado! Crdito de ${rt(Ar)} foi usado. Saldo restante: ${rt(((i==null?void 0:i.credito_disponivel)||0)-Ar)}`:"Servio criado com sucesso!";X.success(Rn,{duration:5e3}),await Qe(),Re()}catch(xe){console.error("Erro ao salvar servio:",xe),X.error(`Erro ao salvar servio: ${xe.message}`)}finally{Pe(!1)}};if(p)return s.jsx("div",{className:"flex justify-center items-center h-screen bg-gradient-to-br from-primary-50 to-white",children:s.jsx(In,{size:"lg",variant:"walking",text:"Buscando dados do cliente..."})});if(!i)return s.jsx("div",{className:"flex flex-col items-center justify-center h-screen",children:s.jsxs("div",{className:"text-center",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),s.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Cliente no encontrado"}),s.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"O cliente solicitado no existe ou foi excludo."}),s.jsx("div",{className:"mt-6",children:s.jsx("button",{onClick:()=>t("/clients"),className:"btn-fefelina",children:"Voltar para Clientes"})})]})});const Xt=Ee(te);return s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("button",{onClick:()=>t("/clients"),className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 mb-4 transition-colors",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Voltar para Clientes"]}),s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:i.nome}),s.jsx("div",{className:"flex gap-1 flex-wrap",children:i.tags&&i.tags.length>0&&i.tags.map((I,ge)=>s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${I==="VIP"?"bg-yellow-100 text-yellow-800":I==="Regular"?"bg-blue-100 text-blue-800":I==="Especial"?"bg-purple-100 text-purple-800":I==="Premium"?"bg-pink-100 text-pink-800":"bg-gray-100 text-gray-800"}`,children:I},ge))})]}),s.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Cliente desde ",ue]})]}),s.jsxs("div",{className:"mt-4 md:mt-0 flex flex-wrap gap-1.5",children:[s.jsxs("button",{onClick:Va,className:"inline-flex items-center px-2 py-1.5 border border-green-300 rounded-md text-xs font-medium text-green-700 bg-white hover:bg-green-50 transition-colors",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"WhatsApp"]}),s.jsxs("button",{onClick:Ln,className:"inline-flex items-center px-2 py-1.5 border border-blue-300 rounded-md text-xs font-medium text-blue-700 bg-white hover:bg-blue-50 transition-colors",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Email"]}),s.jsxs("button",{onClick:()=>O(!0),className:"inline-flex items-center px-2 py-1.5 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Notas"]}),s.jsxs("button",{onClick:()=>K(!0),className:"inline-flex items-center px-2 py-1.5 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"Tags"]}),(($s=r==null?void 0:r.profile)==null?void 0:$s.is_admin)&&s.jsxs(s.Fragment,{children:[s.jsxs("button",{onClick:()=>N(!0),className:"inline-flex items-center px-2 py-1.5 border border-blue-300 rounded-md text-xs font-medium text-blue-700 bg-white hover:bg-blue-50 transition-colors",children:[s.jsx(hT,{className:"w-3.5 h-3.5 mr-1.5"}),"Compartilhar"]}),s.jsxs("button",{onClick:()=>S(!0),className:"inline-flex items-center px-2 py-1.5 border border-purple-300 rounded-md text-xs font-medium text-purple-700 bg-white hover:bg-purple-50 transition-colors",children:[s.jsx(No,{className:"w-3.5 h-3.5 mr-1.5"}),"Compartilhados"]})]}),x&&s.jsxs("button",{onClick:R,className:"inline-flex items-center px-2 py-1.5 border border-primary-300 rounded-md text-xs font-medium text-primary-700 bg-white hover:bg-primary-50 transition-colors",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[s.jsx("div",{className:"card-fefelina p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 p-3 bg-green-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Receita Total"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:rt(Me)})]})]})}),s.jsx("div",{className:"card-fefelina p-5 border-2 border-green-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 p-3 bg-green-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"J Recebido"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:rt(Ct)})]})]})}),s.jsx("div",{className:"card-fefelina p-5 border-2 border-orange-200",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 p-3 bg-orange-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"A Receber (Pendente)"}),s.jsx("p",{className:"text-2xl font-bold text-orange-600",children:rt(xt)}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Somente servios no pagos"})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx("div",{className:"card-fefelina p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 p-3 bg-purple-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total de Servios"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:ie})]})]})}),s.jsx("div",{className:"card-fefelina p-5",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 p-3 bg-blue-100 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Visitas Realizadas"}),s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:De})]})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"card-fefelina p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"Comparao com Mdia Geral"]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Receita Total"}),s.jsx("span",{className:`text-sm font-semibold ${Me>=F?"text-green-600":"text-orange-600"}`,children:Me>=F?s.jsxs(s.Fragment,{children:["+",((Me/F-1)*100).toFixed(0),"% acima"]}):s.jsxs(s.Fragment,{children:[((1-Me/F)*100).toFixed(0),"% abaixo"]})})]}),s.jsx("div",{className:"relative h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`absolute h-full ${Me>=F?"bg-green-500":"bg-orange-500"} transition-all duration-500`,style:{width:`${Math.min(Me/(F*2)*100,100)}%`}})}),s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["Este cliente: ",rt(Me)]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Mdia: ",rt(F)]})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Total de Servios"}),s.jsx("span",{className:`text-sm font-semibold ${ie>=be?"text-green-600":"text-orange-600"}`,children:ie>=be?s.jsxs(s.Fragment,{children:["+",((ie/be-1)*100).toFixed(0),"% acima"]}):s.jsxs(s.Fragment,{children:[((1-ie/be)*100).toFixed(0),"% abaixo"]})})]}),s.jsx("div",{className:"relative h-2 bg-gray-200 rounded-full overflow-hidden",children:s.jsx("div",{className:`absolute h-full ${ie>=be?"bg-green-500":"bg-orange-500"} transition-all duration-500`,style:{width:`${Math.min(ie/(be*2)*100,100)}%`}})}),s.jsxs("div",{className:"flex justify-between mt-1",children:[s.jsxs("span",{className:"text-xs text-gray-500",children:["Este cliente: ",ie]}),s.jsxs("span",{className:"text-xs text-gray-500",children:["Mdia: ",be.toFixed(1)]})]})]}),s.jsx("div",{className:"mt-4 p-3 bg-gradient-to-r from-primary-50 to-blue-50 rounded-lg border border-primary-200",children:s.jsx("p",{className:"text-sm font-medium text-gray-900",children:Me>=F*1.5?s.jsx(s.Fragment,{children:" Cliente TOP! Est entre os melhores clientes"}):Me>=F?s.jsx(s.Fragment,{children:" Cliente acima da mdia - timo relacionamento"}):Me>=F*.5?s.jsx(s.Fragment,{children:" Cliente na mdia - potencial de crescimento"}):s.jsx(s.Fragment,{children:" Cliente novo ou com potencial para desenvolver"})})})]})]}),s.jsxs("div",{className:"card-fefelina p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[s.jsx("svg",{className:"w-5 h-5 mr-2 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Alertas e Aes Sugeridas"]}),s.jsxs("div",{className:"space-y-3",children:[Le&&(()=>{const I=Math.floor((Date.now()-new Date(u[0].data_inicio).getTime())/864e5);return I>180?s.jsx("div",{className:"p-3 bg-red-50 border-l-4 border-red-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("p",{className:"text-sm font-medium text-red-800",children:["Cliente Inativo - ",I," dias"]}),s.jsx("p",{className:"text-xs text-red-700 mt-1",children:"Urgente: Entre em contato para reativar"})]})]})}):I>90?s.jsx("div",{className:"p-3 bg-orange-50 border-l-4 border-orange-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-orange-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("p",{className:"text-sm font-medium text-orange-800",children:["Sem contrataes h ",I," dias"]}),s.jsx("p",{className:"text-xs text-orange-700 mt-1",children:"Recomendado: Envie mensagem de follow-up"})]})]})}):I>60?s.jsx("div",{className:"p-3 bg-yellow-50 border-l-4 border-yellow-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})}),s.jsxs("div",{className:"ml-3",children:[s.jsxs("p",{className:"text-sm font-medium text-yellow-800",children:["Tempo desde ltima contratao: ",I," dias"]}),s.jsx("p",{className:"text-xs text-yellow-700 mt-1",children:"Sugesto: Envie uma oferta especial"})]})]})}):s.jsx("div",{className:"p-3 bg-green-50 border-l-4 border-green-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-green-800",children:"Cliente Ativo "}),s.jsxs("p",{className:"text-xs text-green-700 mt-1",children:["ltima contratao h ",I," dias"]})]})]})})})(),l.length===0&&s.jsx("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Nenhum pet cadastrado"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Solicite o cadastro para melhor atendimento"})]})]})}),!i.telefone&&s.jsx("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Telefone no cadastrado"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Adicione para contato via WhatsApp"})]})]})}),!i.email&&s.jsx("div",{className:"p-3 bg-blue-50 border-l-4 border-blue-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-blue-600 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-blue-800",children:"Email no cadastrado"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Adicione para envio de propostas"})]})]})}),te>=80&&s.jsx("div",{className:"p-3 bg-purple-50 border-l-4 border-purple-500 rounded",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("svg",{className:"w-5 h-5 text-purple-600 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),s.jsxs("div",{className:"ml-3",children:[s.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Cliente VIP"}),s.jsx("p",{className:"text-xs text-purple-700 mt-1",children:"Oferea benefcios exclusivos e prioridade"})]})]})})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[s.jsxs("div",{className:"card-fefelina p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Score de Relacionamento"}),s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsxs("div",{className:"relative w-32 h-32",children:[s.jsxs("svg",{className:"w-32 h-32 transform -rotate-90",children:[s.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:"#e5e7eb",strokeWidth:"8",fill:"none"}),s.jsx("circle",{cx:"64",cy:"64",r:"56",stroke:te>=80?"#10b981":te>=60?"#3b82f6":te>=40?"#eab308":te>=20?"#f97316":"#6b7280",strokeWidth:"8",fill:"none",strokeLinecap:"round",strokeDasharray:`${te/100*351.86} 351.86`})]}),s.jsxs("div",{className:"absolute inset-0 flex items-center justify-center flex-col",children:[s.jsx("span",{className:"text-3xl font-bold text-gray-900",children:te}),s.jsx("span",{className:"text-xs text-gray-500",children:"de 100"})]})]})}),s.jsxs("div",{className:`text-center p-3 rounded-lg ${Xt.bg}`,children:[s.jsx("span",{className:"text-2xl mr-2",children:Xt.icon}),s.jsx("span",{className:`text-lg font-semibold ${Xt.color}`,children:Xt.label})]}),s.jsxs("div",{className:"mt-4 space-y-2 text-sm text-gray-600",children:[s.jsxs("p",{children:[" Baseado em ",ie," servios contratados"]}),s.jsxs("p",{children:[" ",De," visitas realizadas"]}),s.jsxs("p",{children:[" Valor mdio por servio: ",rt(We)]}),Le&&s.jsxs("p",{children:[" ltima contratao: ",Le]})]})]}),s.jsxs("div",{className:"lg:col-span-2 card-fefelina p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Insights e Anlises"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"border-l-4 border-blue-500 pl-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Padro de Contratao"}),Xe?s.jsxs("p",{className:"text-sm text-gray-600",children:["O ms de pico de contrataes foi ",s.jsx("strong",{children:Xe}),".",ye.length>=3&&` Nos ltimos ${ye.length} meses registrados, a mdia  de ${(ye.reduce((I,ge)=>I+ge.count,0)/ye.length).toFixed(1)} servios por ms.`]}):s.jsx("p",{className:"text-sm text-gray-600",children:"Ainda no h dados suficientes para anlise de padres."})]}),s.jsxs("div",{className:"border-l-4 border-green-500 pl-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Anlise Financeira"}),s.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Valor mdio por servio: ",s.jsx("strong",{children:rt(We)}),"."," ","Valor da diria configurado: ",s.jsx("strong",{children:rt(i.valor_diaria)}),"."," ","Duas visitas: ",s.jsx("strong",{children:rt(i.valor_duas_visitas)}),"."]}),s.jsx("div",{className:"mt-2 p-2 bg-green-50 rounded border border-green-200",children:s.jsxs("p",{className:"text-xs text-gray-700",children:[s.jsx("strong",{className:"text-green-700",children:"J recebido:"})," ",rt(Ct)," (",Me>0?(Ct/Me*100).toFixed(0):0,"%)","  ",s.jsx("strong",{className:"text-orange-700",children:"Pendente:"})," ",rt(xt)," (",Me>0?(xt/Me*100).toFixed(0):0,"%)"]})})]}),s.jsxs("div",{className:"border-l-4 border-purple-500 pl-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Frequncia"}),u.length>1?s.jsxs("p",{className:"text-sm text-gray-600",children:["Cliente com ",s.jsxs("strong",{children:[u.length," servios"]})," contratados.",(()=>{const I=new Date(u[u.length-1].data_inicio),ge=new Date(u[0].data_inicio),xe=Math.floor((ge.getTime()-I.getTime())/(1e3*60*60*24*30)),it=xe>0?(u.length/xe).toFixed(1):"N/A";return xe>0?` Frequncia mdia: ${it} servios/ms.`:""})()]}):s.jsx("p",{className:"text-sm text-gray-600",children:"Cliente novo com apenas 1 servio contratado."})]}),s.jsxs("div",{className:"border-l-4 border-yellow-500 pl-4",children:[s.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Recomendaes"}),s.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[te>=80&&s.jsx("li",{children:" Cliente VIP! Mantenha o excelente relacionamento e considere ofertas especiais."}),te<40&&u.length===0&&s.jsx("li",{children:" Cliente novo - envie uma mensagem de boas-vindas e oferea desconto na primeira contratao."}),Le&&(()=>{const I=Math.floor((Date.now()-new Date(u[0].data_inicio).getTime())/864e5);return I>90?s.jsxs("li",{children:[" Cliente inativo h ",I," dias - considere uma campanha de reativao."]}):I>60?s.jsxs("li",{children:[" Cliente sem contrataes h ",I," dias - um contato pode ser bem-vindo."]}):null})(),l.length===0&&s.jsx("li",{children:" Nenhum pet cadastrado - solicite o cadastro para melhor atendimento."})]})]})]})]})]}),ye.length>0&&s.jsxs("div",{className:"card-fefelina p-6 mb-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Histrico de Contrataes (ltimos 12 meses)"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsx("div",{className:"flex items-end space-x-2 h-64 pb-8",children:ye.slice().reverse().map((I,ge)=>{const xe=Math.max(...ye.map(Vt=>Vt.count)),it=xe>0?I.count/xe*100:0;return s.jsxs("div",{className:"flex-1 flex flex-col items-center group",children:[s.jsx("div",{className:"relative w-full",children:s.jsx("div",{className:"w-full bg-primary-500 rounded-t-lg transition-all duration-300 group-hover:bg-primary-600",style:{height:`${Math.max(it*2,4)}px`},children:s.jsxs("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 opacity-0 group-hover:opacity-100 transition-opacity bg-gray-900 text-white text-xs rounded py-1 px-2 whitespace-nowrap",children:[I.count," servio",I.count!==1?"s":"",s.jsx("br",{}),rt(I.revenue)]})})}),s.jsx("div",{className:"mt-2 text-xs text-gray-600 transform -rotate-45 origin-top-left whitespace-nowrap",children:I.month})]},ge)})})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"card-fefelina p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Dados Cadastrais"}),s.jsxs("dl",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Nome"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:i.nome})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Endereo"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:i.endereco_completo||"No informado"})]}),s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Veterinrio de Confiana"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:i.veterinario_confianca||"No informado"})]}),b("valor_diaria")&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Valor Diria"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:v("valor_diaria",rt(i.valor_diaria))})]}),b("valor_duas_visitas")&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Valor Duas Visitas"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900",children:v("valor_duas_visitas",rt(i.valor_duas_visitas))})]}),i.observacoes&&s.jsxs("div",{children:[s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Observaes"}),s.jsx("dd",{className:"mt-1 text-sm text-gray-900 whitespace-pre-wrap",children:i.observacoes})]})]}),i.notas&&s.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h4",{className:"text-sm font-medium text-gray-700 flex items-center",children:[s.jsx("svg",{className:"w-4 h-4 mr-1 text-primary-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Notas CRM"]}),s.jsx("button",{onClick:()=>O(!0),className:"text-xs text-primary-600 hover:text-primary-800",children:"Editar"})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap",children:i.notas})})]})]}),s.jsx(Iie,{clientId:i.id,clientName:i.nome,currentCredit:i.credito_disponivel||0,onUpdate:Qe})]}),s.jsxs("div",{className:"card-fefelina p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Pets (",l.length,")"]}),s.jsx("button",{onClick:or,className:"text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-full p-1.5 transition-colors",title:"Adicionar Pet",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),l.length===0?s.jsxs("div",{className:"text-center py-8 text-gray-500",children:[s.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M8.5 5C7.67157 5 7 5.67157 7 6.5C7 7.32843 7.67157 8 8.5 8C9.32843 8 10 7.32843 10 6.5C10 5.67157 9.32843 5 8.5 5Z"}),s.jsx("path",{d:"M15.5 5C14.6716 5 14 5.67157 14 6.5C14 7.32843 14.6716 8 15.5 8C16.3284 8 17 7.32843 17 6.5C17 5.67157 16.3284 5 15.5 5Z"}),s.jsx("path",{d:"M5 9.5C5 8.67157 5.67157 8 6.5 8C7.32843 8 8 8.67157 8 9.5C8 10.3284 7.32843 11 6.5 11C5.67157 11 5 10.3284 5 9.5Z"}),s.jsx("path",{d:"M17.5 8C16.6716 8 16 8.67157 16 9.5C16 10.3284 16.6716 11 17.5 11C18.3284 11 19 10.3284 19 9.5C19 8.67157 18.3284 8 17.5 8Z"}),s.jsx("path",{d:"M12 10C9.79086 10 8 11.7909 8 14C8 15.8638 9.27477 17.4299 11 17.874V19C11 19.5523 11.4477 20 12 20C12.5523 20 13 19.5523 13 19V17.874C14.7252 17.4299 16 15.8638 16 14C16 11.7909 14.2091 10 12 10Z"})]}),s.jsx("p",{className:"text-sm",children:"Nenhum pet cadastrado"})]}):s.jsx("div",{className:"space-y-3",children:l.map(I=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-3 hover:border-primary-300 transition-colors",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx("div",{className:"flex-shrink-0 p-2 bg-primary-100 rounded-lg",children:s.jsxs("svg",{className:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M8.5 5C7.67157 5 7 5.67157 7 6.5C7 7.32843 7.67157 8 8.5 8C9.32843 8 10 7.32843 10 6.5C10 5.67157 9.32843 5 8.5 5Z"}),s.jsx("path",{d:"M15.5 5C14.6716 5 14 5.67157 14 6.5C14 7.32843 14.6716 8 15.5 8C16.3284 8 17 7.32843 17 6.5C17 5.67157 16.3284 5 15.5 5Z"}),s.jsx("path",{d:"M5 9.5C5 8.67157 5.67157 8 6.5 8C7.32843 8 8 8.67157 8 9.5C8 10.3284 7.32843 11 6.5 11C5.67157 11 5 10.3284 5 9.5Z"}),s.jsx("path",{d:"M17.5 8C16.6716 8 16 8.67157 16 9.5C16 10.3284 16.6716 11 17.5 11C18.3284 11 19 10.3284 19 9.5C19 8.67157 18.3284 8 17.5 8Z"}),s.jsx("path",{d:"M12 10C9.79086 10 8 11.7909 8 14C8 15.8638 9.27477 17.4299 11 17.874V19C11 19.5523 11.4477 20 12 20C12.5523 20 13 19.5523 13 19V17.874C14.7252 17.4299 16 15.8638 16 14C16 11.7909 14.2091 10 12 10Z"})]})}),s.jsxs("div",{className:"ml-3 flex-1",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900",children:I.nome}),s.jsx("p",{className:"text-xs text-gray-600 mt-1",children:I.caracteristica}),I.observacoes&&s.jsx("p",{className:"text-xs text-gray-500 mt-1 italic",children:I.observacoes})]})]})},I.id))})]})]}),s.jsxs("div",{className:"card-fefelina p-6 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Servios Contratados (",u.length,")"]}),s.jsx("button",{onClick:gt,className:"text-primary-600 hover:text-primary-700 hover:bg-primary-50 rounded-full p-1.5 transition-colors",title:"Adicionar Servio",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]}),u.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),s.jsx("p",{className:"text-sm",children:"Nenhum servio contratado ainda"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Servio"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perodo"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visitas"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor Total"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"A Receber"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(I=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-sm",children:[s.jsx("div",{className:"font-medium text-gray-900",children:I.nome_servico||"Sem nome"}),s.jsxs("div",{className:"text-xs text-gray-500",children:["Criado em ",new Date(I.created_at).toLocaleDateString("pt-BR")]}),I.credito_usado>0&&s.jsxs("div",{className:"inline-flex items-center gap-1 mt-1 px-2 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[" Crdito usado: ",rt(I.credito_usado)]})]}),s.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:[ze(ii(I.data_inicio),"dd de MMM",{locale:Rt})," - ",ze(ii(I.data_fim),"dd de MMM de yyyy",{locale:Rt})]}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:I.total_visitas}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:w("total_valor",rt(I.total_valor))}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm font-semibold text-primary-600",children:w("total_a_receber",rt(I.total_a_receber))}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm",children:Be(I.status_pagamento)})]},I.id))})]})})]}),s.jsxs("div",{className:"card-fefelina p-6",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Histrico de Visitas (",f.length,")"]}),f.length===0?s.jsxs("div",{className:"text-center py-12 text-gray-500",children:[s.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("p",{className:"text-sm",children:"Nenhuma visita registrada"})]}):s.jsxs("div",{className:"overflow-x-auto",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Horrio"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Desconto"}),s.jsx("th",{className:"px-3 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.slice(0,20).map(I=>s.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:ze(ii(I.data),"dd/MM/yyyy",{locale:Rt})}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:I.horario}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${I.tipo_visita==="inteira"?"bg-purple-100 text-purple-800":"bg-indigo-100 text-indigo-800"}`,children:I.tipo_visita==="inteira"?"Inteira":"Meia"})}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:rt(I.valor)}),s.jsxs("td",{className:"px-3 py-3 whitespace-nowrap text-sm text-gray-900",children:[I.desconto_plataforma,"%"]}),s.jsx("td",{className:"px-3 py-3 whitespace-nowrap text-sm",children:jn(I.status)})]},I.id))})]}),f.length>20&&s.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:["Mostrando 20 de ",f.length," visitas"]})]})]}),y&&s.jsxs("div",{className:"mt-8 border border-red-200 rounded-lg overflow-hidden",children:[s.jsx("div",{className:"bg-red-50 px-6 py-3 border-b border-red-200",children:s.jsx("h3",{className:"text-sm font-semibold text-red-900",children:"Zona de Perigo"})}),s.jsx("div",{className:"bg-white px-6 py-4",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Excluir este cliente"}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Uma vez excludo, no h como voltar atrs. Por favor, tenha certeza."})]}),s.jsxs("button",{onClick:()=>Ge(!0),className:"inline-flex items-center justify-center px-4 py-2 border border-red-300 rounded-lg text-sm font-medium text-red-700 bg-white hover:bg-red-50 transition-colors flex-shrink-0",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Excluir Cliente"]})]})})]}),C&&s.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50",children:[s.jsx("div",{className:"absolute inset-0",onClick:()=>O(!1)}),s.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-4 flex justify-between items-center",children:[s.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:["Notas sobre ",i.nome]}),s.jsx("button",{onClick:()=>O(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-6 py-4 overflow-y-auto flex-1",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Use este espao para registrar informaes importantes sobre o cliente, observaes de atendimento, preferncias, histrico de conversas, etc."}),s.jsx("textarea",{value:A,onChange:I=>T(I.target.value),rows:12,className:"w-full border border-gray-300 rounded-lg px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 resize-none",placeholder:`Digite suas notas aqui...

Exemplos:
- Preferncias de horrio
- Histrico de comunicao
- Observaes importantes
- Datas especiais`,autoFocus:!0})]}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>O(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:Or,disabled:D,className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-md text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:D?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Salvar Notas"})]})]})]}),re&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:s.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>K(!1)}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-4 flex justify-between items-center",children:[s.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Categorizar Cliente"}),s.jsx("button",{onClick:()=>K(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-6 py-4",children:[s.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Selecione as tags que melhor descrevem este cliente para facilitar a segmentao e anlise."}),s.jsx("div",{className:"grid grid-cols-2 gap-3",children:["VIP","Regular","Especial","Premium","Novo","Fidelizado","Corporativo","Indicao"].map(I=>s.jsx("button",{onClick:()=>Kr(I),className:`px-4 py-3 rounded-lg text-sm font-medium transition-all border-2 ${z.includes(I)?I==="VIP"?"bg-yellow-100 border-yellow-500 text-yellow-800":I==="Regular"?"bg-blue-100 border-blue-500 text-blue-800":I==="Especial"?"bg-purple-100 border-purple-500 text-purple-800":I==="Premium"?"bg-pink-100 border-pink-500 text-pink-800":I==="Novo"?"bg-green-100 border-green-500 text-green-800":I==="Fidelizado"?"bg-indigo-100 border-indigo-500 text-indigo-800":I==="Corporativo"?"bg-gray-100 border-gray-500 text-gray-800":"bg-orange-100 border-orange-500 text-orange-800":"bg-white border-gray-300 text-gray-700 hover:border-gray-400"}`,children:I},I))}),z.length>0&&s.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg border border-blue-200",children:[s.jsx("p",{className:"text-sm font-medium text-blue-900 mb-2",children:"Tags selecionadas:"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(I=>s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${I==="VIP"?"bg-yellow-100 text-yellow-800":I==="Regular"?"bg-blue-100 text-blue-800":I==="Especial"?"bg-purple-100 text-purple-800":I==="Premium"?"bg-pink-100 text-pink-800":I==="Novo"?"bg-green-100 text-green-800":I==="Fidelizado"?"bg-indigo-100 text-indigo-800":I==="Corporativo"?"bg-gray-100 text-gray-800":"bg-orange-100 text-orange-800"}`,children:I},I))})]})]}),s.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>K(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:pt,disabled:M,className:"px-4 py-2 bg-primary-500 hover:bg-primary-600 text-white rounded-md text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:M?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Salvar Tags"})]})]})]})}),G&&i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-start justify-center p-4",children:s.jsxs("div",{className:"relative top-10 w-full max-w-2xl bg-white rounded-lg shadow-xl",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center rounded-t-lg",children:[s.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Editar Cliente: ",i.nome]}),s.jsx("button",{onClick:()=>$(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsxs("form",{onSubmit:se,children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Nome"}),s.jsx("input",{type:"text",name:"nome",value:U.nome,onChange:qa,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),b("telefone")&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Telefone"}),s.jsx("input",{type:"text",name:"telefone",value:U.telefone,onChange:qa,placeholder:"+55(47)99999-9999",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),b("valor_diaria")&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor Diria (R$)"}),s.jsx("input",{type:"number",step:"0.01",name:"valor_diaria",value:U.valor_diaria,onChange:qa,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),b("valor_duas_visitas")&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor 2 Visitas (R$)"}),s.jsx("input",{type:"number",step:"0.01",name:"valor_duas_visitas",value:U.valor_duas_visitas,onChange:qa,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Veterinrio de Confiana"}),s.jsx("input",{type:"text",name:"veterinario_confianca",value:U.veterinario_confianca,onChange:qa,required:!0,className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Endereo Completo"}),s.jsx("textarea",{name:"endereco_completo",value:U.endereco_completo,onChange:qa,required:!0,rows:2,className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:()=>$(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:Q,className:"px-3 py-1.5 text-sm font-medium text-white bg-primary-500 rounded-md hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Q?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Salvar Alteraes"})]})]})})]})}),de&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"modal-fefelina max-w-md w-full",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"section-title-fefelina",children:"Novo Pet"}),s.jsx("button",{onClick:Lr,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:Et,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Pet *"}),s.jsx("input",{type:"text",required:!0,className:"input-fefelina",value:pe.nome,onChange:I=>k({...pe,nome:I.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caracterstica *"}),s.jsx("input",{type:"text",required:!0,className:"input-fefelina",placeholder:"Ex: Gato, Siams, 3 anos",value:pe.caracteristica,onChange:I=>k({...pe,caracteristica:I.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{className:"input-fefelina",rows:3,placeholder:"Informaes adicionais sobre o pet...",value:pe.observacoes,onChange:I=>k({...pe,observacoes:I.target.value})})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:Lr,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:H,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:H?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Adicionar Pet"})]})]})]})}),Y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"modal-fefelina max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"section-title-fefelina",children:"Novo Servio"}),s.jsx("button",{onClick:Re,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:et,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Servio"}),s.jsx("input",{type:"text",className:"input-fefelina",placeholder:"Ex: Frias Dezembro 2024",value:ee.nome_servico,onChange:I=>he({...ee,nome_servico:I.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status de Pagamento"}),s.jsxs("select",{className:"input-fefelina",value:ee.status_pagamento,onChange:I=>he({...ee,status_pagamento:I.target.value}),children:[s.jsx("option",{value:"pendente",children:"Pendente"}),s.jsx("option",{value:"pendente_plataforma",children:"Pendente Plataforma"}),s.jsx("option",{value:"pago_parcialmente",children:"Pago Parcialmente"}),s.jsx("option",{value:"pago",children:"Pago"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Desconto Plataforma Padro (%)"}),s.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",className:"input-fefelina",value:ee.desconto_plataforma_default,onChange:I=>he({...ee,desconto_plataforma_default:parseFloat(I.target.value)||0})})]})]}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Visitas *"}),s.jsxs("button",{type:"button",onClick:Yr,className:"text-sm text-primary-600 hover:text-primary-700 font-medium flex items-center gap-1",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Adicionar Visita"]})]}),je.length===0?s.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border-2 border-dashed border-gray-300",children:[s.jsx("p",{className:"text-sm text-gray-500",children:"Nenhuma visita adicionada ainda"}),s.jsx("button",{type:"button",onClick:Yr,className:"mt-2 text-sm text-primary-600 hover:text-primary-700 font-medium",children:"Adicionar primeira visita"})]}):s.jsx("div",{className:"space-y-3 max-h-96 overflow-y-auto",children:je.map((I,ge)=>s.jsxs("div",{className:"grid grid-cols-12 gap-2 p-3 bg-gray-50 rounded-lg",children:[s.jsxs("div",{className:"col-span-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Data *"}),s.jsx("input",{type:"date",required:!0,className:"input-fefelina text-sm",value:I.data,onChange:xe=>Ds(ge,"data",xe.target.value)})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Horrio"}),s.jsx("input",{type:"time",className:"input-fefelina text-sm",value:I.horario,onChange:xe=>Ds(ge,"horario",xe.target.value)})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Tipo"}),s.jsxs("select",{className:"input-fefelina text-sm",value:I.tipo_visita,onChange:xe=>Ds(ge,"tipo_visita",xe.target.value),children:[s.jsx("option",{value:"inteira",children:"Inteira"}),s.jsx("option",{value:"meia",children:"Meia"})]})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Valor"}),s.jsx("input",{type:"number",step:"0.01",className:"input-fefelina text-sm",value:I.valor,onChange:xe=>Ds(ge,"valor",parseFloat(xe.target.value)||0)})]}),s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Status"}),s.jsxs("select",{className:"input-fefelina text-sm",value:I.status,onChange:xe=>Ds(ge,"status",xe.target.value),children:[s.jsx("option",{value:"agendada",children:"Agendada"}),s.jsx("option",{value:"realizada",children:"Realizada"}),s.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),s.jsx("div",{className:"col-span-1 flex items-end",children:s.jsx("button",{type:"button",onClick:()=>$o(ge),className:"p-2 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Remover visita",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},ge))})]}),je.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-lg p-4",children:[s.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-3",children:"Resumo do Servio"}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total Visitas:"}),s.jsx("span",{className:"ml-2 font-medium",children:je.filter(I=>I.status!=="cancelada").length})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Valor Total:"}),s.jsx("span",{className:"ml-2 font-medium",children:rt(je.filter(I=>I.status!=="cancelada").reduce((I,ge)=>I+ge.valor,0))})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"A Receber:"}),s.jsx("span",{className:"ml-2 font-medium text-green-700",children:rt(je.filter(I=>I.status!=="cancelada").reduce((I,ge)=>I+ge.valor*(1-ge.desconto_plataforma/100),0))})]})]})]}),(()=>{const I=(i==null?void 0:i.credito_disponivel)||0,ge=je.filter(on=>on.status!=="cancelada").reduce((on,Rr)=>on+Rr.valor,0),xe=Math.min(I,ge),it=I-xe,Vt=ge-xe;return I>0?s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 p-2 bg-green-500 rounded-lg",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-sm font-bold text-green-900 mb-2",children:" Crdito Disponvel"}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Saldo atual:"}),s.jsx("span",{className:"font-semibold text-green-700",children:rt(I)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Ser usado neste servio:"}),s.jsx("span",{className:"font-bold text-green-800",children:rt(xe)})]}),s.jsxs("div",{className:"flex justify-between pt-2 border-t border-green-200",children:[s.jsx("span",{className:"text-gray-700",children:"Saldo aps servio:"}),s.jsx("span",{className:"font-semibold text-green-700",children:rt(it)})]}),s.jsxs("div",{className:"flex justify-between items-center pt-2 mt-2 border-t-2 border-green-300",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Valor final a pagar:"}),s.jsx("span",{className:"text-lg font-bold text-primary-600",children:rt(Vt)})]})]}),xe>0&&s.jsx("div",{className:"mt-3 p-2 bg-green-100 border border-green-300 rounded text-xs text-green-800",children:" O crdito ser aplicado automaticamente ao criar o servio"})]})]})}):null})()]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:Re,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:Ue,className:"px-4 py-2 text-sm font-medium text-white bg-primary-600 rounded-md hover:bg-primary-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:Ue?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Criar Servio"})]})]})]})}),Je&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"relative w-full max-w-md bg-white rounded-lg shadow-xl",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border-b border-red-200 px-6 py-3 flex justify-between items-center",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Confirmar Excluso"}),s.jsx("button",{onClick:()=>Ge(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[s.jsx("div",{className:"flex-shrink-0 w-10 h-10 rounded-full bg-red-100 flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Excluir Cliente"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Tem certeza que deseja excluir o cliente ",s.jsx("strong",{children:i==null?void 0:i.nome}),"?"]})]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 mb-4",children:s.jsxs("p",{className:"text-xs text-yellow-800",children:[s.jsx("strong",{children:"Ateno:"})," Esta ao no pode ser desfeita. Todos os dados relacionados (pets, servios e visitas) tambm sero excludos."]})}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx("button",{onClick:()=>Ge(!1),disabled:mt,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200 transition-colors disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{onClick:ve,disabled:mt,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center gap-2",children:mt?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Excluindo..."]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Excluir"]})})]})]})]})}),i&&s.jsx(Die,{isOpen:j,onClose:()=>N(!1),clientId:i.id,clientName:i.nome,onSuccess:()=>{X.success("Cliente compartilhado com sucesso!")}}),_&&i&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"relative w-full max-w-2xl bg-white rounded-lg shadow-xl",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-purple-50 to-purple-100 border-b border-purple-200 px-6 py-4 flex justify-between items-center rounded-t-lg",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Compartilhamentos - ",i.nome]}),s.jsx("button",{onClick:()=>S(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-6",children:s.jsx($ie,{clientId:i.id,clientName:i.nome,onUnshare:()=>{X.success("Compartilhamento removido com sucesso!")}})})]})})]})}function gT({clients:e,value:t,onChange:r,placeholder:n="Digite para buscar...",required:a=!1,disabled:i=!1}){const[o,l]=m.useState(""),[c,u]=m.useState(!1),[d,f]=m.useState(0),h=m.useRef(null),p=m.useRef(null),g=e.find(w=>w.id===t),x=e.filter(w=>w.nome.toLowerCase().includes(o.toLowerCase()));m.useEffect(()=>{function w(j){h.current&&!h.current.contains(j.target)&&(u(!1),l(""))}return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[]),m.useEffect(()=>{f(0)},[o]);const y=w=>{var j;r(w),u(!1),l(""),(j=p.current)==null||j.blur()},v=()=>{var w;r(""),l(""),u(!1),(w=p.current)==null||w.focus()},b=w=>{if(!c&&w.key!=="Escape"){u(!0);return}switch(w.key){case"ArrowDown":w.preventDefault(),f(j=>j<x.length-1?j+1:j);break;case"ArrowUp":w.preventDefault(),f(j=>j>0?j-1:0);break;case"Enter":w.preventDefault(),x.length>0&&y(x[d].id);break;case"Escape":w.preventDefault(),u(!1),l("");break}};return s.jsxs("div",{ref:h,className:"relative",children:[s.jsxs("div",{className:"relative",children:[s.jsx("input",{ref:p,type:"text",value:c?o:(g==null?void 0:g.nome)||"",onChange:w=>{l(w.target.value),c||u(!0)},onFocus:()=>u(!0),onKeyDown:b,placeholder:n,disabled:i,required:a&&!t,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent pr-20 disabled:bg-gray-100 disabled:cursor-not-allowed"}),s.jsxs("div",{className:"absolute inset-y-0 right-0 flex items-center pr-2 gap-1",children:[t&&!i&&s.jsx("button",{type:"button",onClick:v,className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",tabIndex:-1,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("button",{type:"button",onClick:()=>!i&&u(!c),className:"p-1 text-gray-400 hover:text-gray-600 transition-colors",tabIndex:-1,disabled:i,children:s.jsx("svg",{className:`w-4 h-4 transition-transform ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})]}),c&&!i&&s.jsxs("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-auto",children:[x.length===0?s.jsx("div",{className:"px-3 py-2 text-sm text-gray-500 text-center",children:"Nenhum cliente encontrado"}):s.jsx("ul",{className:"py-1",children:x.map((w,j)=>s.jsx("li",{children:s.jsx("button",{type:"button",onClick:()=>y(w.id),onMouseEnter:()=>f(j),className:`w-full text-left px-3 py-2 text-sm transition-colors ${j===d?"bg-primary-50 text-primary-900":"text-gray-900 hover:bg-gray-50"} ${w.id===t?"font-medium bg-primary-100":""}`,children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{children:w.nome}),w.id===t&&s.jsx("svg",{className:"w-4 h-4 text-primary-600",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]})})},w.id))}),o&&x.length>0&&s.jsxs("div",{className:"px-3 py-2 text-xs text-gray-500 border-t border-gray-200",children:[x.length," cliente(s) encontrado(s)"]})]})]})}function Rie(){const{canCreate:e,canUpdate:t,canDelete:r}=nn(),n=e("pets"),a=t("pets"),i=r("pets"),[o,l]=m.useState([]),[c,u]=m.useState([]),[d,f]=m.useState(!0),[h,p]=m.useState(!1),[g,x]=m.useState(!1),[y,v]=m.useState(null),[b,w]=m.useState(!1),[j,N]=m.useState(null),[_,S]=m.useState(null),[C,O]=m.useState({nome:"",caracteristica:"",observacoes:"",client_id:""});m.useEffect(()=>{A(),T()},[]);const A=async()=>{try{const{data:P,error:M}=await W.from("pets").select(`
          *,
          clients (
            nome,
            valor_diaria
          )
        `).order("created_at",{ascending:!1});if(M)throw M;l(P||[])}catch(P){console.error("Erro ao buscar pets:",P)}finally{f(!1)}},T=async()=>{try{const{data:P,error:M}=await W.from("clients").select("id, nome, valor_diaria").order("nome");if(M)throw M;u(P||[])}catch(P){console.error("Erro ao buscar clientes:",P)}},D=async P=>{if(P.preventDefault(),j?g:h){X.error("Aguarde, o pet est sendo salvo...");return}j?x(!0):p(!0);const M={nome:C.nome,caracteristica:C.caracteristica,observacoes:C.observacoes||null,client_id:C.client_id};try{if(j){const{error:L}=await W.from("pets").update(M).eq("id",j.id);if(L)throw L;X.success(`Pet "${C.nome}" atualizado com sucesso!`)}else{const{error:L}=await W.from("pets").insert([M]);if(L)throw L;X.success(`Pet "${C.nome}" adicionado com sucesso!`)}await A(),z()}catch(L){console.error("Erro ao salvar pet:",L),X.error(`Erro ao salvar pet: ${L.message}`)}finally{j?x(!1):p(!1)}},q=async P=>{S(P)},re=async()=>{if(!_)return;const P=_;v(P.id),S(null);try{const{error:M}=await W.from("pets").delete().eq("id",P.id);if(M)throw M;X.success(`Pet "${P.nome}" excludo com sucesso!`),await A()}catch(M){console.error("Erro ao excluir pet:",M),X.error(`Erro ao excluir pet: ${M.message}`)}finally{v(null)}},K=P=>{P?(N(P),O({nome:P.nome,caracteristica:P.caracteristica,observacoes:P.observacoes||"",client_id:P.client_id})):(N(null),O({nome:"",caracteristica:"",observacoes:"",client_id:""})),w(!0)},z=()=>{w(!1),N(null),O({nome:"",caracteristica:"",observacoes:"",client_id:""})};return d?s.jsxs("div",{children:[s.jsx("h1",{className:"page-title-fefelina",children:"Pets"}),s.jsx("div",{className:"divider-fefelina"}),s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(In,{size:"lg",variant:"sleeping",text:"Carregando pets..."})})]}):s.jsxs("div",{children:[s.jsxs("div",{className:"sm:flex sm:items-center",children:[s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Pets"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Lista de todos os pets cadastrados no sistema."}),s.jsx("div",{className:"divider-fefelina"})]}),n&&s.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:s.jsxs("button",{type:"button",className:"btn-fefelina",onClick:()=>K(),children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Pet"]})})]}),o.length===0?s.jsx("div",{className:"mt-8 card-fefelina",children:s.jsxs("div",{className:"empty-state-fefelina",children:[s.jsx("div",{className:"mx-auto h-16 w-16 text-primary-400 mb-4",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum pet cadastrado"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Comece adicionando um novo pet ao sistema."}),s.jsxs("button",{className:"btn-fefelina-secondary",onClick:()=>K(),children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Cadastrar Primeiro Pet"]})]})}):s.jsx("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map(P=>s.jsxs("div",{className:"card-fefelina",children:[s.jsxs("div",{className:"flex justify-between items-start mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:P.nome}),s.jsx("p",{className:"text-sm text-gray-600",children:P.caracteristica})]}),s.jsxs("div",{className:"flex space-x-2",children:[a&&s.jsx("button",{onClick:()=>K(P),className:"text-primary-600 hover:text-primary-700 transition-colors",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),i&&s.jsx("button",{onClick:()=>q(P),disabled:y===P.id,className:`transition-colors ${y===P.id?"text-red-400 cursor-not-allowed":"text-red-600 hover:text-red-700"}`,children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]}),s.jsxs("div",{className:"space-y-2 text-sm",children:[P.clients&&s.jsxs("div",{className:"flex items-center text-gray-600",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),P.clients.nome]}),P.observacoes&&s.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded text-gray-700",children:[s.jsx("p",{className:"text-xs font-medium text-gray-500 mb-1",children:"Observaes:"}),s.jsx("p",{className:"text-sm",children:P.observacoes})]})]})]},P.id))}),b&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"modal-fefelina max-w-md w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"section-title-fefelina",children:j?"Editar Pet":"Novo Pet"}),s.jsx("button",{onClick:z,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:D,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nome do Pet *"}),s.jsx("input",{type:"text",required:!0,className:"input-fefelina",value:C.nome,onChange:P=>O({...C,nome:P.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dono *"}),s.jsx(gT,{clients:c,value:C.client_id,onChange:P=>O({...C,client_id:P}),placeholder:"Digite para buscar dono...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caractersticas *"}),s.jsx("input",{type:"text",required:!0,className:"input-fefelina",placeholder:"Ex: Co, Golden Retriever, 5 anos, dourado",value:C.caracteristica,onChange:P=>O({...C,caracteristica:P.target.value})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{rows:3,className:"input-fefelina",placeholder:"Informaes adicionais sobre o pet...",value:C.observacoes,onChange:P=>O({...C,observacoes:P.target.value})})]}),s.jsx("div",{className:"section-divider-fefelina"}),s.jsxs("div",{className:"flex space-x-3",children:[s.jsx("button",{type:"submit",disabled:j?g:h,className:"btn-fefelina flex-1 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:(j?g:h)?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):j?"Atualizar Pet":"Cadastrar Pet"}),s.jsx("button",{type:"button",onClick:z,className:"btn-fefelina-secondary flex-1",children:"Cancelar"})]})]})]})}),_&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center",children:s.jsx("div",{className:"relative mx-auto p-6 border w-full max-w-md shadow-fefelina-hover rounded-2xl bg-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirmar Excluso"}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Tem certeza que deseja excluir o pet ",s.jsxs("strong",{children:['"',_.nome,'"']}),"?"]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-left",children:[s.jsx("p",{className:"text-sm font-medium text-red-800 mb-1",children:" ATENO:"}),s.jsx("p",{className:"text-sm text-red-700",children:"Esta ao no pode ser desfeita."})]})]}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx("button",{type:"button",onClick:()=>S(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:re,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors",children:"Confirmar Excluso"})]})]})})})]})}const Lf=[{id:"cat-orange",emoji:"",label:"Gato Laranja",bgColor:"bg-orange-100"},{id:"cat-black",emoji:"",label:"Gato Preto",bgColor:"bg-gray-100"},{id:"cat-white",emoji:"",label:"Gato Branco",bgColor:"bg-slate-100"},{id:"dog",emoji:"",label:"Cachorro",bgColor:"bg-amber-100"},{id:"dog-service",emoji:"",label:"Cachorro de Servio",bgColor:"bg-yellow-100"},{id:"paw",emoji:"",label:"Patinha",bgColor:"bg-pink-100"},{id:"heart",emoji:"",label:"Corao",bgColor:"bg-red-100"},{id:"star",emoji:"",label:"Estrela",bgColor:"bg-yellow-100"},{id:"sparkles",emoji:"",label:"Brilhos",bgColor:"bg-purple-100"},{id:"flower",emoji:"",label:"Flor",bgColor:"bg-pink-100"},{id:"rainbow",emoji:"",label:"Arco-ris",bgColor:"bg-indigo-100"},{id:"sun",emoji:"",label:"Sol",bgColor:"bg-yellow-100"},{id:"moon",emoji:"",label:"Lua",bgColor:"bg-blue-100"},{id:"fire",emoji:"",label:"Fogo",bgColor:"bg-orange-100"},{id:"tree",emoji:"",label:"rvore",bgColor:"bg-green-100"},{id:"butterfly",emoji:"",label:"Borboleta",bgColor:"bg-purple-100"},{id:"bee",emoji:"",label:"Abelha",bgColor:"bg-yellow-100"},{id:"fish",emoji:"",label:"Peixe",bgColor:"bg-blue-100"},{id:"bird",emoji:"",label:"Pssaro",bgColor:"bg-sky-100"},{id:"rabbit",emoji:"",label:"Coelho",bgColor:"bg-gray-100"},{id:"turtle",emoji:"",label:"Tartaruga",bgColor:"bg-green-100"},{id:"hamster",emoji:"",label:"Hamster",bgColor:"bg-amber-100"},{id:"crown",emoji:"",label:"Coroa",bgColor:"bg-yellow-100"},{id:"gift",emoji:"",label:"Presente",bgColor:"bg-red-100"}],zie=e=>e&&Lf.find(t=>t.id===e)||Lf[0],Fie={"2xs":"w-4 h-4 text-[10px]",xs:"w-6 h-6 text-xs",sm:"w-8 h-8 text-sm",md:"w-10 h-10 text-base",lg:"w-12 h-12 text-lg",xl:"w-16 h-16 text-2xl"};function Ni({avatarId:e,name:t,size:r="md",className:n=""}){const a=zie(e);return s.jsx("div",{className:`${Fie[r]} ${a.bgColor} rounded-full flex items-center justify-center font-medium text-gray-700 ${n}`,title:t,children:s.jsx("span",{className:"select-none",children:a.emoji})})}const xg=e=>{const t=e.replace(/[^\d-]/g,"");if(!t)return"";const r=t.split("-");if(r.length>=1){const n=r[0].slice(0,4);if(n.length===4){const i=parseInt(n);if(i<1900||i>2100)return""}let a=n;if(r.length>=2&&r[1]){let i=r[1].slice(0,2);if(i.length===2){const o=parseInt(i);(o<1||o>12)&&(i="12")}if(a+="-"+i,r.length>=3&&r[2]){let o=r[2].slice(0,2);if(o.length===2){const l=parseInt(o);(l<1||l>31)&&(o="01")}a+="-"+o}}return a}return t},Ko=e=>{if(!e||!/^\d{4}-\d{2}-\d{2}$/.test(e))return!1;const r=new Date(e+"T00:00:00"),[n,a,i]=e.split("-").map(Number);return r.getFullYear()===n&&r.getMonth()===a-1&&r.getDate()===i&&n>=1900&&n<=2100};function Bie(){var kd,qa;const{maskField:e}=Rl("services"),{maskField:t}=Rl("visits"),{canCreate:r,canUpdate:n,canDelete:a,userProfile:i}=nn(),o=r("services"),l=n("services"),c=a("services"),[u,d]=m.useState([]),[f,h]=m.useState([]),[p,g]=m.useState([]),[x,y]=m.useState({}),[v,b]=m.useState([]),[w,j]=m.useState(!0),[N,_]=m.useState(!1),[S,C]=m.useState(!1),[O,A]=m.useState(null),[T,D]=m.useState(!1),[q,re]=m.useState(null),[K,z]=m.useState([]),[P,M]=m.useState(null),[L,G]=m.useState(null),[$,U]=m.useState(!1),[E,Q]=m.useState(null),[J,de]=m.useState([]),[ae,pe]=m.useState(!1),[k,H]=m.useState(!1),[ne,Y]=m.useState(null),[me,ee]=m.useState(null),[he,je]=m.useState("ativos"),[Ae,Ue]=m.useState(""),[Pe,Je]=m.useState(""),[Ge,mt]=m.useState(""),[Oe,F]=m.useState({nome_servico:"",client_id:"",status_pagamento:"pendente",desconto_plataforma_default:0,assigned_user_id:"",valor_pago:0}),[oe,be]=m.useState(1);m.useEffect(()=>{Te(),Ye(),Ct()},[he,Ae,Pe]),m.useEffect(()=>{(async()=>{if(Oe.client_id&&p.length>0){const se=await ht(Oe.client_id);b(se),Oe.assigned_user_id&&!se.find(ve=>ve.id===Oe.assigned_user_id)&&F(ve=>({...ve,assigned_user_id:(i==null?void 0:i.user_id)||""}))}else b(p)})()},[Oe.client_id,p]);const Te=async()=>{try{let R=W.from("services").select(`
          *,
          clients (
            nome,
            valor_diaria,
            valor_duas_visitas
          )
        `);he==="concluidos"||he==="todos"?R=R.order("data_inicio",{ascending:!1}):R=R.order("created_at",{ascending:!1});const{data:se,error:ve}=await R;if(ve)throw ve;const Ee=new Date,Be=Ee.getFullYear(),jn=String(Ee.getMonth()+1).padStart(2,"0"),or=String(Ee.getDate()).padStart(2,"0"),Lr=`${Be}-${jn}-${or}`;let Et=se||[];switch(he){case"ativos":Et=Et.filter(Re=>Re.data_fim>=Lr||Re.status_pagamento!=="pago");break;case"concluidos":if(Et=Et.filter(Re=>Re.data_fim<Lr&&Re.status_pagamento==="pago"),!Ae&&!Pe){const Re=new Date;Re.setMonth(Re.getMonth()-6);const sn=`${Re.getFullYear()}-${String(Re.getMonth()+1).padStart(2,"0")}-${String(Re.getDate()).padStart(2,"0")}`;Et=Et.filter(Yr=>Yr.data_inicio>=sn)}break;case"todos":if(!Ae&&!Pe){const Re=new Date;Re.setMonth(Re.getMonth()-6);const sn=`${Re.getFullYear()}-${String(Re.getMonth()+1).padStart(2,"0")}-${String(Re.getDate()).padStart(2,"0")}`;Et=Et.filter(Yr=>Yr.data_inicio>=sn)}break}Ae&&(Et=Et.filter(Re=>Re.data_inicio>=Ae)),Pe&&(Et=Et.filter(Re=>Re.data_fim<=Pe));const gt=[...new Set(Et.map(Re=>Re.assigned_user_id).filter(Boolean))];if(gt.length>0){const{data:Re}=await W.from("user_profiles").select("user_id, full_name, email").in("user_id",gt);Et=Et.map(sn=>({...sn,assigned_user:sn.assigned_user_id?Re==null?void 0:Re.find(Yr=>Yr.user_id===sn.assigned_user_id):null}))}d(Et)}catch(R){console.error("Erro ao buscar servios:",R)}finally{j(!1)}},Me=()=>{if(!Ge.trim())return u;const R=Ge.toLowerCase().trim();return u.filter(se=>{var ve,Ee;return((ve=se.clients)==null?void 0:ve.nome.toLowerCase().includes(R))||((Ee=se.nome_servico)==null?void 0:Ee.toLowerCase().includes(R))})},Ye=async()=>{try{const{data:R,error:se}=await W.from("clients").select("id, nome, valor_diaria, valor_duas_visitas, credito_disponivel").order("nome");if(se)throw se;h(R||[])}catch(R){console.error("Erro ao buscar clientes:",R)}},Ct=async()=>{try{const{data:R,error:se}=await W.from("user_profiles").select("user_id, full_name, email, avatar_url").eq("is_active",!0).order("full_name");if(se)throw se;const ve=(R==null?void 0:R.map(Be=>({id:Be.user_id,full_name:Be.full_name,email:Be.email,avatar_url:Be.avatar_url})))||[];g(ve);const Ee={};ve.forEach(Be=>{Ee[Be.id]={full_name:Be.full_name,avatar_url:Be.avatar_url}}),y(Ee)}catch(R){console.error("Erro ao buscar usurios:",R)}},ht=async R=>{if(!R)return p;try{const{data:se,error:ve}=await W.from("record_sharing").select("shared_with_user_id").eq("record_id",R).eq("record_type","client");if(ve)throw ve;const Ee=new Set((se==null?void 0:se.map(or=>or.shared_with_user_id))||[]),{data:Be}=await W.from("user_profiles").select("user_id, profile:profiles!inner(is_admin)").eq("is_active",!0),jn=new Set((Be==null?void 0:Be.filter(or=>{const Lr=Array.isArray(or.profile)?or.profile[0]:or.profile;return(Lr==null?void 0:Lr.is_admin)===!0}).map(or=>or.user_id))||[]);return p.filter(or=>jn.has(or.id)||Ee.has(or.id))}catch(se){return console.error("Erro ao verificar compartilhamentos:",se),p}},xt=(R,se)=>se==="inteira"?R.valor_diaria:R.valor_duas_visitas/2,Z=()=>{if(!P)return;const R={data:"",horario:"09:00",tipo_visita:"inteira",tipo_encontro:"visita_servico",valor:xt(P,"inteira"),status:"agendada",desconto_plataforma:Oe.desconto_plataforma_default};z([...K,R])},ie=(R,se,ve)=>{const Ee=[...K];Ee[R]={...Ee[R],[se]:ve},se==="tipo_visita"&&P&&(Ee[R].valor=xt(P,ve)),z(Ee)},fe=R=>{z(K.filter((se,ve)=>ve!==R))},De=()=>{const R=K.filter(Ee=>Ee.status!=="cancelada").length,se=K.filter(Ee=>Ee.status!=="cancelada").reduce((Ee,Be)=>Ee+Be.valor,0),ve=K.filter(Ee=>Ee.status!=="cancelada").reduce((Ee,Be)=>Ee+Be.valor*(1-Be.desconto_plataforma/100),0);return{totalVisitas:R,totalValor:se,totalAReceber:ve}},$e=R=>{R?(re(R),F({nome_servico:R.nome_servico||"",client_id:R.client_id,status_pagamento:R.status_pagamento||"pendente",desconto_plataforma_default:R.desconto_plataforma_default,assigned_user_id:R.assigned_user_id||"",valor_pago:R.valor_pago||0}),M(f.find(se=>se.id===R.client_id)||null),We(R.id)):(re(null),F({nome_servico:"",client_id:"",status_pagamento:"pendente",desconto_plataforma_default:0,assigned_user_id:"",valor_pago:0}),z([]),M(null)),D(!0)},We=async R=>{try{const{data:se,error:ve}=await W.from("visits").select("id, service_id, data, horario, tipo_visita, tipo_encontro, valor, status, desconto_plataforma, client_id, created_at").eq("service_id",R).order("data",{ascending:!0});if(ve)throw ve;const Ee=(se||[]).filter(Be=>Be.tipo_encontro!=="task"&&Be.tipo_encontro!=="pre_encontro");z(Ee)}catch(se){console.error("Erro ao buscar visitas:",se)}},ke=async R=>{var se;try{const{data:ve,error:Ee}=await W.from("visits").select("data, tipo_encontro, tipo_visita").eq("service_id",R.id).eq("status","agendada").order("data",{ascending:!0});if(Ee)throw Ee;const Be=(ve||[]).filter(gt=>gt.tipo_encontro!=="task"&&gt.tipo_encontro!=="pre_encontro"),jn=Be.map(gt=>{const[Re,sn,Yr]=gt.data.split("-"),$o=gt.tipo_visita==="inteira"?"Inteira":"Meia";return` ${Yr}/${sn}/${Re} - ${$o}`}).join(`
`),or=new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(R.total_a_receber),Lr=` Resumo do Servio  Fefelina Cat Sitter 

 Cliente: ${((se=R.clients)==null?void 0:se.nome)||"No informado"}
 Perodo do servio:
${jn}

 Total de visitas: ${Be.length} visita${Be.length!==1?"s":""}
 Valor total a receber: ${or}

 Chave PIX:
fefelinacatsitter@gmail.com
(Andr Thiago Hass | Banco Ita)

Peo, por gentileza, que valide as datas informadas acima.
Aps o pagamento, enviar o comprovante.
Fico  disposio para qualquer ajuste ou dvida.
Ser um prazer cuidar do(s) seu(s) gatinho(s)! `;let Et=!1;if(navigator.clipboard&&navigator.clipboard.writeText)try{await navigator.clipboard.writeText(Lr),Et=!0}catch(gt){console.warn("Clipboard API falhou, tentando fallback:",gt)}if(!Et){const gt=document.createElement("textarea");gt.value=Lr,gt.style.position="absolute",gt.style.left="0",gt.style.top="0",gt.style.opacity="0",gt.style.pointerEvents="none",gt.style.width="1px",gt.style.height="1px",gt.setAttribute("readonly",""),document.body.appendChild(gt),gt.focus(),gt.setSelectionRange(0,Lr.length);try{document.execCommand("copy")&&(Et=!0)}catch(Re){console.error("execCommand falhou:",Re)}document.body.removeChild(gt)}Et?X.success("Mensagem copiada! Cole no WhatsApp "):X.error("No foi possvel copiar automaticamente. Por favor, copie manualmente.")}catch(ve){console.error("Erro ao copiar mensagem:",ve),X.error("Erro ao copiar mensagem")}},ue=()=>{D(!1),re(null),F({nome_servico:"",client_id:"",status_pagamento:"pendente",desconto_plataforma_default:0,assigned_user_id:"",valor_pago:0}),z([]),M(null)},B=R=>{const se=f.find(ve=>ve.id===R);if(M(se||null),F({...Oe,client_id:R}),se){const ve=K.map(Ee=>({...Ee,valor:xt(se,Ee.tipo_visita),desconto_plataforma:Oe.desconto_plataforma_default}));z(ve)}},te=async R=>{if(R.preventDefault(),q?S:N){X.error("Aguarde, o servio est sendo salvo...");return}if(!P||K.length===0){X.error("Selecione um cliente e adicione pelo menos uma visita");return}if(K.filter(ve=>!ve.data).length>0){X.error("Todas as visitas devem ter uma data preenchida");return}q?C(!0):_(!0);try{const ve=K.map(et=>({...et,desconto_plataforma:Oe.desconto_plataforma_default})),Ee=ve.filter(et=>et.status!=="cancelada").length,Be=ve.filter(et=>et.status!=="cancelada").reduce((et,Xt)=>et+Xt.valor,0),jn=ve.filter(et=>et.status!=="cancelada").reduce((et,Xt)=>et+Xt.valor*(1-Xt.desconto_plataforma/100),0),or=K.map(et=>et.data).filter(et=>et),Lr=or.sort()[0],Et=or.sort().reverse()[0],gt=Oe.status_pagamento==="pago"?jn:Oe.valor_pago;let Re=0;if(!q){const et=(P==null?void 0:P.credito_disponivel)||0;if(et>0){Re=Math.min(et,Be);const Xt=et-Re,{error:$s}=await W.from("clients").update({credito_disponivel:Xt}).eq("id",Oe.client_id);if($s)throw $s}}let sn={...Oe,data_inicio:Lr,data_fim:Et,total_visitas:Ee,total_valor:Be,total_a_receber:jn,valor_pago:gt,credito_usado:Re,assigned_user_id:Oe.assigned_user_id||null},Yr;if(q){const{data:et,error:Xt}=await W.from("services").update(sn).eq("id",q.id).select().single();if(Xt)throw Xt;Yr=et,await W.from("visits").delete().eq("service_id",q.id)}else{const{data:et,error:Xt}=await W.from("services").insert([sn]).select().single();if(Xt)throw Xt;Yr=et}const $o=K.map(et=>{const{id:Xt,...$s}=et;return{...$s,service_id:Yr.id,client_id:Oe.client_id,tipo_encontro:"visita_servico",desconto_plataforma:Oe.desconto_plataforma_default}});if($o.length>0){const{error:et}=await W.from("visits").insert($o);if(et)throw et}if(!q&&Re>0){const et=(P==null?void 0:P.credito_disponivel)||0,{error:Xt}=await W.from("client_credits_history").insert({client_id:Oe.client_id,tipo:"uso",valor:Re,saldo_anterior:et,saldo_novo:et-Re,descricao:`Crdito usado no servio ${Oe.nome_servico||"sem nome"}`,service_id:Yr.id});Xt&&console.error("Erro ao registrar histrico de crdito:",Xt)}const Ds=!q&&Re>0?`Servio "${Oe.nome_servico||"Sem nome"}" criado! Crdito de ${pt(Re)} foi usado. Saldo restante: ${pt(((P==null?void 0:P.credito_disponivel)||0)-Re)}`:q?`Servio "${Oe.nome_servico||"Sem nome"}" atualizado com ${K.length} visita(s)!`:`Servio "${Oe.nome_servico||"Sem nome"}" criado com ${K.length} visita(s)!`;X.success(Ds,{duration:5e3}),await Te(),ue()}catch(ve){console.error("Erro ao salvar servio:",ve),X.error(`Erro ao salvar servio: ${ve.message}`)}finally{q?C(!1):_(!1)}},ce=async R=>{G(R)},ye=async()=>{if(!L)return;const R=L;A(R.id),G(null);try{const{error:se}=await W.from("services").delete().eq("id",R.id);if(se)throw se;X.success(`Servio "${R.nome_servico||"Sem nome"}" excludo com sucesso!`),await Te()}catch(se){console.error("Erro ao excluir servio:",se),X.error(`Erro ao excluir servio: ${se.message}`)}finally{A(null)}},Ie=R=>{const se={pendente:"bg-red-100 text-red-800",pendente_plataforma:"bg-yellow-100 text-yellow-800",pago_parcialmente:"bg-blue-100 text-blue-800",pago:"bg-green-100 text-green-800"},ve={pendente:"Pendente",pendente_plataforma:"Pendente Plataforma",pago_parcialmente:"Pago Parcialmente",pago:"Pago"};return s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${se[R]}`,children:ve[R]})},Xe=async R=>{try{const{error:se}=await W.from("services").update({status_pagamento:"pago"}).eq("id",R);if(se)throw se;X.success("Servio marcado como pago!"),await Te()}catch(se){console.error("Erro ao marcar servio como pago:",se),X.error(`Erro ao marcar servio como pago: ${se.message}`)}},Ke=async R=>{Q(R),U(!0),pe(!0);try{const{data:se,error:ve}=await W.from("visits").select("*").eq("service_id",R.id).order("data",{ascending:!0});if(ve)throw ve;const Ee=(se||[]).filter(Be=>Be.tipo_encontro!=="task"&&Be.tipo_encontro!=="pre_encontro");de(Ee)}catch(se){console.error("Erro ao buscar visitas do servio:",se),X.error(`Erro ao buscar detalhes: ${se.message}`)}finally{pe(!1)}},Le=()=>{U(!1),Q(null),de([]),pe(!1)},jt=R=>{window.innerWidth<768&&(Y(R),H(!0))},Qe=R=>{if(window.innerWidth<768){const se=setTimeout(()=>{jt(R)},500);ee(se)}},sr=()=>{me&&(clearTimeout(me),ee(null))},Or=()=>{H(!1),Y(null)},pt=R=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(R),Kr=R=>{const[se,ve,Ee]=R.split("-").map(Number);return new Date(se,ve-1,Ee).toLocaleDateString("pt-BR")},Va=()=>{if(!P||oe<1)return;if(K.length===0){X.error("Cadastre pelo menos uma visita para usar como base!");return}const R=K[0],se=[];if(R.tipo_visita==="meia"){const ve=Math.ceil(oe/2);for(let Ee=0;Ee<ve;Ee++){const Be=new Date(R.data+"T00:00:00");Be.setDate(Be.getDate()+Ee);const jn=Be.toISOString().slice(0,10);se.length<oe&&se.push({...R,data:jn,horario:"09:00"}),se.length<oe&&se.push({...R,data:jn,horario:"18:00"})}}else for(let ve=0;ve<oe;ve++){const Ee=new Date(R.data+"T00:00:00");Ee.setDate(Ee.getDate()+ve);const Be=Ee.toISOString().slice(0,10);se.push({...R,data:Be})}z(se),X.success(`${se.length} visita(s) gerada(s) com sucesso!`)},{totalVisitas:Ln,totalValor:ia,totalAReceber:rt}=De();return w?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(In,{size:"lg",variant:"walking",text:"Carregando servios..."})}):s.jsxs("div",{children:[s.jsxs("div",{className:"sm:flex sm:items-center",children:[s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Servios"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Gerencie os servios e contratos de cuidado com pets."}),s.jsx("div",{className:"divider-fefelina"})]}),s.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:o&&s.jsxs("button",{type:"button",className:"btn-fefelina",onClick:()=>$e(),children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Novo Servio"]})})]}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("div",{className:"relative max-w-md",children:[s.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:s.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("input",{type:"text",value:Ge,onChange:R=>mt(R.target.value),className:"block w-full pl-10 pr-10 py-2.5 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-all",placeholder:"Buscar por nome do cliente ou servio..."}),Ge&&s.jsx("button",{onClick:()=>mt(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),Ge&&s.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[Me().length," servio(s) encontrado(s)"]})]}),s.jsx("div",{className:"mt-6 mb-6",children:s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>je("ativos"),className:`px-4 py-2 text-sm font-medium rounded-md ${he==="ativos"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Ativos"}),s.jsxs("button",{onClick:()=>je("concluidos"),className:`px-4 py-2 text-sm font-medium rounded-md ${he==="concluidos"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:["Concludos",he==="concluidos"&&!Ae&&!Pe&&s.jsx("span",{className:"ml-1 text-xs opacity-75",children:"(6m)"})]}),s.jsx("button",{onClick:()=>je("todos"),className:`px-4 py-2 text-sm font-medium rounded-md ${he==="todos"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Todos"})]}),(he==="concluidos"||he==="todos")&&s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center",children:[s.jsx("span",{className:"text-sm text-gray-600 whitespace-nowrap",children:"Perodo:"}),s.jsx("input",{type:"date",value:Ae,onChange:R=>{const se=xg(R.target.value);!se||Ko(se)?Ue(se):X.error("Data invlida. Use o formato AAAA-MM-DD com ano entre 1900 e 2100.")},onBlur:R=>{R.target.value&&!Ko(R.target.value)&&(X.error("Data invlida. Corrigindo automaticamente."),Ue(""))},min:"1900-01-01",max:"2100-12-31",className:"text-sm border border-gray-300 rounded-md px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Data incio"}),s.jsx("span",{className:"text-sm text-gray-500",children:"at"}),s.jsx("input",{type:"date",value:Pe,onChange:R=>{const se=xg(R.target.value);!se||Ko(se)?Je(se):X.error("Data invlida. Use o formato AAAA-MM-DD com ano entre 1900 e 2100.")},onBlur:R=>{R.target.value&&!Ko(R.target.value)&&(X.error("Data invlida. Corrigindo automaticamente."),Je(""))},min:"1900-01-01",max:"2100-12-31",className:"text-sm border border-gray-300 rounded-md px-3 py-1.5 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Data fim"}),(Ae||Pe)&&s.jsx("button",{onClick:()=>{Ue(""),Je("")},className:"text-sm text-gray-500 hover:text-gray-700 px-2 py-1 rounded",children:"Limpar"})]})]})}),u.length===0?s.jsx("div",{className:"mt-8 card-fefelina",children:s.jsxs("div",{className:"empty-state-fefelina",children:[s.jsx("div",{className:"mx-auto h-16 w-16 text-primary-400 mb-4",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum servio agendado"}),s.jsx("p",{className:"text-gray-500 mb-6",children:"Agendar um servio para comear."}),s.jsxs("button",{className:"btn-fefelina-secondary",onClick:()=>$e(),children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Agendar Servio"]})]})}):Me().length===0?s.jsx("div",{className:"mt-8 card-fefelina",children:s.jsxs("div",{className:"empty-state-fefelina",children:[s.jsx("div",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Nenhum resultado encontrado"}),s.jsxs("p",{className:"text-gray-500 mb-6",children:['No encontramos servios que correspondam  sua busca "',Ge,'".']}),s.jsx("button",{className:"btn-fefelina-secondary",onClick:()=>mt(""),children:"Limpar Busca"})]})}):s.jsx("div",{className:"mt-8 grid grid-cols-1 gap-3",children:Me().map(R=>{var se,ve;return s.jsx("div",{className:"card-fefelina",children:s.jsx("div",{className:"p-3 cursor-pointer",onClick:()=>Ke(R),onTouchStart:()=>Qe(R),onTouchEnd:sr,onTouchCancel:sr,children:s.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-2",children:[s.jsxs("div",{className:"flex-1 min-w-0 pr-3",children:[s.jsx("h3",{className:"text-sm font-semibold text-gray-900 truncate mb-1",children:R.nome_servico||`Servio para ${(se=R.clients)==null?void 0:se.nome}`}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx("span",{className:"font-medium",children:(ve=R.clients)==null?void 0:ve.nome}),s.jsx("span",{className:"text-gray-400",children:""}),s.jsxs("span",{className:"text-gray-500",children:[Kr(R.data_inicio)," - ",Kr(R.data_fim)]}),R.assigned_user_id&&x[R.assigned_user_id]&&s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"text-gray-400",children:""}),s.jsxs("div",{className:"group relative inline-flex items-center gap-1",children:[s.jsx(Ni,{avatarId:x[R.assigned_user_id].avatar_url,name:x[R.assigned_user_id].full_name,size:"xs",className:"border border-gray-200"}),s.jsxs("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 whitespace-nowrap",children:[s.jsxs("div",{className:"bg-gray-900 text-white text-xs rounded py-1 px-2",children:["Responsvel: ",x[R.assigned_user_id].full_name]}),s.jsx("div",{className:"absolute left-4 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]})]})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-3 px-2 min-w-0 md:min-w-[200px] w-full md:w-auto",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 font-medium mb-0.5 text-xs",children:"Visitas"}),s.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:R.total_visitas})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 font-medium mb-0.5 text-xs",children:"Total"}),s.jsx("div",{className:"font-semibold text-gray-900 text-sm",children:e("total_valor",pt(R.total_valor))})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-gray-500 font-medium mb-0.5 text-xs",children:"A Receber"}),s.jsx("div",{className:"font-semibold text-primary-600 text-sm",children:e("total_a_receber",pt(R.total_a_receber))})]})]}),s.jsxs("div",{className:"flex flex-col md:flex-col items-center space-y-2 md:space-y-2 flex-shrink-0 pl-0 md:pl-4",children:[s.jsx("div",{className:"flex flex-col items-center space-y-1",children:Ie(R.status_pagamento)}),s.jsxs("div",{className:"hidden md:flex flex-row items-center gap-1.5",children:[l&&s.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),$e(R)},className:"inline-flex items-center px-2 py-1.5 border border-gray-300 shadow-sm text-xs font-medium rounded text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar"]}),R.status_pagamento!=="pago"&&s.jsxs("button",{onClick:Ee=>{Ee.stopPropagation(),Xe(R.id)},className:"inline-flex items-center px-2 py-1.5 border border-green-300 shadow-sm text-xs font-medium rounded text-green-700 bg-white hover:bg-green-50 transition-colors",children:[s.jsx("svg",{className:"w-3 h-3 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Marcar Pago"]})]}),s.jsx("div",{className:"flex md:hidden items-center justify-center mt-2",children:s.jsxs("div",{className:"flex items-center text-xs text-gray-400",children:[s.jsxs("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),"Toque para ver detalhes  Mantenha pressionado para aes"]})})]})]})})},R.id)})}),T&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto pt-16 md:pt-0",children:s.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:ue}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsx("h3",{className:"text-base leading-6 font-medium text-gray-900",children:q?"Editar Servio":"Novo Servio"}),s.jsx("button",{onClick:ue,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("form",{onSubmit:te,className:"px-6 py-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nome do Servio"}),s.jsx("input",{type:"text",value:Oe.nome_servico,onChange:R=>F({...Oe,nome_servico:R.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"Opcional"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Cliente *"}),s.jsx(gT,{clients:f,value:Oe.client_id,onChange:B,placeholder:"Digite para buscar cliente...",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Responsvel"}),s.jsxs("select",{value:Oe.assigned_user_id||(i==null?void 0:i.user_id)||"",onChange:R=>F({...Oe,assigned_user_id:R.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",disabled:!Oe.client_id,children:[!Oe.client_id&&s.jsx("option",{value:"",children:"Selecione um cliente primeiro"}),i&&v.find(R=>R.id===i.user_id)&&s.jsxs("option",{value:i.user_id,children:[i.full_name," (Voc)"]}),v.filter(R=>R.id!==(i==null?void 0:i.user_id)).map(R=>s.jsx("option",{value:R.id,children:R.full_name},R.id))]}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:Oe.client_id?v.length<p.length?s.jsx("span",{className:"text-amber-600",children:" Mostrando apenas parceiros com acesso a este cliente"}):"Parceiro responsvel pelas visitas":"Selecione um cliente para escolher o responsvel"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status de Pagamento"}),s.jsxs("select",{value:Oe.status_pagamento,onChange:R=>F({...Oe,status_pagamento:R.target.value}),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",children:[s.jsx("option",{value:"pendente",children:"Pendente"}),s.jsx("option",{value:"pendente_plataforma",children:"Pendente Plataforma"}),s.jsx("option",{value:"pago_parcialmente",children:"Pago Parcialmente"}),s.jsx("option",{value:"pago",children:"Pago"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Desconto Plataforma Padro (%)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:Oe.desconto_plataforma_default,onChange:R=>F({...Oe,desconto_plataforma_default:parseFloat(R.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"0"})]}),Oe.status_pagamento==="pago_parcialmente"&&s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor Pago (R$)"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:Oe.valor_pago,onChange:R=>F({...Oe,valor_pago:parseFloat(R.target.value)||0}),className:"w-full border border-gray-300 rounded-md px-2 py-1.5 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",placeholder:"0.00"}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Valor j pago pelo cliente"})]}),s.jsxs("div",{className:"md:col-span-2 bg-primary-50 p-2.5 rounded-lg",children:[s.jsx("h5",{className:"text-xs font-medium text-primary-900 mb-1.5",children:" Informaes automticas"}),s.jsxs("ul",{className:"text-xs text-primary-800 space-y-0.5",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Perodo:"})," Calculado baseado na primeira e ltima visita"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Totais:"})," Calculados baseado nas visitas cadastradas"]})]})]})]}),s.jsxs("div",{className:"border-t pt-3",children:[s.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center mb-3 gap-2",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"Visitas"}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-1.5",children:[s.jsxs("button",{type:"button",onClick:Z,disabled:!P,className:"inline-flex items-center px-2.5 py-1.5 shadow-sm text-xs font-medium rounded text-white bg-primary-500 hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Adicionar Visita"]}),s.jsxs("div",{className:"flex flex-row gap-1.5 items-center",children:[s.jsx("input",{type:"number",id:"multiVisitDays",min:"1",max:"60",className:"border border-gray-300 rounded-md px-2 py-1.5 text-xs focus:outline-none focus:ring-1 focus:ring-primary-500 w-16",value:oe,onChange:R=>be(Number(R.target.value)),disabled:!P||K.length===0,placeholder:"Qtd"}),s.jsx("button",{type:"button",onClick:Va,disabled:!P||K.length===0||oe<1,className:"inline-flex items-center px-2.5 py-1.5 shadow-sm text-xs font-medium rounded text-white bg-primary-500 hover:bg-primary-600 disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap transition-colors",children:"Gerar Mltiplas"})]})]})]}),K.length===0?s.jsx("div",{className:"text-center py-6 text-gray-500 text-sm",children:'Nenhuma visita adicionada. Clique em "Adicionar Visita" para comear.'}):s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:K.map((R,se)=>s.jsx("div",{className:"border border-gray-200 rounded-lg p-2.5",children:s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-12 gap-2",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Data *"}),s.jsx("input",{type:"date",value:R.data,onChange:ve=>{const Ee=xg(ve.target.value);!Ee||Ko(Ee)?ie(se,"data",Ee):X.error("Data invlida. Use o formato AAAA-MM-DD com ano entre 1900 e 2100.")},onBlur:ve=>{ve.target.value&&!Ko(ve.target.value)&&(X.error("Data invlida. Corrigindo automaticamente."),ie(se,"data",""))},min:"1900-01-01",max:"2100-12-31",className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Horrio *"}),s.jsx("input",{type:"time",value:R.horario,onChange:ve=>ie(se,"horario",ve.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",required:!0})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Tipo"}),s.jsxs("select",{value:R.tipo_visita,onChange:ve=>ie(se,"tipo_visita",ve.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",children:[s.jsx("option",{value:"inteira",children:"Inteira"}),s.jsx("option",{value:"meia",children:"Meia"})]})]}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor"}),s.jsx("input",{type:"number",step:"0.01",value:R.valor,onChange:ve=>ie(se,"valor",parseFloat(ve.target.value)||0),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500"})]}),s.jsxs("div",{className:"md:col-span-3",children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),s.jsxs("select",{value:R.status,onChange:ve=>ie(se,"status",ve.target.value),className:"w-full border border-gray-300 rounded-md px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-primary-500",children:[s.jsx("option",{value:"agendada",children:"Agendada"}),s.jsx("option",{value:"realizada",children:"Realizada"}),s.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),s.jsx("div",{className:"md:col-span-1 flex items-end justify-center",children:s.jsx("button",{type:"button",onClick:()=>fe(se),className:"text-red-600 hover:text-red-800 hover:bg-red-50 p-1.5 rounded transition-colors",title:"Remover visita",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})})]})},se))})]}),K.length>0&&s.jsxs("div",{className:"border-t pt-3 space-y-3",children:[s.jsxs("div",{className:"bg-primary-50 rounded-lg p-2.5",children:[s.jsx("h5",{className:"text-xs font-medium text-gray-900 mb-2",children:"Resumo do Servio"}),s.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Visitas:"}),s.jsx("span",{className:"font-semibold ml-1",children:Ln})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"Total:"}),s.jsx("span",{className:"font-semibold ml-1",children:pt(ia)})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-600",children:"A Receber:"}),s.jsx("span",{className:"font-semibold ml-1 text-primary-600",children:pt(rt)})]})]})]}),(()=>{const R=(P==null?void 0:P.credito_disponivel)||0,se=Math.min(R,ia),ve=R-se,Ee=ia-se;return!q&&R>0?s.jsx("div",{className:"bg-gradient-to-r from-green-50 to-emerald-50 border-2 border-green-300 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx("div",{className:"flex-shrink-0 p-1.5 bg-green-500 rounded-lg",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h5",{className:"text-xs font-bold text-green-900 mb-1.5",children:" Crdito Disponvel"}),s.jsxs("div",{className:"space-y-1 text-xs",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Saldo atual:"}),s.jsx("span",{className:"font-semibold text-green-700",children:pt(R)})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-gray-700",children:"Ser usado:"}),s.jsx("span",{className:"font-bold text-green-800",children:pt(se)})]}),s.jsxs("div",{className:"flex justify-between pt-1 border-t border-green-200",children:[s.jsx("span",{className:"text-gray-700",children:"Saldo aps:"}),s.jsx("span",{className:"font-semibold text-green-700",children:pt(ve)})]}),s.jsxs("div",{className:"flex justify-between items-center pt-1 mt-1 border-t-2 border-green-300",children:[s.jsx("span",{className:"font-medium text-gray-900",children:"Valor final:"}),s.jsx("span",{className:"text-sm font-bold text-primary-600",children:pt(Ee)})]})]}),se>0&&s.jsx("div",{className:"mt-2 p-1.5 bg-green-100 border border-green-300 rounded text-[10px] text-green-800",children:" Crdito aplicado automaticamente"})]})]})}):null})()]}),s.jsxs("div",{className:"flex justify-end space-x-2 pt-3 border-t px-6 pb-4",children:[s.jsx("button",{type:"button",onClick:ue,className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:q?S:N,className:"px-3 py-1.5 bg-primary-500 hover:bg-primary-600 text-white rounded-md text-sm font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1.5",children:(q?S:N)?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-3.5 w-3.5 border-b-2 border-white"}),"Salvando..."]}):q?"Atualizar":"Criar Servio"})]})]})]})]})}),L&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-center justify-center pt-16 md:pt-0",children:s.jsx("div",{className:"relative mx-auto p-6 border w-full max-w-md shadow-fefelina-hover rounded-2xl bg-white",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:s.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.732-.833-2.464 0L3.34 16.5c-.77.833.192 2.5 1.732 2.5z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Confirmar Excluso"}),s.jsxs("div",{className:"mb-6",children:[s.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Tem certeza que deseja excluir o servio ",s.jsxs("strong",{children:['"',L.nome_servico||"Sem nome",'"']}),"?"]}),s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-left",children:[s.jsx("p",{className:"text-sm font-medium text-red-800 mb-2",children:" ATENO: Esta ao ir excluir tambm:"}),s.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[s.jsxs("li",{children:[" Todas as ",L.total_visitas," visitas do servio"]}),s.jsx("li",{children:" Todos os registros de pagamento"})]}),s.jsx("p",{className:"text-sm font-medium text-red-800 mt-2",children:"Esta ao no pode ser desfeita."})]})]}),s.jsxs("div",{className:"flex justify-center gap-3",children:[s.jsx("button",{type:"button",onClick:()=>G(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-200 rounded-md hover:bg-gray-300 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"button",onClick:ye,className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700 transition-colors",children:"Confirmar Excluso"})]})]})})}),$&&E&&s.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto pt-16 md:pt-0",children:s.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:Le}),s.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-base leading-6 font-medium text-gray-900",children:"Detalhes do Servio"}),s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Visualizao completa do servio e suas visitas"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("button",{onClick:()=>ke(E),className:"inline-flex items-center px-2 py-1 text-xs font-medium text-green-700 bg-white border border-green-300 rounded hover:bg-green-50 transition-colors",title:"Copiar mensagem para WhatsApp",children:[s.jsx(Lx,{className:"w-3 h-3 mr-1"}),"WhatsApp"]}),s.jsx("button",{onClick:Le,className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),s.jsxs("div",{className:"px-6 py-4 space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Informaes do Servio"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Nome do Servio"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:E.nome_servico||"No informado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Cliente"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:((kd=E.clients)==null?void 0:kd.nome)||"Cliente no encontrado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Status de Pagamento"}),s.jsx("div",{className:"mt-0.5",children:Ie(E.status_pagamento)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Desconto Plataforma Padro"}),s.jsxs("div",{className:"mt-0.5 text-sm text-gray-900",children:[E.desconto_plataforma_default,"%"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Perodo do Servio"}),s.jsxs("div",{className:"mt-0.5 text-sm text-gray-900",children:[Kr(E.data_inicio)," - ",Kr(E.data_fim)]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700",children:"Data de Criao"}),s.jsx("div",{className:"mt-0.5 text-sm text-gray-900",children:Kr(E.created_at.split("T")[0])})]})]})]}),s.jsxs("div",{className:"bg-primary-50 rounded-lg p-3",children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Resumo Financeiro"}),s.jsxs("div",{className:`grid grid-cols-1 ${E.status_pagamento==="pago_parcialmente"?"md:grid-cols-5":"md:grid-cols-3"} gap-3`,children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:J.filter(R=>R.status!=="cancelada").length}),s.jsx("div",{className:"text-xs text-gray-600",children:"Total de Visitas"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-gray-900",children:e("total_valor",pt(E.total_valor))}),s.jsx("div",{className:"text-xs text-gray-600",children:"Valor Total"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-primary-600",children:e("total_a_receber",pt(E.total_a_receber))}),s.jsx("div",{className:"text-xs text-gray-600",children:"Valor a Receber"})]}),E.status_pagamento==="pago_parcialmente"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-green-600",children:e("valor_pago",pt(E.valor_pago||0))}),s.jsx("div",{className:"text-xs text-gray-600",children:"Valor Pago"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"text-xl font-bold text-orange-600",children:e("saldo_restante",pt(E.total_a_receber-(E.valor_pago||0)))}),s.jsx("div",{className:"text-xs text-gray-600",children:"Saldo Restante"})]})]})]})]}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Visitas do Servio"}),ae?s.jsx("div",{className:"flex justify-center items-center py-8",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-600"})}):J.length===0?s.jsx("div",{className:"text-center py-8 text-gray-500 text-sm",children:"Nenhuma visita encontrada para este servio."}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"hidden md:block overflow-hidden shadow ring-1 ring-black ring-opacity-5 rounded-lg",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Horrio"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Desconto"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:J.map((R,se)=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:Kr(R.data)}),s.jsx("div",{className:"text-gray-500",children:R.horario})]})}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${R.tipo_visita==="inteira"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:R.tipo_visita==="inteira"?"Inteira":"Meia"})}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs font-medium text-gray-900",children:t("valor",pt(R.valor))}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs text-gray-900",children:t("desconto_plataforma",`${R.desconto_plataforma}%`)}),s.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-xs",children:s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${R.status==="realizada"?"bg-green-100 text-green-800":R.status==="agendada"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:R.status==="realizada"?"Realizada":R.status==="agendada"?"Agendada":"Cancelada"})})]},R.id||se))})]})}),s.jsx("div",{className:"md:hidden space-y-2",children:J.map((R,se)=>s.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-2.5 shadow-sm",children:[s.jsxs("div",{className:"flex items-center justify-between gap-2 mb-2",children:[s.jsx("div",{className:"flex items-center gap-2 min-w-0",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-gray-900",children:Kr(R.data)}),s.jsx("div",{className:"text-xs text-gray-500",children:R.horario})]})}),s.jsxs("div",{className:"flex flex-col items-end gap-1 flex-shrink-0",children:[s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${R.status==="realizada"?"bg-green-100 text-green-800":R.status==="agendada"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:R.status==="realizada"?"Realizada":R.status==="agendada"?"Agendada":"Cancelada"}),s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium ${R.tipo_visita==="inteira"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:R.tipo_visita==="inteira"?"Inteira":"Meia"})]})]}),s.jsx("div",{className:"flex items-center justify-between text-xs border-t border-gray-100 pt-2",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Valor:"}),s.jsx("span",{className:"ml-1 font-medium text-gray-900",children:t("valor",pt(R.valor))})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Desc:"}),s.jsx("span",{className:"ml-1 font-medium text-gray-900",children:t("desconto_plataforma",`${R.desconto_plataforma}%`)})]})]})})]},R.id||se))})]})]}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t px-6 pb-4",children:[c&&s.jsxs("button",{type:"button",onClick:()=>{Le(),ce(E)},disabled:O===E.id,className:`inline-flex items-center px-3 py-1.5 border border-red-200 rounded-md text-sm font-medium transition-colors ${O===E.id?"text-red-400 bg-red-50 cursor-not-allowed":"text-red-600 bg-transparent hover:bg-red-50 hover:border-red-300"}`,children:[s.jsx("svg",{className:"w-3.5 h-3.5 mr-1.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),O===E.id?"Excluindo...":"Excluir"]}),s.jsxs("div",{className:"flex space-x-2",children:[s.jsx("button",{type:"button",onClick:Le,className:"px-3 py-1.5 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Fechar"}),l&&s.jsx("button",{type:"button",onClick:()=>{Le(),$e(E)},className:"px-3 py-1.5 bg-primary-500 hover:bg-primary-600 text-white rounded-md text-sm font-medium transition-colors",children:"Editar Servio"})]})]})]})]})]})}),k&&ne&&s.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50 flex items-end justify-center md:hidden",children:s.jsx("div",{className:"relative mx-auto p-6 border w-full max-w-sm shadow-fefelina-hover rounded-t-2xl bg-white",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aes do Servio"}),s.jsx("p",{className:"text-sm text-gray-600",children:ne.nome_servico||`Servio para ${(qa=ne.clients)==null?void 0:qa.nome}`})]}),s.jsxs("div",{className:"space-y-3",children:[l&&s.jsxs("button",{onClick:()=>{Or(),$e(ne)},className:"w-full inline-flex items-center justify-center px-4 py-3 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Editar Servio"]}),ne.status_pagamento!=="pago"&&s.jsxs("button",{onClick:()=>{Or(),Xe(ne.id)},className:"w-full inline-flex items-center justify-center px-4 py-3 border border-green-300 shadow-sm text-sm font-medium rounded-md text-green-700 bg-white hover:bg-green-50",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Marcar como Pago"]}),s.jsxs("button",{onClick:()=>{Or(),ce(ne)},className:"w-full inline-flex items-center justify-center px-4 py-3 border border-red-300 shadow-sm text-sm font-medium rounded-md text-red-700 bg-white hover:bg-red-50",children:[s.jsx("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Excluir Servio"]}),s.jsx("button",{onClick:Or,className:"w-full px-4 py-3 text-sm font-medium text-gray-500 bg-gray-100 rounded-md hover:bg-gray-200",children:"Cancelar"})]})]})})})]})}const ZS=e=>{const t=e.replace(/[^\d-]/g,"");if(!t)return"";const r=t.split("-");if(r.length>=1){const n=r[0].slice(0,4);if(n.length===4){const i=parseInt(n);if(i<1900||i>2100)return""}let a=n;if(r.length>=2&&r[1]){let i=r[1].slice(0,2);if(i.length===2){const o=parseInt(i);(o<1||o>12)&&(i="12")}if(a+="-"+i,r.length>=3&&r[2]){let o=r[2].slice(0,2);if(o.length===2){const l=parseInt(o);(l<1||l>31)&&(o="01")}a+="-"+o}}return a}return t},pf=e=>{if(!e||!/^\d{4}-\d{2}-\d{2}$/.test(e))return!1;const r=new Date(e+"T00:00:00"),[n,a,i]=e.split("-").map(Number);return r.getFullYear()===n&&r.getMonth()===a-1&&r.getDate()===i&&n>=1900&&n<=2100};function Uie(){const e=Ei(),{maskField:t}=Rl("visits"),{canUpdate:r,isAdmin:n,userProfile:a}=nn(),i=r("visits"),[o,l]=m.useState([]),[c,u]=m.useState(!0),[d,f]=m.useState(null),[h,p]=m.useState("hoje"),[g,x]=m.useState(!1),[y,v]=m.useState(""),[b,w]=m.useState(""),[j,N]=m.useState("todos"),[_,S]=m.useState([]),[C,O]=m.useState({}),[A,T]=m.useState(null),[D,q]=m.useState({}),[re,K]=m.useState("bottom"),[z,P]=m.useState(!1),[M,L]=m.useState(null);m.useEffect(()=>{$(),G(),n&&U()},[h,y,b,j]);const G=async()=>{try{const k=new Date,H=k.getFullYear(),ne=String(k.getMonth()+1).padStart(2,"0"),Y=String(k.getDate()).padStart(2,"0"),me=`${H}-${ne}-${Y}`,{data:ee,error:he}=await W.from("visits").select("id").gt("data",me).eq("status","agendada").limit(1);if(he)throw he;x((ee||[]).length>0)}catch(k){console.error("Erro ao verificar visitas futuras:",k),x(!1)}},$=async()=>{try{let k=W.from("visits").select(`
          id, service_id, lead_id, data, horario, tipo_visita, tipo_encontro, titulo, valor, status, desconto_plataforma, observacoes, client_id, created_at, assigned_user_id,
          clients (nome),
          services (nome_servico, total_visitas),
          leads (nome)
        `).order("data",{ascending:!0}).order("horario",{ascending:!0});const H=new Date,ne=H.getFullYear(),Y=String(H.getMonth()+1).padStart(2,"0"),me=String(H.getDate()).padStart(2,"0"),ee=`${ne}-${Y}-${me}`;switch(h){case"hoje":k=k.eq("data",ee).eq("status","agendada");break;case"proximas":k=k.gte("data",ee).eq("status","agendada");break;case"realizadas":if(k=k.eq("status","realizada").order("data",{ascending:!1}).order("horario",{ascending:!1}),!y&&!b){const Pe=new Date;Pe.setMonth(Pe.getMonth()-3);const Je=`${Pe.getFullYear()}-${String(Pe.getMonth()+1).padStart(2,"0")}-${String(Pe.getDate()).padStart(2,"0")}`;k=k.gte("data",Je)}break;default:k=k.order("data",{ascending:!1}).order("horario",{ascending:!1});break}y&&(k=k.gte("data",y)),b&&(k=k.lte("data",b)),n&&j!=="todos"&&(k=k.eq("assigned_user_id",j));const{data:he,error:je}=await k;if(je)throw je;const Ae=(he||[]).map(Pe=>({...Pe,clients:Array.isArray(Pe.clients)?Pe.clients[0]:Pe.clients,services:Array.isArray(Pe.services)?Pe.services[0]:Pe.services,leads:Array.isArray(Pe.leads)?Pe.leads[0]:Pe.leads})),Ue=new Set;if(Ae.forEach(Pe=>{Pe.service_id&&Pe.tipo_encontro==="visita_servico"&&Ue.add(Pe.service_id)}),Ue.size>0){const{data:Pe,error:Je}=await W.from("visits").select("id, service_id, data, horario, status").in("service_id",Array.from(Ue)).eq("tipo_encontro","visita_servico").in("status",["agendada","realizada"]);if(!Je&&Pe){const Ge=new Map;Pe.forEach(mt=>{Ge.has(mt.service_id)||Ge.set(mt.service_id,[]),Ge.get(mt.service_id).push(mt)}),Ge.forEach(mt=>{const Oe=mt.sort((be,Te)=>be.data===Te.data?be.horario.localeCompare(Te.horario):be.data.localeCompare(Te.data)),F=Oe[Oe.length-1].id,oe=Ae.find(be=>be.id===F);oe&&(oe.isLastVisit=!0)})}}l(Ae)}catch(k){console.error("Erro ao buscar visitas:",k)}finally{u(!1)}},U=async()=>{try{const{data:k,error:H}=await W.from("user_profiles").select("user_id, full_name, email, avatar_url").eq("is_active",!0).order("full_name",{ascending:!0});if(H)throw H;const ne=(k||[]).map(me=>({id:me.user_id,full_name:me.full_name,email:me.email,avatar_url:me.avatar_url}));S(ne);const Y={};ne.forEach(me=>{Y[me.id]={full_name:me.full_name,avatar_url:me.avatar_url}}),O(Y)}catch(k){console.error("Erro ao carregar usurios:",k),X.error("Erro ao carregar lista de parceiros")}},E=async(k,H)=>{if(d===k){X.error("Aguarde, a visita est sendo atualizada...");return}f(k);try{const{error:ne}=await W.from("visits").update({status:H}).eq("id",k);if(ne)throw ne;const Y={agendada:"agendada",realizada:"marcada como realizada",cancelada:"cancelada"};X.success(`Visita ${Y[H]} com sucesso!`),await $()}catch(ne){console.error("Erro ao atualizar status da visita:",ne),X.error(`Erro ao atualizar status da visita: ${ne.message}`)}finally{f(null)}},Q=(k,H,ne,Y,me)=>{if(T(k),J(H),Y>=me-2)K("top");else{const je=ne.currentTarget.getBoundingClientRect(),Ae=window.innerHeight,Ue=200;je.bottom+Ue>Ae?K("top"):K("bottom")}},J=async k=>{if(!D[k])try{const{data:H,error:ne}=await W.from("clients").select("endereco_completo, telefone, notas").eq("id",k).single();if(ne)throw ne;const{data:Y,error:me}=await W.from("pets").select("nome, caracteristica").eq("client_id",k).order("nome",{ascending:!0});if(me)throw me;q(ee=>({...ee,[k]:{endereco_completo:H.endereco_completo,telefone:H.telefone,notas:H.notas,pets:Y||[]}}))}catch(H){console.error("Erro ao buscar informaes do cliente:",H)}},de=k=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(k),ae=k=>{const[H,ne,Y]=k.split("-").map(Number),me=new Date(H,ne-1,Y),ee=new Date,he=new Date(ee.getFullYear(),ee.getMonth(),ee.getDate()),je=new Date(he);return je.setDate(je.getDate()+1),me.getTime()===he.getTime()?"Hoje":me.getTime()===je.getTime()?"Amanh":me.toLocaleDateString("pt-BR",{weekday:"short",day:"2-digit",month:"2-digit"})},pe=()=>h==="realizadas"||h==="todas"?[...o].sort((k,H)=>k.data===H.data?H.horario.localeCompare(k.horario):H.data.localeCompare(k.data)):o;return c?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(In,{size:"lg",variant:"paws",text:"Carregando visitas..."})}):s.jsxs("div",{children:[s.jsx("div",{className:"sm:flex sm:items-center",children:s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Visitas"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Gerencie todas as visitas agendadas e realizadas."}),s.jsx("div",{className:"divider-fefelina"})]})}),s.jsxs("div",{className:"mt-6 mb-6",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("button",{onClick:()=>p("hoje"),className:`px-4 py-2 text-sm font-medium rounded-md ${h==="hoje"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Hoje"}),s.jsx("button",{onClick:()=>p("proximas"),className:`px-4 py-2 text-sm font-medium rounded-md ${h==="proximas"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Prximas"}),s.jsx("button",{onClick:()=>p("realizadas"),className:`px-4 py-2 text-sm font-medium rounded-md ${h==="realizadas"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Realizadas"}),s.jsx("button",{onClick:()=>p("todas"),className:`px-4 py-2 text-sm font-medium rounded-md ${h==="todas"?"bg-primary-600 text-white":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50"}`,children:"Todas"})]}),n&&_.length>1&&s.jsxs("div",{className:"mt-4",children:[s.jsx("label",{htmlFor:"filter-by-user",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filtrar por parceiro"}),s.jsxs("select",{id:"filter-by-user",value:j,onChange:k=>N(k.target.value),className:"block w-full md:w-64 px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"todos",children:"Todos os parceiros"}),a&&s.jsxs("option",{value:a.user_id,children:[a.full_name," (Voc)"]}),_.filter(k=>k.id!==(a==null?void 0:a.user_id)).map(k=>s.jsx("option",{value:k.id,children:k.full_name},k.id))]})]}),(h==="realizadas"||h==="todas")&&s.jsxs("div",{className:"mt-4 flex flex-wrap gap-4 items-end",children:[s.jsxs("div",{children:[s.jsx("label",{htmlFor:"filter-start-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data inicial"}),s.jsx("input",{type:"date",id:"filter-start-date",value:y,onChange:k=>{const H=ZS(k.target.value);!H||pf(H)?v(H):X.error("Data invlida. Use o formato AAAA-MM-DD com ano entre 1900 e 2100.")},onBlur:k=>{k.target.value&&!pf(k.target.value)&&(X.error("Data invlida. Corrigindo automaticamente."),v(""))},min:"1900-01-01",max:"2100-12-31",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:ring-primary-500 focus:border-primary-500"})]}),s.jsxs("div",{children:[s.jsx("label",{htmlFor:"filter-end-date",className:"block text-sm font-medium text-gray-700 mb-1",children:"Data final"}),s.jsx("input",{type:"date",id:"filter-end-date",value:b,onChange:k=>{const H=ZS(k.target.value);!H||pf(H)?w(H):X.error("Data invlida. Use o formato AAAA-MM-DD com ano entre 1900 e 2100.")},onBlur:k=>{k.target.value&&!pf(k.target.value)&&(X.error("Data invlida. Corrigindo automaticamente."),w(""))},min:"1900-01-01",max:"2100-12-31",className:"block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:ring-primary-500 focus:border-primary-500"})]}),(y||b)&&s.jsx("button",{onClick:()=>{v(""),w("")},className:"px-3 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 border border-gray-300 rounded-md",children:"Limpar filtros"}),h==="realizadas"&&!y&&!b&&s.jsx("div",{className:"text-sm text-gray-500 bg-yellow-50 border border-yellow-200 rounded-md px-3 py-2",children:"Mostrando apenas os ltimos 3 meses"})]})]}),o.length===0?s.jsx("div",{className:"mt-8 card-fefelina",children:s.jsxs("div",{className:"empty-state-fefelina",children:[s.jsx("div",{className:"mx-auto h-16 w-16 text-primary-400 mb-4",children:s.jsx("svg",{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:h==="hoje"&&g?"Nenhuma visita agendada para hoje":h==="hoje"&&!g?"Voc no tem nenhuma visita agendada":h==="realizadas"?!y&&!b?"Nenhuma visita realizada nos ltimos 3 meses":"Nenhuma visita realizada no perodo selecionado":"Nenhuma visita agendada"}),s.jsx("p",{className:"text-gray-500 mb-6",children:h==="hoje"&&g?"Mas nos prximos dias voc tem agendamentos.":h==="hoje"&&!g?"Agendar uma visita para comear.":h==="realizadas"?!y&&!b?"Use os filtros de data para buscar em outros perodos.":"Tente ajustar o perodo de busca.":"Agendar uma visita para comear."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"block md:hidden space-y-4",children:pe().map(k=>{var H,ne,Y,me,ee;return s.jsxs("div",{className:`border rounded-lg p-4 shadow-sm ${k.isLastVisit?"border-l-4 border-l-orange-400 bg-orange-50/30":k.tipo_encontro==="task"?"bg-blue-50 border-blue-200":k.tipo_encontro==="pre_encontro"?"bg-purple-50 border-purple-200":"bg-white"}`,children:[s.jsxs("div",{className:"flex justify-between items-center mb-2",children:[s.jsxs("div",{children:[s.jsxs("div",{className:"font-semibold text-primary-700 text-base flex items-center gap-1.5",children:[ae(k.data)," ",s.jsx("span",{className:"text-xs text-gray-500",children:k.horario}),k.isLastVisit&&s.jsx("span",{className:"text-sm",title:"ltima visita do servio",children:""})]}),k.tipo_encontro==="task"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm font-medium text-blue-700 flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Task: ",k.titulo||"Sem ttulo"]}),s.jsx("div",{className:"text-xs text-blue-600 mt-0.5",children:(H=k.services)!=null&&H.nome_servico?`Servio: ${k.services.nome_servico}`:"Sem servio vinculado"})]}):k.tipo_encontro==="pre_encontro"?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"text-sm font-medium text-purple-700 flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Lead: ",((ne=k.leads)==null?void 0:ne.nome)||"Sem nome"]}),s.jsx("div",{className:"text-xs text-purple-600 mt-0.5",children:"Pr-Encontro"})]}):s.jsxs(s.Fragment,{children:[k.client_id?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"text-sm text-gray-700 font-medium",children:(Y=k.clients)==null?void 0:Y.nome}),s.jsx("button",{onClick:()=>{L(k.client_id),J(k.client_id),P(!0)},className:"text-primary-600 hover:text-primary-800 p-1",title:"Ver informaes do cliente",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}):s.jsx("div",{className:"text-sm text-gray-700",children:(me=k.clients)==null?void 0:me.nome}),((ee=k.services)==null?void 0:ee.nome_servico)&&s.jsx("div",{className:"text-xs text-gray-500",children:k.services.nome_servico})]})]}),s.jsxs("div",{className:"flex flex-col gap-1.5 items-end",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.tipo_visita==="inteira"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:k.tipo_visita==="inteira"?"Inteira":"Meia"}),k.isLastVisit&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:" ltima"})]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-2",children:[s.jsx("span",{className:"text-sm font-medium text-gray-900",children:t("valor",de(k.valor))}),k.desconto_plataforma>0&&s.jsxs("span",{className:"text-xs text-gray-500",children:["Desc: ",t("desconto_plataforma",`${k.desconto_plataforma}%`)]})]}),s.jsxs("div",{className:"flex flex-wrap gap-2 items-center mb-2",children:[s.jsx("span",{className:"text-xs font-medium",children:"Status:"}),s.jsxs("select",{value:k.status,onChange:he=>E(k.id,he.target.value),disabled:d===k.id||!i,className:"text-xs border-0 bg-gray-100 focus:ring-1 focus:ring-primary-500 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"agendada",children:"Agendada"}),s.jsx("option",{value:"realizada",children:"Realizada"}),s.jsx("option",{value:"cancelada",children:"Cancelada"})]})]}),k.assigned_user_id&&C[k.assigned_user_id]&&s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Responsvel:"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ni,{avatarId:C[k.assigned_user_id].avatar_url,name:C[k.assigned_user_id].full_name,size:"xs",className:"border border-gray-200"}),s.jsx("span",{className:"text-xs text-gray-600",children:C[k.assigned_user_id].full_name})]})]}),s.jsx("div",{className:"flex gap-2 mt-2",children:k.status==="agendada"&&s.jsx("button",{onClick:()=>E(k.id,"realizada"),disabled:d===k.id,className:`text-xs font-medium px-2 py-1 rounded bg-green-100 text-green-700 ${d===k.id?"opacity-50 cursor-not-allowed":"hover:bg-green-200"}`,children:d===k.id?"Atualizando...":"Marcar Realizada"})})]},k.id)})}),s.jsx("div",{className:"hidden md:block card-fefelina",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data/Horrio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente/Servio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Responsvel"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:pe().map((k,H,ne)=>{var Y,me,ee,he,je;return s.jsxs("tr",{className:`${k.isLastVisit?"border-l-4 border-l-orange-400 bg-orange-50/20":k.tipo_encontro==="task"?"bg-blue-50":k.tipo_encontro==="pre_encontro"?"bg-purple-50":"hover:bg-gray-50"}`,children:[s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[s.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-1.5",children:[ae(k.data),k.isLastVisit&&s.jsx("span",{className:"text-base",title:"ltima visita do servio",children:""})]}),s.jsx("div",{className:"text-sm text-gray-500",children:k.horario})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:k.tipo_encontro==="task"?s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-blue-700 flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),"Task: ",k.titulo||"Sem ttulo"]}),s.jsxs("div",{className:"text-xs text-blue-600 mt-0.5 flex items-center gap-1",children:[s.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-blue-200 text-blue-800",children:"Task"}),((Y=k.services)==null?void 0:Y.nome_servico)&&s.jsxs("span",{className:"text-gray-600",children:[" ",k.services.nome_servico]})]})]}):k.tipo_encontro==="pre_encontro"?s.jsxs("div",{children:[s.jsxs("div",{className:"text-sm font-medium text-purple-700 flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Lead: ",((me=k.leads)==null?void 0:me.nome)||"Sem nome"]}),s.jsx("div",{className:"text-xs text-purple-600 mt-0.5 flex items-center gap-1",children:s.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs font-medium bg-purple-200 text-purple-800",children:"Pr-Encontro"})})]}):s.jsxs("div",{children:[k.client_id?s.jsxs("div",{className:"relative inline-block group",children:[s.jsx("button",{onClick:()=>e(`/clients/${k.client_id}`),onMouseEnter:Ae=>{k.client_id&&Q(k.id,k.client_id,Ae,H,ne.length)},onMouseLeave:()=>T(null),className:"text-sm font-medium text-primary-600 hover:text-primary-800 hover:underline text-left",children:(ee=k.clients)==null?void 0:ee.nome}),A===k.id&&k.client_id&&D[k.client_id]&&s.jsx("div",{className:`absolute left-0 z-50 w-72 bg-white rounded-md shadow-lg border border-gray-200 p-2.5 text-left pointer-events-none ${re==="bottom"?"top-full mt-1":"bottom-full mb-1"}`,children:s.jsxs("div",{className:"space-y-1.5 text-xs",children:[D[k.client_id].endereco_completo&&s.jsxs("div",{className:"flex items-start gap-1.5",children:[s.jsxs("svg",{className:"w-3 h-3 text-gray-400 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsx("p",{className:"text-gray-600 flex-1 leading-tight line-clamp-2",children:D[k.client_id].endereco_completo})]}),D[k.client_id].telefone&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-3 h-3 text-gray-400 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsx("p",{className:"text-gray-600",children:D[k.client_id].telefone})]}),D[k.client_id].pets.length>0&&s.jsxs("div",{className:"pt-1.5 border-t border-gray-100",children:[s.jsxs("div",{className:"flex items-center gap-1 mb-1",children:[s.jsxs("svg",{className:"w-3 h-3 text-primary-500",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M8.5 5C7.67157 5 7 5.67157 7 6.5C7 7.32843 7.67157 8 8.5 8C9.32843 8 10 7.32843 10 6.5C10 5.67157 9.32843 5 8.5 5Z"}),s.jsx("path",{d:"M15.5 5C14.6716 5 14 5.67157 14 6.5C14 7.32843 14.6716 8 15.5 8C16.3284 8 17 7.32843 17 6.5C17 5.67157 16.3284 5 15.5 5Z"}),s.jsx("path",{d:"M5 9.5C5 8.67157 5.67157 8 6.5 8C7.32843 8 8 8.67157 8 9.5C8 10.3284 7.32843 11 6.5 11C5.67157 11 5 10.3284 5 9.5Z"}),s.jsx("path",{d:"M17.5 8C16.6716 8 16 8.67157 16 9.5C16 10.3284 16.6716 11 17.5 11C18.3284 11 19 10.3284 19 9.5C19 8.67157 18.3284 8 17.5 8Z"}),s.jsx("path",{d:"M12 10C9.79086 10 8 11.7909 8 14C8 15.8638 9.27477 17.4299 11 17.874V19C11 19.5523 11.4477 20 12 20C12.5523 20 13 19.5523 13 19V17.874C14.7252 17.4299 16 15.8638 16 14C16 11.7909 14.2091 10 12 10Z"})]}),s.jsx("span",{className:"font-medium text-gray-700",children:"Pets:"})]}),D[k.client_id].pets.map((Ae,Ue)=>s.jsxs("div",{className:"text-gray-600 ml-4 leading-tight",children:[" ",s.jsx("span",{className:"font-medium",children:Ae.nome})," ",s.jsx("span",{className:"text-gray-400 text-[10px]",children:""})," ",s.jsx("span",{className:"text-[10px]",children:Ae.caracteristica})]},Ue))]})]})})]}):s.jsx("div",{className:"text-sm font-medium text-gray-900",children:(he=k.clients)==null?void 0:he.nome}),((je=k.services)==null?void 0:je.nome_servico)&&s.jsx("div",{className:"text-sm text-gray-500",children:k.services.nome_servico})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex flex-col gap-1",children:[s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${k.tipo_visita==="inteira"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"}`,children:k.tipo_visita==="inteira"?"Inteira":"Meia"}),k.isLastVisit&&s.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-100 text-orange-700",children:" ltima"})]})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[t("valor",de(k.valor)),k.desconto_plataforma>0&&s.jsxs("div",{className:"text-xs text-gray-500",children:["Desc: ",t("desconto_plataforma",`${k.desconto_plataforma}%`)]})]}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("select",{value:k.status,onChange:Ae=>E(k.id,Ae.target.value),disabled:d===k.id||!i,className:"text-xs border-0 bg-transparent focus:ring-1 focus:ring-primary-500 rounded disabled:opacity-50 disabled:cursor-not-allowed",children:[s.jsx("option",{value:"agendada",children:"Agendada"}),s.jsx("option",{value:"realizada",children:"Realizada"}),s.jsx("option",{value:"cancelada",children:"Cancelada"})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:k.assigned_user_id&&C[k.assigned_user_id]?s.jsxs("div",{className:"group relative inline-flex items-center justify-center",children:[s.jsx(Ni,{avatarId:C[k.assigned_user_id].avatar_url,name:C[k.assigned_user_id].full_name,size:"sm",className:"border-2 border-gray-200"}),s.jsxs("div",{className:"absolute left-0 bottom-full mb-2 hidden group-hover:block z-10 whitespace-nowrap",children:[s.jsx("div",{className:"bg-gray-900 text-white text-xs rounded py-1 px-2",children:C[k.assigned_user_id].full_name}),s.jsx("div",{className:"absolute left-4 top-full w-0 h-0 border-l-4 border-r-4 border-t-4 border-transparent border-t-gray-900"})]})]}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:s.jsx("div",{className:"flex space-x-2",children:k.status==="agendada"&&s.jsx("button",{onClick:()=>E(k.id,"realizada"),disabled:d===k.id,className:`text-xs font-medium ${d===k.id?"text-gray-400 cursor-not-allowed":"text-green-600 hover:text-green-900"}`,children:d===k.id?"Atualizando...":"Marcar Realizada"})})})]},k.id)})})]})})})]}),z&&M&&D[M]&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-end md:hidden",children:s.jsxs("div",{className:"bg-white w-full rounded-t-2xl shadow-xl max-h-[80vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-4 py-3 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Informaes do Cliente"}),s.jsx("button",{onClick:()=>{P(!1),L(null)},className:"text-gray-400 hover:text-gray-600",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"p-4 space-y-4",children:[D[M].endereco_completo&&s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[s.jsxs("svg",{className:"w-5 h-5 text-primary-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-700 uppercase mb-1",children:"Endereo"}),s.jsx("p",{className:"text-sm text-gray-900 leading-relaxed",children:D[M].endereco_completo})]})]})}),D[M].telefone&&s.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-primary-600 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-xs font-semibold text-gray-700 uppercase mb-1",children:"Telefone"}),s.jsx("a",{href:`tel:${D[M].telefone}`,className:"text-sm text-primary-600 font-medium hover:underline",children:D[M].telefone})]})]})}),D[M].pets.length>0&&s.jsxs("div",{className:"bg-primary-50 rounded-lg p-3",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[s.jsxs("svg",{className:"w-5 h-5 text-primary-600",fill:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{d:"M8.5 5C7.67157 5 7 5.67157 7 6.5C7 7.32843 7.67157 8 8.5 8C9.32843 8 10 7.32843 10 6.5C10 5.67157 9.32843 5 8.5 5Z"}),s.jsx("path",{d:"M15.5 5C14.6716 5 14 5.67157 14 6.5C14 7.32843 14.6716 8 15.5 8C16.3284 8 17 7.32843 17 6.5C17 5.67157 16.3284 5 15.5 5Z"}),s.jsx("path",{d:"M5 9.5C5 8.67157 5.67157 8 6.5 8C7.32843 8 8 8.67157 8 9.5C8 10.3284 7.32843 11 6.5 11C5.67157 11 5 10.3284 5 9.5Z"}),s.jsx("path",{d:"M17.5 8C16.6716 8 16 8.67157 16 9.5C16 10.3284 16.6716 11 17.5 11C18.3284 11 19 10.3284 19 9.5C19 8.67157 18.3284 8 17.5 8Z"}),s.jsx("path",{d:"M12 10C9.79086 10 8 11.7909 8 14C8 15.8638 9.27477 17.4299 11 17.874V19C11 19.5523 11.4477 20 12 20C12.5523 20 13 19.5523 13 19V17.874C14.7252 17.4299 16 15.8638 16 14C16 11.7909 14.2091 10 12 10Z"})]}),s.jsx("h4",{className:"text-xs font-semibold text-gray-700 uppercase",children:"Pets"})]}),s.jsx("div",{className:"space-y-2",children:D[M].pets.map((k,H)=>s.jsxs("div",{className:"bg-white rounded-md p-2 border border-primary-100",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:k.nome}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:k.caracteristica})]},H))})]}),D[M].notas&&s.jsx("div",{className:"bg-yellow-50 rounded-lg p-3 border border-yellow-200",children:s.jsxs("div",{className:"flex items-start gap-2 mb-1",children:[s.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h4",{className:"text-xs font-semibold text-yellow-900 uppercase mb-1",children:"Notas Importantes"}),s.jsx("p",{className:"text-sm text-gray-900 leading-relaxed whitespace-pre-wrap",children:D[M].notas})]})]})}),s.jsx("button",{onClick:()=>{e(`/clients/${M}`),P(!1),L(null)},className:"w-full bg-primary-600 text-white py-3 rounded-lg font-medium hover:bg-primary-700 transition-colors",children:"Ver Perfil Completo do Cliente"})]})]})})]})}function Wie({initialDate:e,initialTime:t,onClose:r,onSuccess:n}){var T,D,q,re,K;const{userProfile:a}=nn(),[i,o]=m.useState(!1),[l,c]=m.useState([]),[u,d]=m.useState([]),[f,h]=m.useState([]),[p,g]=m.useState(!0),[x,y]=m.useState(!1),[v,b]=m.useState(""),w=m.useRef(null),j=m.useRef(null),[N,_]=m.useState("lead"),[S,C]=m.useState({leadId:"",clientId:"",data:e||new Date().toISOString().split("T")[0],horario:t||"10:00",assigned_user_id:(a==null?void 0:a.user_id)||"",observacoes:""});m.useEffect(()=>{O()},[]),m.useEffect(()=>{const z=P=>{w.current&&!w.current.contains(P.target)&&y(!1)};return x&&document.addEventListener("mousedown",z),()=>{document.removeEventListener("mousedown",z)}},[x]),m.useEffect(()=>{C(z=>({...z,leadId:"",clientId:""})),b(""),y(!1)},[N]);const O=async()=>{var z;try{g(!0);const[P,M,L]=await Promise.all([W.from("leads").select("*").not("status","in",'("fechado_ganho","fechado_perdido")').order("nome"),W.from("clients").select("id, nome, telefone").order("nome"),W.from("user_profiles").select("user_id, full_name, email, avatar_url").eq("is_active",!0).order("full_name")]);if(P.error)throw P.error;if(M.error)throw M.error;if(L.error)throw L.error;console.log("Leads com status pre_encontro:",P.data),console.log("Total de leads encontradas:",((z=P.data)==null?void 0:z.length)||0),c(P.data||[]),d(M.data||[]),h((L.data||[]).map(G=>({id:G.user_id,full_name:G.full_name,email:G.email,avatar_url:G.avatar_url})))}catch(P){console.error("Erro ao buscar dados:",P),X.error("Erro ao carregar dados")}finally{g(!1)}},A=async z=>{if(z.preventDefault(),N==="lead"&&!S.leadId){X.error("Selecione um lead");return}if(N==="cliente"&&!S.clientId){X.error("Selecione um cliente");return}if(!S.data||!S.horario){X.error("Data e horrio so obrigatrios");return}o(!0);try{const P={data:S.data,horario:S.horario,duracao_minutos:30,tipo_encontro:"pre_encontro",tipo_visita:"meia",valor:0,desconto_plataforma:0,status:"agendada",assigned_user_id:S.assigned_user_id||null,observacoes:S.observacoes||null};N==="lead"?P.lead_id=S.leadId:P.client_id=S.clientId;const{error:M}=await W.from("visits").insert(P);if(M)throw M;X.success("Pr-encontro agendado com sucesso!"),r(),setTimeout(()=>{n()},300)}catch(P){console.error("Erro ao agendar pr-encontro:",P),X.error("Erro ao agendar pr-encontro: "+P.message)}finally{o(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Agendar Pr-Encontro"}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:"A partir da agenda"})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(mn,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:A,className:"p-6 space-y-4 overflow-y-auto flex-1",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2 block",children:"Tipo de Pr-Encontro"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{type:"button",onClick:()=>_("lead"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${N==="lead"?"bg-cyan-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Lead"}),s.jsx("button",{type:"button",onClick:()=>_("cliente"),className:`flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors ${N==="cliente"?"bg-cyan-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cliente"})]}),s.jsx("p",{className:"text-xs text-gray-500 mt-2",children:N==="lead"?"Pr-encontro para conhecer um potencial novo cliente":"Pr-encontro para conhecer um cliente j cadastrado"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(Ru,{className:"w-3.5 h-3.5"}),N==="lead"?"Selecionar Lead":"Selecionar Cliente"]}),p?s.jsx("div",{className:"text-center py-4 text-sm text-gray-500",children:"Carregando dados..."}):N==="lead"?l.length===0?s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 text-xs text-yellow-800",children:"Nenhum lead disponvel. Crie um lead primeiro na pgina de Leads."}):s.jsxs("div",{className:"relative",ref:w,children:[s.jsx("input",{ref:j,type:"text",value:v,onChange:z=>b(z.target.value),onFocus:()=>y(!0),placeholder:"Digite para buscar ou selecione...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent bg-white"}),S.leadId&&!x&&s.jsx("div",{className:"mt-1 px-3 py-2 bg-cyan-50 border border-cyan-200 rounded-md text-sm",children:s.jsx("span",{className:"font-medium text-cyan-900",children:(T=l.find(z=>z.id===S.leadId))==null?void 0:T.nome})}),x&&s.jsxs("div",{className:"absolute z-[100] w-full mt-1 bg-white border-2 border-cyan-300 rounded-md shadow-xl max-h-60 overflow-auto",children:[l.filter(z=>{var P;return z.nome.toLowerCase().includes(v.toLowerCase())||((P=z.endereco)==null?void 0:P.toLowerCase().includes(v.toLowerCase()))}).map(z=>s.jsxs("button",{type:"button",onClick:()=>{C({...S,leadId:z.id}),b(""),y(!1)},className:`w-full px-3 py-2 text-left hover:bg-cyan-50 transition-colors flex flex-col gap-0.5 border-b border-gray-100 last:border-b-0 first:rounded-t-md last:rounded-b-md ${S.leadId===z.id?"bg-cyan-50 text-cyan-900":"text-gray-900"}`,children:[s.jsx("span",{className:"text-sm font-medium",children:z.nome}),s.jsx("span",{className:"text-xs text-gray-500",children:z.endereco||"Sem endereo"})]},z.id)),l.filter(z=>{var P;return z.nome.toLowerCase().includes(v.toLowerCase())||((P=z.endereco)==null?void 0:P.toLowerCase().includes(v.toLowerCase()))}).length===0&&s.jsx("div",{className:"px-3 py-4 text-center text-sm text-gray-500",children:"Nenhum lead encontrado"})]})]}):u.length===0?s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3 text-xs text-yellow-800",children:"Nenhum cliente disponvel. Crie um cliente primeiro na pgina de Clientes."}):s.jsxs("div",{className:"relative",ref:w,children:[s.jsx("input",{ref:j,type:"text",value:v,onChange:z=>b(z.target.value),onFocus:()=>y(!0),placeholder:"Digite para buscar ou selecione...",className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-cyan-500 focus:border-transparent bg-white"}),S.clientId&&!x&&s.jsx("div",{className:"mt-1 px-3 py-2 bg-cyan-50 border border-cyan-200 rounded-md text-sm",children:s.jsx("span",{className:"font-medium text-cyan-900",children:(D=u.find(z=>z.id===S.clientId))==null?void 0:D.nome})}),x&&s.jsxs("div",{className:"absolute z-[100] w-full mt-1 bg-white border-2 border-cyan-300 rounded-md shadow-xl max-h-60 overflow-auto",children:[u.filter(z=>{var P;return z.nome.toLowerCase().includes(v.toLowerCase())||((P=z.telefone)==null?void 0:P.toLowerCase().includes(v.toLowerCase()))}).map(z=>s.jsxs("button",{type:"button",onClick:()=>{C({...S,clientId:z.id}),b(""),y(!1)},className:`w-full px-3 py-2 text-left hover:bg-cyan-50 transition-colors flex flex-col gap-0.5 border-b border-gray-100 last:border-b-0 first:rounded-t-md last:rounded-b-md ${S.clientId===z.id?"bg-cyan-50 text-cyan-900":"text-gray-900"}`,children:[s.jsx("span",{className:"text-sm font-medium",children:z.nome}),s.jsx("span",{className:"text-xs text-gray-500",children:z.telefone||"Sem telefone"})]},z.id)),u.filter(z=>{var P;return z.nome.toLowerCase().includes(v.toLowerCase())||((P=z.telefone)==null?void 0:P.toLowerCase().includes(v.toLowerCase()))}).length===0&&s.jsx("div",{className:"px-3 py-4 text-center text-sm text-gray-500",children:"Nenhum cliente encontrado"})]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(Do,{className:"w-3.5 h-3.5"}),"Data do Encontro"]}),s.jsx("input",{type:"date",value:S.data,onChange:z=>C({...S,data:z.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(zl,{className:"w-3.5 h-3.5"}),"Horrio de Incio"]}),s.jsx("input",{type:"time",value:S.horario,onChange:z=>C({...S,horario:z.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Durao: 30 minutos"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(No,{className:"w-3.5 h-3.5"}),"Responsvel pelo Pr-Encontro"]}),s.jsxs("select",{value:S.assigned_user_id,onChange:z=>C({...S,assigned_user_id:z.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Selecione um responsvel"}),f.map(z=>s.jsx("option",{value:z.id,children:z.full_name},z.id))]}),S.assigned_user_id&&f.find(z=>z.id===S.assigned_user_id)&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-md",children:[s.jsx(Ni,{avatarId:(q=f.find(z=>z.id===S.assigned_user_id))==null?void 0:q.avatar_url,name:((re=f.find(z=>z.id===S.assigned_user_id))==null?void 0:re.full_name)||"",size:"sm"}),s.jsx("span",{className:"text-sm text-gray-700",children:(K=f.find(z=>z.id===S.assigned_user_id))==null?void 0:K.full_name})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-1.5 block",children:"Observaes"}),s.jsx("textarea",{value:S.observacoes,onChange:z=>C({...S,observacoes:z.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:3,placeholder:"Ex: Primeiro contato, conhecer os gatinhos, ver a casa..."})]}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Dica:"})," Este pr-encontro aparecer na agenda com cor azul claro para fcil identificao."]})}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 text-sm font-medium rounded-md hover:bg-gray-200 transition-colors",disabled:i,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 px-3 py-1.5 bg-primary-500 text-white text-sm font-medium rounded-md hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:i||!S.leadId&&!S.clientId,children:i?"Agendando...":"Agendar"})]})]})]})})}function Vie({visit:e,onClose:t}){var c,u,d,f,h,p;const r=()=>{const[g,x]=e.horario.split(":").map(Number),y=e.duracao_minutos||30,v=g*60+x+y,b=Math.floor(v/60),w=v%60;return`${b.toString().padStart(2,"0")}:${w.toString().padStart(2,"0")}`},n=!!e.lead_id&&!!e.leads,a=!!e.client_id&&!!e.clients,i=n?(c=e.leads)==null?void 0:c.nome:(u=e.clients)==null?void 0:u.nome,o=n?(d=e.leads)==null?void 0:d.telefone:(f=e.clients)==null?void 0:f.telefone,l=n?(h=e.leads)==null?void 0:h.endereco:(p=e.clients)==null?void 0:p.endereco_completo;return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-hidden flex flex-col",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("h2",{className:"text-base font-semibold text-gray-900 flex items-center gap-2",children:["Pr-Encontro ",a?"com Cliente":"com Lead"]}),s.jsxs("p",{className:"text-xs text-gray-600 mt-0.5 flex items-center gap-1.5",children:[s.jsx(Do,{className:"w-3.5 h-3.5"}),ze(ii(e.data),"dd 'de' MMMM 'de' yyyy",{locale:Rt})]})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(mn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto px-6 py-4 space-y-4",children:[s.jsxs("div",{className:"bg-primary-50 border border-primary-200 rounded-xl p-4",children:[s.jsxs("h3",{className:"text-sm font-semibold text-primary-900 uppercase mb-3 flex items-center gap-2",children:[s.jsx(Ru,{className:"w-4 h-4"}),a?"Cliente":"Lead"]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[n?s.jsxs(s.Fragment,{children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-primary-700 uppercase block mb-1",children:"Nome"}),s.jsx("p",{className:"text-base font-semibold text-primary-900",children:i||"No identificado"})]}),l&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-primary-700 uppercase block mb-1",children:"Endereo"}),s.jsx("p",{className:"text-sm font-medium text-primary-900",children:l})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-xs font-medium text-primary-700 uppercase block mb-1",children:"Nome"}),s.jsx("p",{className:"text-base font-semibold text-primary-900",children:i||"No identificado"})]}),o&&s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-medium text-primary-700 uppercase block mb-1",children:[s.jsx(Lu,{className:"w-3 h-3 inline mr-1"}),"Telefone"]}),s.jsx("a",{href:`https://wa.me/${o.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"text-sm font-medium text-primary-600 hover:text-primary-700 hover:underline",children:o})]})]}),a&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-medium text-primary-700 uppercase block mb-1",children:"Tipo"}),s.jsx("span",{className:"inline-flex px-2 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Cliente Cadastrado"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase flex items-center gap-1 mb-2",children:[s.jsx(zl,{className:"w-3 h-3"}),"Horrio"]}),s.jsxs("p",{className:"text-base font-medium text-gray-900",children:[e.horario.substring(0,5)," - ",r()]}),s.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[" Durao: ",e.duracao_minutos||30," minutos"]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase mb-2 block",children:"Status"}),s.jsx("span",{className:`inline-flex px-3 py-1 rounded-full text-xs font-semibold ${e.status==="agendada"?"bg-blue-100 text-blue-800":e.status==="realizada"?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.status==="agendada"?"Agendado":e.status==="realizada"?"Realizado":"Cancelado"})]})]}),e.observacoes&&s.jsxs("div",{className:"border-t border-gray-200 pt-3",children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase mb-2 flex items-center gap-1",children:[s.jsx(pie,{className:"w-3 h-3"}),"Observaes"]}),s.jsx("p",{className:"text-sm text-gray-700 whitespace-pre-wrap bg-gray-50 rounded-lg p-3",children:e.observacoes})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:s.jsxs("p",{className:"text-xs text-blue-800",children:[s.jsx("span",{className:"font-semibold",children:" Dica:"})," ",a?"Este  um pr-encontro com um cliente que j fechou servio. Use este tempo para conhecer o cliente e os gatinhos dele pessoalmente.":"Este  um pr-encontro com um lead. Use este tempo para conhecer o cliente em potencial e apresentar seus servios."]})})]}),s.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex-shrink-0",children:s.jsx("button",{onClick:t,className:"w-full px-4 py-3 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors font-medium",children:"Fechar"})})]})})}function JS({isOpen:e,onClose:t,onSuccess:r,initialDate:n="",initialTime:a="09:00",editingTask:i}){const[o,l]=m.useState(!1),[c,u]=m.useState([]),[d,f]=m.useState(""),[h,p]=m.useState(!1),[g,x]=m.useState({titulo:"",service_id:"",data:n,horario:a,observacoes:"",responsavel:null});m.useEffect(()=>{e&&y()},[e]),m.useEffect(()=>{var j;if(e&&c.length>0)if(i){x({titulo:i.titulo||"",service_id:i.service_id||"",data:i.data||n,horario:((j=i.horario)==null?void 0:j.substring(0,5))||a,observacoes:i.observacoes||"",responsavel:i.responsavel||null});const N=c.find(_=>_.id===i.service_id);N&&f(`${N.clients.nome} - ${N.nome_servico||"Sem nome"}`)}else!g.titulo&&!g.service_id&&(x({titulo:"",service_id:"",data:n,horario:a,observacoes:"",responsavel:null}),f(""))},[e,c,i]),m.useEffect(()=>{const j=()=>p(!1);if(h)return document.addEventListener("click",j),()=>document.removeEventListener("click",j)},[h]);const y=async()=>{try{const j=new Date().toISOString().split("T")[0],{data:N,error:_}=await W.from("services").select(`
          id,
          nome_servico,
          data_fim,
          clients!inner (
            nome
          )
        `).gte("data_fim",j).order("data_inicio",{ascending:!1});if(_)throw _;const S=(N||[]).map(C=>{var O,A;return{id:C.id,nome_servico:C.nome_servico,clients:{nome:Array.isArray(C.clients)?(O=C.clients[0])==null?void 0:O.nome:(A=C.clients)==null?void 0:A.nome}}});u(S)}catch(j){console.error("Erro ao buscar servios:",j),Yt.error("Erro ao carregar servios")}},v=async j=>{if(j.preventDefault(),!g.titulo.trim()){Yt.error("Digite um ttulo para a task");return}if(!g.service_id){Yt.error("Selecione um servio");return}if(!g.data){Yt.error("Selecione uma data");return}l(!0);try{const{data:N,error:_}=await W.from("services").select("client_id").eq("id",g.service_id).single();if(_)throw _;const S={titulo:g.titulo.trim(),service_id:g.service_id,client_id:N.client_id,data:g.data,horario:g.horario+":00",tipo_visita:"meia",tipo_encontro:"task",duracao_minutos:30,valor:0,status:"agendada",desconto_plataforma:0,observacoes:g.observacoes.trim()||null,responsavel:g.responsavel};if(i){const{error:C}=await W.from("visits").update(S).eq("id",i.id);if(C)throw C;Yt.success("Task atualizada com sucesso!")}else{const{error:C}=await W.from("visits").insert([S]);if(C)throw C;Yt.success("Task criada com sucesso!")}r(),t()}catch(N){console.error("Erro ao salvar task:",N),Yt.error(`Erro ao salvar task: ${N.message}`)}finally{l(!1)}},b=c.filter(j=>{const N=j.clients.nome.toLowerCase(),_=(j.nome_servico||"").toLowerCase(),S=d.toLowerCase();return N.includes(S)||_.includes(S)}),w=j=>{x({...g,service_id:j.id}),f(`${j.clients.nome} - ${j.nome_servico||"Sem nome"}`),p(!1)};return e?s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] flex flex-col overflow-hidden",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex items-center justify-between flex-shrink-0",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:i?"Editar Task":"Nova Task"}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:i?"Atualizar informaes da task":"Criar nova tarefa vinculada a servio"})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx(mn,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:v,className:"p-6 space-y-4 overflow-y-auto flex-1",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ttulo *"}),s.jsx("input",{type:"text",value:g.titulo,onChange:j=>x({...g,titulo:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Ex: Comprar rao, Levar ao veterinrio...",required:!0})]}),s.jsxs("div",{className:"relative",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Servio *"}),s.jsx("input",{type:"text",value:d,onChange:j=>{f(j.target.value),p(!0)},onFocus:()=>p(!0),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",placeholder:"Digite para buscar cliente ou servio...",required:!g.service_id}),h&&b.length>0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:b.map(j=>s.jsxs("button",{type:"button",onClick:()=>w(j),className:"w-full text-left px-3 py-2 hover:bg-primary-50 focus:bg-primary-50 focus:outline-none transition-colors border-b border-gray-100 last:border-b-0",children:[s.jsx("div",{className:"font-medium text-gray-900",children:j.clients.nome}),s.jsx("div",{className:"text-sm text-gray-600",children:j.nome_servico||"Sem nome"})]},j.id))}),h&&d&&b.length===0&&s.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg p-3 text-sm text-gray-500",children:"Nenhum servio encontrado"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Data *"}),s.jsx("input",{type:"date",value:g.data,onChange:j=>x({...g,data:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Horrio *"}),s.jsx("input",{type:"time",value:g.horario,onChange:j=>x({...g,horario:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",required:!0})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Responsvel"}),s.jsxs("select",{value:g.responsavel||"",onChange:j=>x({...g,responsavel:j.target.value||null}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",children:[s.jsx("option",{value:"",children:"No atribudo"}),s.jsx("option",{value:"fernanda",children:"Fernanda"}),s.jsx("option",{value:"andre",children:"Andr"})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{value:g.observacoes,onChange:j=>x({...g,observacoes:j.target.value}),className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-primary-500",rows:3,placeholder:"Detalhes adicionais sobre a task..."})]}),s.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 text-sm font-medium rounded-md hover:bg-gray-200 transition-colors",disabled:o,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 px-3 py-1.5 bg-primary-500 text-white text-sm font-medium rounded-md hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:o,children:o?"Salvando...":i?"Atualizar":"Criar Task"})]})]})]})}):null}function ek({x:e,y:t,items:r,onClose:n}){const a=m.useRef(null),[i,o]=m.useState({x:e,y:t});return m.useEffect(()=>{if(a.current){const c=a.current.getBoundingClientRect(),u=window.innerWidth,d=window.innerHeight;let f=e,h=t;e+c.width>u&&(f=u-c.width-10),t+c.height>d&&(h=d-c.height-10),o({x:f,y:h})}},[e,t]),m.useEffect(()=>{const l=u=>{a.current&&!a.current.contains(u.target)&&n()},c=u=>{u.key==="Escape"&&n()};return document.addEventListener("mousedown",l),document.addEventListener("keydown",c),()=>{document.removeEventListener("mousedown",l),document.removeEventListener("keydown",c)}},[n]),s.jsx("div",{ref:a,className:"fixed z-[9999] bg-white rounded-lg shadow-2xl border border-gray-200 py-1 min-w-[200px] animate-in fade-in zoom-in-95 duration-100",style:{left:`${i.x}px`,top:`${i.y}px`},children:r.map((l,c)=>s.jsxs("button",{onClick:()=>{l.onClick(),n()},className:`w-full px-4 py-2.5 text-left flex items-center gap-3 hover:bg-gray-100 transition-colors text-sm ${l.color||"text-gray-700"}`,children:[s.jsx("span",{className:"text-base",children:l.icon}),s.jsx("span",{className:"font-medium",children:l.label})]},c))})}function qie(){var ht,xt;const{isAdmin:e}=nn(),[t,r]=m.useState([]),[n,a]=m.useState(!0),[i,o]=m.useState(new Date),[l,c]=m.useState("week"),[u,d]=m.useState(null),[f,h]=m.useState(!1),[p,g]=m.useState(null),[x,y]=m.useState(0),[v,b]=m.useState(null),[w,j]=m.useState(!1),[N,_]=m.useState(e?"all-admins":"my-agenda"),[S,C]=m.useState([]),[O,A]=m.useState({}),[T,D]=m.useState(!1),[q,re]=m.useState(null),[K,z]=m.useState(!1),[P,M]=m.useState(null),[L,G]=m.useState(null),[$,U]=m.useState(null),[E,Q]=m.useState(null),J=Array.from({length:17},(Z,ie)=>{const fe=ie+6;return[{time:`${fe.toString().padStart(2,"0")}:00`,isHalf:!1},{time:`${fe.toString().padStart(2,"0")}:30`,isHalf:!0}]}).flat();m.useEffect(()=>{const Z=()=>{window.innerWidth<1024&&l==="week"&&c("day")};return Z(),window.addEventListener("resize",Z),()=>window.removeEventListener("resize",Z)},[l]),m.useEffect(()=>()=>{v&&clearTimeout(v)},[v]),m.useEffect(()=>{e&&de()},[e]),m.useEffect(()=>{ae()},[i,l,N,S]),m.useEffect(()=>{if(!n&&x>0){const Z=document.querySelector(".overflow-auto");Z&&(Z.scrollTop=x,y(0))}},[n,x]);const de=async()=>{try{const{data:Z,error:ie}=await W.from("user_profiles").select("user_id, full_name, email, avatar_url, profile_id").eq("is_active",!0).order("full_name");if(ie)throw ie;const fe=(Z||[]).map(ue=>ue.profile_id),{data:De}=await W.from("profiles").select("id, is_admin").in("id",fe),$e=new Map((De==null?void 0:De.map(ue=>[ue.id,ue.is_admin]))||[]),We=(Z||[]).map(ue=>({id:ue.user_id,full_name:ue.full_name,email:ue.email,avatar_url:ue.avatar_url,is_admin:$e.get(ue.profile_id)===!0}));C(We);const ke={};We.forEach(ue=>{ke[ue.id]={full_name:ue.full_name,avatar_url:ue.avatar_url}}),A(ke)}catch(Z){console.error("Erro ao carregar usurios:",Z)}},ae=async()=>{try{a(!0);let Z,ie;l==="week"?(Z=ug(i,{locale:Rt}),ie=ES(i,{locale:Rt})):(Z=Ex(i),ie=vee(i));let fe=W.from("visits").select(`
          *,
          clients (nome, endereco_completo),
          services (nome_servico, total_visitas),
          leads (id, nome, telefone, endereco, status)
        `).gte("data",ze(Z,"yyyy-MM-dd")).lte("data",ze(ie,"yyyy-MM-dd")).in("status",["agendada","realizada"]).order("data",{ascending:!0}).order("horario",{ascending:!0});if(N==="all-admins"){const ue=S.filter(B=>B.is_admin===!0).map(B=>B.id);ue.length>0&&(fe=fe.in("assigned_user_id",ue))}else if(N==="my-agenda"){const{data:{user:ue}}=await W.auth.getUser();ue&&(fe=fe.eq("assigned_user_id",ue.id))}else fe=fe.eq("assigned_user_id",N);const{data:De,error:$e}=await fe;if($e)throw $e;const We=De||[],ke=new Set;if(We.forEach(ue=>{ue.service_id&&ue.tipo_encontro==="visita_servico"&&ke.add(ue.service_id)}),ke.size>0){const{data:ue,error:B}=await W.from("visits").select("id, service_id, data, horario, status").in("service_id",Array.from(ke)).eq("tipo_encontro","visita_servico").in("status",["agendada","realizada"]);if(!B&&ue){const te=new Map;ue.forEach(ce=>{te.has(ce.service_id)||te.set(ce.service_id,[]),te.get(ce.service_id).push(ce)}),te.forEach(ce=>{const ye=ce.sort((Ke,Le)=>Ke.data===Le.data?Ke.horario.localeCompare(Le.horario):Ke.data.localeCompare(Le.data)),Ie=ye[ye.length-1].id,Xe=We.find(Ke=>Ke.id===Ie);Xe&&(Xe.isLastVisit=!0)})}}r(We)}catch(Z){console.error("Erro ao buscar visitas:",Z)}finally{a(!1)}},pe=()=>{const Z=ug(i,{locale:Rt});return Array.from({length:7},(ie,fe)=>Xo(Z,fe))},k=()=>{o(l==="week"?Z=>Xo(Z,-7):Z=>Xo(Z,-1))},H=()=>{o(l==="week"?Z=>Xo(Z,7):Z=>Xo(Z,1))},ne=()=>{o(new Date)},Y=Z=>{if(Z.responsavel==="fernanda")return Z.status==="realizada"?"bg-purple-50 border-purple-300 text-purple-700 opacity-75":"bg-purple-100 border-purple-400 text-purple-900";if(Z.responsavel==="andre")return Z.status==="realizada"?"bg-orange-50 border-orange-300 text-orange-700 opacity-75":"bg-orange-100 border-orange-400 text-orange-900";if(Z.tipo_encontro==="task")return Z.status==="realizada"?"bg-blue-50 border-blue-300 text-blue-700 opacity-75":"bg-blue-100 border-blue-400 text-blue-900";if(Z.tipo_encontro==="pre_encontro")return Z.status==="realizada"?"bg-cyan-50 border-cyan-300 text-cyan-700 opacity-75":"bg-cyan-100 border-cyan-400 text-cyan-900";const ie=Z.tipo_visita==="inteira"?"bg-blue-100 border-blue-400 text-blue-900":"bg-amber-100 border-amber-400 text-amber-900";return Z.status==="realizada"?Z.tipo_visita==="inteira"?"bg-blue-50 border-blue-300 text-blue-700 opacity-75":"bg-amber-50 border-amber-300 text-amber-700 opacity-75":ie},me=(Z,ie)=>t.filter(De=>{const $e=ii(De.data),We=De.horario.substring(0,5);if(!Sc($e,Z))return!1;if(We===ie)return!0;if(De.tipo_visita==="inteira"){const[ke,ue]=We.split(":").map(Number);if(ue===30){if(`${String(ke+1).padStart(2,"0")}:00`===ie)return!0}else if(`${String(ke).padStart(2,"0")}:30`===ie)return!0}return!1}),ee=Z=>{d(Z),h(!0)},he=(Z,ie)=>{g(ie),Z.dataTransfer.effectAllowed="move"},je=Z=>{if(Z.preventDefault(),p){const fe=Z.currentTarget.getAttribute("data-day");if(fe&&p.data!==fe){Z.dataTransfer.dropEffect="none";return}}Z.dataTransfer.dropEffect="move"},Ae=(Z,ie)=>{const fe=setTimeout(()=>{g(ie),j(!0);const De=Z.currentTarget;De.style.opacity="0.5",navigator.vibrate&&navigator.vibrate(50)},500);b(fe)},Ue=Z=>{if(!w&&v){clearTimeout(v),b(null);return}w&&Z.preventDefault()},Pe=()=>{v&&(clearTimeout(v),b(null)),g(null),j(!1)},Je=async Z=>{v&&(clearTimeout(v),b(null));const ie=Z.currentTarget;if(!w||!p){ie.style.opacity="1",ie.style.visibility="visible",g(null),j(!1);return}const fe=Z.changedTouches[0];if(!fe){console.log("Touch no encontrado"),g(null),j(!1),ie.style.opacity="1",ie.style.visibility="visible";return}ie.style.visibility="hidden";const De=document.elementFromPoint(fe.clientX,fe.clientY);console.log("Elemento encontrado:",De),ie.style.visibility="visible";const $e=De==null?void 0:De.closest("[data-drop-zone]");if(console.log("Drop zone:",$e),$e){const We=$e.getAttribute("data-day"),ke=$e.getAttribute("data-time");if(console.log("Day:",We,"Time:",ke),We&&ke){const ue=We,B=ke;if(p.data===ue&&p.horario.substring(0,5)===B){console.log("Mesma posio, no reagendar"),g(null),j(!1),ie.style.opacity="1";return}const te=document.querySelector(".overflow-auto");te&&y(te.scrollTop),console.log("Reagendando de",p.data,p.horario,"para",ue,B);try{const{error:ce}=await W.from("visits").update({data:ue,horario:B+":00"}).eq("id",p.id);if(ce)throw console.error("Erro Supabase:",ce),ce;X.success("Visita reagendada com sucesso!"),await ae()}catch(ce){console.error("Erro ao reagendar visita:",ce),X.error("Erro ao reagendar visita")}}else console.log("Day ou time no encontrados")}else console.log("Drop zone no encontrado - touch fora da rea vlida");g(null),j(!1),ie.style.opacity="1"},Ge=async(Z,ie,fe)=>{if(Z.preventDefault(),!p)return;const De=ze(ie,"yyyy-MM-dd"),$e=fe;if(p.data!==De){X.error("No  permitido mover visitas para outro dia. Apenas troque os horrios no mesmo dia."),g(null);return}if(p.data===De&&p.horario.substring(0,5)===$e){g(null);return}const We=document.querySelector(".overflow-auto");We&&y(We.scrollTop);try{const{error:ke}=await W.from("visits").update({data:De,horario:$e+":00"}).eq("id",p.id);if(ke)throw ke;X.success("Horrio alterado com sucesso!"),await ae()}catch(ke){console.error("Erro ao reagendar visita:",ke),X.error("Erro ao reagendar visita")}finally{g(null)}},mt=(Z,ie,fe)=>{Z.preventDefault(),U({x:Z.clientX,y:Z.clientY,date:ze(ie,"yyyy-MM-dd"),time:fe})},Oe=()=>{$&&(re({date:$.date,time:$.time}),D(!0),U(null))},F=()=>{$&&(M({date:$.date,time:$.time}),z(!0),U(null))},oe=(Z,ie)=>{Z.preventDefault(),Z.stopPropagation(),Q({x:Z.clientX,y:Z.clientY,visit:ie})},be=async()=>{var fe,De;if(!E)return;const Z=((fe=E.visit.leads)==null?void 0:fe.nome)||((De=E.visit.clients)==null?void 0:De.nome)||"esta pessoa";if(!window.confirm(`Deseja realmente cancelar o pr-encontro com ${Z}?`)){Q(null);return}try{const{error:$e}=await W.from("visits").delete().eq("id",E.visit.id);if($e)throw $e;X.success("Pr-encontro cancelado com sucesso!"),await ae(),Q(null)}catch($e){console.error("Erro ao cancelar pr-encontro:",$e),X.error("Erro ao cancelar pr-encontro")}},Te=async()=>{if(!E)return;const Z=E.visit.titulo||"esta task";if(!window.confirm(`Deseja realmente excluir a task "${Z}"?`)){Q(null);return}try{const{error:fe}=await W.from("visits").delete().eq("id",E.visit.id);if(fe)throw fe;X.success("Task excluda com sucesso!"),await ae(),Q(null)}catch(fe){console.error("Erro ao excluir task:",fe),X.error("Erro ao excluir task")}},Me=async(Z,ie)=>{try{const{error:fe}=await W.from("visits").update({responsavel:ie}).eq("id",Z);if(fe)throw fe;const De=ie==="fernanda"?"Fernanda":ie==="andre"?"Andr":"sem atribuio";X.success(`Visita atribuda a ${De}!`),await ae(),Q(null)}catch(fe){console.error("Erro ao atribuir responsvel:",fe),X.error("Erro ao atribuir responsvel")}},Ye=()=>{const Z=t.some(ie=>Sc(ii(ie.data),i));return s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("div",{className:"min-w-full",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-[80px_1fr]",children:[s.jsx("div",{className:"border-r border-gray-200 p-2"}),s.jsxs("div",{className:"p-3 text-center font-semibold bg-gray-50 relative",children:[s.jsx("div",{className:"text-sm text-gray-600",children:ze(i,"EEEE",{locale:Rt})}),s.jsx("div",{className:"text-lg",children:ze(i,"dd/MM/yyyy")}),Z&&s.jsx("div",{className:"absolute top-2 right-2 w-2.5 h-2.5 rounded-full",style:{backgroundColor:"#7f50c6"}})]})]})}),s.jsx("div",{className:"relative",children:J.map(ie=>{const fe=me(i,ie.time),De=fe.length>0,$e=fe.length===2,We=fe.length>2;return s.jsxs("div",{className:`grid grid-cols-[80px_1fr] ${ie.isHalf?"border-b border-dashed border-gray-300":"border-b border-gray-200"} ${De?"min-h-[80px]":"min-h-[40px]"}`,children:[s.jsx("div",{className:"border-r border-gray-200 p-2 text-sm text-gray-600 font-medium",children:ie.isHalf?s.jsx("span",{className:"text-xs text-gray-400",children:ie.time}):s.jsx("span",{children:ie.time})}),s.jsxs("div",{className:"p-2 relative cursor-context-menu","data-drop-zone":"true","data-day":ze(i,"yyyy-MM-dd"),"data-time":ie.time,onDragOver:je,onDrop:ke=>Ge(ke,i,ie.time),onContextMenu:e?ke=>mt(ke,i,ie.time):void 0,title:e?"Clique com boto direito para ver opes":"",children:[We&&s.jsx("div",{className:"absolute top-0 right-0 bg-red-500 text-white text-xs px-2 py-1 rounded-bl z-20",children:" Conflito"}),fe.sort((ke,ue)=>fe.length===2?ke.responsavel==="fernanda"?-1:ue.responsavel==="fernanda"?1:0:0).map((ke,ue)=>{var Xe,Ke,Le,jt,Qe;if(ke.horario.substring(0,5)!==ie.time)return null;const te=ke.tipo_visita==="inteira"&&ke.tipo_encontro!=="pre_encontro"?160:void 0,ce=We||$e,ye=ce?ue===0?"0.25rem":"calc(50% + 0.125rem)":"0.5rem",Ie=ce?ue===0?"calc(50% + 0.125rem)":"0.25rem":"0.5rem";return s.jsxs("div",{draggable:!0,onDragStart:sr=>he(sr,ke),onTouchStart:sr=>Ae(sr,ke),onTouchMove:Ue,onTouchEnd:Je,onTouchCancel:Pe,onContextMenu:e?sr=>oe(sr,ke):void 0,onClick:()=>{!p&&!w&&ee(ke)},className:`p-1.5 rounded border cursor-move hover:shadow-md transition-shadow absolute top-0 z-10 ${ce?"text-[10px]":"text-xs"} ${Y(ke)} ${We?"border-2 border-red-500":""} ${ke.isLastVisit?"border-l-4 border-l-orange-500":""}`,style:{left:ye,right:Ie,height:te?`${te}px`:void 0,maxHeight:te?`${te}px`:void 0},children:[s.jsxs("div",{className:"font-semibold truncate leading-tight flex items-center gap-1",children:[ke.isLastVisit&&s.jsx("span",{className:"text-base",title:"ltima visita do servio",children:""}),s.jsx("span",{className:"truncate",children:ke.tipo_encontro==="task"?` ${ke.titulo||"Task sem ttulo"}`:ke.tipo_encontro==="pre_encontro"?` ${((Xe=ke.leads)==null?void 0:Xe.nome)||((Ke=ke.clients)==null?void 0:Ke.nome)||"No identificado"}`:((Le=ke.clients)==null?void 0:Le.nome)||"Cliente no identificado"})]}),!We&&!$e&&s.jsx("div",{className:"truncate opacity-90 leading-tight mt-0.5",children:ke.tipo_encontro==="task"?((jt=ke.services)==null?void 0:jt.nome_servico)||"Servio no vinculado":ke.tipo_encontro==="pre_encontro"?"Pr-Encontro":((Qe=ke.services)==null?void 0:Qe.nome_servico)||"Servio no identificado"}),s.jsxs("div",{className:"opacity-75 mt-0.5 leading-tight",children:[ke.horario.substring(0,5),"  ",ke.tipo_encontro==="pre_encontro"||ke.tipo_encontro==="task"?"30min":ke.tipo_visita==="inteira"?"1h":"30min"]})]},ke.id)})]})]},ie.time)})})]})})},Ct=()=>{const Z=pe();return s.jsx("div",{className:"flex-1 overflow-auto",children:s.jsxs("div",{className:"min-w-full",children:[s.jsx("div",{className:"sticky top-0 z-10 bg-white border-b border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-[80px_repeat(7,1fr)]",children:[s.jsx("div",{className:"border-r border-gray-200 p-2"}),Z.map(ie=>{const fe=Sc(ie,new Date),De=t.some($e=>Sc(ii($e.data),ie));return s.jsxs("div",{className:`p-2 text-center border-r border-gray-200 relative ${fe?"bg-blue-50":"bg-gray-50"}`,children:[s.jsx("div",{className:"text-xs text-gray-600 font-medium",children:ze(ie,"EEE",{locale:Rt})}),s.jsx("div",{className:`text-lg font-semibold ${fe?"text-blue-600":"text-gray-900"}`,children:ze(ie,"dd")}),s.jsx("div",{className:"text-xs text-gray-500",children:ze(ie,"MMM",{locale:Rt})}),De&&s.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full",style:{backgroundColor:"#7f50c6"}})]},ie.toISOString())})]})}),s.jsx("div",{className:"relative",children:J.map(ie=>s.jsxs("div",{className:`grid grid-cols-[80px_repeat(7,1fr)] ${ie.isHalf?"border-b border-dashed border-gray-300":"border-b border-gray-200"} min-h-[40px]`,children:[s.jsx("div",{className:"border-r border-gray-200 p-2 text-sm text-gray-600 font-medium",children:ie.isHalf?s.jsx("span",{className:"text-xs text-gray-400",children:ie.time}):s.jsx("span",{children:ie.time})}),Z.map(fe=>{const De=me(fe,ie.time),$e=Sc(fe,new Date),We=De.length===2,ke=De.length>2;return s.jsxs("div",{className:`border-r border-gray-200 p-1 relative cursor-context-menu ${$e?"bg-blue-50/30":""}`,"data-drop-zone":"true","data-day":ze(fe,"yyyy-MM-dd"),"data-time":ie.time,onDragOver:je,onDrop:ue=>Ge(ue,fe,ie.time),onContextMenu:e?ue=>mt(ue,fe,ie.time):void 0,title:e?"Clique com boto direito para ver opes":"",children:[ke&&s.jsx("div",{className:"absolute top-0 right-0 bg-red-500 text-white text-[8px] px-1 rounded-bl z-20",children:""}),De.sort((ue,B)=>De.length===2?ue.responsavel==="fernanda"?-1:B.responsavel==="fernanda"?1:0:0).map((ue,B)=>{var Ke,Le,jt;if(ue.horario.substring(0,5)!==ie.time)return null;const ce=ue.tipo_visita==="inteira"&&ue.tipo_encontro!=="pre_encontro"?80:void 0,ye=ke||We,Ie=ye?B===0?"0.25rem":"calc(50% + 0.125rem)":"0.25rem",Xe=ye&&B===0?"calc(50% + 0.125rem)":"0.25rem";return s.jsxs("div",{draggable:!0,onDragStart:Qe=>he(Qe,ue),onTouchStart:Qe=>Ae(Qe,ue),onTouchMove:Ue,onTouchEnd:Je,onTouchCancel:Pe,onContextMenu:e?Qe=>oe(Qe,ue):void 0,onClick:()=>{!p&&!w&&ee(ue)},className:`p-1 rounded border cursor-move hover:shadow-md transition-shadow absolute top-0 z-10 ${ye?"text-[8px]":"text-xs"} ${Y(ue)} ${ke?"border-2 border-red-500":""} ${ue.isLastVisit?"border-l-4 border-l-orange-500":""}`,style:{left:Ie,right:Xe,height:ce?`${ce}px`:void 0,maxHeight:ce?`${ce}px`:void 0},children:[s.jsxs("div",{className:"font-semibold truncate leading-tight flex items-center gap-0.5",children:[ue.isLastVisit&&s.jsx("span",{className:"text-xs",title:"ltima visita do servio",children:""}),s.jsx("span",{className:"truncate",children:ue.tipo_encontro==="task"?` ${ue.titulo||"Task"}`:ue.tipo_encontro==="pre_encontro"?` ${((Ke=ue.leads)==null?void 0:Ke.nome)||((Le=ue.clients)==null?void 0:Le.nome)||"No identificado"}`:((jt=ue.clients)==null?void 0:jt.nome)||"Cliente no identificado"}),ue.assigned_user_id&&O[ue.assigned_user_id]&&s.jsxs("div",{className:"group relative inline-flex items-center ml-0.5 flex-shrink-0",children:[s.jsx(Ni,{avatarId:O[ue.assigned_user_id].avatar_url,name:O[ue.assigned_user_id].full_name,size:"2xs",className:"border border-gray-300"}),s.jsx("div",{className:"absolute left-0 bottom-full mb-1 hidden group-hover:block z-20 whitespace-nowrap pointer-events-none",children:s.jsx("div",{className:"bg-gray-900 text-white text-[10px] rounded py-0.5 px-1.5",children:O[ue.assigned_user_id].full_name})})]})]}),!ke&&!We&&s.jsx("div",{className:"truncate text-[9px] opacity-75 leading-tight mt-0.5",children:ue.tipo_encontro==="pre_encontro"||ue.tipo_encontro==="task"?"30min":ue.tipo_visita==="inteira"?"1h":"30min"})]},ue.id)})]},fe.toISOString())})]},ie.time))})]})})};return s.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 p-4",children:[s.jsx("div",{className:"sm:flex sm:items-center mb-4",children:s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Agenda"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Visualize e gerencie os horrios de visitas agendadas."}),s.jsx("div",{className:"divider-fefelina"})]})}),e&&S.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{htmlFor:"filter-by-user-agenda",className:"block text-sm font-medium text-gray-700 mb-2",children:"Visualizar agenda de:"}),s.jsxs("select",{id:"filter-by-user-agenda",value:N,onChange:Z=>_(Z.target.value),className:"block w-full md:w-80 px-3 py-2 border border-gray-300 rounded-md shadow-sm text-sm focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"my-agenda",children:"Minha agenda"}),S.filter(Z=>Z.is_admin).length>1&&s.jsxs("option",{value:"all-admins",children:["Todos admins (",S.filter(Z=>Z.is_admin).map(Z=>Z.full_name.split(" ")[0]).join(" + "),")"]}),S.filter(Z=>!Z.is_admin).length>0&&s.jsx("optgroup",{label:"Parceiros",children:S.filter(Z=>!Z.is_admin).map(Z=>s.jsx("option",{value:Z.id,children:Z.full_name},Z.id))})]})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("button",{onClick:k,className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"Anterior",children:s.jsx(Uae,{className:"w-5 h-5"})}),s.jsx("button",{onClick:ne,className:"px-3 py-1.5 text-sm font-medium bg-white border border-gray-300 rounded hover:bg-gray-50 transition-colors",children:"Hoje"}),s.jsx("button",{onClick:H,className:"p-2 hover:bg-gray-100 rounded transition-colors",title:"Prximo",children:s.jsx(Vae,{className:"w-5 h-5"})})]}),s.jsx("div",{className:"text-lg font-semibold text-gray-700",children:l==="week"?s.jsxs(s.Fragment,{children:[ze(ug(i,{locale:Rt}),"dd MMM",{locale:Rt})," - "," ",ze(ES(i,{locale:Rt}),"dd MMM yyyy",{locale:Rt})]}):ze(i,"dd 'de' MMMM 'de' yyyy",{locale:Rt})})]}),s.jsx("div",{className:"flex items-center gap-3",children:s.jsxs("div",{className:"hidden lg:flex items-center gap-2 bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>c("day"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${l==="day"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Dia"}),s.jsx("button",{onClick:()=>c("week"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${l==="week"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Semana"})]})})]})]}),n?s.jsx("div",{className:"flex-1 flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Do,{className:"w-12 h-12 text-gray-400 mx-auto mb-2 animate-pulse"}),s.jsx("p",{className:"text-gray-600",children:"Carregando agenda..."})]})}):s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"lg:hidden flex-1 overflow-hidden flex flex-col",children:Ye()}),s.jsx("div",{className:"hidden lg:flex flex-1 overflow-hidden flex-col",children:l==="day"?Ye():Ct()})]}),f&&u&&(u.tipo_encontro==="pre_encontro"?s.jsx(Vie,{visit:u,onClose:()=>h(!1)}):u.tipo_encontro==="task"?s.jsx(JS,{isOpen:!0,initialDate:u.data,initialTime:u.horario,editingTask:u,onClose:()=>h(!1),onSuccess:()=>{ae(),h(!1)}}):s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 md:p-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[85vh] md:max-h-[90vh] overflow-y-auto mt-16 md:mt-0",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-4 md:px-6 py-3 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm md:text-base font-semibold text-gray-900",children:"Detalhes da Visita"}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:ze(ii(u.data),"dd 'de' MMM 'de' yyyy",{locale:Rt})})]}),s.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"px-4 md:px-6 py-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Cliente"}),s.jsx("p",{className:"text-sm md:text-base font-medium text-gray-900 mt-1",children:((ht=u.clients)==null?void 0:ht.nome)||"No identificado"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Horrio"}),s.jsx("input",{type:"time",defaultValue:u.horario.substring(0,5),onBlur:async Z=>{const ie=Z.target.value+":00";if(ie!==u.horario)try{const{error:fe}=await W.from("visits").update({horario:ie}).eq("id",u.id);if(fe)throw fe;X.success("Horrio atualizado!"),await ae()}catch(fe){console.error("Erro ao atualizar horrio:",fe),X.error("Erro ao atualizar horrio"),Z.target.value=u.horario.substring(0,5)}},className:"w-full text-sm md:text-base font-medium text-gray-900 mt-1 border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-primary-500"})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Tipo de Visita"}),s.jsx("p",{className:"mt-1",children:s.jsx("span",{className:`inline-flex px-2 md:px-3 py-1 rounded-full text-xs font-semibold ${u.tipo_visita==="inteira"?"bg-blue-100 text-blue-800":"bg-orange-100 text-orange-800"}`,children:u.tipo_visita==="inteira"?"Inteira":"Meia"})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Valor da Visita"}),s.jsxs("p",{className:"text-sm md:text-base font-medium text-gray-900 mt-1",children:["R$ ",u.valor.toFixed(2)]})]})]}),s.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[s.jsx("label",{className:"text-xs font-semibold text-green-700 uppercase tracking-wide",children:"Valor a Receber"}),s.jsxs("p",{className:"text-xl md:text-2xl font-bold text-green-600 mt-1",children:["R$ ",(u.valor*(1-u.desconto_plataforma/100)).toFixed(2)]}),u.desconto_plataforma>0&&s.jsxs("p",{className:"text-xs text-green-600 mt-1",children:["Desconto: ",u.desconto_plataforma,"%"]})]}),((xt=u.clients)==null?void 0:xt.endereco_completo)&&s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1",children:"Endereo"}),s.jsx("p",{className:"text-sm md:text-base text-gray-700 leading-relaxed",children:u.clients.endereco_completo})]})]}),s.jsx("div",{className:"sticky bottom-0 bg-gray-50 px-4 md:px-6 py-3 border-t border-gray-200",children:s.jsx("button",{onClick:()=>h(!1),className:"w-full px-4 py-2.5 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors font-medium text-sm md:text-base",children:"Fechar"})})]})})),$&&s.jsx(ek,{x:$.x,y:$.y,onClose:()=>U(null),items:[{label:"Criar Pr-Encontro",icon:"",onClick:Oe,color:"text-cyan-700"},{label:"Criar Task",icon:"",onClick:F,color:"text-blue-700"}]}),T&&s.jsx(Wie,{initialDate:q==null?void 0:q.date,initialTime:q==null?void 0:q.time,onClose:()=>{D(!1),re(null)},onSuccess:()=>{ae()}}),K&&s.jsx(JS,{isOpen:K,initialDate:P==null?void 0:P.date,initialTime:P==null?void 0:P.time,onClose:()=>{z(!1),M(null),G(null)},onSuccess:()=>{ae(),z(!1),M(null),G(null)},editingTask:L}),E&&s.jsx(ek,{x:E.x,y:E.y,items:[{label:"Atribuir a Fernanda (Roxo)",icon:"",onClick:()=>Me(E.visit.id,"fernanda"),color:"text-purple-700"},{label:"Atribuir a Andr (Laranja)",icon:"",onClick:()=>Me(E.visit.id,"andre"),color:"text-orange-700"},{label:"Remover Atribuio",icon:"",onClick:()=>Me(E.visit.id,null),color:"text-gray-700"},...E.visit.tipo_encontro==="pre_encontro"?[{label:"Cancelar Pr-Encontro",icon:"",onClick:be,color:"text-red-600"}]:[],...E.visit.tipo_encontro==="task"?[{label:"Excluir Task",icon:"",onClick:Te,color:"text-red-600"}]:[]],onClose:()=>Q(null)})]})}function Hie({leadId:e,leadNome:t,onClose:r,onSuccess:n,initialDate:a,initialTime:i}){var x,y,v;const{userProfile:o}=nn(),[l,c]=m.useState(!1),[u,d]=m.useState([]),[f,h]=m.useState({data:a||new Date().toISOString().split("T")[0],horario:i||"10:00",assigned_user_id:(o==null?void 0:o.user_id)||"",observacoes:""});m.useEffect(()=>{p()},[]);const p=async()=>{try{const{data:b,error:w}=await W.from("user_profiles").select("user_id, full_name, email, avatar_url").eq("is_active",!0).order("full_name");if(w)throw w;d((b||[]).map(j=>({id:j.user_id,full_name:j.full_name,email:j.email,avatar_url:j.avatar_url})))}catch(b){console.error("Erro ao buscar usurios:",b),X.error("Erro ao carregar usurios")}},g=async b=>{if(b.preventDefault(),!f.data||!f.horario){X.error("Data e horrio so obrigatrios");return}c(!0);try{const{error:w}=await W.from("visits").insert({lead_id:e,data:f.data,horario:f.horario,duracao_minutos:30,tipo_encontro:"pre_encontro",tipo_visita:"meia",valor:0,desconto_plataforma:0,status:"agendada",assigned_user_id:f.assigned_user_id||null,observacoes:f.observacoes||null});if(w)throw w;X.success("Pr-encontro agendado com sucesso!"),n(),r()}catch(w){console.error("Erro ao agendar pr-encontro:",w),X.error("Erro ao agendar pr-encontro: "+w.message)}finally{c(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:"Agendar Pr-Encontro"}),s.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:["Lead: ",t]})]}),s.jsx("button",{onClick:r,className:"text-gray-400 hover:text-gray-600",children:s.jsx(mn,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:g,className:"p-6 space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(Do,{className:"w-3.5 h-3.5"}),"Data do Encontro"]}),s.jsx("input",{type:"date",value:f.data,onChange:b=>h({...f,data:b.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(zl,{className:"w-3.5 h-3.5"}),"Horrio de Incio"]}),s.jsx("input",{type:"time",value:f.horario,onChange:b=>h({...f,horario:b.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Durao: 30 minutos"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(No,{className:"w-3.5 h-3.5"}),"Responsvel pelo Pr-Encontro"]}),s.jsxs("select",{value:f.assigned_user_id,onChange:b=>h({...f,assigned_user_id:b.target.value}),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Selecione um responsvel"}),u.map(b=>s.jsx("option",{value:b.id,children:b.full_name},b.id))]}),f.assigned_user_id&&u.find(b=>b.id===f.assigned_user_id)&&s.jsxs("div",{className:"mt-2 flex items-center gap-2 px-3 py-2 bg-gray-50 border border-gray-200 rounded-md",children:[s.jsx(Ni,{avatarId:(x=u.find(b=>b.id===f.assigned_user_id))==null?void 0:x.avatar_url,name:((y=u.find(b=>b.id===f.assigned_user_id))==null?void 0:y.full_name)||"",size:"sm"}),s.jsx("span",{className:"text-sm text-gray-700",children:(v=u.find(b=>b.id===f.assigned_user_id))==null?void 0:v.full_name})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5 mb-1.5",children:[s.jsx(rie,{className:"w-3.5 h-3.5"}),"Observaes"]}),s.jsx("textarea",{value:f.observacoes,onChange:b=>h({...f,observacoes:b.target.value}),className:"w-full px-3 py-2 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none",rows:3,placeholder:"Ex: Primeiro contato, conhecer os gatinhos, ver a casa..."})]}),s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:s.jsxs("p",{className:"text-xs text-gray-600",children:[s.jsx("strong",{children:"Dica:"})," Este pr-encontro aparecer na agenda com cor azul para fcil identificao."]})}),s.jsxs("div",{className:"flex gap-2 pt-2",children:[s.jsx("button",{type:"button",onClick:r,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 text-sm font-medium rounded-md hover:bg-gray-200 transition-colors",disabled:l,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 px-3 py-1.5 bg-primary-500 text-white text-sm font-medium rounded-md hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:l,children:l?"Agendando...":"Agendar"})]})]})]})})}function Kie({lead:e,onClose:t,onConvert:r}){const[n,a]=m.useState(""),[i,o]=m.useState(""),[l,c]=m.useState(!1),u=async d=>{d.preventDefault();const f=parseFloat(n),h=parseFloat(i);if(isNaN(f)||f<=0){alert("Por favor, informe um valor vlido para a diria");return}if(isNaN(h)||h<=0){alert("Por favor, informe um valor vlido para 2 visitas");return}c(!0);try{await r(f,h)}catch(p){console.error("Erro ao converter lead:",p)}finally{c(!1)}};return s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:" Converter Lead em Cliente"}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:e.nome})]}),s.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",disabled:l,children:s.jsx(mn,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:u,children:[s.jsxs("div",{className:"p-6 space-y-4",children:[s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3 space-y-2",children:[s.jsx("p",{className:"text-xs font-semibold text-gray-700",children:"Informaes que sero copiadas:"}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1 ml-4",children:[s.jsxs("li",{children:[" Nome: ",e.nome]}),s.jsxs("li",{children:[" Endereo: ",e.endereco||"No informado"]}),s.jsx("li",{children:" Veterinrio: No informado"}),e.observacoes&&s.jsxs("li",{children:[" Observaes: ",e.observacoes.substring(0,50),"..."]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor Diria (R$) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:n,onChange:d=>a(d.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: 100.00",required:!0,disabled:l})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide block mb-1.5",children:"Valor 2 Visitas (R$) *"}),s.jsx("input",{type:"number",step:"0.01",min:"0",value:i,onChange:d=>o(d.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",placeholder:"Ex: 180.00",required:!0,disabled:l})]})]})]}),s.jsxs("div",{className:"flex gap-2 p-6 bg-gray-50 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:t,className:"flex-1 px-4 py-2 text-gray-700 bg-gray-100 text-sm font-medium rounded-md hover:bg-gray-200 transition-colors",disabled:l,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"flex-1 px-3 py-1.5 bg-primary-500 text-white text-sm font-medium rounded-md hover:bg-primary-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",disabled:l,children:l?"Convertendo...":"Converter em Cliente"})]})]})]})})}function Yie(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>n=>{t.forEach(a=>a(n))},t)}const Qp=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ic(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function cw(e){return"nodeType"in e}function an(e){var t,r;return e?ic(e)?e:cw(e)&&(t=(r=e.ownerDocument)==null?void 0:r.defaultView)!=null?t:window:window}function uw(e){const{Document:t}=an(e);return e instanceof t}function jd(e){return ic(e)?!1:e instanceof an(e).HTMLElement}function vT(e){return e instanceof an(e).SVGElement}function sc(e){return e?ic(e)?e.document:cw(e)?uw(e)?e:jd(e)||vT(e)?e.ownerDocument:document:document:document}const wa=Qp?m.useLayoutEffect:m.useEffect;function Zp(e){const t=m.useRef(e);return wa(()=>{t.current=e}),m.useCallback(function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.current==null?void 0:t.current(...n)},[])}function Gie(){const e=m.useRef(null),t=m.useCallback((n,a)=>{e.current=setInterval(n,a)},[]),r=m.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,r]}function zu(e,t){t===void 0&&(t=[e]);const r=m.useRef(e);return wa(()=>{r.current!==e&&(r.current=e)},t),r}function _d(e,t){const r=m.useRef();return m.useMemo(()=>{const n=e(r.current);return r.current=n,n},[...t])}function dh(e){const t=Zp(e),r=m.useRef(null),n=m.useCallback(a=>{a!==r.current&&(t==null||t(a,r.current)),r.current=a},[]);return[r,n]}function fh(e){const t=m.useRef();return m.useEffect(()=>{t.current=e},[e]),t.current}let yg={};function Nd(e,t){return m.useMemo(()=>{if(t)return t;const r=yg[e]==null?0:yg[e]+1;return yg[e]=r,e+"-"+r},[e,t])}function xT(e){return function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];return n.reduce((i,o)=>{const l=Object.entries(o);for(const[c,u]of l){const d=i[c];d!=null&&(i[c]=d+e*u)}return i},{...t})}}const jl=xT(1),mh=xT(-1);function Xie(e){return"clientX"in e&&"clientY"in e}function Jp(e){if(!e)return!1;const{KeyboardEvent:t}=an(e.target);return t&&e instanceof t}function Qie(e){if(!e)return!1;const{TouchEvent:t}=an(e.target);return t&&e instanceof t}function hh(e){if(Qie(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:r}=e.touches[0];return{x:t,y:r}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:r}=e.changedTouches[0];return{x:t,y:r}}}return Xie(e)?{x:e.clientX,y:e.clientY}:null}const _s=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:r}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(r?Math.round(r):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:r}=e;return"scaleX("+t+") scaleY("+r+")"}},Transform:{toString(e){if(e)return[_s.Translate.toString(e),_s.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:r,easing:n}=e;return t+" "+r+"ms "+n}}}),tk="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Zie(e){return e.matches(tk)?e:e.querySelector(tk)}const Jie={display:"none"};function ese(e){let{id:t,value:r}=e;return we.createElement("div",{id:t,style:Jie},r)}function tse(e){let{id:t,announcement:r,ariaLiveType:n="assertive"}=e;const a={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return we.createElement("div",{id:t,style:a,role:"status","aria-live":n,"aria-atomic":!0},r)}function rse(){const[e,t]=m.useState("");return{announce:m.useCallback(n=>{n!=null&&t(n)},[]),announcement:e}}const yT=m.createContext(null);function nse(e){const t=m.useContext(yT);m.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function ase(){const[e]=m.useState(()=>new Set),t=m.useCallback(n=>(e.add(n),()=>e.delete(n)),[e]);return[m.useCallback(n=>{let{type:a,event:i}=n;e.forEach(o=>{var l;return(l=o[a])==null?void 0:l.call(o,i)})},[e]),t]}const ise={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},sse={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was moved over droppable area "+r.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:r}=e;return r?"Draggable item "+t.id+" was dropped over droppable area "+r.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function ose(e){let{announcements:t=sse,container:r,hiddenTextDescribedById:n,screenReaderInstructions:a=ise}=e;const{announce:i,announcement:o}=rse(),l=Nd("DndLiveRegion"),[c,u]=m.useState(!1);if(m.useEffect(()=>{u(!0)},[]),nse(m.useMemo(()=>({onDragStart(f){let{active:h}=f;i(t.onDragStart({active:h}))},onDragMove(f){let{active:h,over:p}=f;t.onDragMove&&i(t.onDragMove({active:h,over:p}))},onDragOver(f){let{active:h,over:p}=f;i(t.onDragOver({active:h,over:p}))},onDragEnd(f){let{active:h,over:p}=f;i(t.onDragEnd({active:h,over:p}))},onDragCancel(f){let{active:h,over:p}=f;i(t.onDragCancel({active:h,over:p}))}}),[i,t])),!c)return null;const d=we.createElement(we.Fragment,null,we.createElement(ese,{id:n,value:a.draggable}),we.createElement(tse,{id:l,announcement:o}));return r?Da.createPortal(d,r):d}var mr;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(mr||(mr={}));function ph(){}function lse(e,t){return m.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function cse(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return m.useMemo(()=>[...t].filter(n=>n!=null),[...t])}const ja=Object.freeze({x:0,y:0});function use(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function dse(e,t){const r=hh(e);if(!r)return"0 0";const n={x:(r.x-t.left)/t.width*100,y:(r.y-t.top)/t.height*100};return n.x+"% "+n.y+"%"}function fse(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return r-n}function mse(e,t){let{data:{value:r}}=e,{data:{value:n}}=t;return n-r}function rk(e){let{left:t,top:r,height:n,width:a}=e;return[{x:t,y:r},{x:t+a,y:r},{x:t,y:r+n},{x:t+a,y:r+n}]}function hse(e,t){if(!e||e.length===0)return null;const[r]=e;return t?r[t]:r}const pse=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=rk(t),i=[];for(const o of n){const{id:l}=o,c=r.get(l);if(c){const u=rk(c),d=a.reduce((h,p,g)=>h+use(u[g],p),0),f=Number((d/4).toFixed(4));i.push({id:l,data:{droppableContainer:o,value:f}})}}return i.sort(fse)};function gse(e,t){const r=Math.max(t.top,e.top),n=Math.max(t.left,e.left),a=Math.min(t.left+t.width,e.left+e.width),i=Math.min(t.top+t.height,e.top+e.height),o=a-n,l=i-r;if(n<a&&r<i){const c=t.width*t.height,u=e.width*e.height,d=o*l,f=d/(c+u-d);return Number(f.toFixed(4))}return 0}const vse=e=>{let{collisionRect:t,droppableRects:r,droppableContainers:n}=e;const a=[];for(const i of n){const{id:o}=i,l=r.get(o);if(l){const c=gse(l,t);c>0&&a.push({id:o,data:{droppableContainer:i,value:c}})}}return a.sort(mse)};function xse(e,t,r){return{...e,scaleX:t&&r?t.width/r.width:1,scaleY:t&&r?t.height/r.height:1}}function bT(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ja}function yse(e){return function(r){for(var n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return a.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...r})}}const bse=yse(1);function wT(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function wse(e,t,r){const n=wT(t);if(!n)return e;const{scaleX:a,scaleY:i,x:o,y:l}=n,c=e.left-o-(1-a)*parseFloat(r),u=e.top-l-(1-i)*parseFloat(r.slice(r.indexOf(" ")+1)),d=a?e.width/a:e.width,f=i?e.height/i:e.height;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c}}const jse={ignoreTransform:!1};function oc(e,t){t===void 0&&(t=jse);let r=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:d}=an(e).getComputedStyle(e);u&&(r=wse(r,u,d))}const{top:n,left:a,width:i,height:o,bottom:l,right:c}=r;return{top:n,left:a,width:i,height:o,bottom:l,right:c}}function nk(e){return oc(e,{ignoreTransform:!0})}function _se(e){const t=e.innerWidth,r=e.innerHeight;return{top:0,left:0,right:t,bottom:r,width:t,height:r}}function Nse(e,t){return t===void 0&&(t=an(e).getComputedStyle(e)),t.position==="fixed"}function Sse(e,t){t===void 0&&(t=an(e).getComputedStyle(e));const r=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(a=>{const i=t[a];return typeof i=="string"?r.test(i):!1})}function dw(e,t){const r=[];function n(a){if(t!=null&&r.length>=t||!a)return r;if(uw(a)&&a.scrollingElement!=null&&!r.includes(a.scrollingElement))return r.push(a.scrollingElement),r;if(!jd(a)||vT(a)||r.includes(a))return r;const i=an(e).getComputedStyle(a);return a!==e&&Sse(a,i)&&r.push(a),Nse(a,i)?r:n(a.parentNode)}return e?n(e):r}function jT(e){const[t]=dw(e,1);return t??null}function bg(e){return!Qp||!e?null:ic(e)?e:cw(e)?uw(e)||e===sc(e).scrollingElement?window:jd(e)?e:null:null}function _T(e){return ic(e)?e.scrollX:e.scrollLeft}function NT(e){return ic(e)?e.scrollY:e.scrollTop}function Bx(e){return{x:_T(e),y:NT(e)}}var Sr;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Sr||(Sr={}));function ST(e){return!Qp||!e?!1:e===document.scrollingElement}function kT(e){const t={x:0,y:0},r=ST(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},n={x:e.scrollWidth-r.width,y:e.scrollHeight-r.height},a=e.scrollTop<=t.y,i=e.scrollLeft<=t.x,o=e.scrollTop>=n.y,l=e.scrollLeft>=n.x;return{isTop:a,isLeft:i,isBottom:o,isRight:l,maxScroll:n,minScroll:t}}const kse={x:.2,y:.2};function Cse(e,t,r,n,a){let{top:i,left:o,right:l,bottom:c}=r;n===void 0&&(n=10),a===void 0&&(a=kse);const{isTop:u,isBottom:d,isLeft:f,isRight:h}=kT(e),p={x:0,y:0},g={x:0,y:0},x={height:t.height*a.y,width:t.width*a.x};return!u&&i<=t.top+x.height?(p.y=Sr.Backward,g.y=n*Math.abs((t.top+x.height-i)/x.height)):!d&&c>=t.bottom-x.height&&(p.y=Sr.Forward,g.y=n*Math.abs((t.bottom-x.height-c)/x.height)),!h&&l>=t.right-x.width?(p.x=Sr.Forward,g.x=n*Math.abs((t.right-x.width-l)/x.width)):!f&&o<=t.left+x.width&&(p.x=Sr.Backward,g.x=n*Math.abs((t.left+x.width-o)/x.width)),{direction:p,speed:g}}function Ese(e){if(e===document.scrollingElement){const{innerWidth:i,innerHeight:o}=window;return{top:0,left:0,right:i,bottom:o,width:i,height:o}}const{top:t,left:r,right:n,bottom:a}=e.getBoundingClientRect();return{top:t,left:r,right:n,bottom:a,width:e.clientWidth,height:e.clientHeight}}function CT(e){return e.reduce((t,r)=>jl(t,Bx(r)),ja)}function Pse(e){return e.reduce((t,r)=>t+_T(r),0)}function Ose(e){return e.reduce((t,r)=>t+NT(r),0)}function ET(e,t){if(t===void 0&&(t=oc),!e)return;const{top:r,left:n,bottom:a,right:i}=t(e);jT(e)&&(a<=0||i<=0||r>=window.innerHeight||n>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Ase=[["x",["left","right"],Pse],["y",["top","bottom"],Ose]];class fw{constructor(t,r){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const n=dw(r),a=CT(n);this.rect={...t},this.width=t.width,this.height=t.height;for(const[i,o,l]of Ase)for(const c of o)Object.defineProperty(this,c,{get:()=>{const u=l(n),d=a[i]-u;return this.rect[c]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class tu{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(r=>{var n;return(n=this.target)==null?void 0:n.removeEventListener(...r)})},this.target=t}add(t,r,n){var a;(a=this.target)==null||a.addEventListener(t,r,n),this.listeners.push([t,r,n])}}function Tse(e){const{EventTarget:t}=an(e);return e instanceof t?e:sc(e)}function wg(e,t){const r=Math.abs(e.x),n=Math.abs(e.y);return typeof t=="number"?Math.sqrt(r**2+n**2)>t:"x"in t&&"y"in t?r>t.x&&n>t.y:"x"in t?r>t.x:"y"in t?n>t.y:!1}var Vn;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Vn||(Vn={}));function ak(e){e.preventDefault()}function Mse(e){e.stopPropagation()}var st;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(st||(st={}));const PT={start:[st.Space,st.Enter],cancel:[st.Esc],end:[st.Space,st.Enter,st.Tab]},Dse=(e,t)=>{let{currentCoordinates:r}=t;switch(e.code){case st.Right:return{...r,x:r.x+25};case st.Left:return{...r,x:r.x-25};case st.Down:return{...r,y:r.y+25};case st.Up:return{...r,y:r.y-25}}};class OT{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:r}}=t;this.props=t,this.listeners=new tu(sc(r)),this.windowListeners=new tu(an(r)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Vn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:r}=this.props,n=t.node.current;n&&ET(n),r(ja)}handleKeyDown(t){if(Jp(t)){const{active:r,context:n,options:a}=this.props,{keyboardCodes:i=PT,coordinateGetter:o=Dse,scrollBehavior:l="smooth"}=a,{code:c}=t;if(i.end.includes(c)){this.handleEnd(t);return}if(i.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=n.current,d=u?{x:u.left,y:u.top}:ja;this.referenceCoordinates||(this.referenceCoordinates=d);const f=o(t,{active:r,context:n.current,currentCoordinates:d});if(f){const h=mh(f,d),p={x:0,y:0},{scrollableAncestors:g}=n.current;for(const x of g){const y=t.code,{isTop:v,isRight:b,isLeft:w,isBottom:j,maxScroll:N,minScroll:_}=kT(x),S=Ese(x),C={x:Math.min(y===st.Right?S.right-S.width/2:S.right,Math.max(y===st.Right?S.left:S.left+S.width/2,f.x)),y:Math.min(y===st.Down?S.bottom-S.height/2:S.bottom,Math.max(y===st.Down?S.top:S.top+S.height/2,f.y))},O=y===st.Right&&!b||y===st.Left&&!w,A=y===st.Down&&!j||y===st.Up&&!v;if(O&&C.x!==f.x){const T=x.scrollLeft+h.x,D=y===st.Right&&T<=N.x||y===st.Left&&T>=_.x;if(D&&!h.y){x.scrollTo({left:T,behavior:l});return}D?p.x=x.scrollLeft-T:p.x=y===st.Right?x.scrollLeft-N.x:x.scrollLeft-_.x,p.x&&x.scrollBy({left:-p.x,behavior:l});break}else if(A&&C.y!==f.y){const T=x.scrollTop+h.y,D=y===st.Down&&T<=N.y||y===st.Up&&T>=_.y;if(D&&!h.x){x.scrollTo({top:T,behavior:l});return}D?p.y=x.scrollTop-T:p.y=y===st.Down?x.scrollTop-N.y:x.scrollTop-_.y,p.y&&x.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(t,jl(mh(f,this.referenceCoordinates),p))}}}handleMove(t,r){const{onMove:n}=this.props;t.preventDefault(),n(r)}handleEnd(t){const{onEnd:r}=this.props;t.preventDefault(),this.detach(),r()}handleCancel(t){const{onCancel:r}=this.props;t.preventDefault(),this.detach(),r()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}OT.activators=[{eventName:"onKeyDown",handler:(e,t,r)=>{let{keyboardCodes:n=PT,onActivation:a}=t,{active:i}=r;const{code:o}=e.nativeEvent;if(n.start.includes(o)){const l=i.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),a==null||a({event:e.nativeEvent}),!0)}return!1}}];function ik(e){return!!(e&&"distance"in e)}function sk(e){return!!(e&&"delay"in e)}class mw{constructor(t,r,n){var a;n===void 0&&(n=Tse(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=r;const{event:i}=t,{target:o}=i;this.props=t,this.events=r,this.document=sc(o),this.documentListeners=new tu(this.document),this.listeners=new tu(n),this.windowListeners=new tu(an(o)),this.initialCoordinates=(a=hh(i))!=null?a:ja,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:r,bypassActivationConstraint:n}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Vn.Resize,this.handleCancel),this.windowListeners.add(Vn.DragStart,ak),this.windowListeners.add(Vn.VisibilityChange,this.handleCancel),this.windowListeners.add(Vn.ContextMenu,ak),this.documentListeners.add(Vn.Keydown,this.handleKeydown),r){if(n!=null&&n({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(sk(r)){this.timeoutId=setTimeout(this.handleStart,r.delay),this.handlePending(r);return}if(ik(r)){this.handlePending(r);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,r){const{active:n,onPending:a}=this.props;a(n,t,this.initialCoordinates,r)}handleStart(){const{initialCoordinates:t}=this,{onStart:r}=this.props;t&&(this.activated=!0,this.documentListeners.add(Vn.Click,Mse,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Vn.SelectionChange,this.removeTextSelection),r(t))}handleMove(t){var r;const{activated:n,initialCoordinates:a,props:i}=this,{onMove:o,options:{activationConstraint:l}}=i;if(!a)return;const c=(r=hh(t))!=null?r:ja,u=mh(a,c);if(!n&&l){if(ik(l)){if(l.tolerance!=null&&wg(u,l.tolerance))return this.handleCancel();if(wg(u,l.distance))return this.handleStart()}if(sk(l)&&wg(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),o(c)}handleEnd(){const{onAbort:t,onEnd:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleCancel(){const{onAbort:t,onCancel:r}=this.props;this.detach(),this.activated||t(this.props.active),r()}handleKeydown(t){t.code===st.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const $se={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class hw extends mw{constructor(t){const{event:r}=t,n=sc(r.target);super(t,$se,n)}}hw.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return!r.isPrimary||r.button!==0?!1:(n==null||n({event:r}),!0)}}];const Ise={move:{name:"mousemove"},end:{name:"mouseup"}};var Ux;(function(e){e[e.RightClick=2]="RightClick"})(Ux||(Ux={}));class Lse extends mw{constructor(t){super(t,Ise,sc(t.event.target))}}Lse.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;return r.button===Ux.RightClick?!1:(n==null||n({event:r}),!0)}}];const jg={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Rse extends mw{constructor(t){super(t,jg)}static setup(){return window.addEventListener(jg.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(jg.move.name,t)};function t(){}}}Rse.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:r}=e,{onActivation:n}=t;const{touches:a}=r;return a.length>1?!1:(n==null||n({event:r}),!0)}}];var ru;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(ru||(ru={}));var gh;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(gh||(gh={}));function zse(e){let{acceleration:t,activator:r=ru.Pointer,canScroll:n,draggingRect:a,enabled:i,interval:o=5,order:l=gh.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:d,delta:f,threshold:h}=e;const p=Bse({delta:f,disabled:!i}),[g,x]=Gie(),y=m.useRef({x:0,y:0}),v=m.useRef({x:0,y:0}),b=m.useMemo(()=>{switch(r){case ru.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case ru.DraggableRect:return a}},[r,a,c]),w=m.useRef(null),j=m.useCallback(()=>{const _=w.current;if(!_)return;const S=y.current.x*v.current.x,C=y.current.y*v.current.y;_.scrollBy(S,C)},[]),N=m.useMemo(()=>l===gh.TreeOrder?[...u].reverse():u,[l,u]);m.useEffect(()=>{if(!i||!u.length||!b){x();return}for(const _ of N){if((n==null?void 0:n(_))===!1)continue;const S=u.indexOf(_),C=d[S];if(!C)continue;const{direction:O,speed:A}=Cse(_,C,b,t,h);for(const T of["x","y"])p[T][O[T]]||(A[T]=0,O[T]=0);if(A.x>0||A.y>0){x(),w.current=_,g(j,o),y.current=A,v.current=O;return}}y.current={x:0,y:0},v.current={x:0,y:0},x()},[t,j,n,x,i,o,JSON.stringify(b),JSON.stringify(p),g,u,N,d,JSON.stringify(h)])}const Fse={x:{[Sr.Backward]:!1,[Sr.Forward]:!1},y:{[Sr.Backward]:!1,[Sr.Forward]:!1}};function Bse(e){let{delta:t,disabled:r}=e;const n=fh(t);return _d(a=>{if(r||!n||!a)return Fse;const i={x:Math.sign(t.x-n.x),y:Math.sign(t.y-n.y)};return{x:{[Sr.Backward]:a.x[Sr.Backward]||i.x===-1,[Sr.Forward]:a.x[Sr.Forward]||i.x===1},y:{[Sr.Backward]:a.y[Sr.Backward]||i.y===-1,[Sr.Forward]:a.y[Sr.Forward]||i.y===1}}},[r,t,n])}function Use(e,t){const r=t!=null?e.get(t):void 0,n=r?r.node.current:null;return _d(a=>{var i;return t==null?null:(i=n??a)!=null?i:null},[n,t])}function Wse(e,t){return m.useMemo(()=>e.reduce((r,n)=>{const{sensor:a}=n,i=a.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,n)}));return[...r,...i]},[]),[e,t])}var Fu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Fu||(Fu={}));var Wx;(function(e){e.Optimized="optimized"})(Wx||(Wx={}));const ok=new Map;function Vse(e,t){let{dragging:r,dependencies:n,config:a}=t;const[i,o]=m.useState(null),{frequency:l,measure:c,strategy:u}=a,d=m.useRef(e),f=y(),h=zu(f),p=m.useCallback(function(v){v===void 0&&(v=[]),!h.current&&o(b=>b===null?v:b.concat(v.filter(w=>!b.includes(w))))},[h]),g=m.useRef(null),x=_d(v=>{if(f&&!r)return ok;if(!v||v===ok||d.current!==e||i!=null){const b=new Map;for(let w of e){if(!w)continue;if(i&&i.length>0&&!i.includes(w.id)&&w.rect.current){b.set(w.id,w.rect.current);continue}const j=w.node.current,N=j?new fw(c(j),j):null;w.rect.current=N,N&&b.set(w.id,N)}return b}return v},[e,i,r,f,c]);return m.useEffect(()=>{d.current=e},[e]),m.useEffect(()=>{f||p()},[r,f]),m.useEffect(()=>{i&&i.length>0&&o(null)},[JSON.stringify(i)]),m.useEffect(()=>{f||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},l))},[l,f,p,...n]),{droppableRects:x,measureDroppableContainers:p,measuringScheduled:i!=null};function y(){switch(u){case Fu.Always:return!1;case Fu.BeforeDragging:return r;default:return!r}}}function pw(e,t){return _d(r=>e?r||(typeof t=="function"?t(e):e):null,[t,e])}function qse(e,t){return pw(e,t)}function Hse(e){let{callback:t,disabled:r}=e;const n=Zp(t),a=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(n)},[n,r]);return m.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function e0(e){let{callback:t,disabled:r}=e;const n=Zp(t),a=m.useMemo(()=>{if(r||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(n)},[r]);return m.useEffect(()=>()=>a==null?void 0:a.disconnect(),[a]),a}function Kse(e){return new fw(oc(e),e)}function lk(e,t,r){t===void 0&&(t=Kse);const[n,a]=m.useState(null);function i(){a(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??r)!=null?u:null}const d=t(e);return JSON.stringify(c)===JSON.stringify(d)?c:d})}const o=Hse({callback(c){if(e)for(const u of c){const{type:d,target:f}=u;if(d==="childList"&&f instanceof HTMLElement&&f.contains(e)){i();break}}}}),l=e0({callback:i});return wa(()=>{i(),e?(l==null||l.observe(e),o==null||o.observe(document.body,{childList:!0,subtree:!0})):(l==null||l.disconnect(),o==null||o.disconnect())},[e]),n}function Yse(e){const t=pw(e);return bT(e,t)}const ck=[];function Gse(e){const t=m.useRef(e),r=_d(n=>e?n&&n!==ck&&e&&t.current&&e.parentNode===t.current.parentNode?n:dw(e):ck,[e]);return m.useEffect(()=>{t.current=e},[e]),r}function Xse(e){const[t,r]=m.useState(null),n=m.useRef(e),a=m.useCallback(i=>{const o=bg(i.target);o&&r(l=>l?(l.set(o,Bx(o)),new Map(l)):null)},[]);return m.useEffect(()=>{const i=n.current;if(e!==i){o(i);const l=e.map(c=>{const u=bg(c);return u?(u.addEventListener("scroll",a,{passive:!0}),[u,Bx(u)]):null}).filter(c=>c!=null);r(l.length?new Map(l):null),n.current=e}return()=>{o(e),o(i)};function o(l){l.forEach(c=>{const u=bg(c);u==null||u.removeEventListener("scroll",a)})}},[a,e]),m.useMemo(()=>e.length?t?Array.from(t.values()).reduce((i,o)=>jl(i,o),ja):CT(e):ja,[e,t])}function uk(e,t){t===void 0&&(t=[]);const r=m.useRef(null);return m.useEffect(()=>{r.current=null},t),m.useEffect(()=>{const n=e!==ja;n&&!r.current&&(r.current=e),!n&&r.current&&(r.current=null)},[e]),r.current?mh(e,r.current):ja}function Qse(e){m.useEffect(()=>{if(!Qp)return;const t=e.map(r=>{let{sensor:n}=r;return n.setup==null?void 0:n.setup()});return()=>{for(const r of t)r==null||r()}},e.map(t=>{let{sensor:r}=t;return r}))}function Zse(e,t){return m.useMemo(()=>e.reduce((r,n)=>{let{eventName:a,handler:i}=n;return r[a]=o=>{i(o,t)},r},{}),[e,t])}function AT(e){return m.useMemo(()=>e?_se(e):null,[e])}const dk=[];function Jse(e,t){t===void 0&&(t=oc);const[r]=e,n=AT(r?an(r):null),[a,i]=m.useState(dk);function o(){i(()=>e.length?e.map(c=>ST(c)?n:new fw(t(c),c)):dk)}const l=e0({callback:o});return wa(()=>{l==null||l.disconnect(),o(),e.forEach(c=>l==null?void 0:l.observe(c))},[e]),a}function TT(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return jd(t)?t:e}function eoe(e){let{measure:t}=e;const[r,n]=m.useState(null),a=m.useCallback(u=>{for(const{target:d}of u)if(jd(d)){n(f=>{const h=t(d);return f?{...f,width:h.width,height:h.height}:h});break}},[t]),i=e0({callback:a}),o=m.useCallback(u=>{const d=TT(u);i==null||i.disconnect(),d&&(i==null||i.observe(d)),n(d?t(d):null)},[t,i]),[l,c]=dh(o);return m.useMemo(()=>({nodeRef:l,rect:r,setRef:c}),[r,l,c])}const toe=[{sensor:hw,options:{}},{sensor:OT,options:{}}],roe={current:{}},Rf={draggable:{measure:nk},droppable:{measure:nk,strategy:Fu.WhileDragging,frequency:Wx.Optimized},dragOverlay:{measure:oc}};class nu extends Map{get(t){var r;return t!=null&&(r=super.get(t))!=null?r:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:r}=t;return!r})}getNodeFor(t){var r,n;return(r=(n=this.get(t))==null?void 0:n.node.current)!=null?r:void 0}}const noe={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new nu,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ph},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Rf,measureDroppableContainers:ph,windowRect:null,measuringScheduled:!1},MT={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ph,draggableNodes:new Map,over:null,measureDroppableContainers:ph},Sd=m.createContext(MT),DT=m.createContext(noe);function aoe(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new nu}}}function ioe(e,t){switch(t.type){case mr.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case mr.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case mr.DragEnd:case mr.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mr.RegisterDroppable:{const{element:r}=t,{id:n}=r,a=new nu(e.droppable.containers);return a.set(n,r),{...e,droppable:{...e.droppable,containers:a}}}case mr.SetDroppableDisabled:{const{id:r,key:n,disabled:a}=t,i=e.droppable.containers.get(r);if(!i||n!==i.key)return e;const o=new nu(e.droppable.containers);return o.set(r,{...i,disabled:a}),{...e,droppable:{...e.droppable,containers:o}}}case mr.UnregisterDroppable:{const{id:r,key:n}=t,a=e.droppable.containers.get(r);if(!a||n!==a.key)return e;const i=new nu(e.droppable.containers);return i.delete(r),{...e,droppable:{...e.droppable,containers:i}}}default:return e}}function soe(e){let{disabled:t}=e;const{active:r,activatorEvent:n,draggableNodes:a}=m.useContext(Sd),i=fh(n),o=fh(r==null?void 0:r.id);return m.useEffect(()=>{if(!t&&!n&&i&&o!=null){if(!Jp(i)||document.activeElement===i.target)return;const l=a.get(o);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const d of[c.current,u.current]){if(!d)continue;const f=Zie(d);if(f){f.focus();break}}})}},[n,t,a,o,i]),null}function $T(e,t){let{transform:r,...n}=t;return e!=null&&e.length?e.reduce((a,i)=>i({transform:a,...n}),r):r}function ooe(e){return m.useMemo(()=>({draggable:{...Rf.draggable,...e==null?void 0:e.draggable},droppable:{...Rf.droppable,...e==null?void 0:e.droppable},dragOverlay:{...Rf.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function loe(e){let{activeNode:t,measure:r,initialRect:n,config:a=!0}=e;const i=m.useRef(!1),{x:o,y:l}=typeof a=="boolean"?{x:a,y:a}:a;wa(()=>{if(!o&&!l||!t){i.current=!1;return}if(i.current||!n)return;const u=t==null?void 0:t.node.current;if(!u||u.isConnected===!1)return;const d=r(u),f=bT(d,n);if(o||(f.x=0),l||(f.y=0),i.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){const h=jT(u);h&&h.scrollBy({top:f.y,left:f.x})}},[t,o,l,n,r])}const t0=m.createContext({...ja,scaleX:1,scaleY:1});var qi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(qi||(qi={}));const coe=m.memo(function(t){var r,n,a,i;let{id:o,accessibility:l,autoScroll:c=!0,children:u,sensors:d=toe,collisionDetection:f=vse,measuring:h,modifiers:p,...g}=t;const x=m.useReducer(ioe,void 0,aoe),[y,v]=x,[b,w]=ase(),[j,N]=m.useState(qi.Uninitialized),_=j===qi.Initialized,{draggable:{active:S,nodes:C,translate:O},droppable:{containers:A}}=y,T=S!=null?C.get(S):null,D=m.useRef({initial:null,translated:null}),q=m.useMemo(()=>{var te;return S!=null?{id:S,data:(te=T==null?void 0:T.data)!=null?te:roe,rect:D}:null},[S,T]),re=m.useRef(null),[K,z]=m.useState(null),[P,M]=m.useState(null),L=zu(g,Object.values(g)),G=Nd("DndDescribedBy",o),$=m.useMemo(()=>A.getEnabled(),[A]),U=ooe(h),{droppableRects:E,measureDroppableContainers:Q,measuringScheduled:J}=Vse($,{dragging:_,dependencies:[O.x,O.y],config:U.droppable}),de=Use(C,S),ae=m.useMemo(()=>P?hh(P):null,[P]),pe=B(),k=qse(de,U.draggable.measure);loe({activeNode:S!=null?C.get(S):null,config:pe.layoutShiftCompensation,initialRect:k,measure:U.draggable.measure});const H=lk(de,U.draggable.measure,k),ne=lk(de?de.parentElement:null),Y=m.useRef({activatorEvent:null,active:null,activeNode:de,collisionRect:null,collisions:null,droppableRects:E,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:A,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),me=A.getNodeFor((r=Y.current.over)==null?void 0:r.id),ee=eoe({measure:U.dragOverlay.measure}),he=(n=ee.nodeRef.current)!=null?n:de,je=_?(a=ee.rect)!=null?a:H:null,Ae=!!(ee.nodeRef.current&&ee.rect),Ue=Yse(Ae?null:H),Pe=AT(he?an(he):null),Je=Gse(_?me??de:null),Ge=Jse(Je),mt=$T(p,{transform:{x:O.x-Ue.x,y:O.y-Ue.y,scaleX:1,scaleY:1},activatorEvent:P,active:q,activeNodeRect:H,containerNodeRect:ne,draggingNodeRect:je,over:Y.current.over,overlayNodeRect:ee.rect,scrollableAncestors:Je,scrollableAncestorRects:Ge,windowRect:Pe}),Oe=ae?jl(ae,O):null,F=Xse(Je),oe=uk(F),be=uk(F,[H]),Te=jl(mt,oe),Me=je?bse(je,mt):null,Ye=q&&Me?f({active:q,collisionRect:Me,droppableRects:E,droppableContainers:$,pointerCoordinates:Oe}):null,Ct=hse(Ye,"id"),[ht,xt]=m.useState(null),Z=Ae?mt:jl(mt,be),ie=xse(Z,(i=ht==null?void 0:ht.rect)!=null?i:null,H),fe=m.useRef(null),De=m.useCallback((te,ce)=>{let{sensor:ye,options:Ie}=ce;if(re.current==null)return;const Xe=C.get(re.current);if(!Xe)return;const Ke=te.nativeEvent,Le=new ye({active:re.current,activeNode:Xe,event:Ke,options:Ie,context:Y,onAbort(Qe){if(!C.get(Qe))return;const{onDragAbort:Or}=L.current,pt={id:Qe};Or==null||Or(pt),b({type:"onDragAbort",event:pt})},onPending(Qe,sr,Or,pt){if(!C.get(Qe))return;const{onDragPending:Va}=L.current,Ln={id:Qe,constraint:sr,initialCoordinates:Or,offset:pt};Va==null||Va(Ln),b({type:"onDragPending",event:Ln})},onStart(Qe){const sr=re.current;if(sr==null)return;const Or=C.get(sr);if(!Or)return;const{onDragStart:pt}=L.current,Kr={activatorEvent:Ke,active:{id:sr,data:Or.data,rect:D}};Da.unstable_batchedUpdates(()=>{pt==null||pt(Kr),N(qi.Initializing),v({type:mr.DragStart,initialCoordinates:Qe,active:sr}),b({type:"onDragStart",event:Kr}),z(fe.current),M(Ke)})},onMove(Qe){v({type:mr.DragMove,coordinates:Qe})},onEnd:jt(mr.DragEnd),onCancel:jt(mr.DragCancel)});fe.current=Le;function jt(Qe){return async function(){const{active:Or,collisions:pt,over:Kr,scrollAdjustedTranslate:Va}=Y.current;let Ln=null;if(Or&&Va){const{cancelDrop:ia}=L.current;Ln={activatorEvent:Ke,active:Or,collisions:pt,delta:Va,over:Kr},Qe===mr.DragEnd&&typeof ia=="function"&&await Promise.resolve(ia(Ln))&&(Qe=mr.DragCancel)}re.current=null,Da.unstable_batchedUpdates(()=>{v({type:Qe}),N(qi.Uninitialized),xt(null),z(null),M(null),fe.current=null;const ia=Qe===mr.DragEnd?"onDragEnd":"onDragCancel";if(Ln){const rt=L.current[ia];rt==null||rt(Ln),b({type:ia,event:Ln})}})}}},[C]),$e=m.useCallback((te,ce)=>(ye,Ie)=>{const Xe=ye.nativeEvent,Ke=C.get(Ie);if(re.current!==null||!Ke||Xe.dndKit||Xe.defaultPrevented)return;const Le={active:Ke};te(ye,ce.options,Le)===!0&&(Xe.dndKit={capturedBy:ce.sensor},re.current=Ie,De(ye,ce))},[C,De]),We=Wse(d,$e);Qse(d),wa(()=>{H&&j===qi.Initializing&&N(qi.Initialized)},[H,j]),m.useEffect(()=>{const{onDragMove:te}=L.current,{active:ce,activatorEvent:ye,collisions:Ie,over:Xe}=Y.current;if(!ce||!ye)return;const Ke={active:ce,activatorEvent:ye,collisions:Ie,delta:{x:Te.x,y:Te.y},over:Xe};Da.unstable_batchedUpdates(()=>{te==null||te(Ke),b({type:"onDragMove",event:Ke})})},[Te.x,Te.y]),m.useEffect(()=>{const{active:te,activatorEvent:ce,collisions:ye,droppableContainers:Ie,scrollAdjustedTranslate:Xe}=Y.current;if(!te||re.current==null||!ce||!Xe)return;const{onDragOver:Ke}=L.current,Le=Ie.get(Ct),jt=Le&&Le.rect.current?{id:Le.id,rect:Le.rect.current,data:Le.data,disabled:Le.disabled}:null,Qe={active:te,activatorEvent:ce,collisions:ye,delta:{x:Xe.x,y:Xe.y},over:jt};Da.unstable_batchedUpdates(()=>{xt(jt),Ke==null||Ke(Qe),b({type:"onDragOver",event:Qe})})},[Ct]),wa(()=>{Y.current={activatorEvent:P,active:q,activeNode:de,collisionRect:Me,collisions:Ye,droppableRects:E,draggableNodes:C,draggingNode:he,draggingNodeRect:je,droppableContainers:A,over:ht,scrollableAncestors:Je,scrollAdjustedTranslate:Te},D.current={initial:je,translated:Me}},[q,de,Ye,Me,C,he,je,E,A,ht,Je,Te]),zse({...pe,delta:O,draggingRect:Me,pointerCoordinates:Oe,scrollableAncestors:Je,scrollableAncestorRects:Ge});const ke=m.useMemo(()=>({active:q,activeNode:de,activeNodeRect:H,activatorEvent:P,collisions:Ye,containerNodeRect:ne,dragOverlay:ee,draggableNodes:C,droppableContainers:A,droppableRects:E,over:ht,measureDroppableContainers:Q,scrollableAncestors:Je,scrollableAncestorRects:Ge,measuringConfiguration:U,measuringScheduled:J,windowRect:Pe}),[q,de,H,P,Ye,ne,ee,C,A,E,ht,Q,Je,Ge,U,J,Pe]),ue=m.useMemo(()=>({activatorEvent:P,activators:We,active:q,activeNodeRect:H,ariaDescribedById:{draggable:G},dispatch:v,draggableNodes:C,over:ht,measureDroppableContainers:Q}),[P,We,q,H,v,G,C,ht,Q]);return we.createElement(yT.Provider,{value:w},we.createElement(Sd.Provider,{value:ue},we.createElement(DT.Provider,{value:ke},we.createElement(t0.Provider,{value:ie},u)),we.createElement(soe,{disabled:(l==null?void 0:l.restoreFocus)===!1})),we.createElement(ose,{...l,hiddenTextDescribedById:G}));function B(){const te=(K==null?void 0:K.autoScrollEnabled)===!1,ce=typeof c=="object"?c.enabled===!1:c===!1,ye=_&&!te&&!ce;return typeof c=="object"?{...c,enabled:ye}:{enabled:ye}}}),uoe=m.createContext(null),fk="button",doe="Draggable";function foe(e){let{id:t,data:r,disabled:n=!1,attributes:a}=e;const i=Nd(doe),{activators:o,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:d,draggableNodes:f,over:h}=m.useContext(Sd),{role:p=fk,roleDescription:g="draggable",tabIndex:x=0}=a??{},y=(c==null?void 0:c.id)===t,v=m.useContext(y?t0:uoe),[b,w]=dh(),[j,N]=dh(),_=Zse(o,t),S=zu(r);wa(()=>(f.set(t,{id:t,key:i,node:b,activatorNode:j,data:S}),()=>{const O=f.get(t);O&&O.key===i&&f.delete(t)}),[f,t]);const C=m.useMemo(()=>({role:p,tabIndex:x,"aria-disabled":n,"aria-pressed":y&&p===fk?!0:void 0,"aria-roledescription":g,"aria-describedby":d.draggable}),[n,p,x,y,g,d.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:C,isDragging:y,listeners:n?void 0:_,node:b,over:h,setNodeRef:w,setActivatorNodeRef:N,transform:v}}function IT(){return m.useContext(DT)}const moe="Droppable",hoe={timeout:25};function LT(e){let{data:t,disabled:r=!1,id:n,resizeObserverConfig:a}=e;const i=Nd(moe),{active:o,dispatch:l,over:c,measureDroppableContainers:u}=m.useContext(Sd),d=m.useRef({disabled:r}),f=m.useRef(!1),h=m.useRef(null),p=m.useRef(null),{disabled:g,updateMeasurementsFor:x,timeout:y}={...hoe,...a},v=zu(x??n),b=m.useCallback(()=>{if(!f.current){f.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),p.current=null},y)},[y]),w=e0({callback:b,disabled:g||!o}),j=m.useCallback((C,O)=>{w&&(O&&(w.unobserve(O),f.current=!1),C&&w.observe(C))},[w]),[N,_]=dh(j),S=zu(t);return m.useEffect(()=>{!w||!N.current||(w.disconnect(),f.current=!1,w.observe(N.current))},[N,w]),m.useEffect(()=>(l({type:mr.RegisterDroppable,element:{id:n,key:i,disabled:r,node:N,rect:h,data:S}}),()=>l({type:mr.UnregisterDroppable,key:i,id:n})),[n]),m.useEffect(()=>{r!==d.current.disabled&&(l({type:mr.SetDroppableDisabled,id:n,key:i,disabled:r}),d.current.disabled=r)},[n,i,r,l]),{active:o,rect:h,isOver:(c==null?void 0:c.id)===n,node:N,over:c,setNodeRef:_}}function poe(e){let{animation:t,children:r}=e;const[n,a]=m.useState(null),[i,o]=m.useState(null),l=fh(r);return!r&&!n&&l&&a(l),wa(()=>{if(!i)return;const c=n==null?void 0:n.key,u=n==null?void 0:n.props.id;if(c==null||u==null){a(null);return}Promise.resolve(t(u,i)).then(()=>{a(null)})},[t,n,i]),we.createElement(we.Fragment,null,r,n?m.cloneElement(n,{ref:o}):null)}const goe={x:0,y:0,scaleX:1,scaleY:1};function voe(e){let{children:t}=e;return we.createElement(Sd.Provider,{value:MT},we.createElement(t0.Provider,{value:goe},t))}const xoe={position:"fixed",touchAction:"none"},yoe=e=>Jp(e)?"transform 250ms ease":void 0,boe=m.forwardRef((e,t)=>{let{as:r,activatorEvent:n,adjustScale:a,children:i,className:o,rect:l,style:c,transform:u,transition:d=yoe}=e;if(!l)return null;const f=a?u:{...u,scaleX:1,scaleY:1},h={...xoe,width:l.width,height:l.height,top:l.top,left:l.left,transform:_s.Transform.toString(f),transformOrigin:a&&n?dse(n,l):void 0,transition:typeof d=="function"?d(n):d,...c};return we.createElement(r,{className:o,style:h,ref:t},i)}),woe=e=>t=>{let{active:r,dragOverlay:n}=t;const a={},{styles:i,className:o}=e;if(i!=null&&i.active)for(const[l,c]of Object.entries(i.active))c!==void 0&&(a[l]=r.node.style.getPropertyValue(l),r.node.style.setProperty(l,c));if(i!=null&&i.dragOverlay)for(const[l,c]of Object.entries(i.dragOverlay))c!==void 0&&n.node.style.setProperty(l,c);return o!=null&&o.active&&r.node.classList.add(o.active),o!=null&&o.dragOverlay&&n.node.classList.add(o.dragOverlay),function(){for(const[c,u]of Object.entries(a))r.node.style.setProperty(c,u);o!=null&&o.active&&r.node.classList.remove(o.active)}},joe=e=>{let{transform:{initial:t,final:r}}=e;return[{transform:_s.Transform.toString(t)},{transform:_s.Transform.toString(r)}]},_oe={duration:250,easing:"ease",keyframes:joe,sideEffects:woe({styles:{active:{opacity:"0"}}})};function Noe(e){let{config:t,draggableNodes:r,droppableContainers:n,measuringConfiguration:a}=e;return Zp((i,o)=>{if(t===null)return;const l=r.get(i);if(!l)return;const c=l.node.current;if(!c)return;const u=TT(o);if(!u)return;const{transform:d}=an(o).getComputedStyle(o),f=wT(d);if(!f)return;const h=typeof t=="function"?t:Soe(t);return ET(c,a.draggable.measure),h({active:{id:i,data:l.data,node:c,rect:a.draggable.measure(c)},draggableNodes:r,dragOverlay:{node:o,rect:a.dragOverlay.measure(u)},droppableContainers:n,measuringConfiguration:a,transform:f})})}function Soe(e){const{duration:t,easing:r,sideEffects:n,keyframes:a}={..._oe,...e};return i=>{let{active:o,dragOverlay:l,transform:c,...u}=i;if(!t)return;const d={x:l.rect.left-o.rect.left,y:l.rect.top-o.rect.top},f={scaleX:c.scaleX!==1?o.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?o.rect.height*c.scaleY/l.rect.height:1},h={x:c.x-d.x,y:c.y-d.y,...f},p=a({...u,active:o,dragOverlay:l,transform:{initial:c,final:h}}),[g]=p,x=p[p.length-1];if(JSON.stringify(g)===JSON.stringify(x))return;const y=n==null?void 0:n({active:o,dragOverlay:l,...u}),v=l.node.animate(p,{duration:t,easing:r,fill:"forwards"});return new Promise(b=>{v.onfinish=()=>{y==null||y(),b()}})}}let mk=0;function koe(e){return m.useMemo(()=>{if(e!=null)return mk++,mk},[e])}const Coe=we.memo(e=>{let{adjustScale:t=!1,children:r,dropAnimation:n,style:a,transition:i,modifiers:o,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:p,draggableNodes:g,droppableContainers:x,dragOverlay:y,over:v,measuringConfiguration:b,scrollableAncestors:w,scrollableAncestorRects:j,windowRect:N}=IT(),_=m.useContext(t0),S=koe(f==null?void 0:f.id),C=$T(o,{activatorEvent:d,active:f,activeNodeRect:h,containerNodeRect:p,draggingNodeRect:y.rect,over:v,overlayNodeRect:y.rect,scrollableAncestors:w,scrollableAncestorRects:j,transform:_,windowRect:N}),O=pw(h),A=Noe({config:n,draggableNodes:g,droppableContainers:x,measuringConfiguration:b}),T=O?y.setRef:void 0;return we.createElement(voe,null,we.createElement(poe,{animation:A},f&&S?we.createElement(boe,{key:S,id:f.id,ref:T,as:l,activatorEvent:d,adjustScale:t,className:c,transition:i,rect:O,style:{zIndex:u,...a},transform:C},r):null))});function RT(e,t,r){const n=e.slice();return n.splice(r<0?n.length+r:r,0,n.splice(t,1)[0]),n}function Eoe(e,t){return e.reduce((r,n,a)=>{const i=t.get(n);return i&&(r[a]=i),r},Array(e.length))}function gf(e){return e!==null&&e>=0}function Poe(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function Ooe(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const zT=e=>{let{rects:t,activeIndex:r,overIndex:n,index:a}=e;const i=RT(t,n,r),o=t[a],l=i[a];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},vf={scaleX:1,scaleY:1},Aoe=e=>{var t;let{activeIndex:r,activeNodeRect:n,index:a,rects:i,overIndex:o}=e;const l=(t=i[r])!=null?t:n;if(!l)return null;if(a===r){const u=i[o];return u?{x:0,y:r<o?u.top+u.height-(l.top+l.height):u.top-l.top,...vf}:null}const c=Toe(i,a,r);return a>r&&a<=o?{x:0,y:-l.height-c,...vf}:a<r&&a>=o?{x:0,y:l.height+c,...vf}:{x:0,y:0,...vf}};function Toe(e,t,r){const n=e[t],a=e[t-1],i=e[t+1];return n?r<t?a?n.top-(a.top+a.height):i?i.top-(n.top+n.height):0:i?i.top-(n.top+n.height):a?n.top-(a.top+a.height):0:0}const FT="Sortable",BT=we.createContext({activeIndex:-1,containerId:FT,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:zT,disabled:{draggable:!1,droppable:!1}});function Moe(e){let{children:t,id:r,items:n,strategy:a=zT,disabled:i=!1}=e;const{active:o,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:d}=IT(),f=Nd(FT,r),h=l.rect!==null,p=m.useMemo(()=>n.map(_=>typeof _=="object"&&"id"in _?_.id:_),[n]),g=o!=null,x=o?p.indexOf(o.id):-1,y=u?p.indexOf(u.id):-1,v=m.useRef(p),b=!Poe(p,v.current),w=y!==-1&&x===-1||b,j=Ooe(i);wa(()=>{b&&g&&d(p)},[b,p,g,d]),m.useEffect(()=>{v.current=p},[p]);const N=m.useMemo(()=>({activeIndex:x,containerId:f,disabled:j,disableTransforms:w,items:p,overIndex:y,useDragOverlay:h,sortedRects:Eoe(p,c),strategy:a}),[x,f,j.draggable,j.droppable,w,p,y,c,h,a]);return we.createElement(BT.Provider,{value:N},t)}const Doe=e=>{let{id:t,items:r,activeIndex:n,overIndex:a}=e;return RT(r,n,a).indexOf(t)},$oe=e=>{let{containerId:t,isSorting:r,wasDragging:n,index:a,items:i,newIndex:o,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!n||l!==i&&a===o?!1:r?!0:o!==a&&t===c},Ioe={duration:200,easing:"ease"},UT="transform",Loe=_s.Transition.toString({property:UT,duration:0,easing:"linear"}),Roe={roleDescription:"sortable"};function zoe(e){let{disabled:t,index:r,node:n,rect:a}=e;const[i,o]=m.useState(null),l=m.useRef(r);return wa(()=>{if(!t&&r!==l.current&&n.current){const c=a.current;if(c){const u=oc(n.current,{ignoreTransform:!0}),d={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(d.x||d.y)&&o(d)}}r!==l.current&&(l.current=r)},[t,r,n,a]),m.useEffect(()=>{i&&o(null)},[i]),i}function Foe(e){let{animateLayoutChanges:t=$oe,attributes:r,disabled:n,data:a,getNewIndex:i=Doe,id:o,strategy:l,resizeObserverConfig:c,transition:u=Ioe}=e;const{items:d,containerId:f,activeIndex:h,disabled:p,disableTransforms:g,sortedRects:x,overIndex:y,useDragOverlay:v,strategy:b}=m.useContext(BT),w=Boe(n,p),j=d.indexOf(o),N=m.useMemo(()=>({sortable:{containerId:f,index:j,items:d},...a}),[f,a,j,d]),_=m.useMemo(()=>d.slice(d.indexOf(o)),[d,o]),{rect:S,node:C,isOver:O,setNodeRef:A}=LT({id:o,data:N,disabled:w.droppable,resizeObserverConfig:{updateMeasurementsFor:_,...c}}),{active:T,activatorEvent:D,activeNodeRect:q,attributes:re,setNodeRef:K,listeners:z,isDragging:P,over:M,setActivatorNodeRef:L,transform:G}=foe({id:o,data:N,attributes:{...Roe,...r},disabled:w.draggable}),$=Yie(A,K),U=!!T,E=U&&!g&&gf(h)&&gf(y),Q=!v&&P,J=Q&&E?G:null,ae=E?J??(l??b)({rects:x,activeNodeRect:q,activeIndex:h,overIndex:y,index:j}):null,pe=gf(h)&&gf(y)?i({id:o,items:d,activeIndex:h,overIndex:y}):j,k=T==null?void 0:T.id,H=m.useRef({activeId:k,items:d,newIndex:pe,containerId:f}),ne=d!==H.current.items,Y=t({active:T,containerId:f,isDragging:P,isSorting:U,id:o,index:j,items:d,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:u,wasDragging:H.current.activeId!=null}),me=zoe({disabled:!Y,index:j,node:C,rect:S});return m.useEffect(()=>{U&&H.current.newIndex!==pe&&(H.current.newIndex=pe),f!==H.current.containerId&&(H.current.containerId=f),d!==H.current.items&&(H.current.items=d)},[U,pe,f,d]),m.useEffect(()=>{if(k===H.current.activeId)return;if(k!=null&&H.current.activeId==null){H.current.activeId=k;return}const he=setTimeout(()=>{H.current.activeId=k},50);return()=>clearTimeout(he)},[k]),{active:T,activeIndex:h,attributes:re,data:N,rect:S,index:j,newIndex:pe,items:d,isOver:O,isSorting:U,isDragging:P,listeners:z,node:C,overIndex:y,over:M,setNodeRef:$,setActivatorNodeRef:L,setDroppableNodeRef:A,setDraggableNodeRef:K,transform:me??ae,transition:ee()};function ee(){if(me||ne&&H.current.newIndex===j)return Loe;if(!(Q&&!Jp(D)||!u)&&(U||Y))return _s.Transition.toString({...u,property:UT})}}function Boe(e,t){var r,n;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(r=e==null?void 0:e.draggable)!=null?r:t.draggable,droppable:(n=e==null?void 0:e.droppable)!=null?n:t.droppable}}st.Down,st.Right,st.Up,st.Left;function Uoe(e){const r=e.replace(/\D/g,"").slice(0,13);if(r.length<=2)return`+${r}`;if(r.length<=4)return`+${r.slice(0,2)}(${r.slice(2)}`;if(r.length<=9)return`+${r.slice(0,2)}(${r.slice(2,4)})${r.slice(4)}`;{const n=r.slice(4);if(n.length<=4)return`+${r.slice(0,2)}(${r.slice(2,4)})${n}`;{const a=n.length===9?5:4;return`+${r.slice(0,2)}(${r.slice(2,4)})${n.slice(0,a)}-${n.slice(a)}`}}}const oa={em_contato:{label:"Em Contato",color:"text-blue-700",bgColor:"bg-blue-50",borderColor:"border-blue-300"},negociacao:{label:"Negociao",color:"text-yellow-700",bgColor:"bg-yellow-50",borderColor:"border-yellow-300"},aguardando_resposta:{label:"Pr-Encontro",color:"text-purple-700",bgColor:"bg-purple-50",borderColor:"border-purple-300"},fechado_ganho:{label:"Fechado Ganho",color:"text-green-700",bgColor:"bg-green-50",borderColor:"border-green-300"},fechado_perdido:{label:"Fechado Perdido",color:"text-red-700",bgColor:"bg-red-50",borderColor:"border-red-300"}};function Woe({lead:e,config:t,onOpen:r,onWhatsApp:n,formatCurrency:a,formatPeriodo:i}){const{attributes:o,listeners:l,setNodeRef:c,transform:u,transition:d,isDragging:f}=Foe({id:e.id}),h={transform:_s.Transform.toString(u),transition:d,opacity:f?.5:1};return s.jsx("div",{ref:c,style:h,...o,...l,className:`${t.bgColor} border ${t.borderColor} rounded-lg p-3 cursor-move hover:shadow-lg transition-all overflow-hidden ${f?"shadow-2xl ring-2 ring-purple-400":""}`,children:s.jsxs("div",{onClick:p=>{p.stopPropagation(),r(e)},children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-900 mb-1.5 truncate",title:e.nome,children:e.nome}),e.telefone&&s.jsxs("div",{className:"flex items-center gap-1.5 mb-1 min-w-0",children:[s.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1 truncate flex-shrink",children:[s.jsx(Lu,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:e.telefone})]}),s.jsx("button",{onClick:p=>{p.stopPropagation(),n(e.telefone)},className:"text-green-600 hover:text-green-700 transition-colors flex-shrink-0",title:"Abrir WhatsApp",children:s.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})})})]}),e.valor_orcamento&&s.jsx("p",{className:`text-sm font-bold ${t.color} mt-1.5 truncate`,children:a(e.valor_orcamento)}),(e.periodo_inicio||e.periodo_fim)&&s.jsxs("p",{className:"text-xs text-gray-500 mt-1.5 flex items-center gap-1 truncate",children:[s.jsx(Do,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:i(e.periodo_inicio,e.periodo_fim)})]})]})})}function Voe({status:e,children:t,isActive:r}){const{setNodeRef:n}=LT({id:e});return s.jsx("div",{ref:n,className:`space-y-2 flex-1 min-h-[300px] rounded-md p-2 transition-all ${r?"bg-blue-50/50 ring-1 ring-blue-300":"bg-gray-50/30"}`,children:t})}function qoe(){const[e,t]=m.useState([]),[r,n]=m.useState(!0),[a,i]=m.useState(!1),[o,l]=m.useState(!1),[c,u]=m.useState(null),[d,f]=m.useState(null),[h,p]=m.useState(null),[g,x]=m.useState(null),y=cse(lse(hw,{activationConstraint:{distance:8}})),[v,b]=m.useState({nome:"",telefone:"",endereco:"",periodo_inicio:"",periodo_fim:"",valor_orcamento:"",status:"em_contato",observacoes:"",motivo_perda:""}),[w,j]=m.useState("em_contato"),[N,_]=m.useState(!1),[S,C]=m.useState([]),[O,A]=m.useState(!1),[T,D]=m.useState(!1),[q,re]=m.useState(null),[K,z]=m.useState(!1),[P,M]=m.useState(null),[L,G]=m.useState(""),[$,U]=m.useState(!1),[E,Q]=m.useState(null),[J,de]=m.useState(null),[ae,pe]=m.useState(!1),[k,H]=m.useState([]),[ne,Y]=m.useState({});m.useEffect(()=>{ee(),me()},[]);const me=async()=>{try{const{data:B,error:te}=await W.from("user_profiles").select("user_id, full_name, avatar_url").eq("is_active",!0).order("full_name");if(te)throw te;const ce=(B||[]).map(Ie=>({id:Ie.user_id,full_name:Ie.full_name,avatar_url:Ie.avatar_url}));H(ce);const ye={};ce.forEach(Ie=>{ye[Ie.id]={full_name:Ie.full_name,avatar_url:Ie.avatar_url}}),Y(ye)}catch(B){console.error("Erro ao carregar usurios:",B)}},ee=async()=>{try{n(!0);const{data:B,error:te}=await W.from("leads").select("*").order("created_at",{ascending:!1});if(te)throw te;const ce=(B||[]).filter(ye=>!["novo","em_contato","negociacao","aguardando_resposta","fechado_ganho","fechado_perdido"].includes(ye.status));if(ce.length>0){console.warn("Leads com status invlido encontrados:",ce),X.error(`${ce.length} lead(s) com status invlido. Corrigindo para "em_contato"...`);for(const Ie of ce)await W.from("leads").update({status:"em_contato"}).eq("id",Ie.id);const{data:ye}=await W.from("leads").select("*").order("created_at",{ascending:!1});t(ye||[])}else t(B||[])}catch(B){console.error("Erro ao buscar leads:",B),X.error("Erro ao carregar leads")}finally{n(!1)}},he=async B=>{try{A(!0);const{data:te,error:ce}=await W.from("visits").select("*").eq("lead_id",B).eq("tipo_encontro","pre_encontro").order("data",{ascending:!0}).order("horario",{ascending:!0});if(ce)throw ce;C(te||[])}catch(te){console.error("Erro ao buscar pr-encontros:",te),X.error("Erro ao carregar pr-encontros")}finally{A(!1)}},je=async B=>{if(confirm("Deseja realmente cancelar este pr-encontro?"))try{const{error:te}=await W.from("visits").delete().eq("id",B);if(te)throw te;X.success("Pr-encontro cancelado"),c&&he(c.id)}catch(te){console.error("Erro ao cancelar pr-encontro:",te),X.error("Erro ao cancelar pr-encontro")}},Ae=B=>{Q(B.id),de({...B})},Ue=()=>{Q(null),de(null)},Pe=async()=>{if(!(!J||!E)){if(!J.data){X.error("Data  obrigatria");return}if(!J.horario){X.error("Horrio  obrigatrio");return}pe(!0);try{const{error:B}=await W.from("visits").update({data:J.data,horario:J.horario,duracao_minutos:J.duracao_minutos||30,status:J.status,assigned_user_id:J.assigned_user_id||null,observacoes:J.observacoes||null}).eq("id",E);if(B)throw B;X.success("Pr-encontro atualizado com sucesso!"),c&&await he(c.id),Q(null),de(null)}catch(B){console.error("Erro ao atualizar pr-encontro:",B),X.error("Erro ao atualizar pr-encontro")}finally{pe(!1)}}},Je=(B,te)=>{J&&de({...J,[B]:te})},Ge=B=>{const{active:te}=B,ce=e.find(ye=>ye.id===te.id);p(ce||null)},mt=B=>{const{over:te}=B;if(!te){x(null);return}if(["em_contato","negociacao","aguardando_resposta","fechado_ganho","fechado_perdido"].includes(te.id))x(te.id);else{const ye=e.find(Ie=>Ie.id===te.id);ye&&x(ye.status)}},Oe=()=>{p(null),x(null)},F=async B=>{const{active:te,over:ce}=B;if(p(null),x(null),!ce)return;const ye=te.id;let Ie;if(["em_contato","negociacao","aguardando_resposta","fechado_ganho","fechado_perdido"].includes(ce.id))Ie=ce.id;else{const Le=e.find(jt=>jt.id===ce.id);if(!Le)return;Ie=Le.status}const Ke=e.find(Le=>Le.id===ye);if(!(!Ke||Ke.status===Ie)){if(Ie==="fechado_perdido"){M(Ke),z(!0);return}if(Ie==="fechado_ganho"){re(Ke),D(!0);try{const{error:Le}=await W.from("leads").update({status:Ie}).eq("id",ye);if(Le)throw Le;t(e.map(jt=>jt.id===ye?{...jt,status:Ie}:jt)),X.success('Lead movido para "Fechado Ganho"')}catch(Le){console.error("Erro ao atualizar status:",Le),X.error("Erro ao mover lead"),ee()}return}try{const{error:Le}=await W.from("leads").update({status:Ie}).eq("id",ye);if(Le)throw Le;t(e.map(jt=>jt.id===ye?{...jt,status:Ie}:jt)),X.success(`Lead movido para "${oa[Ie].label}"`)}catch(Le){console.error("Erro ao atualizar status:",Le),X.error("Erro ao mover lead"),ee()}}},oe=async(B,te)=>{if(q)try{const{error:ce}=await W.from("clients").insert({nome:q.nome,telefone:q.telefone,endereco_completo:q.endereco||"",veterinario_confianca:"No informado",valor_diaria:B,valor_duas_visitas:te,observacoes:q.observacoes||null,notas:q.observacoes||null}).select().single();if(ce)throw ce;X.success(`Lead "${q.nome}" convertido em cliente com sucesso! `),D(!1),re(null),setTimeout(()=>{X.success("Cliente criado! Voc pode encontr-lo na pgina de Clientes.",{duration:4e3})},1e3)}catch(ce){console.error("Erro ao converter lead em cliente:",ce),X.error("Erro ao converter lead em cliente. Tente novamente.")}},be=async()=>{if(!P||!L.trim()){X.error("Por favor, informe o motivo da perda da lead");return}U(!0);try{const{error:B}=await W.from("leads").update({status:"fechado_perdido",motivo_perda:L.trim()}).eq("id",P.id);if(B)throw B;t(e.map(te=>te.id===P.id?{...te,status:"fechado_perdido",motivo_perda:L.trim()}:te)),X.success('Lead marcada como "Fechado Perdido"'),z(!1),M(null),G("")}catch(B){console.error("Erro ao marcar lead como perdida:",B),X.error("Erro ao atualizar status da lead")}finally{U(!1)}},Te=async B=>{B.preventDefault();try{const te={nome:v.nome,telefone:v.telefone||null,endereco:v.endereco||null,periodo_inicio:v.periodo_inicio||null,periodo_fim:v.periodo_fim||null,valor_orcamento:v.valor_orcamento?parseFloat(v.valor_orcamento):null,status:v.status,observacoes:v.observacoes||null,motivo_perda:v.motivo_perda||null};if(d){const{error:ce}=await W.from("leads").update(te).eq("id",d.id);if(ce)throw ce;X.success("Lead atualizado com sucesso!")}else{const{error:ce}=await W.from("leads").insert([te]);if(ce)throw ce;X.success("Lead cadastrado com sucesso!")}xt(),ee()}catch(te){console.error("Erro ao salvar lead:",te),X.error("Erro ao salvar lead")}},Me=async B=>{if(confirm("Tem certeza que deseja excluir este lead?"))try{const{error:te}=await W.from("leads").delete().eq("id",B);if(te)throw te;X.success("Lead excludo com sucesso!"),ee(),l(!1)}catch(te){console.error("Erro ao excluir lead:",te),X.error("Erro ao excluir lead")}},Ye=B=>{var te;f(B),b({nome:B.nome,telefone:B.telefone||"",endereco:B.endereco||"",periodo_inicio:B.periodo_inicio||"",periodo_fim:B.periodo_fim||"",valor_orcamento:((te=B.valor_orcamento)==null?void 0:te.toString())||"",status:B.status,observacoes:B.observacoes||"",motivo_perda:B.motivo_perda||""}),i(!0),l(!1)},Ct=async()=>{if(c){if(w==="fechado_perdido"&&c.status!=="fechado_perdido"){M(c),z(!0),l(!1);return}if(w==="fechado_ganho"&&c.status!=="fechado_ganho"){re(c),D(!0);try{const{error:B}=await W.from("leads").update({status:w}).eq("id",c.id);if(B)throw B;X.success('Lead movido para "Fechado Ganho"'),ee(),l(!1)}catch(B){console.error("Erro ao atualizar status:",B),X.error("Erro ao atualizar status")}return}try{const{error:B}=await W.from("leads").update({status:w}).eq("id",c.id);if(B)throw B;X.success("Status atualizado!"),ee(),l(!1)}catch(B){console.error("Erro ao atualizar status:",B),X.error("Erro ao atualizar status")}}},ht=B=>{u(B),j(B.status),l(!0),he(B.id)},xt=()=>{b({nome:"",telefone:"",endereco:"",periodo_inicio:"",periodo_fim:"",valor_orcamento:"",status:"em_contato",observacoes:"",motivo_perda:""}),f(null),i(!1)},Z=B=>e.filter(te=>te.status===B),ie=B=>B?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(B):"No informado",fe=B=>B?new Date(B+"T00:00:00").toLocaleDateString("pt-BR"):"No informada",De=(B,te)=>!B&&!te?"No informado":B&&!te?`A partir de ${fe(B)}`:!B&&te?`At ${fe(te)}`:`${fe(B)} - ${fe(te)}`,$e=(B,te=30)=>{const[ce,ye]=B.split(":").map(Number),Ie=ce*60+ye+te,Xe=Math.floor(Ie/60),Ke=Ie%60;return`${String(Xe).padStart(2,"0")}:${String(Ke).padStart(2,"0")}`},We=B=>{if(!B)return null;const te=B.replace(/\D/g,"");return te.startsWith("55")?te:`55${te}`},ke=B=>{const te=We(B);te&&window.open(`https://wa.me/${te}`,"_blank")},ue={total:e.length,em_contato:Z("em_contato").length,negociacao:Z("negociacao").length,aguardando_resposta:Z("aguardando_resposta").length,fechado_ganho:Z("fechado_ganho").length,fechado_perdido:Z("fechado_perdido").length,valor_potencial:e.filter(B=>!["fechado_perdido","fechado_ganho"].includes(B.status)).reduce((B,te)=>B+(te.valor_orcamento||0),0)};return s.jsxs("div",{className:"h-full flex flex-col bg-gray-50",children:[s.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 pt-4 pb-2",children:[s.jsxs("div",{className:"sm:flex sm:items-center",children:[s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Leads"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Gerencie potenciais clientes e oportunidades de negcio."}),s.jsx("div",{className:"divider-fefelina"})]}),s.jsx("div",{className:"mt-4 sm:mt-0 sm:ml-16 sm:flex-none",children:s.jsxs("button",{type:"button",className:"btn-fefelina",onClick:()=>i(!0),children:[s.jsx(zx,{className:"w-4 h-4 mr-2"}),"Novo Lead"]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-4 mb-4",children:[s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Total de Leads"}),s.jsx("div",{className:"text-2xl font-bold text-gray-900 mt-1",children:ue.total})]}),s.jsx("div",{className:"bg-purple-100 p-3 rounded-full",children:s.jsx(No,{className:"w-6 h-6 text-purple-600"})})]})}),s.jsx("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border border-purple-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-purple-700",children:"Valor em Aberto"}),s.jsx("div",{className:"text-2xl font-bold text-purple-900 mt-1",children:ie(ue.valor_potencial)}),s.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Pipeline ativa"})]}),s.jsx("div",{className:"bg-purple-200 p-3 rounded-full",children:s.jsx(Rx,{className:"w-6 h-6 text-purple-700"})})]})}),s.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200 shadow-sm",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Taxa de Converso"}),s.jsxs("div",{className:"text-2xl font-bold text-green-600 mt-1",children:[ue.total>0?Math.round(ue.fechado_ganho/ue.total*100):0,"%"]}),s.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[ue.fechado_ganho," ganhos / ",ue.total," total"]})]}),s.jsx("div",{className:"bg-green-100 p-3 rounded-full",children:s.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]})]}),s.jsx("div",{className:"flex-1 overflow-auto mt-6",children:r?s.jsx("div",{className:"flex items-center justify-center h-full",children:s.jsx(In,{size:"lg",variant:"walking",text:"Carregando leads..."})}):s.jsxs(coe,{sensors:y,collisionDetection:pse,onDragStart:Ge,onDragOver:mt,onDragEnd:F,onDragCancel:Oe,children:[s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-3",children:Object.keys(oa).map((B,te)=>{const ce=Z(B),ye=oa[B],Ie=te===Object.keys(oa).length-1;return s.jsx(Moe,{id:B,items:ce.map(Xe=>Xe.id),strategy:Aoe,children:s.jsxs("div",{className:`flex flex-col ${Ie?"":"border-r border-gray-200 pr-3"}`,children:[s.jsxs("div",{className:"mb-2 h-8 flex items-center justify-between px-2",children:[s.jsx("h3",{className:`text-xs font-semibold uppercase ${ye.color} tracking-wide`,children:ye.label}),s.jsx("span",{className:`text-xs font-medium ${ye.color} bg-white px-2 py-0.5 rounded-full border ${ye.borderColor}`,children:ce.length})]}),s.jsx(Voe,{status:B,isActive:g===B,children:ce.map(Xe=>s.jsx(Woe,{lead:Xe,config:ye,onOpen:ht,onWhatsApp:ke,formatCurrency:ie,formatPeriodo:De},Xe.id))})]})},B)})}),s.jsx(Coe,{children:h?s.jsxs("div",{className:`${oa[h.status].bgColor} border-2 ${oa[h.status].borderColor} rounded-lg p-3 shadow-2xl opacity-90 cursor-grabbing overflow-hidden max-w-xs`,children:[s.jsx("h4",{className:"font-semibold text-sm text-gray-900 mb-1.5 truncate",title:h.nome,children:h.nome}),h.telefone&&s.jsxs("p",{className:"text-xs text-gray-600 flex items-center gap-1 mb-1 truncate",children:[s.jsx(Lu,{className:"w-3 h-3 flex-shrink-0"}),s.jsx("span",{className:"truncate",children:h.telefone})]}),h.valor_orcamento&&s.jsx("p",{className:`text-sm font-bold ${oa[h.status].color} mt-1.5 truncate`,children:ie(h.valor_orcamento)})]}):null})]})}),a&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:d?"Editar Lead":"Novo Lead"}),s.jsx("button",{onClick:xt,className:"text-gray-400 hover:text-gray-600",children:s.jsx(mn,{className:"w-5 h-5"})})]}),s.jsxs("form",{onSubmit:Te,className:"p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Nome do Cliente *"}),s.jsx("input",{type:"text",required:!0,value:v.nome,onChange:B=>b({...v,nome:B.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Telefone"}),s.jsx("input",{type:"text",value:v.telefone,onChange:B=>b({...v,telefone:Uoe(B.target.value)}),placeholder:"+55(47)99999-9999",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Perodo do Servio Desejado"}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Data Incio"}),s.jsx("input",{type:"date",value:v.periodo_inicio,onChange:B=>b({...v,periodo_inicio:B.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"Data Fim"}),s.jsx("input",{type:"date",value:v.periodo_fim,onChange:B=>b({...v,periodo_fim:B.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Endereo"}),s.jsx("input",{type:"text",value:v.endereco,onChange:B=>b({...v,endereco:B.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Valor do Oramento"}),s.jsx("input",{type:"number",step:"0.01",value:v.valor_orcamento,onChange:B=>b({...v,valor_orcamento:B.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Status"}),s.jsx("select",{value:v.status,onChange:B=>b({...v,status:B.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:Object.keys(oa).map(B=>s.jsx("option",{value:B,children:oa[B].label},B))})]})]}),v.status==="fechado_perdido"&&s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[s.jsx("label",{className:"block text-xs font-medium text-red-700 mb-1",children:"Motivo da Perda *"}),s.jsx("textarea",{rows:3,required:v.status==="fechado_perdido",value:v.motivo_perda||"",onChange:B=>b({...v,motivo_perda:B.target.value}),placeholder:"Ex: Preo muito alto, Optou por concorrente, Desistiu do servio...",className:"w-full px-2 py-1.5 text-sm border border-red-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Observaes"}),s.jsx("textarea",{rows:3,value:v.observacoes,onChange:B=>b({...v,observacoes:B.target.value}),className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"})]}),s.jsxs("div",{className:"flex justify-end gap-2 pt-3 border-t border-gray-200",children:[s.jsx("button",{type:"button",onClick:xt,className:"px-3 py-1.5 text-sm text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"}),s.jsx("button",{type:"submit",className:"px-3 py-1.5 bg-primary-500 text-white text-sm rounded-lg hover:bg-primary-600 transition-colors",children:d?"Atualizar":"Cadastrar"})]})]})]})}),o&&c&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-6 py-3 flex justify-between items-center",children:[s.jsx("h2",{className:"text-base font-semibold text-gray-900",children:c.nome}),s.jsx("button",{onClick:()=>l(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(mn,{className:"w-5 h-5"})})]}),s.jsxs("div",{className:"p-6 space-y-5",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5",children:[s.jsx(Lu,{className:"w-3.5 h-3.5"}),"Telefone"]}),s.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[s.jsx("p",{className:"text-sm text-gray-900",children:c.telefone||"-"}),c.telefone&&s.jsxs("button",{onClick:()=>ke(c.telefone),className:"flex items-center gap-1.5 px-2.5 py-1 bg-green-600 text-white text-xs rounded-md hover:bg-green-700 transition-colors",title:"Abrir WhatsApp",children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),"WhatsApp"]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5",children:[s.jsx(Do,{className:"w-3.5 h-3.5"}),"Perodo Desejado"]}),s.jsx("p",{className:"text-sm text-gray-900 mt-1.5",children:De(c.periodo_inicio,c.periodo_fim)})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5",children:[s.jsx(mie,{className:"w-3.5 h-3.5"}),"Endereo"]}),s.jsx("p",{className:"text-sm text-gray-900 mt-1.5",children:c.endereco||"-"})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-1.5",children:[s.jsx(Rx,{className:"w-3.5 h-3.5"}),"Valor do Oramento"]}),s.jsx("p",{className:"text-lg font-bold text-purple-600 mt-1.5",children:ie(c.valor_orcamento)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Status"}),s.jsx("div",{className:"mt-1.5",children:s.jsx("select",{value:w,onChange:B=>j(B.target.value),className:"w-full px-3 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-2 focus:ring-purple-500 focus:border-transparent",children:Object.keys(oa).map(B=>s.jsx("option",{value:B,children:oa[B].label},B))})}),w!==c.status&&s.jsx("button",{onClick:Ct,className:"mt-2 w-full px-3 py-1.5 bg-primary-500 text-white text-xs font-medium rounded-md hover:bg-primary-600 transition-colors",children:"Salvar Alterao"})]})]})]}),c.observacoes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Observaes"}),s.jsx("p",{className:"text-sm text-gray-700 mt-1.5 whitespace-pre-wrap bg-gray-50 p-3 rounded-md border border-gray-200",children:c.observacoes})]}),s.jsxs("div",{className:"border-t border-gray-200 pt-5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-3",children:[s.jsxs("label",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide flex items-center gap-2",children:[s.jsx(zl,{className:"w-4 h-4"}),"Pr-Encontros Agendados"]}),s.jsxs("button",{onClick:()=>_(!0),className:"px-3 py-1.5 bg-primary-500 text-white text-xs font-medium rounded-md hover:bg-primary-600 transition-colors flex items-center gap-1.5",children:[s.jsx(zx,{className:"w-4 h-4"}),"Agendar Pr-Encontro"]})]}),O?s.jsx("div",{className:"text-center py-4 text-sm text-gray-500",children:"Carregando..."}):S.length===0?s.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-4 text-center",children:s.jsx("p",{className:"text-sm text-gray-600",children:"Nenhum pr-encontro agendado ainda"})}):s.jsx("div",{className:"border border-gray-200 rounded-md overflow-hidden",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Data"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Horrio"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Responsvel"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Status"}),s.jsx("th",{className:"px-3 py-2 text-left text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Observaes"}),s.jsx("th",{className:"px-3 py-2 text-center text-xs font-semibold text-gray-600 uppercase tracking-wide",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(B=>{const te=E===B.id,ce=te?J:B;return s.jsxs("tr",{className:`transition-colors ${te?"bg-blue-50":"hover:bg-gray-50"}`,children:[s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-900",children:te?s.jsx("input",{type:"date",value:(ce==null?void 0:ce.data)||"",onChange:ye=>Je("data",ye.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):new Date(B.data+"T00:00:00").toLocaleDateString("pt-BR")}),s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-900",children:te?s.jsx("input",{type:"time",value:(ce==null?void 0:ce.horario)||"",onChange:ye=>Je("horario",ye.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):`${B.horario.substring(0,5)} - ${$e(B.horario,B.duracao_minutos||30)}`}),s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-900",children:te?s.jsxs("select",{value:(ce==null?void 0:ce.assigned_user_id)||"",onChange:ye=>Je("assigned_user_id",ye.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"",children:"Sem responsvel"}),k.map(ye=>s.jsx("option",{value:ye.id,children:ye.full_name},ye.id))]}):B.assigned_user_id&&ne[B.assigned_user_id]?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ni,{avatarId:ne[B.assigned_user_id].avatar_url,name:ne[B.assigned_user_id].full_name,size:"xs"}),s.jsx("span",{className:"text-sm text-gray-700",children:ne[B.assigned_user_id].full_name})]}):s.jsx("span",{className:"text-xs text-gray-400",children:""})}),s.jsx("td",{className:"px-3 py-2.5",children:te?s.jsxs("select",{value:(ce==null?void 0:ce.status)||"agendada",onChange:ye=>Je("status",ye.target.value),className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[s.jsx("option",{value:"agendada",children:"Agendado"}),s.jsx("option",{value:"realizada",children:"Realizado"}),s.jsx("option",{value:"cancelada",children:"Cancelado"})]}):s.jsx("span",{className:`inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full ${B.status==="realizada"?"bg-green-100 text-green-700":B.status==="cancelada"?"bg-red-100 text-red-700":"bg-yellow-100 text-yellow-700"}`,children:B.status==="realizada"?"Realizado":B.status==="cancelada"?"Cancelado":"Agendado"})}),s.jsx("td",{className:"px-3 py-2.5 text-sm text-gray-600",children:te?s.jsx("input",{type:"text",value:(ce==null?void 0:ce.observacoes)||"",onChange:ye=>Je("observacoes",ye.target.value),placeholder:"Observaes...",className:"w-full px-2 py-1 text-sm border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):s.jsx("span",{className:"max-w-xs truncate block",title:B.observacoes||"",children:B.observacoes||"-"})}),s.jsx("td",{className:"px-3 py-2.5",children:te?s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:Pe,disabled:ae,className:"text-green-600 hover:text-green-800 hover:bg-green-50 p-1.5 rounded transition-colors disabled:opacity-50",title:"Salvar alteraes",children:ae?s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-green-600"}):s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("button",{onClick:Ue,disabled:ae,className:"text-gray-600 hover:text-gray-800 hover:bg-gray-100 p-1.5 rounded transition-colors disabled:opacity-50",title:"Cancelar edio",children:s.jsx(mn,{className:"w-4 h-4"})})]}):s.jsxs("div",{className:"flex items-center justify-center gap-1",children:[s.jsx("button",{onClick:()=>Ae(B),className:"text-blue-600 hover:text-blue-800 hover:bg-blue-50 p-1.5 rounded transition-colors",title:"Editar pr-encontro",children:s.jsx(GS,{className:"w-4 h-4"})}),s.jsx("button",{onClick:()=>je(B.id),className:"text-red-600 hover:text-red-800 hover:bg-red-50 p-1.5 rounded transition-colors",title:"Cancelar pr-encontro",children:s.jsx(mn,{className:"w-4 h-4"})})]})})]},B.id)})})]})})]}),c.status==="fechado_perdido"&&s.jsx("div",{className:"border-t border-gray-200 pt-5",children:s.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[s.jsxs("label",{className:"text-xs font-semibold text-red-700 uppercase tracking-wide flex items-center gap-1.5 mb-3",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),"Motivo da Perda"]}),c.motivo_perda?s.jsx("p",{className:"text-sm text-red-900 whitespace-pre-wrap bg-white p-3 rounded-md border border-red-200",children:c.motivo_perda}):s.jsx("div",{className:"bg-white p-3 rounded-md border border-red-200",children:s.jsx("p",{className:"text-sm text-red-700 italic",children:"Nenhum motivo registrado para esta lead perdida."})})]})}),s.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>Me(c.id),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-md hover:bg-red-700 transition-colors",children:"Excluir Lead"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>l(!1),className:"px-3 py-1.5 text-gray-700 bg-gray-100 text-sm font-medium rounded-md hover:bg-gray-200 transition-colors",children:"Fechar"}),s.jsxs("button",{onClick:()=>Ye(c),className:"px-3 py-1.5 bg-primary-500 text-white text-sm font-medium rounded-md hover:bg-primary-600 transition-colors flex items-center gap-2",children:[s.jsx(GS,{className:"w-4 h-4"}),"Editar"]})]})]})]})]})}),N&&c&&s.jsx(Hie,{leadId:c.id,leadNome:c.nome,onClose:()=>_(!1),onSuccess:()=>{c&&he(c.id)}}),T&&q&&s.jsx(Kie,{lead:q,onClose:()=>{D(!1),re(null)},onConvert:oe}),K&&P&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[s.jsxs("div",{className:"bg-gradient-to-r from-red-50 to-red-100 border-b border-red-200 px-6 py-3",children:[s.jsx("h3",{className:"text-base font-semibold text-gray-900",children:"Motivo da Perda"}),s.jsxs("p",{className:"text-xs text-gray-600 mt-0.5",children:['Por que a lead "',P.nome,'" foi perdida?']})]}),s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Motivo da Perda *"}),s.jsx("textarea",{value:L,onChange:B=>G(B.target.value),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-red-500 focus:border-transparent text-sm",placeholder:"Ex: Cliente encontrou cuidador mais barato, no respondeu mais os contatos, cancelou a viagem...",autoFocus:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1.5",children:"Esta informao  importante para anlises futuras e melhoria do processo comercial."})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200",children:[s.jsx("button",{onClick:()=>{z(!1),M(null),G("")},disabled:$,className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{onClick:be,disabled:$||!L.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:$?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Salvando..."]}):"Confirmar Perda"})]})]})]})})]})}function Hoe(){var z;const e=new Date,[t,r]=m.useState({totalReceived:0,totalPending:0,totalPendingPlatform:0,monthlyRevenue:[],recentTransactions:[]}),[n,a]=m.useState(!0),[i,o]=m.useState(()=>{const P=localStorage.getItem("fefelina_showFinanceValues");return P!==null?P==="true":!0}),[l,c]=m.useState({selectedMonth:e.getMonth()+1,selectedYear:e.getFullYear(),viewType:"month"}),[u,d]=m.useState({selectedMonth:e.getMonth()+1,selectedYear:e.getFullYear(),viewType:"month"}),[f,h]=m.useState(null),[p,g]=m.useState(!1),[x,y]=m.useState(ze(new Date(e.getFullYear(),e.getMonth(),1),"yyyy-MM")),[v,b]=m.useState({currentMonthReceived:0,currentMonthPending:0,yearReceived:0,yearTotal:0});m.useEffect(()=>{localStorage.setItem("fefelina_showFinanceValues",i.toString())},[i]),m.useEffect(()=>{N()},[l]),m.useEffect(()=>{j()},[]),m.useEffect(()=>{(async()=>{const M=await C();r(L=>({...L,recentTransactions:M}))})()},[x]),m.useEffect(()=>{u.viewType!==l.viewType&&c(P=>({...P,viewType:u.viewType}))},[u.viewType]);const w=()=>{c({...u});const P=ze(new Date(u.selectedYear,u.selectedMonth-1,1),"yyyy-MM");y(P)},j=async()=>{try{const P=e.getFullYear(),M=e.getMonth()+1,{data:L}=await W.from("services").select("status_pagamento, total_a_receber, data_inicio").gte("data_inicio",`${P}-01-01`).lte("data_inicio",`${P}-12-31`),G=ze(new Date(P,M-1,1),"yyyy-MM-dd"),$=ze(new Date(P,M,0),"yyyy-MM-dd"),{data:U}=await W.from("services").select("status_pagamento, total_a_receber, data_inicio").gte("data_inicio",G).lte("data_inicio",$),E=(U||[]).filter(ae=>ae.status_pagamento==="pago").reduce((ae,pe)=>ae+pe.total_a_receber,0),Q=(U||[]).filter(ae=>ae.status_pagamento!=="pago").reduce((ae,pe)=>ae+pe.total_a_receber,0),J=(L||[]).filter(ae=>ae.status_pagamento==="pago").reduce((ae,pe)=>ae+pe.total_a_receber,0),de=(L||[]).reduce((ae,pe)=>ae+pe.total_a_receber,0);b({currentMonthReceived:E,currentMonthPending:Q,yearReceived:J,yearTotal:de})}catch(P){console.error("Erro ao buscar totais dos cards:",P)}},N=async()=>{try{a(!0);const{startDate:P,endDate:M}=_(),[L,G]=await Promise.all([S(P,M),C()]);r({...L,recentTransactions:G})}catch(P){console.error("Erro ao buscar dados financeiros:",P)}finally{a(!1)}},_=()=>{const P=yee(new Date(l.selectedYear,0)),M=xee(new Date(l.selectedYear,0));return{startDate:P.toISOString().split("T")[0],endDate:M.toISOString().split("T")[0]}},S=async(P,M)=>{let L,G;if(l.viewType==="month"){const k=new Date(l.selectedYear,l.selectedMonth-1,1),H=new Date(k);H.setMonth(k.getMonth()-12);const ne=new Date(k);ne.setMonth(k.getMonth()+1),L=ze(H,"yyyy-MM-dd"),G=ze(new Date(ne.getFullYear(),ne.getMonth()+1,0),"yyyy-MM-dd")}else L=`${l.selectedYear-2}-01-01`,G=`${l.selectedYear+2}-12-31`;const{data:$}=await W.from("services").select(`
        status_pagamento,
        total_a_receber,
        data_inicio,
        data_fim,
        clients(nome)
      `).gte("data_inicio",L).lte("data_inicio",G).order("data_inicio"),U=$||[],E=U.filter(k=>k.data_inicio>=P&&k.data_inicio<=M),Q=E.filter(k=>k.status_pagamento==="pago").reduce((k,H)=>k+H.total_a_receber,0),J=E.filter(k=>k.status_pagamento==="pago_parcialmente").reduce((k,H)=>k+H.total_a_receber,0),de=E.filter(k=>k.status_pagamento==="pendente").reduce((k,H)=>k+H.total_a_receber,0),ae=E.filter(k=>k.status_pagamento==="pendente_plataforma").reduce((k,H)=>k+H.total_a_receber,0),pe=l.viewType==="month"?O(U):A(U);return{totalReceived:Q,totalPending:de+J,totalPendingPlatform:ae,monthlyRevenue:pe}},C=async()=>{const[P,M]=x.split("-").map(Number),L=new Date(P,M-1,1),G=ze(Px(L),"yyyy-MM-dd"),$=ze(TA(L),"yyyy-MM-dd"),{data:U}=await W.from("services").select(`
        *,
        clients(*)
      `).gte("data_inicio",G).lte("data_inicio",$).order("created_at",{ascending:!1}).limit(50);return(U==null?void 0:U.map(E=>{var Q;return{id:E.id,client:((Q=E.clients)==null?void 0:Q.nome)||"Cliente no informado",service:E.nome_servico||"Servio",date:E.data_inicio,amount:E.total_a_receber,status:E.status_pagamento,serviceDetails:E}}))||[]},O=P=>{const M=new Date(l.selectedYear,l.selectedMonth-1,1),L=[];for(let G=-12;G<=1;G++){const $=new Date(M);$.setMonth(M.getMonth()+G);const U=ze($,"yyyy-MM"),E=ze($,"MMM yyyy",{locale:Rt});L.push({month:E,monthKey:U,received:0,pending:0,total:0,visits:0})}return P.forEach(G=>{const[$,U,E]=G.data_inicio.split("-").map(Number),Q=new Date($,U-1,E),J=ze(Q,"yyyy-MM"),de=L.find(ae=>ae.monthKey===J);if(de){const ae=G.total_a_receber;G.status_pagamento==="pago"?de.received+=ae:de.pending+=ae,de.total+=ae,de.visits+=1}}),L},A=P=>{const M=P.reduce((G,$)=>{const[U]=$.data_inicio.split("-").map(Number),E=U.toString();G[E]||(G[E]={month:E,monthKey:E,received:0,pending:0,total:0,visits:0});const Q=$.total_a_receber;return $.status_pagamento==="pago"?G[E].received+=Q:G[E].pending+=Q,G[E].total+=Q,G[E].visits+=1,G},{});return Object.keys(M).sort().map(G=>M[G])},T=P=>i?new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(P):"R$ ",D=P=>{const[M,L,G]=P.split("-").map(Number);return new Date(M,L-1,G).toLocaleDateString("pt-BR")},q=P=>{const M={pago:{color:"bg-green-100 text-green-800",icon:KS,label:"Pago"},pendente:{color:"bg-yellow-100 text-yellow-800",icon:zl,label:"Pendente"},pendente_plataforma:{color:"bg-red-100 text-red-800",icon:YS,label:"Pendente Plataforma"}},L=M[P]||M.pendente,G=L.icon;return s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L.color}`,children:[s.jsx(G,{className:"w-3 h-3 mr-1"}),L.label]})},re=P=>P===x,K=P=>{const{fill:M,x:L,y:G,width:$,height:U,payload:E}=P,Q=re(E.monthKey);return s.jsxs("g",{onClick:()=>y(E.monthKey),style:{cursor:"pointer"},children:[Q&&s.jsx("rect",{x:L-2,y:0,width:$+4,height:"100%",fill:"rgba(59, 130, 246, 0.08)",rx:4}),s.jsx("rect",{x:L,y:G,width:$,height:U,fill:M})]})};return n?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(In,{size:"lg",variant:"paws",text:"Carregando finanas..."})}):s.jsxs("div",{children:[s.jsxs("div",{className:"sm:flex sm:items-center sm:justify-between",children:[s.jsxs("div",{className:"sm:flex-auto",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Finanas"}),s.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"Anlise completa de receitas, pagamentos e performance financeira."}),s.jsx("div",{className:"divider-fefelina"})]}),s.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[s.jsx("button",{onClick:()=>o(!i),className:"btn-secondary",title:i?"Ocultar valores":"Mostrar valores",children:i?s.jsxs(s.Fragment,{children:[s.jsx(wl,{className:"w-4 h-4 mr-2"}),"Ocultar Valores"]}):s.jsxs(s.Fragment,{children:[s.jsx(ps,{className:"w-4 h-4 mr-2"}),"Mostrar Valores"]})}),s.jsxs("button",{className:"btn-secondary",children:[s.jsx(Zae,{className:"w-4 h-4 mr-2"}),"Exportar"]})]})]}),s.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx("div",{className:"card-fefelina",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-green-100 rounded-lg flex items-center justify-center",children:s.jsx(KS,{className:"w-5 h-5 text-green-600"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Recebido no Ms Atual"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:T(v.currentMonthReceived)}),s.jsx("p",{className:"text-sm text-green-600",children:ze(e,"MMMM yyyy",{locale:Rt})})]})]})}),s.jsx("div",{className:"card-fefelina",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-lg flex items-center justify-center",children:s.jsx(zl,{className:"w-5 h-5 text-yellow-600"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Pendente no Ms Atual"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:T(v.currentMonthPending)}),s.jsx("p",{className:"text-sm text-yellow-600",children:"A receber este ms"})]})]})}),s.jsx("div",{className:"card-fefelina",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:s.jsx(Pie,{className:"w-5 h-5 text-blue-600"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Recebido no Ano"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:T(v.yearReceived)}),s.jsxs("p",{className:"text-sm text-blue-600",children:["Ano ",e.getFullYear()]})]})]})}),s.jsx("div",{className:"card-fefelina",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-8 h-8 bg-purple-100 rounded-lg flex items-center justify-center",children:s.jsx(YS,{className:"w-5 h-5 text-purple-600"})})}),s.jsxs("div",{className:"ml-4",children:[s.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Total Previsto no Ano"}),s.jsx("p",{className:"text-2xl font-semibold text-gray-900",children:T(v.yearTotal)}),s.jsx("p",{className:"text-sm text-purple-600",children:"Recebido + Pendente"})]})]})})]}),s.jsx("div",{className:"mt-8",children:s.jsxs("div",{className:"card-fefelina",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6 flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Receita Mensal"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("select",{value:u.selectedMonth,onChange:P=>d({...u,selectedMonth:parseInt(P.target.value)}),className:"input-fefelina py-1 text-sm w-32",children:Array.from({length:12},(P,M)=>M+1).map(P=>s.jsx("option",{value:P,children:ze(new Date(2024,P-1),"MMMM",{locale:Rt})},P))}),s.jsx("select",{value:u.selectedYear,onChange:P=>d({...u,selectedYear:parseInt(P.target.value)}),className:"input-fefelina py-1 text-sm w-24",children:Array.from({length:5},(P,M)=>e.getFullYear()-2+M).map(P=>s.jsx("option",{value:P,children:P},P))})]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("span",{className:"text-sm text-gray-600",children:"Visualizar por:"}),s.jsxs("div",{className:"flex bg-gray-100 rounded-lg p-1",children:[s.jsx("button",{onClick:()=>d({...u,viewType:"month"}),className:`px-3 py-1 text-sm rounded ${u.viewType==="month"?"bg-white text-primary-600 shadow-sm font-medium":"text-gray-600 hover:text-gray-900"}`,children:"Ms"}),s.jsx("button",{onClick:()=>d({...u,viewType:"year"}),className:`px-3 py-1 text-sm rounded ${u.viewType==="year"?"bg-white text-primary-600 shadow-sm font-medium":"text-gray-600 hover:text-gray-900"}`,children:"Ano"})]})]}),s.jsxs("button",{onClick:w,className:"btn-secondary text-sm py-1",children:[s.jsx(aie,{className:"w-4 h-4 mr-2"}),"Aplicar Filtro"]})]})]}),s.jsx("div",{className:"h-96",children:s.jsx(Tf,{width:"100%",height:"100%",children:s.jsxs(EA,{data:t.monthlyRevenue,children:[s.jsx(Zm,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),s.jsx(rh,{dataKey:"month",tick:{fontSize:12},stroke:"#6b7280"}),s.jsx(Qc,{tick:{fontSize:12},stroke:"#6b7280",tickFormatter:P=>i?`R$ ${P.toLocaleString("pt-BR")}`:""}),s.jsx(Df,{formatter:P=>[T(Number(P)),""],labelStyle:{color:"#374151"},cursor:{fill:"rgba(59, 130, 246, 0.1)"}}),s.jsx(th,{dataKey:"received",name:"Recebido",stackId:"a",radius:[0,0,0,0],fill:"#10b981",shape:s.jsx(K,{})}),s.jsx(th,{dataKey:"pending",name:"Pendente",stackId:"a",radius:[4,4,0,0],fill:"#F59E0B"})]})})}),s.jsxs("div",{className:"mt-4 flex justify-center space-x-6",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-green-500 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Recebido"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded bg-yellow-500 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Pendente"})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-4 h-4 rounded border-2 border-blue-500 bg-blue-50 mr-2"}),s.jsx("span",{className:"text-sm text-gray-600",children:"Ms Selecionado"})]})]})]})}),s.jsxs("div",{className:"mt-8 card-fefelina",children:[s.jsx("div",{className:"flex items-center justify-between mb-6",children:s.jsxs("div",{children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Transaes de ",(()=>{const[P,M]=x.split("-").map(Number);return ze(new Date(P,M-1,1),"MMMM yyyy",{locale:Rt})})()]}),s.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Clique em uma transao para ver os detalhes ou clique em uma barra do grfico para filtrar"})]})}),s.jsxs("div",{className:"overflow-hidden",children:[s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cliente/Servio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:t.recentTransactions.map(P=>s.jsxs("tr",{className:"hover:bg-gray-50 cursor-pointer transition-colors",onClick:()=>{h(P.serviceDetails),g(!0)},children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.client}),s.jsx("div",{className:"text-sm text-gray-500",children:P.service})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:D(P.date)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:T(P.amount)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:q(P.status)})]},P.id))})]}),t.recentTransactions.length===0&&s.jsx("div",{className:"text-center py-12",children:s.jsx("p",{className:"text-gray-500",children:"Nenhuma transao encontrada para este perodo"})})]})]}),p&&f&&s.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center p-4 z-50",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] overflow-y-auto",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Detalhes do Servio"}),s.jsx("button",{onClick:()=>{g(!1),h(null)},className:"text-gray-400 hover:text-gray-500",children:s.jsx(mn,{className:"w-6 h-6"})})]}),s.jsxs("div",{className:"px-6 py-4 space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Cliente"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1",children:((z=f.clients)==null?void 0:z.nome)||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Servio"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1",children:f.nome_servico||"N/A"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Data Incio"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1",children:D(f.data_inicio)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Data Fim"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1",children:D(f.data_fim)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Total a Receber"}),s.jsx("p",{className:"text-lg font-semibold text-gray-900 mt-1",children:T(f.total_a_receber)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Status Pagamento"}),s.jsx("div",{className:"mt-1",children:q(f.status_pagamento)})]}),f.plataforma&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Plataforma"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1",children:f.plataforma})]}),f.frequencia_visitas&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Frequncia de Visitas"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1",children:f.frequencia_visitas})]})]}),f.observacoes&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Observaes"}),s.jsx("p",{className:"text-sm text-gray-900 mt-1",children:f.observacoes})]})]}),s.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-end",children:s.jsx("button",{onClick:()=>{g(!1),h(null)},className:"btn-secondary",children:"Fechar"})})]})})]})}function Koe(){const[e,t]=m.useState({totalClientesAtivos:0,totalVisitasMes:0,receitaMes:0,visitasRealizadas:0,visitasAgendadas:0,servicosPendentes:0,clientesNovos:0,taxaRetencao:0,ticketMedio:0,totalPets:0}),[r,n]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState({inteira:0,meia:0}),[c,u]=m.useState([]),[d,f]=m.useState([]),[h,p]=m.useState(!0),[g,x]=m.useState("mes_atual"),[y,v]=m.useState(10);m.useEffect(()=>{b()},[g]);const b=async()=>{try{p(!0);const _=new Date,S=_.getFullYear(),C=_.getMonth()+1;let O="",A="",T="",D="";if(g==="mes_atual")O=`${S}-${String(C).padStart(2,"0")}-01`,A=`${S}-${String(C).padStart(2,"0")}-${new Date(S,C,0).getDate()}`,T=O,D=A;else if(g==="mes_anterior"){const F=C===1?12:C-1,oe=C===1?S-1:S;O=`${oe}-${String(F).padStart(2,"0")}-01`,A=`${oe}-${String(F).padStart(2,"0")}-${new Date(oe,F,0).getDate()}`,T=O,D=A}else if(g==="3meses"){const F=new Date;F.setMonth(F.getMonth()-3),T=F.toISOString().split("T")[0],D=_.toISOString().split("T")[0],O=T,A=D}else if(g==="6meses"){const F=new Date;F.setMonth(F.getMonth()-6),T=F.toISOString().split("T")[0],D=_.toISOString().split("T")[0],O=T,A=D}else g==="ano"?(T=`${S}-01-01`,D=_.toISOString().split("T")[0],O=T,A=D):(T="2000-01-01",D=_.toISOString().split("T")[0],O=T,A=D);const[q,re,K,z]=await Promise.all([W.from("clients").select("*",{count:"exact"}),W.from("visits").select(`
            valor,
            status,
            tipo_visita,
            desconto_plataforma,
            data,
            horario,
            client_id,
            service_id,
            services!inner(data_inicio)
          `).gte("services.data_inicio",O).lte("services.data_inicio",A),W.from("services").select("*",{count:"exact"}).neq("status_pagamento","pago"),W.from("pets").select("*",{count:"exact"})]),{count:P}=await W.from("clients").select("*",{count:"exact",head:!0}).gte("created_at",O).lte("created_at",A),M=await W.from("visits").select(`
          client_id,
          clients!inner(nome),
          valor,
          desconto_plataforma,
          status,
          data,
          service_id,
          services!inner(data_inicio)
        `).eq("status","realizada").gte("services.data_inicio",T).lte("services.data_inicio",D).not("client_id","is",null),L=new Map;M.data&&M.data.forEach(F=>{var Me;const oe=((Me=F.clients)==null?void 0:Me.nome)||"Cliente desconhecido",be=F.valor*(1-(F.desconto_plataforma||0)/100),Te=F.client_id;if(L.has(Te)){const Ye=L.get(Te);Ye.totalVisitas+=1,Ye.valorTotal+=be,F.data>Ye.ultimaVisita&&(Ye.ultimaVisita=F.data)}else L.set(Te,{totalVisitas:1,valorTotal:be,ultimaVisita:F.data,nome:oe})});const G=Array.from(L.values()).map(F=>({nome:F.nome,totalVisitas:F.totalVisitas,valorTotal:F.valorTotal,ultimaVisita:F.ultimaVisita})).sort((F,oe)=>oe.valorTotal-F.valorTotal),$=new Date;$.setDate($.getDate()-30);const U=new Date;U.setDate(U.getDate()-90);const{data:E}=await W.from("visits").select("client_id").eq("status","realizada").gte("data",$.toISOString().split("T")[0]).not("client_id","is",null),{data:Q}=await W.from("visits").select("client_id").eq("status","realizada").gte("data",U.toISOString().split("T")[0]).not("client_id","is",null),J=new Set((E==null?void 0:E.map(F=>F.client_id))||[]),de=new Set((Q==null?void 0:Q.map(F=>F.client_id))||[]),ae=de.size>0?J.size/de.size*100:0,pe=await W.from("visits").select(`
          data,
          valor,
          desconto_plataforma,
          status,
          service_id,
          services!inner(data_inicio)
        `).eq("status","realizada").gte("services.data_inicio",`${S-1}-${String(C).padStart(2,"0")}-01`),k=new Map;pe.data&&pe.data.forEach(F=>{var be;const oe=(be=F.services)==null?void 0:be.data_inicio;if(oe){const[Te,Me]=oe.split("-"),Ye=`${Te}-${Me}`,Ct=F.valor*(1-(F.desconto_plataforma||0)/100);if(k.has(Ye)){const ht=k.get(Ye);ht.quantidade+=1,ht.receita+=Ct}else k.set(Ye,{quantidade:1,receita:Ct})}});const H=Array.from(k.entries()).map(([F,oe])=>({mes:F,...oe})).sort((F,oe)=>F.mes.localeCompare(oe.mes)).slice(-12),{data:ne}=await W.from("visits").select(`
          data,
          horario,
          status,
          service_id,
          services!inner(data_inicio)
        `).eq("status","realizada").gte("services.data_inicio",T).lte("services.data_inicio",D),Y=new Map,me=new Map;ne==null||ne.forEach(F=>{const[oe,be,Te]=F.data.split("-"),Ye=new Date(parseInt(oe),parseInt(be)-1,parseInt(Te)).getDay(),ht=["Domingo","Segunda","Tera","Quarta","Quinta","Sexta","Sbado"][Ye];Y.set(ht,(Y.get(ht)||0)+1);const xt=parseInt(F.horario.split(":")[0]);let Z="";xt>=6&&xt<12?Z="Manh (6h-12h)":xt>=12&&xt<18?Z="Tarde (12h-18h)":xt>=18&&xt<24?Z="Noite (18h-24h)":Z="Madrugada (0h-6h)",me.set(Z,(me.get(Z)||0)+1)});const ee=Array.from(Y.entries()).map(([F,oe])=>({dia:F,quantidade:oe})).sort((F,oe)=>{const be=["Segunda","Tera","Quarta","Quinta","Sexta","Sbado","Domingo"];return be.indexOf(F.dia)-be.indexOf(oe.dia)}),he=Array.from(me.entries()).map(([F,oe])=>({horario:F,quantidade:oe})).sort((F,oe)=>oe.quantidade-F.quantidade),je=re.data||[],Ae=je.filter(F=>F.status==="realizada"),Ue=Ae.reduce((F,oe)=>F+oe.valor*(1-(oe.desconto_plataforma||0)/100),0),Pe=Ae.length,Je=je.filter(F=>F.status==="agendada").length,Ge=Pe>0?Ue/Pe:0,mt=je.filter(F=>F.tipo_visita==="inteira").length,Oe=je.filter(F=>F.tipo_visita==="meia").length;t({totalClientesAtivos:q.count||0,totalVisitasMes:je.length,receitaMes:Ue,visitasRealizadas:Pe,visitasAgendadas:Je,servicosPendentes:K.count||0,clientesNovos:P||0,taxaRetencao:ae,ticketMedio:Ge,totalPets:z.count||0}),n(G),i(H),l({inteira:mt,meia:Oe}),u(ee),f(he)}catch(_){console.error("Erro ao buscar relatrios:",_)}finally{p(!1)}},w=_=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format(_),j=_=>{const[S,C]=_.split("-");return`${["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"][parseInt(C)-1]}/${S.slice(-2)}`},N=()=>{switch(g){case"mes_atual":return"do Ms Atual";case"mes_anterior":return"do Ms Anterior";case"3meses":return"dos ltimos 3 Meses";case"6meses":return"dos ltimos 6 Meses";case"ano":return"deste Ano";case"tudo":return"de Todo Perodo";default:return""}};return h?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(In,{size:"lg",variant:"sleeping",text:"Preparando relatrios..."})}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4 mb-6",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"page-title-fefelina",children:"Relatrios e Estatsticas"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Anlise ",N()]})]}),s.jsxs("select",{value:g,onChange:_=>x(_.target.value),className:"input-fefelina max-w-xs",children:[s.jsx("option",{value:"mes_atual",children:" Ms Atual"}),s.jsx("option",{value:"mes_anterior",children:" Ms Anterior"}),s.jsx("option",{value:"3meses",children:" ltimos 3 Meses"}),s.jsx("option",{value:"6meses",children:" ltimos 6 Meses"}),s.jsx("option",{value:"ano",children:" Este Ano"}),s.jsx("option",{value:"tudo",children:" Todo Perodo"})]})]}),s.jsx("div",{className:"divider-fefelina"}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[s.jsx("div",{className:"stats-card-fefelina",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"icon-fefelina bg-blue-500 mx-auto mb-2",children:s.jsx("span",{children:""})}),s.jsxs("dt",{className:"text-sm font-medium text-gray-500",children:["Visitas ",N()]}),s.jsx("dd",{className:"text-2xl font-bold text-gray-900",children:e.totalVisitasMes}),s.jsxs("p",{className:"text-xs text-emerald-600 mt-1",children:[e.visitasRealizadas," realizadas"]})]})}),s.jsx("div",{className:"stats-card-fefelina",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"icon-fefelina bg-green-500 mx-auto mb-2",children:s.jsx("span",{children:""})}),s.jsxs("dt",{className:"text-sm font-medium text-gray-500",children:["Receita ",N()]}),s.jsx("dd",{className:"text-xl font-bold text-green-600",children:w(e.receitaMes)}),s.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["Ticket: ",w(e.ticketMedio)]})]})}),s.jsx("div",{className:"stats-card-fefelina",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"icon-fefelina bg-purple-500 mx-auto mb-2",children:s.jsx("span",{children:""})}),s.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Clientes Novos"}),s.jsx("dd",{className:"text-2xl font-bold text-purple-600",children:e.clientesNovos}),s.jsx("p",{className:"text-xs text-gray-400 mt-1",children:N().replace("d","n").replace("D","N")})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Top Clientes por Valor"}),s.jsxs("select",{value:y,onChange:_=>v(Number(_.target.value)),className:"text-sm border-gray-300 rounded-md px-2 py-1",children:[s.jsx("option",{value:5,children:"Top 5"}),s.jsx("option",{value:10,children:"Top 10"}),s.jsx("option",{value:20,children:"Top 20"}),s.jsx("option",{value:50,children:"Top 50"})]})]}),s.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[r.slice(0,y).map((_,S)=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[s.jsxs("div",{className:"flex items-center flex-1 min-w-0",children:[s.jsx("span",{className:"flex items-center justify-center w-7 h-7 bg-primary-100 text-primary-600 rounded-full text-xs font-medium mr-3 flex-shrink-0",children:S+1}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("p",{className:"font-medium text-gray-900 truncate",children:_.nome}),s.jsxs("p",{className:"text-xs text-gray-500",children:[_.totalVisitas," visitas  ltima: ",ze(ii(_.ultimaVisita),"dd/MM/yy")]})]})]}),s.jsxs("div",{className:"text-right ml-2 flex-shrink-0",children:[s.jsx("p",{className:"font-semibold text-green-600 text-sm",children:w(_.valorTotal)}),s.jsxs("p",{className:"text-xs text-gray-500",children:[w(_.valorTotal/_.totalVisitas),"/visita"]})]})]},_.nome+S)),r.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-8",children:"Nenhum dado encontrado no perodo"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Tipos de Visita ",N()]}),s.jsxs("div",{className:"space-y-4 mb-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Visitas Inteiras"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-3 mr-3",children:s.jsx("div",{className:"bg-primary-600 h-3 rounded-full transition-all",style:{width:`${o.inteira+o.meia>0?o.inteira/(o.inteira+o.meia)*100:0}%`}})}),s.jsx("span",{className:"font-semibold text-lg",children:o.inteira})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-gray-600",children:"Meias Visitas"}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("div",{className:"w-32 bg-gray-200 rounded-full h-3 mr-3",children:s.jsx("div",{className:"bg-purple-500 h-3 rounded-full transition-all",style:{width:`${o.inteira+o.meia>0?o.meia/(o.inteira+o.meia)*100:0}%`}})}),s.jsx("span",{className:"font-semibold text-lg",children:o.meia})]})]})]}),s.jsx("div",{className:"pt-4 border-t border-gray-200",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-gray-900",children:o.inteira+o.meia}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Total de Visitas"})]}),s.jsxs("div",{className:"text-center",children:[s.jsx("p",{className:"text-2xl font-bold text-green-600",children:w(e.receitaMes)}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Receita Total"})]})]})})]})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Dias Mais Movimentados ",N()]}),s.jsxs("div",{className:"space-y-3",children:[c.map(_=>{const S=Math.max(...c.map(O=>O.quantidade)),C=S>0?_.quantidade/S*100:0;return s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 w-20",children:_.dia}),s.jsx("div",{className:"flex-1 mx-3",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6",children:s.jsx("div",{className:"bg-blue-500 h-6 rounded-full flex items-center justify-end pr-2 transition-all",style:{width:`${C}%`},children:s.jsx("span",{className:"text-white text-xs font-semibold",children:C>15?_.quantidade:""})})})}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 w-12 text-right",children:C<=15?_.quantidade:""})]},_.dia)}),c.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhum dado encontrado"})]})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Horrios de Pico ",N()]}),s.jsxs("div",{className:"space-y-3",children:[d.map((_,S)=>{const C=Math.max(...d.map(T=>T.quantidade)),O=C>0?_.quantidade/C*100:0,A=["bg-orange-500","bg-yellow-500","bg-green-500","bg-blue-500"];return s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"text-sm font-medium text-gray-700 w-32",children:_.horario}),s.jsx("div",{className:"flex-1 mx-3",children:s.jsx("div",{className:"w-full bg-gray-200 rounded-full h-6",children:s.jsx("div",{className:`${A[S%A.length]} h-6 rounded-full flex items-center justify-end pr-2 transition-all`,style:{width:`${O}%`},children:s.jsx("span",{className:"text-white text-xs font-semibold",children:O>20?_.quantidade:""})})})}),s.jsx("span",{className:"text-sm font-semibold text-gray-900 w-12 text-right",children:O<=20?_.quantidade:""})]},_.horario)}),d.length===0&&s.jsx("p",{className:"text-center text-gray-500 py-4",children:"Nenhum dado encontrado"})]})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Evoluo dos ltimos 12 Meses"}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full",children:[s.jsx("thead",{children:s.jsxs("tr",{className:"border-b",children:[s.jsx("th",{className:"text-left py-2 text-sm font-medium text-gray-500",children:"Ms"}),s.jsx("th",{className:"text-right py-2 text-sm font-medium text-gray-500",children:"Visitas"}),s.jsx("th",{className:"text-right py-2 text-sm font-medium text-gray-500",children:"Receita"})]})}),s.jsxs("tbody",{className:"divide-y divide-gray-200",children:[a.map(_=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"py-3 text-sm text-gray-900 font-medium",children:j(_.mes)}),s.jsx("td",{className:"py-3 text-sm text-right text-gray-900",children:_.quantidade}),s.jsx("td",{className:"py-3 text-sm text-right text-green-600 font-semibold",children:w(_.receita)})]},_.mes)),a.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:3,className:"py-8 text-center text-gray-500",children:"Nenhum dado encontrado para o perodo selecionado"})})]}),a.length>0&&s.jsx("tfoot",{className:"border-t-2 border-gray-300 bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("td",{className:"py-3 text-sm font-bold text-gray-900",children:"TOTAL"}),s.jsx("td",{className:"py-3 text-sm text-right font-bold text-gray-900",children:a.reduce((_,S)=>_+S.quantidade,0)}),s.jsx("td",{className:"py-3 text-sm text-right font-bold text-green-600",children:w(a.reduce((_,S)=>_+S.receita,0))})]})})]})})]})]})}function Yoe(){var G;const[e,t]=m.useState([]),[r,n]=m.useState(0),[a,i]=m.useState(!0),[o,l]=m.useState(!1),[c,u]=m.useState(!0),[d,f]=m.useState(0),[h,p]=m.useState(!1),[g,x]=m.useState(null),[y,v]=m.useState({data:"",valor:"",tipo:"receitas_servicos",descricao:""}),[b,w]=m.useState(!1),[j,N]=m.useState("10"),_=[{value:"receitas_servicos",label:"Receitas - Servios",color:"text-green-600",categoria:"receita"},{value:"receitas_outros",label:"Receitas - Outros",color:"text-emerald-600",categoria:"receita"},{value:"rendimentos",label:"Rendimentos",color:"text-blue-600",categoria:"receita"},{value:"pagamento_mensal",label:"Pagamento Mensal",color:"text-purple-600",categoria:"receita"},{value:"despesas_servicos",label:"Despesas - Servios",color:"text-red-600",categoria:"despesa"},{value:"despesas_outros",label:"Despesas - Outros",color:"text-orange-600",categoria:"despesa"}],S=$=>{const U=$.match(/(\d{4})/);if(U){const E=parseInt(U[1]);if(E<1900||E>2100)return $.replace(/\d{4}/,"2025")}return $},C=$=>{const U=new Date($+"T00:00:00"),E=U.getFullYear();return E>=1900&&E<=2100&&!isNaN(U.getTime())},O=$=>{const U=$.replace(/[^\d]/g,"");return U?(parseInt(U)/100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}):""},A=$=>{const U=$.replace(/[^\d,]/g,"").replace(",",".");return parseFloat(U)||0},T=20;m.useEffect(()=>{D(!0)},[]);const D=async($=!1)=>{try{$?(i(!0),f(1),u(!0)):l(!0);const E=($?0:d)*T,Q=E+T-1,{data:J,error:de,count:ae}=await W.from("caixa_movimentos").select("*",{count:"exact"}).order("data",{ascending:!1}).order("created_at",{ascending:!1}).range(E,Q);if(de)throw de;if($){const{data:H,error:ne}=await W.from("caixa_movimentos").select("valor");if(ne)throw ne;const Y=(H||[]).reduce((me,ee)=>me+ee.valor,0);n(Y)}t($?J||[]:H=>[...H,...J||[]]);const pe=$?(J||[]).length:e.length+(J||[]).length,k=ae?pe<ae:(J||[]).length===T;u(k),$||f(H=>H+1)}catch(U){console.error("Erro ao buscar movimentos:",U)}finally{i(!1),l(!1)}},q=async $=>{if($.preventDefault(),!C(y.data)){alert("Por favor, insira uma data vlida");return}const U=A(y.valor);if(isNaN(U)||U<=0){alert("Por favor, insira um valor vlido");return}try{const E=_.find(J=>J.value===y.tipo),Q={...y,valor:(E==null?void 0:E.categoria)==="despesa"?-Math.abs(U):Math.abs(U)};if(g){const{error:J}=await W.from("caixa_movimentos").update(Q).eq("id",g.id);if(J)throw J}else{const{error:J}=await W.from("caixa_movimentos").insert([Q]);if(J)throw J;if(y.tipo==="receitas_servicos"&&b){const de=parseFloat(j)||10,ae=U*de/100,pe={data:y.data,tipo:"despesas_servicos",valor:-Math.abs(ae),descricao:`Despesa de servio (${de}% de ${z(U)})${y.descricao?` - ${y.descricao}`:""}`},{error:k}=await W.from("caixa_movimentos").insert([pe]);if(k)throw k}}p(!1),x(null),v({data:"",valor:"",tipo:"receitas_servicos",descricao:""}),w(!1),N("10"),D(!0)}catch(E){console.error("Erro ao salvar movimento:",E),alert("Erro ao salvar movimento")}},re=$=>{x($),v({data:$.data,valor:Math.abs($.valor).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),tipo:$.tipo,descricao:$.descricao||""}),p(!0)},K=async $=>{if(confirm("Tem certeza que deseja excluir este movimento?"))try{const{error:U}=await W.from("caixa_movimentos").delete().eq("id",$);if(U)throw U;D()}catch(U){console.error("Erro ao excluir movimento:",U),alert("Erro ao excluir movimento")}},z=$=>new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"}).format($),P=$=>new Date($+"T00:00:00").toLocaleDateString("pt-BR"),M=$=>{const U=_.find(E=>E.value===$);return(U==null?void 0:U.label)||$},L=$=>{const U=_.find(E=>E.value===$);return(U==null?void 0:U.color)||"text-gray-600"};return a?s.jsx("div",{className:"flex justify-center items-center h-64",children:s.jsx(In,{size:"lg",variant:"walking",text:"Carregando movimentaes..."})}):s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h1",{className:"page-title-fefelina",children:"Controle Financeiro"}),s.jsx("button",{onClick:()=>p(!0),className:"btn-fefelina",children:"Novo Lanamento"})]}),s.jsx("div",{className:"divider-fefelina"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Saldo Atual"}),s.jsx("p",{className:`text-2xl font-bold ${r>=0?"text-green-600":"text-red-600"}`,children:z(r)})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Receitas do Ms"}),s.jsx("p",{className:"text-2xl font-bold text-green-600",children:z(e.filter($=>{const U=new Date($.data),E=new Date;return U.getMonth()===E.getMonth()&&U.getFullYear()===E.getFullYear()&&$.valor>0}).reduce(($,U)=>$+U.valor,0))})]}),s.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[s.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Despesas do Ms"}),s.jsx("p",{className:"text-2xl font-bold text-red-600",children:z(e.filter($=>{const U=new Date($.data),E=new Date;return U.getMonth()===E.getMonth()&&U.getFullYear()===E.getFullYear()&&$.valor<0}).reduce(($,U)=>$+Math.abs(U.valor),0))})]})]}),s.jsxs("div",{className:"bg-white rounded-lg shadow",children:[s.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:s.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Histrico de Movimentos"})}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Data"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tipo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Valor"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),s.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[e.map($=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:P($.data)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:s.jsx("span",{className:L($.tipo),children:M($.tipo)})}),s.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:$.descricao||"-"}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-right",children:s.jsx("span",{className:$.valor>=0?"text-green-600":"text-red-600",children:z($.valor)})}),s.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-center text-sm font-medium",children:[s.jsx("button",{onClick:()=>re($),className:"text-primary-600 hover:text-primary-900 mr-3",children:"Editar"}),s.jsx("button",{onClick:()=>K($.id),className:"text-red-600 hover:text-red-900",children:"Excluir"})]})]},$.id)),e.length===0&&s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Nenhum movimento encontrado"})})]})]})}),o&&s.jsx("div",{className:"flex justify-center py-8",children:s.jsxs("div",{className:"flex items-center space-x-2 text-gray-500",children:[s.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[s.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),s.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),s.jsx("span",{children:"Carregando mais..."})]})}),c&&!o&&s.jsx("div",{className:"text-center py-6",children:s.jsx("button",{onClick:()=>D(!1),className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-2 rounded-md transition-colors",children:"Carregar Mais Registros"})}),!c&&e.length>0&&s.jsx("div",{className:"text-center py-4 text-gray-500 text-sm",children:"Todos os lanamentos foram carregados"})]}),h&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4 md:p-6",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md max-h-[85vh] md:max-h-[90vh] overflow-y-auto mt-16 md:mt-0",children:[s.jsxs("div",{className:"sticky top-0 bg-gradient-to-r from-primary-50 to-primary-100 border-b border-primary-200 px-4 md:px-6 py-3 flex justify-between items-start",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-sm md:text-base font-semibold text-gray-900",children:g?"Editar Lanamento":"Novo Lanamento"}),s.jsx("p",{className:"text-xs text-gray-600 mt-0.5",children:g?"Atualize as informaes do lanamento":"Registre uma nova movimentao financeira"})]}),s.jsx("button",{onClick:()=>{p(!1),x(null),v({data:"",valor:"",tipo:"receitas_servicos",descricao:""}),w(!1),N("10")},className:"text-gray-400 hover:text-gray-600 transition-colors",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"px-4 md:px-6 py-4",children:s.jsxs("form",{id:"lancamento-form",onSubmit:q,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Data"}),s.jsx("input",{type:"date",value:y.data,onChange:$=>{const U=S($.target.value);v({...y,data:U})},className:"input-fefelina",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tipo"}),s.jsx("select",{value:y.tipo,onChange:$=>v({...y,tipo:$.target.value}),className:"input-fefelina",required:!0,children:_.map($=>s.jsx("option",{value:$.value,children:$.label},$.value))})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Valor (R$)"}),s.jsx("input",{type:"text",value:y.valor,onChange:$=>{const U=O($.target.value);v({...y,valor:U})},className:"input-fefelina",placeholder:"0,00",required:!0}),s.jsx("p",{className:"text-xs text-gray-500 mt-1",children:((G=_.find($=>$.value===y.tipo))==null?void 0:G.categoria)==="despesa"?"Ser registrado como despesa (valor negativo)":"Ser registrado como receita (valor positivo)"})]}),y.tipo==="receitas_servicos"&&!g&&s.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[s.jsxs("div",{className:"flex items-center mb-3",children:[s.jsx("input",{type:"checkbox",id:"habilitarDespesa",checked:b,onChange:$=>w($.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),s.jsx("label",{htmlFor:"habilitarDespesa",className:"ml-2 block text-sm font-medium text-gray-700",children:"Gerar despesa de servio automaticamente?"})]}),b&&s.jsxs("div",{className:"ml-6 space-y-3 bg-gray-50 p-3 rounded-md",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Percentual (%)"}),s.jsx("input",{type:"number",value:j,onChange:$=>N($.target.value),min:"0",max:"100",step:"0.1",className:"w-full px-2 py-1.5 text-sm border border-gray-300 rounded-md focus:ring-primary-500 focus:border-primary-500",placeholder:"10"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Valor da Despesa"}),s.jsx("div",{className:"px-2 py-1.5 text-sm bg-red-50 border border-red-200 rounded-md text-red-700 font-medium",children:(()=>{const $=A(y.valor),U=parseFloat(j)||0,E=$*U/100;return z(E)})()})]})]}),s.jsx("p",{className:"text-xs text-gray-500",children:'Um lanamento adicional de "Despesas - Servios" ser criado automaticamente com o valor calculado.'})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Descrio"}),s.jsx("textarea",{value:y.descricao,onChange:$=>v({...y,descricao:$.target.value}),className:"input-fefelina",rows:3,placeholder:"Descrio do lanamento..."})]})]})}),s.jsxs("div",{className:"sticky bottom-0 bg-gray-50 px-4 md:px-6 py-3 border-t border-gray-200 flex justify-end space-x-3",children:[s.jsx("button",{type:"button",onClick:()=>{p(!1),x(null),v({data:"",valor:"",tipo:"receitas_servicos",descricao:""}),w(!1),N("10")},className:"px-4 py-2.5 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition-colors font-medium text-sm md:text-base",children:"Cancelar"}),s.jsx("button",{type:"submit",form:"lancamento-form",className:"px-4 py-2.5 bg-primary-500 text-white rounded-lg hover:bg-primary-600 transition-colors font-medium text-sm md:text-base",children:g?"Atualizar":"Salvar"})]})]})})]})}const Goe={clients:[{table_name:"clients",field_name:"id",display_name:"ID",description:"Identificador nico"},{table_name:"clients",field_name:"nome",display_name:"Nome",description:"Nome completo do cliente"},{table_name:"clients",field_name:"telefone",display_name:"Telefone",description:"Nmero de contato (sensvel)"},{table_name:"clients",field_name:"email",display_name:"Email",description:"Endereo de email (sensvel)"},{table_name:"clients",field_name:"endereco_completo",display_name:"Endereo",description:"Endereo completo"},{table_name:"clients",field_name:"veterinario_confianca",display_name:"Veterinrio",description:"Veterinrio de confiana"},{table_name:"clients",field_name:"valor_diaria",display_name:"Valor Diria",description:"Valor da diria (financeiro)"},{table_name:"clients",field_name:"valor_duas_visitas",display_name:"Valor 2 Visitas",description:"Valor de duas visitas (financeiro)"},{table_name:"clients",field_name:"observacoes",display_name:"Observaes",description:"Notas e observaes"},{table_name:"clients",field_name:"tags",display_name:"Tags",description:"Etiquetas do cliente"},{table_name:"clients",field_name:"notas",display_name:"Notas",description:"Anotaes internas"}],pets:[{table_name:"pets",field_name:"id",display_name:"ID",description:"Identificador nico"},{table_name:"pets",field_name:"client_id",display_name:"Cliente ID",description:"ID do cliente"},{table_name:"pets",field_name:"nome",display_name:"Nome",description:"Nome do pet"},{table_name:"pets",field_name:"caracteristica",display_name:"Caractersticas",description:"Caractersticas fsicas"},{table_name:"pets",field_name:"observacoes",display_name:"Observaes",description:"Notas sobre o pet"}],visits:[{table_name:"visits",field_name:"id",display_name:"ID",description:"Identificador nico"},{table_name:"visits",field_name:"service_id",display_name:"Servio ID",description:"ID do servio"},{table_name:"visits",field_name:"client_id",display_name:"Cliente ID",description:"ID do cliente"},{table_name:"visits",field_name:"lead_id",display_name:"Lead ID",description:"ID do lead (pr-encontros)"},{table_name:"visits",field_name:"data",display_name:"Data",description:"Data da visita"},{table_name:"visits",field_name:"horario",display_name:"Horrio",description:"Horrio da visita"},{table_name:"visits",field_name:"duracao_minutos",display_name:"Durao",description:"Durao em minutos"},{table_name:"visits",field_name:"status",display_name:"Status",description:"Status (agendada/realizada/cancelada)"},{table_name:"visits",field_name:"tipo_visita",display_name:"Tipo Visita",description:"Tipo (inteira/meia)"},{table_name:"visits",field_name:"tipo_encontro",display_name:"Tipo Encontro",description:"Tipo (pre_encontro/visita_servico)"},{table_name:"visits",field_name:"responsavel",display_name:"Responsvel",description:"Responsvel (fernanda/andre)"},{table_name:"visits",field_name:"observacoes",display_name:"Observaes",description:"Notas da visita"},{table_name:"visits",field_name:"valor",display_name:"Valor",description:"Valor da visita (financeiro)"},{table_name:"visits",field_name:"desconto_plataforma",display_name:"Desconto Plataforma",description:"Desconto (financeiro)"}],services:[{table_name:"services",field_name:"id",display_name:"ID",description:"Identificador nico"},{table_name:"services",field_name:"client_id",display_name:"Cliente ID",description:"ID do cliente"},{table_name:"services",field_name:"data_inicio",display_name:"Data Incio",description:"Data de incio do servio"},{table_name:"services",field_name:"data_fim",display_name:"Data Fim",description:"Data de trmino do servio"},{table_name:"services",field_name:"status",display_name:"Status",description:"Status (pendente/em_andamento/concluido/pago)"},{table_name:"services",field_name:"total_visitas",display_name:"Total Visitas",description:"Nmero de visitas"},{table_name:"services",field_name:"total_valor",display_name:"Total Valor",description:"Valor total (financeiro)"},{table_name:"services",field_name:"total_a_receber",display_name:"Total a Receber",description:"Valor a receber (financeiro)"},{table_name:"services",field_name:"desconto_plataforma",display_name:"Desconto",description:"Desconto aplicado (financeiro)"}]};function Xoe(){var j;const[e,t]=m.useState([]),[r,n]=m.useState(""),[a,i]=m.useState("clients"),[o,l]=m.useState([]),[c,u]=m.useState(!1),[d,f]=m.useState(!1);m.useEffect(()=>{h()},[]),m.useEffect(()=>{r&&a&&p()},[r,a]);const h=async()=>{try{const{data:N,error:_}=await W.from("profiles").select("*").order("name");if(_)throw _;t(N||[]);const S=N==null?void 0:N.find(C=>C.name==="Parceiro");S&&n(S.id)}catch(N){console.error("Erro ao buscar perfis:",N),X.error("Erro ao carregar perfis")}},p=async()=>{u(!0);try{const{data:N,error:_}=await W.from("field_permissions").select("*").eq("profile_id",r).eq("table_name",a);if(_)throw _;l(N||[])}catch(N){console.error("Erro ao buscar permisses:",N),X.error("Erro ao carregar permisses")}finally{u(!1)}},g=N=>o.find(_=>_.field_name===N),x=async(N,_)=>{const S=g(N);if(S){const C=!S[_],O={[_]:C};_==="can_read"&&!C&&(O.can_write=!1);const{error:A}=await W.from("field_permissions").update(O).eq("id",S.id);if(A)throw A;l(T=>T.map(D=>D.id===S.id?{...D,...O}:D))}else{const C={profile_id:r,table_name:a,field_name:N,can_read:_==="can_read",can_write:_==="can_write"},{data:O,error:A}=await W.from("field_permissions").insert([C]).select().single();if(A)throw A;l(T=>[...T,O])}},y=async()=>{if(confirm("Deseja realmente resetar todas as permisses para os valores padro? Esta ao no pode ser desfeita.")){f(!0);try{const{error:N}=await W.rpc("populate_default_field_permissions");if(N)throw N;X.success("Permisses resetadas com sucesso!"),await p()}catch(N){console.error("Erro ao resetar permisses:",N),X.error("Erro ao resetar permisses")}finally{f(!1)}}},b=(((j=e.find(N=>N.id===r))==null?void 0:j.name)||"")==="Administrador",w=Goe[a]||[];return s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:s.jsx(si,{className:"w-6 h-6 text-purple-600"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Permisses de Campo (FLS)"}),s.jsx("p",{className:"text-sm text-gray-500",children:"Controle quais campos cada perfil pode visualizar e editar"})]})]}),s.jsxs("button",{onClick:y,disabled:d,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[s.jsx(XS,{className:`w-4 h-4 ${d?"animate-spin":""}`}),"Resetar Padro"]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Perfil"}),s.jsxs("select",{value:r,onChange:N=>n(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"",children:"Selecione um perfil"}),e.map(N=>s.jsx("option",{value:N.id,children:N.name},N.id))]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tabela"}),s.jsxs("select",{value:a,onChange:N=>i(N.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-primary-500",children:[s.jsx("option",{value:"clients",children:"Clientes"}),s.jsx("option",{value:"pets",children:"Pets"}),s.jsx("option",{value:"visits",children:"Visitas"}),s.jsx("option",{value:"services",children:"Servios"})]})]})]}),b&&s.jsx("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:s.jsxs("div",{className:"flex gap-2",children:[s.jsx(Iu,{className:"w-5 h-5 text-blue-600 flex-shrink-0 mt-0.5"}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Perfil Administrador"}),s.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"O perfil Administrador sempre tem acesso total a todos os campos. As configuraes abaixo no se aplicam a este perfil."})]})]})}),c?s.jsx("div",{className:"flex items-center justify-center py-12",children:s.jsx(XS,{className:"w-8 h-8 text-gray-400 animate-spin"})}):s.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campo"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Descrio"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(ps,{className:"w-4 h-4"}),"Visualizar"]})}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider w-32",children:s.jsxs("div",{className:"flex items-center justify-center gap-2",children:[s.jsx(vg,{className:"w-4 h-4"}),"Editar"]})})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:w.map(N=>{const _=g(N.field_name),S=(_==null?void 0:_.can_read)??!0,C=(_==null?void 0:_.can_write)??!1;return s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("code",{className:"px-2 py-1 text-xs font-mono bg-gray-100 rounded",children:N.field_name}),s.jsx("span",{className:"text-sm font-medium text-gray-900",children:N.display_name})]})}),s.jsx("td",{className:"px-6 py-4",children:s.jsx("span",{className:"text-sm text-gray-500",children:N.description})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{onClick:()=>x(N.field_name,"can_read"),disabled:b,className:`inline-flex items-center justify-center w-10 h-10 rounded-lg transition-colors ${S?"bg-green-100 text-green-600 hover:bg-green-200":"bg-red-100 text-red-600 hover:bg-red-200"} disabled:opacity-50 disabled:cursor-not-allowed`,children:S?s.jsx(ps,{className:"w-5 h-5"}):s.jsx(wl,{className:"w-5 h-5"})})}),s.jsx("td",{className:"px-6 py-4 text-center",children:s.jsx("button",{onClick:()=>x(N.field_name,"can_write"),disabled:b||!S,className:`inline-flex items-center justify-center w-10 h-10 rounded-lg transition-colors ${C?"bg-blue-100 text-blue-600 hover:bg-blue-200":"bg-gray-100 text-gray-400 hover:bg-gray-200"} disabled:opacity-50 disabled:cursor-not-allowed`,children:s.jsx(vg,{className:"w-5 h-5"})})})]},N.field_name)})})]})})}),s.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[s.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Legenda:"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ps,{className:"w-4 h-4 text-green-600"}),s.jsxs("span",{className:"text-gray-700",children:[s.jsx("strong",{children:"Verde:"})," Usurio pode visualizar o campo"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wl,{className:"w-4 h-4 text-red-600"}),s.jsxs("span",{className:"text-gray-700",children:[s.jsx("strong",{children:"Vermelho:"})," Campo oculto para o usurio"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(vg,{className:"w-4 h-4 text-blue-600"}),s.jsxs("span",{className:"text-gray-700",children:[s.jsx("strong",{children:"Azul:"})," Usurio pode editar o campo"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Iu,{className:"w-4 h-4 text-gray-600"}),s.jsxs("span",{className:"text-gray-700",children:[s.jsx("strong",{children:"Admin:"})," Sempre tem acesso total"]})]})]})]})]})}const Qoe=[{key:"dashboard",label:"Dashboard"},{key:"clients",label:"Clientes"},{key:"leads",label:"Leads"},{key:"agenda",label:"Agenda"},{key:"services",label:"Servios"},{key:"visits",label:"Visitas"},{key:"pets",label:"Pets"},{key:"financeiro",label:"Financeiro"},{key:"relatorios",label:"Relatrios"},{key:"setup",label:"Configuraes"}];function Zoe(){const[e,t]=m.useState("users"),[r,n]=m.useState([]),[a,i]=m.useState([]),[o,l]=m.useState([]),[c,u]=m.useState(""),[d,f]=m.useState(!0),[h,p]=m.useState(!1),[g,x]=m.useState(null),[y,v]=m.useState(!1),[b,w]=m.useState(!1),[j,N]=m.useState(null),[_,S]=m.useState({full_name:"",email:"",phone:"",profile_id:""}),{isAdmin:C,loading:O,userProfile:A}=nn();m.useEffect(()=>{!O&&C&&T()},[e,O,C]),m.useEffect(()=>{y&&a.length===0&&q()},[y]);const T=async()=>{f(!0);try{e==="users"?await D():e==="profiles"?await q():e==="permissions"&&(await q(),await re())}catch(E){console.error("Erro ao carregar dados:",E),K("error","Erro ao carregar dados")}finally{f(!1)}},D=async()=>{const{data:E,error:Q}=await W.from("user_profiles").select(`
        *,
        profile:profiles (
          id,
          name,
          description,
          is_admin,
          is_active
        )
      `).order("created_at",{ascending:!1});if(Q)throw Q;n(E)},q=async()=>{const{data:E,error:Q}=await W.from("profiles").select("*").order("name");if(Q)throw Q;i(E),E.length>0&&!c&&u(E[0].id)},re=async()=>{const{data:E,error:Q}=await W.from("permissions").select("*").order("resource");if(Q)throw Q;l(E||[])},K=(E,Q)=>{x({type:E,text:Q}),setTimeout(()=>x(null),5e3)},z=E=>{const Q=E.replace(/\D/g,"");return Q.length<=2?Q:Q.length<=7?`(${Q.slice(0,2)})${Q.slice(2)}`:Q.length<=11?`(${Q.slice(0,2)})${Q.slice(2,7)}-${Q.slice(7)}`:`(${Q.slice(0,2)})${Q.slice(2,7)}-${Q.slice(7,11)}`},P=async(E,Q)=>{if((A==null?void 0:A.id)===E&&Q===!0){K("error","Voc no pode desativar sua prpria conta");return}p(!0);try{const{error:J}=await W.from("user_profiles").update({is_active:!Q}).eq("id",E);if(J)throw J;await D(),K("success",`Usurio ${Q?"desativado":"ativado"} com sucesso`)}catch(J){console.error("Erro ao atualizar usurio:",J),K("error","Erro ao atualizar usurio")}finally{p(!1)}},M=async(E,Q)=>{if(confirm(`Enviar link de acesso para ${E}?

O usurio receber um email com link para fazer login.`)){p(!0);try{const{error:J}=await W.auth.resetPasswordForEmail(E,{redirectTo:`${window.location.origin}/login`});if(J)throw J;K("success",`Link de acesso enviado para ${Q} (${E})`)}catch(J){console.error("Erro ao enviar magic link:",J),K("error",J.message||"Erro ao enviar link de acesso")}finally{p(!1)}}},L=async(E,Q,J,de)=>{p(!0);try{const ae=o.find(pe=>pe.profile_id===E&&pe.resource===Q);if(ae){const{error:pe}=await W.from("permissions").update({[J]:de}).eq("id",ae.id);if(pe)throw pe}else{const pe={profile_id:E,resource:Q,can_read:J==="can_read"?de:!1,can_create:J==="can_create"?de:!1,can_update:J==="can_update"?de:!1,can_delete:J==="can_delete"?de:!1},{error:k}=await W.from("permissions").insert(pe);if(k)throw k}await re(),K("success","Permisso atualizada")}catch(ae){console.error("Erro ao atualizar permisso:",ae),K("error","Erro ao atualizar permisso")}finally{p(!1)}},G=(E,Q,J)=>{const de=o.find(ae=>ae.profile_id===E&&ae.resource===Q);return de?de[J]:!1},$=async E=>{var Q,J;E.preventDefault(),p(!0);try{if(!_.full_name||!_.email||!_.profile_id){K("error","Preencha todos os campos obrigatrios");return}const de="Fefelina2024!",{data:{session:ae}}=await W.auth.getSession(),{data:pe,error:k}=await W.auth.signUp({email:_.email,password:de,options:{emailRedirectTo:void 0,data:{full_name:_.full_name}}});if(k)throw console.error("Erro ao criar usurio no auth:",k),k;if(!pe.user)throw new Error("Usurio no foi criado no auth");ae&&await W.auth.setSession({access_token:ae.access_token,refresh_token:ae.refresh_token}),console.log("Criando user_profile para:",pe.user.id);const{data:H,error:ne}=await W.rpc("create_user_profile",{p_user_id:pe.user.id,p_profile_id:_.profile_id,p_full_name:_.full_name,p_email:_.email,p_phone:_.phone||null});if(ne)throw console.error("Erro ao criar user_profile:",ne),console.warn("ATENO: Usurio criado no auth mas sem perfil:",pe.user.id),(Q=ne.message)!=null&&Q.includes("apenas administradores")?new Error(` ACESSO NEGADO!

Voc no tem permisso de administrador.

 Verifique:
1. Se voc est logado como administrador
2. Se executou o script SECURE-USER-CREATION.sql
3. Se fez logout/login aps executar o script`):(J=ne.message)!=null&&J.includes("function")||ne.code==="42883"?new Error(` FUNO NO ENCONTRADA!

 Execute o script SQL:
1. Abra o Supabase SQL Editor
2. Cole TODO o contedo do arquivo SECURE-USER-CREATION.sql
3. Clique em "Run"
4. Faa logout e login novamente

Erro tcnico: ${ne.message}`):new Error(`Erro ao criar perfil: ${ne.message}`);console.log("User_profile criado com sucesso:",H),N({email:_.email,password:de}),v(!1),w(!0),S({full_name:"",email:"",phone:"",profile_id:""}),await D()}catch(de){console.error("Erro ao criar usurio:",de),K("error",de.message||"Erro ao criar usurio")}finally{p(!1)}},U=E=>{navigator.clipboard.writeText(E),K("success","Copiado para rea de transferncia")};return O||d?s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Carregando configuraes..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"page-title-fefelina",children:[s.jsx(Fx,{className:"w-8 h-8 text-primary-500 inline-block mr-3"}),"Configuraes do Sistema"]}),s.jsx("p",{className:"text-gray-700 mt-2",children:"Gerencie usurios, perfis e permisses do sistema"}),s.jsx("div",{className:"divider-fefelina"})]}),g&&s.jsx("div",{className:`p-4 rounded-lg border ${g.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center",children:[g.type==="success"?s.jsx(bl,{className:"w-5 h-5 mr-2"}):s.jsx(Gn,{className:"w-5 h-5 mr-2"}),s.jsx("span",{children:g.text})]})}),s.jsxs("div",{className:"bg-white rounded-lg shadow-fefelina",children:[s.jsx("div",{className:"border-b border-gray-200",children:s.jsxs("nav",{className:"flex -mb-px",children:[s.jsxs("button",{onClick:()=>t("users"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="users"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(No,{className:"w-4 h-4 inline-block mr-2"}),"Usurios"]}),s.jsxs("button",{onClick:()=>t("profiles"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="profiles"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(si,{className:"w-4 h-4 inline-block mr-2"}),"Perfis"]}),s.jsxs("button",{onClick:()=>t("permissions"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="permissions"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(Fx,{className:"w-4 h-4 inline-block mr-2"}),"Permisses"]}),s.jsxs("button",{onClick:()=>t("field-permissions"),className:`px-6 py-4 text-sm font-medium border-b-2 transition-colors ${e==="field-permissions"?"border-primary-500 text-primary-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[s.jsx(ps,{className:"w-4 h-4 inline-block mr-2"}),"Campos (FLS)"]})]})}),s.jsx("div",{className:"p-6",children:d?s.jsxs("div",{className:"text-center py-12",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]}):s.jsxs(s.Fragment,{children:[e==="users"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Gerenciar Usurios"}),s.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Total: ",r.length," usurio(s)"]})]}),s.jsxs("button",{onClick:()=>v(!0),className:"btn-fefelina inline-flex items-center",children:[s.jsx(QS,{className:"w-4 h-4 mr-2"}),"Novo Usurio"]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Usurio"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Perfil"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cadastro"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aes"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(E=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium text-gray-900",children:E.full_name}),s.jsx("div",{className:"text-sm text-gray-500",children:E.email})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.profile.is_admin?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:[E.profile.is_admin&&s.jsx(si,{className:"w-3 h-3 mr-1"}),E.profile.name]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${E.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.is_active?"Ativo":"Inativo"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(E.created_at).toLocaleDateString("pt-BR")}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[(A==null?void 0:A.id)!==E.id&&s.jsxs("button",{onClick:()=>M(E.email,E.full_name),disabled:h,className:"inline-flex items-center px-3 py-1 rounded-md text-sm font-medium text-blue-600 hover:bg-blue-50 transition-colors disabled:opacity-50",title:"Enviar link de acesso por email",children:[s.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"Enviar Acesso"]}),(A==null?void 0:A.id)===E.id&&E.is_active?s.jsx("span",{className:"inline-flex items-center px-3 py-1 text-sm text-gray-400 italic",children:"Sua conta"}):s.jsx("button",{onClick:()=>P(E.id,E.is_active),disabled:h,className:`inline-flex items-center px-3 py-1 rounded-md text-sm font-medium transition-colors ${E.is_active?"text-red-600 hover:bg-red-50":"text-green-600 hover:bg-green-50"} disabled:opacity-50`,children:E.is_active?s.jsxs(s.Fragment,{children:[s.jsx(mn,{className:"w-4 h-4 mr-1"}),"Desativar"]}):s.jsxs(s.Fragment,{children:[s.jsx(bl,{className:"w-4 h-4 mr-1"}),"Ativar"]})})]})})]},E.id))})]})}),r.length===0&&s.jsx("div",{className:"text-center py-12 text-gray-500",children:"Nenhum usurio encontrado"})]}),e==="profiles"&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Perfis de Acesso"})}),s.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:a.map(E=>s.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-primary-300 transition-colors",children:[s.jsxs("div",{className:"flex items-start justify-between mb-3",children:[s.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[E.is_admin&&s.jsx(si,{className:"w-5 h-5 mr-2 text-purple-600"}),E.name]}),s.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${E.is_active?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:E.is_active?"Ativo":"Inativo"})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-3",children:E.description}),E.is_admin&&s.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-md p-2 text-xs text-purple-800",children:[s.jsx(si,{className:"w-3 h-3 inline mr-1"}),"Acesso total ao sistema"]})]},E.id))})]}),e==="permissions"&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-between items-center mb-6",children:[s.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Matriz de Permisses"}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Perfil:"}),s.jsx("select",{value:c,onChange:E=>u(E.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-primary-500",children:a.map(E=>s.jsx("option",{value:E.id,children:E.name},E.id))})]})]}),s.jsx("div",{className:"overflow-x-auto",children:s.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[s.jsx("thead",{className:"bg-gray-50",children:s.jsxs("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Recurso"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Visualizar"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Criar"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Editar"}),s.jsx("th",{className:"px-6 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Excluir"})]})}),s.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:Qoe.map(E=>s.jsxs("tr",{className:"hover:bg-gray-50",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:E.label}),["can_read","can_create","can_update","can_delete"].map(Q=>s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-center",children:s.jsx("input",{type:"checkbox",checked:G(c,E.key,Q),onChange:J=>L(c,E.key,Q,J.target.checked),disabled:h,className:"w-4 h-4 text-primary-600 border-gray-300 rounded focus:ring-primary-500 disabled:opacity-50"})},Q))]},E.key))})]})}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Gn,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Dica:"}),s.jsxs("p",{children:["Perfis com ",s.jsx("strong",{children:"Admin"})," marcado tm acesso total automaticamente, independente das permisses configuradas aqui."]})]})]})})]}),e==="field-permissions"&&s.jsx(Xoe,{})]})})]}),y&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:s.jsxs("div",{className:"p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("h3",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[s.jsx(QS,{className:"w-6 h-6 mr-2 text-primary-500"}),"Cadastrar Novo Usurio"]}),s.jsx("button",{onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:s.jsx(mn,{className:"w-6 h-6"})})]}),s.jsxs("form",{onSubmit:$,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Nome Completo ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"text",value:_.full_name,onChange:E=>S({..._,full_name:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"Joo Silva",required:!0})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx("input",{type:"email",value:_.email,onChange:E=>S({..._,email:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"joao@exemplo.com",required:!0})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Telefone"}),s.jsx("input",{type:"tel",value:_.phone,onChange:E=>{const Q=z(E.target.value);S({..._,phone:Q})},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"(47)99999-9999",maxLength:14})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Perfil ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsxs("select",{value:_.profile_id,onChange:E=>S({..._,profile_id:E.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",required:!0,children:[s.jsx("option",{value:"",children:"Selecione um perfil"}),a.map(E=>s.jsx("option",{value:E.id,children:E.name},E.id))]})]}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Gn,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-yellow-800",children:[s.jsx("p",{className:"font-medium",children:"Senha inicial: Fefelina2024!"}),s.jsx("p",{className:"mt-1",children:"O usurio dever trocar a senha no primeiro acesso."})]})]})}),s.jsxs("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",disabled:h,children:"Cancelar"}),s.jsx("button",{type:"submit",className:"btn-fefelina",disabled:h,children:h?"Criando...":"Criar Conta"})]})]})]})})}),b&&j&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:s.jsx("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:s.jsxs("div",{className:"p-6",children:[s.jsx("div",{className:"flex items-center justify-center mb-4",children:s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:s.jsx(bl,{className:"w-8 h-8 text-green-600"})})}),s.jsx("h3",{className:"text-xl font-semibold text-gray-900 text-center mb-2",children:"Conta criada com sucesso!"}),s.jsx("p",{className:"text-sm text-gray-600 text-center mb-6",children:"Anote as credenciais abaixo e repasse para o usurio:"}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-4 space-y-3",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Email:"}),s.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded px-3 py-2",children:[s.jsx("span",{className:"text-sm font-mono text-gray-900",children:j.email}),s.jsx("button",{onClick:()=>U(j.email),className:"text-primary-600 hover:text-primary-700",title:"Copiar",children:s.jsx(Lx,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"Senha inicial:"}),s.jsxs("div",{className:"flex items-center justify-between bg-white border border-gray-300 rounded px-3 py-2",children:[s.jsx("span",{className:"text-sm font-mono text-gray-900",children:j.password}),s.jsx("button",{onClick:()=>U(j.password),className:"text-primary-600 hover:text-primary-700",title:"Copiar",children:s.jsx(Lx,{className:"w-4 h-4"})})]})]})]}),s.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-3 mt-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Gn,{className:"w-5 h-5 text-orange-600 mt-0.5 mr-2 flex-shrink-0"}),s.jsxs("p",{className:"text-sm text-orange-800",children:[s.jsx("strong",{children:"Importante:"}),' Pea para o usurio trocar a senha no primeiro acesso em "Meu Perfil".']})]})}),s.jsx("button",{onClick:()=>{w(!1),N(null)},className:"w-full btn-fefelina mt-6",children:"Entendi"})]})})})]})}function Joe({selectedId:e,onSelect:t}){return s.jsxs("div",{className:"space-y-3",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Escolha seu avatar"}),s.jsx("div",{className:"grid grid-cols-6 sm:grid-cols-8 md:grid-cols-10 gap-2",children:Lf.map(r=>s.jsx("button",{type:"button",onClick:()=>t(r.id),className:`
              w-12 h-12 rounded-full flex items-center justify-center text-2xl
              transition-all duration-200 hover:scale-110
              ${r.bgColor}
              ${e===r.id?"ring-4 ring-fefelina-primary ring-offset-2 scale-105":"ring-2 ring-gray-200 hover:ring-fefelina-primary"}
            `,title:r.label,children:s.jsx("span",{className:"select-none",children:r.emoji})},r.id))})]})}function ele(){const{userProfile:e,refreshPermissions:t}=nn(),[r,n]=m.useState({full_name:"",email:"",phone:"",avatar_url:""}),[a,i]=m.useState(!1),[o,l]=m.useState(null),[c,u]=m.useState(!0);m.useEffect(()=>{e&&(n({full_name:e.full_name||"",email:e.email||"",phone:e.phone||"",avatar_url:e.avatar_url||"cat-orange"}),u(!1))},[e]);const d=(p,g)=>{l({type:p,text:g}),setTimeout(()=>l(null),5e3)},f=p=>{const g=p.replace(/\D/g,"");return g.length<=2?g:g.length<=7?`(${g.slice(0,2)})${g.slice(2)}`:g.length<=11?`(${g.slice(0,2)})${g.slice(2,7)}-${g.slice(7)}`:`(${g.slice(0,2)})${g.slice(2,7)}-${g.slice(7,11)}`},h=async p=>{if(p.preventDefault(),!!e){i(!0);try{const{error:g}=await W.from("user_profiles").update({full_name:r.full_name,phone:r.phone,avatar_url:r.avatar_url}).eq("user_id",e.user_id);if(g)throw g;await t(),d("success","Perfil atualizado com sucesso!")}catch(g){console.error("Erro ao atualizar perfil:",g),d("error","Erro ao atualizar perfil. Tente novamente.")}finally{i(!1)}}};return c?s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600 mx-auto"}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando perfil..."})]})}):e?s.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"page-title-fefelina",children:[s.jsx(Ru,{className:"w-8 h-8 text-primary-500 inline-block mr-3"}),"Meu Perfil"]}),s.jsx("p",{className:"text-gray-700 mt-2",children:"Gerencie suas informaes pessoais e preferncias"}),s.jsx("div",{className:"divider-fefelina"})]}),o&&s.jsx("div",{className:`p-4 rounded-lg border ${o.type==="success"?"bg-green-50 border-green-200 text-green-800":"bg-red-50 border-red-200 text-red-800"}`,children:s.jsxs("div",{className:"flex items-center",children:[o.type==="success"?s.jsx(bl,{className:"w-5 h-5 mr-2"}):s.jsx(Gn,{className:"w-5 h-5 mr-2"}),s.jsx("span",{children:o.text})]})}),s.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[s.jsx("div",{className:"md:col-span-1",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-fefelina p-6 sticky top-6",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(Ni,{avatarId:e.avatar_url,name:e.full_name,size:"xl",className:"shadow-lg"})}),s.jsx("h2",{className:"mt-4 text-xl font-semibold text-gray-900",children:e.full_name}),s.jsx("p",{className:"text-sm text-gray-500",children:e.email})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsx("div",{className:"flex items-center justify-between p-3 bg-primary-50 rounded-lg",children:s.jsxs("div",{className:"flex items-center",children:[s.jsx(si,{className:"w-5 h-5 text-primary-600 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-primary-900",children:"Perfil de Acesso"})]})}),s.jsxs("div",{className:"text-center",children:[s.jsxs("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-medium ${e.profile.is_admin?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:[e.profile.is_admin&&s.jsx(si,{className:"w-4 h-4 mr-2"}),e.profile.name]}),s.jsx("p",{className:"mt-2 text-xs text-gray-600",children:e.profile.description})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-green-50 rounded-lg",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx(Do,{className:"w-5 h-5 text-green-600 mr-2"}),s.jsx("span",{className:"text-sm font-medium text-green-900",children:"Status"})]}),s.jsx("span",{className:"text-sm font-semibold text-green-700",children:e.is_active?"Ativo":"Inativo"})]})]})]})}),s.jsxs("div",{className:"md:col-span-2",children:[s.jsxs("div",{className:"bg-white rounded-lg shadow-fefelina p-6",children:[s.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-6",children:"Informaes Pessoais"}),s.jsxs("form",{onSubmit:h,className:"space-y-6",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Ru,{className:"w-4 h-4 inline mr-2"}),"Nome Completo"]}),s.jsx("input",{type:"text",value:r.full_name,onChange:p=>n({...r,full_name:p.target.value}),required:!0,className:"input-fefelina",placeholder:"Seu nome completo"})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(die,{className:"w-4 h-4 inline mr-2"}),"Email"]}),s.jsx("input",{type:"email",value:r.email,disabled:!0,className:"input-fefelina bg-gray-50 cursor-not-allowed"}),s.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"O email no pode ser alterado. Entre em contato com o administrador se necessrio."})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[s.jsx(Lu,{className:"w-4 h-4 inline mr-2"}),"Telefone"]}),s.jsx("input",{type:"tel",value:r.phone,onChange:p=>{const g=f(p.target.value);n({...r,phone:g})},className:"input-fefelina",placeholder:"(47)99999-9999",maxLength:14})]}),s.jsxs("div",{children:[s.jsx(Joe,{selectedId:r.avatar_url||null,onSelect:p=>n({...r,avatar_url:p})}),s.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Escolha um avatar que representa voc"})]}),s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-blue-900",children:"Segurana da Conta"}),s.jsx("p",{className:"text-xs text-blue-700 mt-1",children:"Mantenha sua senha segura e atualizada"})]}),s.jsx("button",{type:"button",onClick:()=>window.location.href="/fefelina-admin/change-password",className:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-100 rounded-lg hover:bg-blue-200 transition-colors",children:"Trocar Senha"})]})}),s.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-6 border-t",children:[s.jsx("button",{type:"button",onClick:()=>{e&&n({full_name:e.full_name||"",email:e.email||"",phone:e.phone||"",avatar_url:e.avatar_url||""})},disabled:a,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:"Cancelar"}),s.jsx("button",{type:"submit",disabled:a,className:"btn-fefelina disabled:opacity-50",children:a?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white inline-block mr-2"}),"Salvando..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Nie,{className:"w-4 h-4 inline mr-2"}),"Salvar Alteraes"]})})]})]})]}),s.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Gn,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Sobre seu perfil"}),s.jsxs("ul",{className:"space-y-1 list-disc list-inside",children:[s.jsxs("li",{children:['Suas permisses so definidas pelo perfil "',e.profile.name,'"']}),s.jsx("li",{children:"Para alterar o email, entre em contato com o administrador"}),s.jsx("li",{children:"A foto de perfil deve ser uma URL pblica (ex: Imgur, Google Drive pblico)"})]})]})]})})]})]})]}):s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Gn,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),s.jsx("p",{className:"text-gray-600",children:"Erro ao carregar perfil"})]})})}function tle(){const e=Ei(),[t,r]=m.useState(""),[n,a]=m.useState(""),[i,o]=m.useState(""),[l,c]=m.useState(!1),[u,d]=m.useState(!1),[f,h]=m.useState(!1),[p,g]=m.useState(!1),[x,y]=m.useState(""),[v,b]=m.useState(!1),w=new URLSearchParams(window.location.search).get("firstLogin")==="true",j=_=>{const S=[];return _.length<8&&S.push("Mnimo de 8 caracteres"),/[A-Z]/.test(_)||S.push("Pelo menos uma letra maiscula"),/[a-z]/.test(_)||S.push("Pelo menos uma letra minscula"),/[0-9]/.test(_)||S.push("Pelo menos um nmero"),/[!@#$%^&*]/.test(_)||S.push("Pelo menos um caractere especial (!@#$%^&*)"),S},N=async _=>{if(_.preventDefault(),y(""),n!==i){y("As senhas no coincidem");return}const S=j(n);if(S.length>0){y(`Senha invlida: ${S.join(", ")}`);return}if(n===t){y("A nova senha deve ser diferente da senha atual");return}g(!0);try{const{error:C}=await W.auth.updateUser({password:n});if(C)throw C;b(!0),setTimeout(()=>{e("/")},2e3)}catch(C){console.error("Erro ao trocar senha:",C),y(C.message||"Erro ao trocar senha. Verifique sua senha atual.")}finally{g(!1)}};return v?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-secondary-50 via-white to-primary-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(bl,{className:"w-8 h-8 text-green-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Senha alterada com sucesso!"}),s.jsx("p",{className:"text-gray-600",children:"Redirecionando para o dashboard..."})]})}):s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-secondary-50 via-white to-primary-50 p-4",children:s.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md w-full",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Iu,{className:"w-8 h-8 text-primary-600"})}),s.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:w?"Bem-vindo!":"Trocar Senha"}),s.jsx("p",{className:"text-gray-600",children:w?"Por segurana, troque sua senha inicial antes de continuar.":"Altere sua senha para manter sua conta segura."})]}),w&&s.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Gn,{className:"w-5 h-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsxs("div",{className:"text-sm text-blue-800",children:[s.jsx("p",{className:"font-medium mb-1",children:"Senha inicial fornecida:"}),s.jsx("p",{className:"font-mono",children:"Fefelina2024!"}),s.jsx("p",{className:"mt-2",children:'Use esta senha no campo "Senha Atual" abaixo.'})]})]})}),x&&s.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Gn,{className:"w-5 h-5 text-red-600 mt-0.5 mr-3 flex-shrink-0"}),s.jsx("p",{className:"text-sm text-red-800",children:x})]})}),s.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Senha Atual"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:l?"text":"password",value:t,onChange:_=>r(_.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:w?"Fefelina2024!":"",required:!0}),s.jsx("button",{type:"button",onClick:()=>c(!l),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:l?s.jsx(wl,{className:"w-5 h-5"}):s.jsx(ps,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nova Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:u?"text":"password",value:n,onChange:_=>a(_.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"",required:!0}),s.jsx("button",{type:"button",onClick:()=>d(!u),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:u?s.jsx(wl,{className:"w-5 h-5"}):s.jsx(ps,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirmar Nova Senha"}),s.jsxs("div",{className:"relative",children:[s.jsx("input",{type:f?"text":"password",value:i,onChange:_=>o(_.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"",required:!0}),s.jsx("button",{type:"button",onClick:()=>h(!f),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:f?s.jsx(wl,{className:"w-5 h-5"}):s.jsx(ps,{className:"w-5 h-5"})})]})]}),s.jsxs("div",{className:"bg-gray-50 border border-gray-200 rounded-lg p-3",children:[s.jsx("p",{className:"text-xs font-medium text-gray-700 mb-2",children:"Requisitos da senha:"}),s.jsxs("ul",{className:"text-xs text-gray-600 space-y-1",children:[s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-2 ${n.length>=8?"bg-green-500":"bg-gray-300"}`}),"Mnimo de 8 caracteres"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-2 ${/[A-Z]/.test(n)?"bg-green-500":"bg-gray-300"}`}),"Letra maiscula"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-2 ${/[a-z]/.test(n)?"bg-green-500":"bg-gray-300"}`}),"Letra minscula"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-2 ${/[0-9]/.test(n)?"bg-green-500":"bg-gray-300"}`}),"Nmero"]}),s.jsxs("li",{className:"flex items-center",children:[s.jsx("span",{className:`w-1.5 h-1.5 rounded-full mr-2 ${/[!@#$%^&*]/.test(n)?"bg-green-500":"bg-gray-300"}`}),"Caractere especial (!@#$%^&*)"]})]})]}),s.jsx("button",{type:"submit",disabled:p,className:"w-full btn-fefelina disabled:opacity-50 disabled:cursor-not-allowed",children:p?"Salvando...":"Trocar Senha"}),!w&&s.jsx("button",{type:"button",onClick:()=>e("/"),className:"w-full px-4 py-2 text-gray-700 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancelar"})]})]})})}function rle({title:e,titleId:t,...r},n){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?m.createElement("title",{id:t},e):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"}))}const nle=m.forwardRef(rle),ale=nle;function ile({title:e,titleId:t,...r},n){return m.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:n,"aria-labelledby":t},r),e?m.createElement("title",{id:t},e):null,m.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const sle=m.forwardRef(ile),ole=sle;function _g({inSidebar:e=!1}){const[t,r]=m.useState(!1),[n,a]=m.useState(!1),i=m.useRef(null),o=Ei(),{userProfile:l,isAdmin:c}=nn();m.useEffect(()=>{function d(f){i.current&&!i.current.contains(f.target)&&r(!1)}return t&&document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[t]);const u=async()=>{try{a(!0),await W.auth.signOut(),o("/login")}catch(d){console.error("Erro ao fazer logout:",d),alert("Erro ao fazer logout. Tente novamente.")}finally{a(!1)}};return l?s.jsxs("div",{className:"relative",ref:i,children:[s.jsxs("button",{onClick:()=>r(!t),className:"flex items-center space-x-3 px-3 py-2 rounded-lg hover:bg-gray-100 transition-colors duration-150",children:[s.jsx(Ni,{avatarId:l.avatar_url,name:l.full_name,size:"md",className:"shadow-sm"}),s.jsxs("div",{className:"hidden md:block text-left",children:[s.jsx("p",{className:"text-sm font-medium text-gray-900",children:l.full_name}),s.jsxs("p",{className:"text-xs text-gray-500 flex items-center",children:[c&&s.jsx(si,{className:"w-3 h-3 mr-1 text-primary-600"}),l.profile.name]})]}),s.jsx(Fae,{className:`w-4 h-4 text-gray-500 transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&s.jsxs("div",{className:`absolute ${e?"left-0":"right-0"} w-64 bg-white rounded-lg shadow-xl border border-gray-200 py-2 z-50 animate-in fade-in slide-in-from-top-2 duration-200 ${e?"bottom-full mb-2":"top-full mt-2"}`,children:[s.jsxs("div",{className:"px-4 py-3 border-b border-gray-100",children:[s.jsx("p",{className:"text-sm font-semibold text-gray-900",children:l.full_name}),s.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:l.email}),s.jsxs("div",{className:"mt-2 inline-flex items-center px-2 py-1 rounded-md bg-primary-50 text-xs font-medium text-primary-700",children:[c&&s.jsx(si,{className:"w-3 h-3 mr-1"}),l.profile.name]})]}),s.jsxs("div",{className:"py-2",children:[s.jsxs("button",{onClick:()=>{r(!1),o("/profile")},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[s.jsx(Ru,{className:"w-4 h-4 mr-3 text-gray-500"}),"Meu Perfil"]}),c&&s.jsxs("button",{onClick:()=>{r(!1),o("/setup")},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-50 flex items-center",children:[s.jsx(Fx,{className:"w-4 h-4 mr-3 text-gray-500"}),"Configuraes"]})]}),s.jsx("div",{className:"border-t border-gray-100 pt-2",children:s.jsxs("button",{onClick:u,disabled:n,className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center disabled:opacity-50",children:[s.jsx(cie,{className:"w-4 h-4 mr-3"}),n?"Saindo...":"Sair"]})})]})]}):null}const lle=[{name:"Dashboard",href:"/dashboard",resource:"dashboard"},{name:"Leads",href:"/leads",resource:"leads"},{name:"Clientes",href:"/clients",resource:"clients"},{name:"Pets",href:"/pets",resource:"pets"},{name:"Servios",href:"/services",resource:"services"},{name:"Visitas",href:"/visits",resource:"visits"},{name:"Agenda",href:"/agenda",resource:"agenda"},{name:"Finanas",href:"/finances",resource:"financeiro"},{name:"Relatrios",href:"/reports",resource:"relatorios"},{name:"Caixa",href:"/financial",resource:"financeiro"}];function cle({children:e}){const t=Es(),[r,n]=m.useState(!1),{canRead:a,isAdmin:i}=nn(),o=m.useMemo(()=>lle.filter(l=>i?!0:l.resource&&a(l.resource)),[a,i]);return m.useEffect(()=>{const l=()=>{const c=window.innerWidth,u=c<1280;console.log("Tablet/iPad mode:",u,"Width:",c)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),s.jsxs("div",{className:"h-screen flex overflow-hidden bg-gray-100",children:[r&&s.jsxs("div",{className:"fixed inset-0 flex z-50 md:z-50",children:[s.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-50 backdrop-blur-sm transition-opacity",onClick:()=>n(!1)}),s.jsxs("div",{className:"relative flex-1 flex flex-col max-w-xs w-full bg-white shadow-2xl transform transition-transform",children:[s.jsx("div",{className:"absolute top-0 right-0 -mr-12 pt-2",children:s.jsx("button",{className:"ml-1 flex items-center justify-center h-10 w-10 rounded-full focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white bg-white bg-opacity-20 hover:bg-opacity-30 transition-all",onClick:()=>n(!1),children:s.jsx(ole,{className:"h-6 w-6 text-white"})})}),s.jsxs("div",{className:"flex-1 h-0 pt-5 pb-4 overflow-y-auto",children:[s.jsxs("div",{className:"flex-shrink-0 flex items-center px-4 mb-6",children:[s.jsx("img",{src:"/fefelina-admin/fefelina-logo.png",alt:"Fefelina Logo",className:"w-8 h-8 mr-2 rounded-lg shadow-sm"}),s.jsx("h1",{className:"text-base font-bold text-secondary-700",children:"Fefelina Admin"})]}),s.jsx("nav",{className:"mt-5 px-2 space-y-1",children:o.map(l=>{const c=t.pathname===l.href;return s.jsx(Mj,{to:l.href,onClick:()=>n(!1),className:`${c?"bg-primary-100 text-primary-800 border-l-4 border-primary-500":"text-secondary-700 hover:bg-primary-50 hover:text-primary-700"} group flex items-center px-2 py-3 text-base font-medium rounded-md transition-colors duration-200`,children:l.name},l.name)})})]}),s.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:s.jsx(_g,{inSidebar:!0})})]})]}),s.jsx("div",{className:"hidden xl:flex xl:flex-shrink-0",children:s.jsx("div",{className:"flex flex-col w-64",children:s.jsxs("div",{className:"flex flex-col h-0 flex-1 border-r border-gray-200 bg-white",children:[s.jsxs("div",{className:"flex-1 flex flex-col pt-5 pb-4 overflow-y-auto",children:[s.jsxs("div",{className:"flex items-center flex-shrink-0 px-4 mb-2",children:[s.jsx("img",{src:"/fefelina-admin/fefelina-logo.png",alt:"Fefelina Logo",className:"w-10 h-10 mr-3 rounded-lg shadow-sm"}),s.jsx("h1",{className:"text-lg font-bold text-secondary-700",children:"Fefelina Admin"})]}),s.jsx("nav",{className:"mt-5 flex-1 px-2 bg-white space-y-1",children:o.map(l=>{const c=t.pathname===l.href;return s.jsx(Mj,{to:l.href,className:`${c?"bg-primary-100 text-primary-800 border-l-4 border-primary-500":"text-secondary-700 hover:bg-primary-50 hover:text-primary-700"} group flex items-center px-2 py-2 text-sm font-medium rounded-md transition-colors duration-200`,children:l.name},l.name)})})]}),s.jsx("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:s.jsx(_g,{inSidebar:!0})})]})})}),s.jsxs("div",{className:"flex flex-col w-0 flex-1 overflow-hidden",children:[s.jsx("div",{className:"xl:hidden",children:s.jsxs("div",{className:"relative z-10 flex-shrink-0 flex h-16 bg-white shadow",children:[s.jsx("button",{className:"px-4 border-r border-gray-200 text-gray-600 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 xl:hidden",onClick:()=>n(!0),children:s.jsx(ale,{className:"h-6 w-6"})}),s.jsxs("div",{className:"flex-1 px-4 flex justify-between items-center",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("img",{src:"/fefelina-admin/fefelina-logo.png",alt:"Fefelina Logo",className:"w-8 h-8 mr-2 rounded-lg shadow-sm"}),s.jsx("h1",{className:"text-base font-bold text-secondary-700",children:"Fefelina Admin"})]}),s.jsx(_g,{})]})]})}),s.jsx("main",{className:"flex-1 relative z-0 overflow-y-auto focus:outline-none",children:s.jsx("div",{className:"py-4 md:py-6",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 md:px-8",children:e})})})]})]})}function _n({children:e,resource:t,action:r="read",requireAdmin:n=!1}){const a=Es(),{loading:i,isAdmin:o,hasPermission:l,userProfile:c}=nn();if(i)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-secondary-50 via-white to-primary-50",children:s.jsx(In,{size:"lg",variant:"sleeping",text:"Verificando suas credenciais..."})});if(!c)return s.jsx(o$,{to:"/login",state:{from:a},replace:!0});if(t){if(n&&!o)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Iu,{className:"w-8 h-8 text-red-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Acesso Restrito"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Esta rea  exclusiva para administradores do sistema."}),s.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:s.jsxs("div",{className:"flex items-start",children:[s.jsx(Gn,{className:"w-5 h-5 text-yellow-600 mt-0.5 mr-2 flex-shrink-0"}),s.jsxs("div",{className:"text-left",children:[s.jsxs("p",{className:"text-sm text-yellow-800 font-medium",children:["Seu perfil: ",(c==null?void 0:c.profile.name)||"Sem perfil"]}),s.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Para acessar esta rea, entre em contato com um administrador."})]})]})}),s.jsx("button",{onClick:()=>window.history.back(),className:"w-full btn-fefelina",children:"Voltar"})]})});if(!l(t,r))return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 px-4",children:s.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[s.jsx("div",{className:"w-16 h-16 bg-orange-100 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(Iu,{className:"w-8 h-8 text-orange-600"})}),s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Sem Permisso"}),s.jsx("p",{className:"text-gray-600 mb-6",children:"Voc no tem permisso para acessar esta funcionalidade."}),s.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6 text-left",children:[s.jsx("p",{className:"text-sm text-blue-900 font-medium mb-2",children:"Informaes do seu perfil:"}),s.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Nome:"})," ",(c==null?void 0:c.full_name)||"N/A"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Perfil:"})," ",(c==null?void 0:c.profile.name)||"Sem perfil"]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Recurso:"})," ",t]}),s.jsxs("li",{children:[" ",s.jsx("strong",{children:"Ao necessria:"})," ",r==="read"?"visualizar":r==="create"?"criar":r==="update"?"editar":"excluir"]})]})]}),s.jsx("p",{className:"text-sm text-gray-600 mb-6",children:"Entre em contato com um administrador para solicitar acesso."}),s.jsx("button",{onClick:()=>window.history.back(),className:"w-full btn-fefelina",children:"Voltar"})]})})}return s.jsx(s.Fragment,{children:e})}function ule(){const e=Ei(),{userProfile:t,canRead:r,loading:n}=nn();return m.useEffect(()=>{if(n||!t)return;const i=[{path:"/dashboard",resource:"dashboard"},{path:"/clients",resource:"clients"},{path:"/leads",resource:"leads"},{path:"/agenda",resource:"agenda"},{path:"/services",resource:"services"},{path:"/visits",resource:"visits"},{path:"/pets",resource:"pets"},{path:"/finances",resource:"financeiro"},{path:"/reports",resource:"relatorios"},{path:"/setup",resource:"setup"}].find(o=>r(o.resource));i?e(i.path,{replace:!0}):e("/my-profile",{replace:!0})},[t,r,n,e]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx(In,{}),s.jsx("p",{className:"mt-4 text-gray-600",children:"Carregando..."})]})})}function dle(){return s.jsx(p$,{basename:"/fefelina-admin",children:s.jsxs(C8,{children:[s.jsxs(Aj,{children:[s.jsx(yr,{path:"/login",element:s.jsx(E8,{})}),s.jsx(yr,{path:"/change-password",element:s.jsx(tle,{})}),s.jsx(yr,{path:"/*",element:s.jsx(_n,{children:s.jsx(cle,{children:s.jsxs(Aj,{children:[s.jsx(yr,{path:"/",element:s.jsx(ule,{})}),s.jsx(yr,{path:"/dashboard",element:s.jsx(_n,{resource:"dashboard",children:s.jsx(kre,{})})}),s.jsx(yr,{path:"/clients",element:s.jsx(_n,{resource:"clients",children:s.jsx(Pre,{})})}),s.jsx(yr,{path:"/clients/:id",element:s.jsx(_n,{resource:"clients",children:s.jsx(Lie,{})})}),s.jsx(yr,{path:"/pets",element:s.jsx(_n,{resource:"pets",children:s.jsx(Rie,{})})}),s.jsx(yr,{path:"/services",element:s.jsx(_n,{resource:"services",children:s.jsx(Bie,{})})}),s.jsx(yr,{path:"/visits",element:s.jsx(_n,{resource:"visits",children:s.jsx(Uie,{})})}),s.jsx(yr,{path:"/agenda",element:s.jsx(_n,{resource:"agenda",children:s.jsx(qie,{})})}),s.jsx(yr,{path:"/leads",element:s.jsx(_n,{resource:"leads",children:s.jsx(qoe,{})})}),s.jsx(yr,{path:"/finances",element:s.jsx(_n,{resource:"financeiro",children:s.jsx(Hoe,{})})}),s.jsx(yr,{path:"/reports",element:s.jsx(_n,{resource:"relatorios",children:s.jsx(Koe,{})})}),s.jsx(yr,{path:"/financial",element:s.jsx(_n,{resource:"financeiro",children:s.jsx(Yoe,{})})}),s.jsx(yr,{path:"/setup",element:s.jsx(_n,{resource:"setup",requireAdmin:!0,children:s.jsx(Zoe,{})})}),s.jsx(yr,{path:"/profile",element:s.jsx(ele,{})})]})})})})]}),s.jsx(lI,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#fff",color:"#374151",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)",border:"1px solid #e5e7eb",borderRadius:"12px",padding:"16px",fontSize:"14px",fontWeight:"500"},success:{style:{border:"1px solid #10b981",color:"#047857"},iconTheme:{primary:"#10b981",secondary:"#fff"}},error:{style:{border:"1px solid #ef4444",color:"#dc2626"},iconTheme:{primary:"#ef4444",secondary:"#fff"}}}})]})})}Ng.createRoot(document.getElementById("root")).render(s.jsx(we.StrictMode,{children:s.jsx(dle,{})}));
